<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>Vue3配套的Vuex4与VueRouter4</title>
      <link href="/Vue3%E9%85%8D%E5%A5%97%E7%9A%84Vuex%E4%B8%8EVueRouter/"/>
      <url>/Vue3%E9%85%8D%E5%A5%97%E7%9A%84Vuex%E4%B8%8EVueRouter/</url>
      
        <content type="html"><![CDATA[<p><code>Vuex</code>是一个专为<code>Vue.js</code>应用程序开发的状态管理模式 + 库。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。<code>VueRouter</code>是<code>Vue.js</code>的官方路由。它与<code>Vue.js</code>核心深度集成，让用<code>Vue.js</code>构建单页应用变得轻而易举。<br><a id="more"></a></p><h2 id="Vuex4-x"><a href="#Vuex4-x" class="headerlink" title="Vuex4.x"></a>Vuex4.x</h2><ul><li>安装 <code>npm install vuex@next -S或yarn add vuex@next -S</code></li><li><code>几乎所有的Vuex4 API都与Vuex3保持不变</code></li><li><code>使用createStore函数来创建store实例,使用Vue实例.use(store)安装</code></li><li><code>createLogger函数从核心模块vuex中导出</code></li><li><code>在setup中用useStore组合式函数来使用store实例</code></li><li><code>支持TypeScript</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  createStore, <span class="comment">// 创建Vuex实例的方法</span></span><br><span class="line">  createLogger <span class="comment">// vuex 日志插件</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"><span class="keyword">const</span> env = process.env.NODE_ENV</span><br><span class="line"><span class="keyword">const</span> store = createStore(&#123; <span class="comment">// 使用createStore创建store实例</span></span><br><span class="line">  state: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">10</span> &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    changeX (state, payload = <span class="number">1</span>) &#123;</span><br><span class="line">      state.x += +payload</span><br><span class="line">    &#125;,</span><br><span class="line">    changeY (state, payload = <span class="number">1</span>) &#123;</span><br><span class="line">      state.y += +payload</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    changeYAsync (&#123; commit &#125;, payload) &#123;</span><br><span class="line">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        commit(<span class="string">'changeY'</span>, payload)</span><br><span class="line">      &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: env === <span class="string">'production'</span> ? [] : [createLogger()]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store/index'</span></span><br><span class="line"><span class="keyword">const</span> app = createApp(App)</span><br><span class="line">app.use(store) <span class="comment">// 使用use安装store对象</span></span><br><span class="line">app.mount(<span class="string">'#app'</span>)</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- test.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>测试Vuex<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>x: &#123;&#123;x&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>y: &#123;&#123;y&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"setX(5)"</span>&gt;</span>改变X<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"setY(2)"</span>&gt;</span>改变Y<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; computed &#125; <span class="keyword">from</span> <span class="string">'vue'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; useStore &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">'test'</span>,</span></span><br><span class="line"><span class="undefined">  setup () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> store = useStore() <span class="comment">// 使用store</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> x = computed(<span class="function"><span class="params">()</span> =&gt;</span> store.state.x)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> y = computed(<span class="function"><span class="params">()</span> =&gt;</span> store.state.y)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> setX = <span class="function">(<span class="params">val</span>) =&gt;</span> &#123; <span class="comment">// 同步修改</span></span></span><br><span class="line"><span class="javascript">      store.commit(<span class="string">'changeX'</span>, val)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> setY = <span class="function">(<span class="params">val</span>) =&gt;</span> &#123; <span class="comment">// 异步修改</span></span></span><br><span class="line"><span class="javascript">      store.dispatch(<span class="string">'changeYAsync'</span>, val)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">      x, y, setX, setY</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="VueRouter4-x"><a href="#VueRouter4-x" class="headerlink" title="VueRouter4.x"></a>VueRouter4.x</h2><ul><li>安装 <code>npm install vue-router@4 -S</code></li><li><code>在VueRouter4的API与VueRouter3大部分的API都没有变化</code></li><li><code>使用createRouter函数来创建router实例,使用Vue实例.use(router)安装</code></li><li><p><code>mode配置被history取代</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"history"</span>: createWebHistory()  <span class="comment"># history模式</span></span><br><span class="line"><span class="string">"history"</span>: createWebHashHistory() <span class="comment"># hash模式</span></span><br><span class="line"><span class="string">"history"</span>: createMemoryHistory() <span class="comment">#</span></span><br></pre></td></tr></table></figure></li><li><p><code>使用&#39;/:pathMatch(.*)*&#39;代替了 * 路由</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// router/index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="keyword">import</span> Test <span class="keyword">from</span> <span class="string">'../pages/Test.vue'</span></span><br><span class="line"><span class="keyword">import</span> Vote <span class="keyword">from</span> <span class="string">'../pages/Vote.vue'</span></span><br><span class="line"><span class="keyword">const</span> router = createRouter(&#123; <span class="comment">// 使用createRouter创建路由对象</span></span><br><span class="line">  <span class="comment">// 指定路由使用模式 代替VueRouter3中的 mode</span></span><br><span class="line">  history: createWebHashHistory(), <span class="comment">// hash模式</span></span><br><span class="line">  routes: [ <span class="comment">// 路由规则 映射关系</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">'/'</span>, <span class="attr">component</span>: Vote &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">'/test'</span>, <span class="attr">component</span>: Test &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">'/:pathMatch(.*)*'</span>, <span class="attr">redirect</span>: <span class="string">'/'</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router/index'</span></span><br><span class="line"><span class="keyword">const</span> app = createApp(App)</span><br><span class="line">app.use(router) <span class="comment">// 安装路由对象</span></span><br><span class="line">app.mount(<span class="string">'#app'</span>)</span><br><span class="line"><span class="comment">// App.vue</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;router-view&gt;<span class="xml"><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="comment">// Test.vue</span></span><br><span class="line"><span class="keyword">import</span> &#123; useRoute, useRouter &#125; <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">'test'</span>,</span><br><span class="line">  setup () &#123;</span><br><span class="line">    <span class="keyword">const</span> route = useRoute()</span><br><span class="line">    <span class="keyword">const</span> router = useRouter()</span><br><span class="line">    <span class="built_in">console</span>.log(route) <span class="comment">// 当前路由实例</span></span><br><span class="line">    <span class="comment">// Proxy &#123;path: ComputedRefImpl, name: ComputedRefImpl, params: ComputedRefImpl, query: ComputedRefImpl, …&#125;</span></span><br><span class="line">    <span class="built_in">console</span>.log(router) <span class="comment">// 全局路由实例</span></span><br><span class="line">    <span class="comment">// &#123;currentRoute: RefImpl, push: ƒ, replace: ƒ, isReady: ƒ, getRoutes: ƒ, …&#125;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>文章推荐: <a href="https://blog.csdn.net/weixin_45747310/article/details/120025156" target="_blank" rel="noopener">Vue-Router必知必会–万字肝文</a></p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Vue3常用API学习</title>
      <link href="/vue3%E5%AD%A6%E4%B9%A0/"/>
      <url>/vue3%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p><code>vue3</code>使用<code>TypeScript</code>重写了代码,增加了<code>Composition API</code>基于函数的<code>API</code>,<code>Vue3</code>中使用<code>Proxy</code>重写了响应式原理.Vue3常用的API如:<code>ref、toRef、toRefs、reactive、setup、watchEffect</code>等，Vue3中某些API的变化如<code>watch、computed、v-model</code>等<br><a id="more"></a></p><h2 id="setup入口"><a href="#setup入口" class="headerlink" title="setup入口"></a>setup入口</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 父组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Vote</span> <span class="attr">title</span>=<span class="string">"Hello Vue3!"</span>&gt;</span><span class="tag">&lt;/<span class="name">Vote</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 子组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; num &#125;&#125;人<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">import &#123; ref &#125; from 'vue'</span></span><br><span class="line"><span class="undefined">export default &#123;</span></span><br><span class="line"><span class="undefined">  props: ['title'],</span></span><br><span class="line"><span class="undefined">  // vue3中以setup开始</span></span><br><span class="line"><span class="undefined">  //    + setup通过形参可以拿到props接收的值</span></span><br><span class="line"><span class="undefined">  //    + setup发生在初始化props和beforeCreate之间，没有this无法拿到vue实例</span></span><br><span class="line"><span class="undefined">  //    + 会将data/methods/computed/watch/filters等options API聚合在setup中</span></span><br><span class="line"><span class="undefined">  //    + setup只在第一次加载执行一次，重新渲染不会再执行它[销毁后再加载属于第一次]</span></span><br><span class="line"><span class="undefined">  //    + setup中return返回的内容可以直接在视图中渲染</span></span><br><span class="line"><span class="undefined">  setup (props) &#123;</span></span><br><span class="line"><span class="undefined">    console.log(props) // Proxy &#123;title: 'Hello Vue3!'&#125;</span></span><br><span class="line"><span class="undefined">    console.log(this) // undefined</span></span><br><span class="line"><span class="undefined">    return &#123; num: ref(10) &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 渲染后 &lt;h2&gt;Hello Vue3!&lt;/h2&gt;&lt;span&gt;10人&lt;/span&gt; --&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Vue3中的ref响应式API"><a href="#Vue3中的ref响应式API" class="headerlink" title="Vue3中的ref响应式API"></a>Vue3中的ref响应式API</h2><p><code>ref返回「RefTml」对象、在模板视图中自动渲染value值,在js中使用时需要使用value属性去获取和设置值、基于ES5「Object.defineProperty」的set/get实现数据劫持、通常只作用与单个基本类型值</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>支持人数：&#123;&#123; supNum &#125;&#125;人<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">import &#123; ref &#125; from 'vue'</span></span><br><span class="line"><span class="undefined">export default &#123;</span></span><br><span class="line"><span class="undefined">  // 基于 ref 响应式 API</span></span><br><span class="line"><span class="undefined">  //    + 返回 RefTml 对象</span></span><br><span class="line"><span class="undefined">  //    + 在模板视图中自动渲染value值， 在js中使用时 需要使用value属性去获取和设置值</span></span><br><span class="line"><span class="undefined">  //    + value属性是基于【Object.defineProperty】的set/get实现数据劫持</span></span><br><span class="line"><span class="undefined">  //    + 通常只作用与单个基本类型值</span></span><br><span class="line"><span class="undefined">  setup () &#123;</span></span><br><span class="line"><span class="undefined">    const supNum = ref(10) // 使用ref声明响应式单个数据</span></span><br><span class="line"><span class="undefined">    console.log(supNum) // RefImpl &#123;_shallow: false,...,value: 10&#125;</span></span><br><span class="line"><span class="undefined">    console.log(supNum.value) // 10</span></span><br><span class="line"><span class="undefined">    return &#123; supNum &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="Vue3中的reactive响应式API"><a href="#Vue3中的reactive响应式API" class="headerlink" title="Vue3中的reactive响应式API"></a>Vue3中的reactive响应式API</h2><p><code>reactive是基于ES6「Proxy」实现数据劫持、reactive返回「Proxy」对象、通常作用于对象</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">"vote-head"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; state.oppNum + state.supNum &#125;&#125;人<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span> <span class="attr">class</span>=<span class="string">"vote-main"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>支持人数：&#123;&#123; state.supNum &#125;&#125;人<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>反对人数：&#123;&#123; state.oppNum &#125;&#125;人<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>支持比率：&#123;&#123; ratio &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">'change("sup")'</span>&gt;</span>支持<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">'change("opp")'</span>&gt;</span>反对<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">import &#123; computed, reactive &#125; from 'vue'</span></span><br><span class="line"><span class="undefined">export default &#123;</span></span><br><span class="line"><span class="undefined">  setup () &#123;</span></span><br><span class="line"><span class="undefined">    const state = reactive(&#123; // 使用reactive声明响应式对象</span></span><br><span class="line"><span class="undefined">      supNum: 10,</span></span><br><span class="line"><span class="undefined">      oppNum: 5</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">    // 计算属性</span></span><br><span class="line"><span class="undefined">    const ratio = computed(() =&gt; &#123;</span></span><br><span class="line"><span class="undefined">      const total = state.supNum + state.oppNum</span></span><br><span class="line"><span class="undefined">      return total === 0 ? '--' : ((state.supNum / total) * 100).toFixed(2) + '%'</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">    console.log(state) // Proxy &#123;supNum: 10, oppNum: 5&#125;</span></span><br><span class="line"><span class="undefined">    // 普通方法</span></span><br><span class="line"><span class="undefined">    const change = (type) =&gt; &#123;</span></span><br><span class="line"><span class="undefined">      type === 'sup' ? state.supNum++ : state.oppNum++</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    return &#123;</span></span><br><span class="line"><span class="undefined">      state, ratio, change</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 模板中如果要省略 state.xxx 直接使像 ref 声明数据时 直接使用 xxx</span></span><br><span class="line"><span class="comment">需要使用 toRefs 将reactive声明对象的每一项都转换为单独的 RefImpl 对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">main</span> <span class="attr">class</span>=<span class="string">"vote-main"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>支持人数：&#123;&#123; supNum &#125;&#125;人<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>反对人数：&#123;&#123; oppNum &#125;&#125;人<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">import &#123; computed, reactive, toRefs, toRef &#125; from 'vue'</span></span><br><span class="line"><span class="undefined">export default &#123;</span></span><br><span class="line"><span class="undefined">  name: 'Vote',</span></span><br><span class="line"><span class="undefined">  props: ['title'],</span></span><br><span class="line"><span class="undefined">  setup () &#123;</span></span><br><span class="line"><span class="undefined">    const state = reactive(&#123; // 使用reactive声明响应式对象</span></span><br><span class="line"><span class="undefined">      supNum: 10,</span></span><br><span class="line"><span class="undefined">      oppNum: 5</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">    // toRefs() 转换多个 toRef() 转化单个</span></span><br><span class="line"><span class="undefined">    console.log(toRef(state.supNum)) // RefImpl &#123;_shallow: false,..., value: 10&#125;</span></span><br><span class="line"><span class="undefined">    console.log(toRefs(state)) // &#123;supNum: ObjectRefImpl, oppNum: ObjectRefImpl&#125;</span></span><br><span class="line"><span class="undefined">    return &#123;</span></span><br><span class="line"><span class="undefined">      ...toRefs(state)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="Vue3中的computed计算属性"><a href="#Vue3中的computed计算属性" class="headerlink" title="Vue3中的computed计算属性"></a>Vue3中的computed计算属性</h2><p><code>computed([getter函数])，返回ComputedRefImpl对象，获取的计算属性值是只读的，若修改会报警告：computed value is readonly</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>支持比率：&#123;&#123; ratio &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">'change("sup")'</span>&gt;</span>支持<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">'change("opp")'</span>&gt;</span>反对<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">import &#123; ref, computed &#125; from 'vue'</span></span><br><span class="line"><span class="undefined">export default &#123;</span></span><br><span class="line"><span class="undefined">  setup (props) &#123;</span></span><br><span class="line"><span class="undefined">    const supNum = ref(10)</span></span><br><span class="line"><span class="undefined">    const oppNum = ref(5)</span></span><br><span class="line"><span class="undefined">    // 计算属性</span></span><br><span class="line"><span class="undefined">    const ratio = computed(() =&gt; &#123;</span></span><br><span class="line"><span class="undefined">      const total = supNum.value + oppNum.value</span></span><br><span class="line"><span class="undefined">      return total === 0 ? '--' : ((supNum.value / total) * 100).toFixed(2) + '%'</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">    console.log(ratio) // ComputedRefImpl &#123;dep: undefined, _dirty: true, …&#125;</span></span><br><span class="line"><span class="undefined">    // ratio.value = '100%' // 无法修改 并警告 Write operation failed: computed value is readonly</span></span><br><span class="line"><span class="undefined">    // 普通方法</span></span><br><span class="line"><span class="undefined">    const change = (type) =&gt; &#123;</span></span><br><span class="line"><span class="undefined">      type === 'sup' ? supNum.value++ : oppNum.value++</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    return &#123;</span></span><br><span class="line"><span class="undefined">      ratio, change</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="Vue3中的-watch-监听器-和-watchEffect"><a href="#Vue3中的-watch-监听器-和-watchEffect" class="headerlink" title="Vue3中的 watch 监听器 和 watchEffect"></a>Vue3中的 watch 监听器 和 watchEffect</h2><ul><li><code>watch 监听器 默认第一次加载组件不执行 当监听的数据改变时会触发执行</code></li><li><code>watchEffect(callback) 第一次加载组件和函数中所依赖数据发生改变时都会触发callback</code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>支持人数：&#123;&#123; supNum &#125;&#125;人<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">'change("sup")'</span>&gt;</span>支持<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">import &#123; ref, reactive, toRefs, watch, watchEffect &#125; from 'vue'</span></span><br><span class="line"><span class="undefined">export default &#123;</span></span><br><span class="line"><span class="undefined">  props: ['title'],</span></span><br><span class="line"><span class="undefined">  setup () &#123;</span></span><br><span class="line"><span class="undefined">    const state = reactive(&#123; // 使用reactive声明响应式对象</span></span><br><span class="line"><span class="undefined">      supNum: 10</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">    const num = ref(0)</span></span><br><span class="line"><span class="undefined">    // 普通方法</span></span><br><span class="line"><span class="undefined">    const change = (type) =&gt; &#123;</span></span><br><span class="line"><span class="undefined">      type === 'sup' ? state.supNum++ : state.oppNum++</span></span><br><span class="line"><span class="undefined">      num.value++</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    // watchEffect(callback) 第一次加载组件和函数中所依赖数据发生改变时都会触发callback</span></span><br><span class="line"><span class="undefined">    watchEffect(() =&gt; &#123;</span></span><br><span class="line"><span class="undefined">      console.log('watchEffect: ', state.supNum)</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">    // 监听对象</span></span><br><span class="line"><span class="undefined">    watch(state, () =&gt; &#123;</span></span><br><span class="line"><span class="undefined">      console.log('watch: ')</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">    // 1. 监听reactive创建的单个值,第一个参数必须使用函数 watch(()=&gt;state.supNum,()=&gt;&#123;&#125;)</span></span><br><span class="line"><span class="undefined">    watch(</span></span><br><span class="line"><span class="undefined">      () =&gt; state.supNum,</span></span><br><span class="line"><span class="undefined">      (next, prev) =&gt; &#123; // next:新值  prev:旧值</span></span><br><span class="line"><span class="undefined">        console.log('watch: ', next, prev)</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    )</span></span><br><span class="line"><span class="undefined">    // 2. 监听 ref 创建的数据</span></span><br><span class="line"><span class="undefined">    watch(num, (next, prev) =&gt; &#123; // next:新值  prev:旧值</span></span><br><span class="line"><span class="undefined">      console.log('watch: ', next, prev)</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">    // watch 深度监听 或 第一次也执行 第三个参数:对象</span></span><br><span class="line"><span class="undefined">    watch(</span></span><br><span class="line"><span class="undefined">      num,</span></span><br><span class="line"><span class="undefined">      (next, prev) =&gt; &#123; // next:新值  prev:旧值</span></span><br><span class="line"><span class="undefined">        console.log('watch: ', next, prev)</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      &#123;</span></span><br><span class="line"><span class="undefined">        deep: true,</span></span><br><span class="line"><span class="undefined">        immediate: true</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    )</span></span><br><span class="line"><span class="undefined">    return &#123;</span></span><br><span class="line"><span class="undefined">      ...toRefs(state), change, num</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="vue3中的v-model用法更改-替换-v-bind-sync"><a href="#vue3中的v-model用法更改-替换-v-bind-sync" class="headerlink" title="vue3中的v-model用法更改 替换 v-bind.sync"></a>vue3中的v-model用法更改 替换 v-bind.sync</h2><p><code>&lt;Switch :value=&quot;bool&quot; @update:value=&quot;bool = $event&quot; /&gt;</code><br>简写为<br><code>&lt;Switch v-model:value=&quot;bool&quot; /&gt;</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">:class</span>=<span class="string">"&#123;'checked':value&#125;"</span> @<span class="attr">click</span>=<span class="string">"toggle"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"ts"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">export default &#123;</span></span><br><span class="line"><span class="undefined">  props: &#123;</span></span><br><span class="line"><span class="undefined">    value: Boolean</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  setup(props, context)&#123;</span></span><br><span class="line"><span class="undefined">    const toggle = () =&gt; &#123;</span></span><br><span class="line"><span class="undefined">      context.emit('update:value', !props.value)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    return &#123;toggle&#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br></pre></td></tr></table></figure></p><h2 id="Vue3属性绑定"><a href="#Vue3属性绑定" class="headerlink" title="Vue3属性绑定"></a>Vue3属性绑定</h2><ul><li>默认所有属性都绑定到根元素</li><li>使用inheritAttrs: false 可以取消默认绑定</li><li>使用 $attrs 或 context.attrs 获取所有属性</li><li><p>使用 v-bind=”$attrs” 批量绑定属性</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 父组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span> @<span class="attr">click</span>=<span class="string">"test"</span> @<span class="attr">focus</span>=<span class="string">"test"</span> @<span class="attr">mouseover</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 子组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:size</span>=<span class="string">"size"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-bind</span>=<span class="string">"rest"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"ts"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">export default &#123;</span></span><br><span class="line"><span class="undefined">  inheritAttrs: false,</span></span><br><span class="line"><span class="undefined">  setup(props, context)&#123;</span></span><br><span class="line"><span class="undefined">    const &#123;size, ...rest&#125; = context.attrs</span></span><br><span class="line"><span class="undefined">    return &#123;size, rest&#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>props和attrs区别</p></li></ul><ol><li>props要先声明才能取值, attrs不用先声明</li><li>props不包含事件, attrs包含</li><li>props 没有声明的属性 会在attrs里</li><li>props支持string以外的类型 attrs只有string类型</li></ol><h2 id="Vue3其他变更"><a href="#Vue3其他变更" class="headerlink" title="Vue3其他变更"></a>Vue3其他变更</h2><ul><li><code>v-if优先级高于v-for</code></li><li><code>.native事件修饰符废除</code></li></ul>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue3 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>初学vue3</title>
      <link href="/%E5%88%9D%E5%AD%A6vue3/"/>
      <url>/%E5%88%9D%E5%AD%A6vue3/</url>
      
        <content type="html"><![CDATA[<p><code>vue3</code>抛弃了<code>Flow</code>类型注释,使用<code>TypeScript</code>重写了代码,增加了<code>Composition API</code>基于函数的<code>API</code>,解决了<code>Vue2</code>中<code>Options API</code>不好拆分和重用的的问题.<code>Vue3</code>中使用<code>Proxy</code>重写了响应式原理，并且对编译器做了优化,重写了虚拟<code>DOM</code>,从而让渲染和<code>update</code>的性能都有了大幅度的提升.<code>Vue3</code>中移除了一些不常用的<code>API</code>,如<code>filter</code>.对<code>Tree-shaking</code>的支持更好,过滤掉未使用的模块使打包的体积更小.<br><a id="more"></a></p><h2 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h2><ul><li><a href="https://v3.cn.vuejs.org/" target="_blank" rel="noopener">Vue3.x文档地址</a></li><li><a href="https://v3.cn.vuejs.org/guide/migration/introduction.html" target="_blank" rel="noopener">Vue3.x更新内容</a></li><li><a href="https://v3.cn.vuejs.org/guide/migration/migration-build.html" target="_blank" rel="noopener">用于Vue2项目迁移Vue3的构建版本</a></li></ul><h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><ul><li>通过CDN <code>&lt;script src=&quot;https://unpkg.com/vue@next&quot;&gt;&lt;/script&gt;</code></li><li><p>通过<code>Vue-cli脚手架</code>创建项目 <code>注：需要将@vue/cli更新至4.5.0及以上 npm update -g @vue/cli</code><br><code>vue create &lt;project-name&gt;</code> 选择 vue3 的模板进行创建`</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1. vue create &lt;project-name&gt; 选择vue3的模板进行创建</span></span><br><span class="line"><span class="comment">2. cd &lt;project-name&gt;</span></span><br><span class="line"><span class="comment">3. npm run serve</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li><li><p>通过<code>vite脚手架</code>创建项目 <code>注：Vite需要Node.js版本&gt;=12.0.0</code><br><code>npm init vite-app &lt;project-name&gt; 或 yarn create vite-app &lt;project-name&gt;</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1. npm init vite-app &lt;project-name&gt; 或 yarn create vite-app &lt;project-name&gt;</span></span><br><span class="line"><span class="comment">2. cd helloVite</span></span><br><span class="line"><span class="comment">3. npm install</span></span><br><span class="line"><span class="comment">4. npm run dev</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="全局API-createApp"><a href="#全局API-createApp" class="headerlink" title="全局API-createApp"></a>全局API-createApp</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 入口文件 main.js</span></span><br><span class="line"><span class="comment">// vue3提供大量函数式API,推崇的是函数式编程</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">"vue"</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">"./App.vue"</span>;</span><br><span class="line"><span class="keyword">const</span> app = createApp(App); <span class="comment">// 使用createApp函数创建vue应用实例</span></span><br><span class="line">app.mount(<span class="string">"#app"</span>); <span class="comment">// 将组件App挂载到id为app的节点上</span></span><br></pre></td></tr></table></figure><h2 id="Vue3-主要更新"><a href="#Vue3-主要更新" class="headerlink" title="Vue3 主要更新"></a>Vue3 主要更新</h2><ol><li><code>Performance</code> 重写了虚拟 DOM 的实现(跳过静态节点,只处理动态节点),update 性能提供,SSR 速度提高</li><li><code>Tree shaking</code> 全局和内部 API 已经被重构为支持 tree-shake,可以将无用模块过滤,仅打包需要和用到的部分</li><li><code>Fragment</code> (空文档标签)不再限于模板中的单个根节点,Vue3 的 template 支持多个根标签,Vue2 只能由一个根标签</li><li><code>TypeScript</code> 更好的 TypeScript 支持</li><li><code>Custom Renderer API</code> 自定义渲染器 将某些部分以 canvas 画布形式展示出来而不是 Dom 方式</li><li><p><code>Composition API</code> 组合式 API</p><p><code>组合式API,替换原有的Options API,将逻辑相关的代码组织在一起,提高可读性和可维护性,更好的重用逻辑代码(避免mixins混入时命名冲突的问题),但是依然可以使用Options API</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Options API</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;&#125;,</span><br><span class="line">  cooputed () &#123;&#125;,</span><br><span class="line">  watch: &#123;&#125;,</span><br><span class="line">  filters: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Composition API 所有操作聚合在 setUp 中</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">"AsyncTest"</span>,</span><br><span class="line">  <span class="keyword">async</span> setup() &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; id, name &#125; = &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">'tew'</span>&#125;;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      id,</span><br><span class="line">      name,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p><code>Proxy</code> 数据劫持,Vue3 中的响应式原理是基于 ES6 的 Proxy 实现的</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Vue2是基于0bject.defineProperty实现数据劫持的(get/set)</span></span><br><span class="line"><span class="comment">  + 需要给对象中的每一个属性分别遍历做劫持「对于后期新增的属性是没有做劫持的,vue2中可以基于$set实现新增属性的劫持」</span></span><br><span class="line"><span class="comment">  + 对于数组中的每一项没有做劫持「vue2中重写了数组7个方法，后期通过这7个方法修改数组中的某一项，才会让视图重新渲染」</span></span><br><span class="line"><span class="comment">  + 默认劫持是"浅”的,vue2自动基于递归的方式实现了深度劫持</span></span><br><span class="line"><span class="comment">  + ES5的API，兼容IE9及以上</span></span><br><span class="line"><span class="comment">Vue3中的响应式数据，是基于ES6中的Proxy实现的</span></span><br><span class="line"><span class="comment">  + ES6的API，不兼容IE</span></span><br><span class="line"><span class="comment">  + Proxy除了提供get/set监听之外，还提供了其他大量的监听函数</span></span><br><span class="line"><span class="comment">  + Proxy无需自己依次遍历对象的每个属性，只需要代理整个对象，则所有属性都被劫持，新增属性也会被劫持</span></span><br><span class="line"><span class="comment">  + Proxy直接对数组每一项做代理操作数组的某一项都会触发试图更新，无需重写数组的方法</span></span><br><span class="line"><span class="comment">  + Proxy默认也是只对对象的第一层做代理，也需要递归遍历实现深层次代理</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// proxy 基本使用</span></span><br><span class="line"><span class="comment">// const data = &#123;</span></span><br><span class="line"><span class="comment">//     name: 'zhangsan',</span></span><br><span class="line"><span class="comment">//     age: 20,</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="keyword">const</span> data = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line"><span class="keyword">const</span> proxyData = <span class="keyword">new</span> <span class="built_in">Proxy</span>(data, &#123;</span><br><span class="line">  get(target, key) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Reflect</span>.get(target, key)</span><br><span class="line">  &#125;,</span><br><span class="line">  set(target, key, val) &#123;</span><br><span class="line">    <span class="comment">// 重复的数据，不处理</span></span><br><span class="line">    <span class="keyword">if</span> (val === target[key]) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="built_in">Reflect</span>.set(target, key, val)</span><br><span class="line">  &#125;,</span><br><span class="line">  deleteProperty(target, key) &#123;</span><br><span class="line">    <span class="built_in">Reflect</span>.deleteProperty(target, key)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p><code>Teleport</code> 传送门</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.html</span></span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=<span class="string">"#app"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &lt;div id=<span class="string">"#other"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ demo.vue</span></span><br><span class="line"><span class="regexp">/</span>*</span><br><span class="line">Teleport 把当前组件的部分内容抽离出来放到页面中 非#app的容器中 基于to指定放在那个容器下</span><br><span class="line">*<span class="regexp">/</span></span><br><span class="line"><span class="regexp">&lt;template&gt;</span></span><br><span class="line"><span class="regexp">  &lt;h2&gt;Hello Vue3!&lt;/</span>h2&gt;</span><br><span class="line">  &lt;Teleport to=<span class="string">"#other"</span>&gt;</span><br><span class="line">    &lt;span&gt;hello world!<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">  &lt;<span class="regexp">/Teleport&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line"><span class="comment">// 渲染结果</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&lt;body&gt;</span></span><br><span class="line"><span class="comment">  &lt;div id="app" data-v-app=""&gt;</span></span><br><span class="line"><span class="comment">    &lt;h2&gt;Hello Vue3!&lt;/h2&gt;</span></span><br><span class="line"><span class="comment">    &lt;!--teleport start--&gt;</span></span><br><span class="line"><span class="comment">    &lt;!--teleport end--&gt;</span></span><br><span class="line"><span class="comment">  &lt;/div&gt;</span></span><br><span class="line"><span class="comment">  &lt;div id="other"&gt;</span></span><br><span class="line"><span class="comment">    &lt;span&gt;hello world!&lt;/span&gt;</span></span><br><span class="line"><span class="comment">  &lt;/div&gt;</span></span><br><span class="line"><span class="comment">&lt;/body&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li><li><p><code>Suspense</code> 可在嵌套层级中等待嵌套的异步依赖项</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- AsyncTest.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  获取的用户信息是<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  用户编号: &#123;&#123; id &#125;&#125;<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  用户姓名: &#123;&#123; name &#125;&#125;<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> query = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        resolve(&#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">"tew"</span> &#125;);</span></span><br><span class="line"><span class="undefined">      &#125;, 2000);</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    name: <span class="string">"AsyncTest"</span>,</span></span><br><span class="line"><span class="javascript">    <span class="keyword">async</span> setup() &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> &#123; id, name &#125; = <span class="keyword">await</span> query();</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">        id,</span></span><br><span class="line"><span class="undefined">        name,</span></span><br><span class="line"><span class="undefined">      &#125;;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- App.vue --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">&lt;template&gt;</span></span><br><span class="line"><span class="comment">  &lt;h2&gt;Hello Vue3!&lt;/h2&gt;</span></span><br><span class="line"><span class="comment">  &lt;AsyncTest /&gt; 直接使用异步组件无法使用 需要使用 Suspense</span></span><br><span class="line"><span class="comment">&lt;/template&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Hello Vue3!<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Suspense</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 异步组件加载成功之后显示的内容 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">AsyncTest</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 异步组件加载成功之前显示的内容 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> #<span class="attr">fallback</span>&gt;</span>loading... <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> AsyncTest <span class="keyword">from</span> <span class="string">"./AsyncTest.vue"</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    name: <span class="string">"App"</span>,</span></span><br><span class="line"><span class="undefined">    components: &#123;</span></span><br><span class="line"><span class="undefined">      AsyncTest,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue3 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ECMAScript 7.0 +</title>
      <link href="/es7+/"/>
      <url>/es7+/</url>
      
        <content type="html"><![CDATA[<p><code>ES6</code>全称<code>ECMAScript 6.0</code>,部分浏览器不支持ES6，在应用程序的构建过程中需要使用<code>babel</code>将<code>ES6</code>转换为<code>ES5</code>. es6新特性：<code>默认参数</code>、<code>箭头函数</code>、<code>模块化</code>、<code>Proxy</code>、<code>Generator构造器函数</code>、<code>Promise</code>等<br><a id="more"></a></p><h2 id="async-await-异步编程终级解决方案"><a href="#async-await-异步编程终级解决方案" class="headerlink" title="async/await 异步编程终级解决方案"></a>async/await 异步编程终级解决方案</h2><ul><li><code>async</code>函数的会返回一个<code>promise</code>对象，并且把内部的值进行<code>promise</code>的封装.</li><li><code>async</code>函数就是将<code>Generator</code>函数的星号<code>（*）</code>替换成 <code>async</code>，将 <code>yield</code>替换成 <code>await</code>。</li><li>如果函数中return一个直接量,<code>async</code>会把这个直接量通过<code>Promise.resolve()</code>封装成<code>Promise</code>对象，在没有<code>await</code>的情况下执行<code>async</code>函数，它会立即执行， 返回一个<code>promise</code>对象， 不会阻塞后面的语句。async 函数就是 Generator 函数的语法糖。</li><li><code>await</code>关键字只能放到async 函数里面，不可以脱离async单独使用，等待后面的promise对象执行完毕，然后拿到promise resolve 的值并进行返回，返回值拿到之后，它继续向下执行</li><li><code>await</code>后面一定是Promise对象，如果不是会自动包装成Promise对象</li><li><code>await</code>如果它等到的不是一个<code>Promise</code>对象，那<code>await</code>表达式的运算结果就是它等到的东西。</li><li><p><code>await</code>如果它等到的是一个<code>Promise</code>对象，<code>await</code>会阻塞后面的代码，等着<code>Promise</code>对象<code>resolve</code>，然后得到<code>resolve</code>的值，作为<code>await</code>表达式的运算结果</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// async 返回 promise 对象</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">4</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(test()) <span class="comment">// Promise &#123;&lt;resolved&gt;: 4&#125;</span></span><br><span class="line">test().then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;<span class="built_in">console</span>.log(res)&#125;) <span class="comment">// 4</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span>&#123;</span><br><span class="line">    resolve(<span class="number">4</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(test1()) <span class="comment">// Promise &#123;&lt;pending&gt;&#125;</span></span><br><span class="line">test1().then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;<span class="built_in">console</span>.log(res)&#125;) <span class="comment">// 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// async 与 await 的使用</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getGoodsId</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> resolve(<span class="string">"商品id"</span>), <span class="number">1000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">await</span> getGoodsId())</span><br><span class="line">&#125;</span><br><span class="line">test() <span class="comment">// 商品id</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="comment">// Generator 函数</span></span><br><span class="line"><span class="comment">// 返回promise的对象</span></span><br><span class="line"><span class="keyword">var</span> readFile = <span class="function"><span class="keyword">function</span> (<span class="params">fileName</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">    fs.readFile(fileName, <span class="function"><span class="keyword">function</span>(<span class="params">error, data</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (error) reject(error)</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Generator * yield 解决异步</span></span><br><span class="line"><span class="keyword">var</span> gen = <span class="function"><span class="keyword">function</span>* (<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> f1 = <span class="keyword">yield</span> readFile(<span class="string">'/etc/fstab'</span>)</span><br><span class="line">  <span class="keyword">var</span> f2 = <span class="keyword">yield</span> readFile(<span class="string">'/etc/shells'</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(f1.toString())</span><br><span class="line">  <span class="built_in">console</span>.log(f2.toString())</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// async await 解决异步</span></span><br><span class="line"><span class="keyword">var</span> asyncReadFile = <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> f1 = <span class="keyword">await</span> readFile(<span class="string">'/etc/fstab'</span>)</span><br><span class="line">  <span class="keyword">var</span> f2 = <span class="keyword">await</span> readFile(<span class="string">'/etc/shells'</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(f1.toString())</span><br><span class="line">  <span class="built_in">console</span>.log(f2.toString())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>await 命令后面的 Promise 对象，运行结果可能是 rejected，所以最好把 await 命令放在 try…catch 代码块中。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> asyncFun()</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 另一种写法</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">await</span> asyncFun().catch(<span class="function"><span class="keyword">function</span> (<span class="params">err</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>async/await</code>遇上<code>map</code>的遍历操作时，当<code>async</code>函数被执行时，将立即返回<code>pending</code>状态的<code>Promise</code>，因此，在<code>map</code>循环时，不会等待 <code>await</code>操作完成，而是直接进入下一次循环。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> res = arr.map(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> value * <span class="number">2</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// [2, 4, 6]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> res1 = arr1.map(<span class="keyword">async</span> value =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> value * <span class="number">2</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(res1) <span class="comment">//  [Promise, Promise, Promise]</span></span><br><span class="line"><span class="comment">// 使用 Promise.all() 将async返回的promise对象数组依次执行</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> res1 = <span class="keyword">await</span> <span class="built_in">Promise</span>.all(arr1.map(<span class="keyword">async</span> value =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> value * <span class="number">2</span></span><br><span class="line">&#125;))</span><br><span class="line"><span class="built_in">console</span>.log(res1) <span class="comment">//  [2, 4, 6]</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="幂运算"><a href="#幂运算" class="headerlink" title="幂运算 **"></a>幂运算 <code>**</code></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// n**m 等同于 Math.pow(n, m)  n的m次方</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2</span>**<span class="number">5</span>) <span class="comment">// 32</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">5</span>)) <span class="comment">// 32</span></span><br><span class="line"><span class="comment">// **运算是右结合的 4**3**2 ===&gt; 4**(3**2) ===&gt; 4**9</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">4</span>**<span class="number">3</span>**<span class="number">2</span>) <span class="comment">// 262144 不是(4**3)**2 4096</span></span><br></pre></td></tr></table></figure><p>##</p><ul><li>先行断言 匹配到hello时 紧接着去匹配hello后面的字符</li></ul><h2 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h2><p><code>装饰器可以修饰类 类的属性 类的原型上的方法 修饰的时候就是把这个类的属性传递给修饰的函数</code></p>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> es6 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>一些面试题(3)</title>
      <link href="/%E4%B8%80%E4%BA%9B%E9%9D%A2%E8%AF%95%E9%A2%98(3)/"/>
      <url>/%E4%B8%80%E4%BA%9B%E9%9D%A2%E8%AF%95%E9%A2%98(3)/</url>
      
        <content type="html"><![CDATA[<h2 id="1-去掉数组中非数字字符，-并给每个数字-1"><a href="#1-去掉数组中非数字字符，-并给每个数字-1" class="headerlink" title="1. 去掉数组中非数字字符， 并给每个数字+1"></a>1. 去掉数组中非数字字符， 并给每个数字+1</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 删除数组从后往前删 避免数组塌陷</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">'a'</span>, <span class="number">4</span>, <span class="string">'b'</span>]</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = arr.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">typeof</span> arr[i])</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">typeof</span> arr[i] === <span class="string">'number'</span>)&#123;</span><br><span class="line">    arr[i]++</span><br><span class="line">  &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">    arr.splice(i, <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(arr)</span><br></pre></td></tr></table></figure><h2 id="2-再两个排好序的数组中，-高效率找出相同的元素放入新数组"><a href="#2-再两个排好序的数组中，-高效率找出相同的元素放入新数组" class="headerlink" title="2. 再两个排好序的数组中， 高效率找出相同的元素放入新数组"></a>2. 再两个排好序的数组中， 高效率找出相同的元素放入新数组</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 两个变量 谁小谁往后移动  未排序先用  arr.sort排序后再查找</span></span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">12</span>, <span class="number">37</span>, <span class="number">45</span>]</span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">13</span>, <span class="number">45</span>, <span class="number">88</span>, <span class="number">92</span>]</span><br><span class="line"><span class="keyword">var</span> result = []</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>, j = <span class="number">0</span>;i&lt;arr1.length &amp;&amp; j&lt;arr2.length;)&#123;</span><br><span class="line">  <span class="keyword">if</span>(arr1[i] === arr2[j])&#123;</span><br><span class="line">    result.push(arr1[[i]])</span><br><span class="line">    i++</span><br><span class="line">    j++</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span>(arr1[i]&lt;arr2[j])&#123;</span><br><span class="line">    i++</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    j++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(result) <span class="comment">// [2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure><h2 id="3-找出一个排好序的数组中，-两个元素相加和为19的元素组合"><a href="#3-找出一个排好序的数组中，-两个元素相加和为19的元素组合" class="headerlink" title="3. 找出一个排好序的数组中， 两个元素相加和为19的元素组合"></a>3. 找出一个排好序的数组中， 两个元素相加和为19的元素组合</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr4 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">15</span>, <span class="number">17</span>, <span class="number">20</span>]</span><br><span class="line"><span class="keyword">var</span> res = []</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, j = arr4.length - <span class="number">1</span>; i &lt; j;) &#123;</span><br><span class="line">  <span class="keyword">if</span> (arr4[i] + arr4[j] &gt; <span class="number">19</span>) &#123;</span><br><span class="line">    j-- <span class="comment">// 让大的往前移</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span>(arr4[i] + arr4[j] &lt; <span class="number">19</span>)&#123;</span><br><span class="line">    i++</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123; <span class="comment">// arr4[i]+arr4[j] === 19</span></span><br><span class="line">    res.push([arr4[i], arr4[j]])</span><br><span class="line">    i++</span><br><span class="line">    j--</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// [9, 45]</span></span><br></pre></td></tr></table></figure><h2 id="4-hash-数组去重-会改变数据类型"><a href="#4-hash-数组去重-会改变数据类型" class="headerlink" title="4. hash 数组去重 会改变数据类型"></a>4. hash 数组去重 会改变数据类型</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr5 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="string">'2'</span>, <span class="number">1</span>]</span><br><span class="line"><span class="keyword">var</span> hash = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;arr5.length;i++)&#123;</span><br><span class="line">  hash[arr5[i]] = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> res5 = []</span><br><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(res5[i++] <span class="keyword">in</span> hash)&#123;&#125; <span class="comment">// 利用对象遍历将key分别添加进数组res5中</span></span><br><span class="line"><span class="built_in">console</span>.log(res5) <span class="comment">// ["1", "2", "3", "4"]</span></span><br></pre></td></tr></table></figure><h2 id="5-x-in-window"><a href="#5-x-in-window" class="headerlink" title="5. x in window"></a>5. x in window</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// var y var x---&gt; window.x  window.y</span></span><br><span class="line"><span class="comment">// y = 10 -&gt; ++y</span></span><br><span class="line"><span class="comment">// if()&#123;&#125; 不是作用域 拦不住内部的var变量被声明提前</span></span><br><span class="line"><span class="keyword">var</span> y = <span class="number">10</span></span><br><span class="line"><span class="keyword">if</span>(!(x <span class="keyword">in</span> <span class="built_in">window</span>))&#123;</span><br><span class="line">  <span class="keyword">var</span> x = <span class="number">10</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  ++y</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(x) <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(y) <span class="comment">// 11</span></span><br></pre></td></tr></table></figure><h2 id="6-闭包-作用域链"><a href="#6-闭包-作用域链" class="headerlink" title="6. 闭包 作用域链"></a>6. 闭包 作用域链</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">n, o</span>)</span>&#123; <span class="comment">// fun 全局函数 随处可用</span></span><br><span class="line">  <span class="built_in">console</span>.log(o) <span class="comment">// 输出第二个参数</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    fun: <span class="function"><span class="keyword">function</span>(<span class="params">m</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> fun(m, n) <span class="comment">// 只把第一个参数给孩子</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = fun(<span class="number">0</span>) <span class="comment">// undefiend</span></span><br><span class="line">    a.fun(<span class="number">1</span>); <span class="comment">// 0</span></span><br><span class="line">    a.fun(<span class="number">2</span>); <span class="comment">// 0</span></span><br><span class="line">    a.fun(<span class="number">3</span>); <span class="comment">// 0</span></span><br><span class="line"><span class="keyword">var</span> b = fun(<span class="number">0</span>) <span class="comment">// undefiend</span></span><br><span class="line">        .fun(<span class="number">1</span>) <span class="comment">// 0</span></span><br><span class="line">        .fun(<span class="number">2</span>) <span class="comment">// 1</span></span><br><span class="line">        .fun(<span class="number">3</span>) <span class="comment">// 2</span></span><br><span class="line"><span class="keyword">var</span> c = fun(<span class="number">0</span>).fun(<span class="number">1</span>); <span class="comment">// undefiend 0</span></span><br><span class="line">    c.fun(<span class="number">2</span>); <span class="comment">// 1</span></span><br><span class="line">    c.fun(<span class="number">3</span>); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><h2 id="7-默认参数"><a href="#7-默认参数" class="headerlink" title="7. 默认参数"></a>7. 默认参数</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// es6 如果函数的形参定义默认值 则函数体会包裹在一个匿名函数自调中运行</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">function foo(x, y = function()&#123;x=2&#125;)&#123;</span></span><br><span class="line"><span class="comment">  if(y===undefined)&#123;</span></span><br><span class="line"><span class="comment">    y = function()&#123;x=2&#125;</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  (() =&gt; &#123;</span></span><br><span class="line"><span class="comment">    var x = 3</span></span><br><span class="line"><span class="comment">    y()</span></span><br><span class="line"><span class="comment">    console.log(x) // 3</span></span><br><span class="line"><span class="comment">  &#125;)()</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x, y = function(</span>)</span>&#123;x=<span class="number">2</span>&#125;)&#123;</span><br><span class="line">  <span class="keyword">var</span> x = <span class="number">3</span></span><br><span class="line">  y() <span class="comment">// 修改的是形参形成的临时作用域 将x=undefiend 修改为x=2</span></span><br><span class="line">  <span class="built_in">console</span>.log(x) <span class="comment">// 3 自己的作用域x依旧为3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// foo() 调用创建 临时函数作用域 x=undefiend y= function()&#123;x=2&#125;</span></span><br><span class="line">foo()</span><br><span class="line"><span class="built_in">console</span>.log(x) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><h2 id="8-FOO-a"><a href="#8-FOO-a" class="headerlink" title="8. FOO.a"></a>8. FOO.a</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>)</span>&#123; <span class="comment">// 第一步 创建地址Foo存储对象</span></span><br><span class="line">  Foo.a = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>.a = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">Foo.prototype.a = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">// 构造函数原型上定义a方法</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">&#125;</span><br><span class="line">Foo.a = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">// 构造函数静态方法</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">4</span>)</span><br><span class="line">&#125;</span><br><span class="line">Foo.a() <span class="comment">// 4  执行Foo的静态方法 Foo.a = function()&#123; console.log(4) &#125;</span></span><br><span class="line"><span class="keyword">let</span> obj = <span class="keyword">new</span> Foo() <span class="comment">// obj.__proto__ = Foo.prototype</span></span><br><span class="line"><span class="comment">// 执行Foo中的内容 Foo.a = function()&#123; console.log(1) &#125; 将构造函数静态方法a</span></span><br><span class="line"><span class="comment">// 修改为 Foo.a = function()&#123; console.log(1) &#125;</span></span><br><span class="line"><span class="comment">// this.a = obj.a = function ()&#123; console.log(2) &#125;</span></span><br><span class="line">obj.a() <span class="comment">// 2  obj.a = function ()&#123; console.log(2) &#125; 自身有a方法 否则会找 Foo.prototype.a</span></span><br><span class="line">Foo.a() <span class="comment">// 1  执行Foo的静态方法 Foo.a = function()&#123; console.log(1) &#125;</span></span><br></pre></td></tr></table></figure><h2 id="9-foo-x-闭包"><a href="#9-foo-x-闭包" class="headerlink" title="9. foo.x 闭包"></a>9. foo.x 闭包</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">  x: <span class="number">1</span>,</span><br><span class="line">  bar: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.x)</span><br><span class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.x)</span><br><span class="line">      <span class="built_in">console</span>.log(that.x)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">foo.bar() <span class="comment">// 1  this.x == foo.x</span></span><br><span class="line">foo.bar()() <span class="comment">// 1  0  1</span></span><br><span class="line"><span class="comment">//1. 先执行 foo.bar() 打印 1  that = this = foo</span></span><br><span class="line"><span class="comment">//2. 返回 function()&#123; console.log(this.x) console.log(that.x) &#125;</span></span><br><span class="line"><span class="comment">//3. 匿名函数自调 function()&#123; console.log(this.x) console.log(that.x) &#125;()</span></span><br><span class="line"><span class="comment">// this--&gt; window this.x = window.x  打印 0     that---&gt;foo  that.x==foo.x 打印 1</span></span><br></pre></td></tr></table></figure><h2 id="10-obj-fn1"><a href="#10-obj-fn1" class="headerlink" title="10. obj.fn1"></a>10. obj.fn1</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">2</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">4</span>,</span><br><span class="line">  fn1:(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.a *= <span class="number">2</span></span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">3</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.a *= <span class="number">2</span></span><br><span class="line">      a *= <span class="number">3</span></span><br><span class="line">      <span class="built_in">console</span>.log(a)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1. 匿名函数自调 this--&gt; window</span></span><br><span class="line"><span class="comment">/*fn1: (function()&#123;</span></span><br><span class="line"><span class="comment">    this.a *= 2 // window.a = a*2 = 4</span></span><br><span class="line"><span class="comment">    var a = 3</span></span><br><span class="line"><span class="comment">    return function()&#123; // a = 3 闭包中</span></span><br><span class="line"><span class="comment">      this.a *= 2</span></span><br><span class="line"><span class="comment">      a *= 3</span></span><br><span class="line"><span class="comment">      console.log(a)</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">  &#125;)()</span></span><br><span class="line"><span class="comment">  执行后</span></span><br><span class="line"><span class="comment">  a = 4</span></span><br><span class="line"><span class="comment">  var obj = &#123;</span></span><br><span class="line"><span class="comment">    a: 4,</span></span><br><span class="line"><span class="comment">    fn1: function()&#123; // a = 3</span></span><br><span class="line"><span class="comment">      this.a *= 2</span></span><br><span class="line"><span class="comment">      a *= 3</span></span><br><span class="line"><span class="comment">      console.log(a)</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> fn1 = obj.fn1 <span class="comment">// 9  fn1 = function()&#123; this.a *= 2; a *= 3; console.log(a) &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// 4 全局 window.a = 4</span></span><br><span class="line">fn1() <span class="comment">// 9</span></span><br><span class="line"><span class="comment">/*function()&#123; // a = 3 局部</span></span><br><span class="line"><span class="comment">  this.a *= 2 // window.a = a*2 = 8</span></span><br><span class="line"><span class="comment">  a *= 3 // a = a*3 = 9</span></span><br><span class="line"><span class="comment">  console.log(a) // 9</span></span><br><span class="line"><span class="comment">&#125;()*/</span></span><br><span class="line">obj.fn1() <span class="comment">// 27</span></span><br><span class="line"><span class="comment">/*function()&#123; // a = 9 局部</span></span><br><span class="line"><span class="comment">  this.a *= 2 // obj.a = 4*2 = 8</span></span><br><span class="line"><span class="comment">  a *= 3 // a = a*3 = 27</span></span><br><span class="line"><span class="comment">  console.log(a) // 27</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// 8 window.a</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.a) <span class="comment">// 8</span></span><br></pre></td></tr></table></figure><h2 id="11-引用类型"><a href="#11-引用类型" class="headerlink" title="11. 引用类型"></a>11. 引用类型</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setObj</span>(<span class="params">p</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// 形参函数局部作用域</span></span><br><span class="line">  <span class="comment">// 形参 var p 然后赋值 p为0x1234</span></span><br><span class="line">p.name=<span class="string">'小红'</span> <span class="comment">// 将地址0x1234 name 修改为 小红</span></span><br><span class="line">p = &#123;&#125; <span class="comment">// 局部变量 p 指向新地址 0x5555</span></span><br><span class="line">p.name=<span class="string">"西西"</span> <span class="comment">// 将地址0x5555 name 修改为 xixi</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p = &#123;<span class="attr">name</span>: <span class="string">'小明'</span>&#125; <span class="comment">// 地址为0x1234</span></span><br><span class="line">setObj(p)</span><br><span class="line"><span class="built_in">console</span>.log(p) <span class="comment">// &#123;name: "小红"&#125; 局部变量 p 0x5555被系统回收</span></span><br></pre></td></tr></table></figure><h2 id="12-判断一个属性是否在对象内"><a href="#12-判断一个属性是否在对象内" class="headerlink" title="12. 判断一个属性是否在对象内"></a>12. 判断一个属性是否在对象内</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 属性名 in obj ---&gt;是不仅判断一个属性是否在对象内部， 还判断是否在当前对象的原型链上</span></span><br><span class="line"><span class="comment">// obj.hasOwnProperty('属性名') ---&gt; 仅判断是否在对象内部， 不检查原型链上</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">People</span>(<span class="params">firstname</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.firstname = firstname</span><br><span class="line">&#125;</span><br><span class="line">People.prototype.lastname = <span class="string">'tew'</span></span><br><span class="line"><span class="keyword">var</span> bob = <span class="keyword">new</span> People(<span class="string">'tom'</span>)</span><br><span class="line">bob.hasOwnProperty(<span class="string">'firstname'</span>) <span class="comment">// true</span></span><br><span class="line">bob.hasOwnProperty(<span class="string">'lastname'</span>) <span class="comment">// false</span></span><br><span class="line"><span class="string">'firstname'</span> <span class="keyword">in</span> bob <span class="comment">// true</span></span><br><span class="line"><span class="string">'lastname'</span> <span class="keyword">in</span> bob <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// getElements vs querySelectorAll</span></span><br><span class="line"><span class="comment">// getElements 返回的是动态集合，不存储实际数据，每次访问集合，都重新扫描DOM树</span></span><br><span class="line"><span class="comment">// querySelectorAll 返回的是非动态集合 存储实际数据， 每次访问集合，</span></span><br><span class="line"><span class="comment">// 都不重新查找DOM树，即使DOM树发生变化也不重新查找</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*  定时器</span></span><br><span class="line"><span class="comment">*  周期性定时器setInterval， 不会自动停止， 只能通过外部的变量timer来控制停止： clearInterval(timer)</span></span><br><span class="line"><span class="comment">*  timer在clear之后，不会自动变为null，而是依然保存着已经关闭的定时器序号，需要手动设为null</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// let 和 setTimeout 一起使用时 块级作用域 相当于包裹了一个自执行函数 形成闭包</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">conolse.log(i)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0 1 2</span></span><br><span class="line"><span class="comment">/* 转换为es5之后</span></span><br><span class="line"><span class="comment">for (var i = 0; i &lt; 3; i++) &#123;</span></span><br><span class="line"><span class="comment">  (function(i) &#123;</span></span><br><span class="line"><span class="comment">    setTimeout(function () &#123;</span></span><br><span class="line"><span class="comment">      conolse.log(i);</span></span><br><span class="line"><span class="comment">    &#125;, 0);</span></span><br><span class="line"><span class="comment">  &#125;)(i);</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br></pre></td></tr></table></figure><h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个新的People类继承 Animal中所有的属性和方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line">Animal.prototype.intr = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`I'm <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>, I'm <span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1. 让 person可以调用 Animal 原型上的方法 intr, 需要让 People.prototype继承Animal.prototype</span></span><br><span class="line"><span class="comment">  Object.setPrototypeOf(People.prototype, Animal.prototype)</span></span><br><span class="line"><span class="comment">  或者</span></span><br><span class="line"><span class="comment">  People.prototype = new Animal()</span></span><br><span class="line"><span class="comment">  或者</span></span><br><span class="line"><span class="comment">  People.prototype = Animal.prototype</span></span><br><span class="line"><span class="comment">2. 使用 Animal.call(this, name, age) 方法继承父类的属性</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">People</span>(<span class="params">name, age, className</span>)</span>&#123;</span><br><span class="line">  Animal.call(<span class="keyword">this</span>, name, age)</span><br><span class="line">  <span class="keyword">this</span>.className = className</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// People.prototype = new Animal()</span></span><br><span class="line"><span class="comment">// People.prototype = Animal.prototype</span></span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(People.prototype, Animal.prototype)</span><br><span class="line">People.prototype.run = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`我是<span class="subst">$&#123;<span class="keyword">this</span>.className&#125;</span>的<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>, 我正在跑步`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> People(<span class="string">'Tom'</span>, <span class="number">20</span>, <span class="string">'高一(2)班'</span>)</span><br><span class="line">person.run()</span><br><span class="line">person.intr()</span><br></pre></td></tr></table></figure><h2 id="promise-多个resolve"><a href="#promise-多个resolve" class="headerlink" title="promise 多个resolve"></a>promise 多个resolve</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. first()-&gt; new Promise 立即执行 输出 3 再立即执行new promise 输出 7</span></span><br><span class="line"><span class="comment">// 2. 将setTimeout放在异步队列</span></span><br><span class="line"><span class="comment">// 3. resolve(1)--&gt; p.then(arg =&gt; &#123; console.log(arg)&#125;) 输出 1</span></span><br><span class="line"><span class="comment">// 4. resolve(2)--&gt; first().then(arg =&gt; &#123; console.log(arg) &#125;) 输出 2</span></span><br><span class="line"><span class="comment">// 5. 执行 setTimeout 函数体  输出5</span></span><br><span class="line"><span class="comment">// 6. Promise中，只要遇到resolve，就会将resolve状态凝固，后边再出现其他的resolve，不会覆盖之前的resolve。</span></span><br><span class="line"><span class="comment">//    所有 resolve(6) 不会覆盖之前的resolve 也不执行 resolve(6)</span></span><br><span class="line"><span class="keyword">const</span> first = <span class="function"><span class="params">()</span> =&gt;</span> (<span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">  <span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">7</span>)</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="number">5</span>)</span><br><span class="line">      resolve(<span class="number">6</span>)</span><br><span class="line">    &#125;, <span class="number">0</span>)</span><br><span class="line">    resolve(<span class="number">1</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  resolve(<span class="number">2</span>)</span><br><span class="line">  p.then(<span class="function"><span class="params">arg</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(arg)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;))</span><br><span class="line">first().then(<span class="function"><span class="params">arg</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arg)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">4</span>)</span><br><span class="line"><span class="comment">// 3 7 4 1 2 5</span></span><br></pre></td></tr></table></figure><h2 id="promise-多个then"><a href="#promise-多个then" class="headerlink" title="promise 多个then"></a>promise 多个then</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 将 setTimeout 放入宏任务队列</span></span><br><span class="line"><span class="comment">// 2. 立即执行 p1 = new Promise 输出 2 将p1.then(第一个then) 放入微任务队列</span></span><br><span class="line"><span class="comment">// 3. 立即执行 p2 = new Promise 输出 8 将p2.then(第一个then) 放入微任务队列</span></span><br><span class="line"><span class="comment">// 4. 执行 p1.then(第一个then) 输出 3 立即执行 p3 = new Promise 输出 4 将p3.then(第一个then) 放入微任务队列</span></span><br><span class="line"><span class="comment">// 5. 执行 p2.then(第一个then) 输出 9</span></span><br><span class="line"><span class="comment">// 6. 执行 p3.then(第一个then) 输出 5 返回一个promise 并将p3 的第二个then 放入微任务队列</span></span><br><span class="line"><span class="comment">// 7. 执行 p3.then(第二个then) 输出 6 此时 p1的第一个then执行完毕 返回一个promise 并将p1 的第二个then 放入微任务队列</span></span><br><span class="line"><span class="comment">// 8. 并将p1.then(第二个then)  输出 7 此时 微任务队列执行完毕</span></span><br><span class="line"><span class="comment">// 9. 执行宏任务 setTimeout  输出 1</span></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">  resolve()</span><br><span class="line">&#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">  <span class="keyword">let</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">4</span>)</span><br><span class="line">    resolve()</span><br><span class="line">  &#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">5</span>)</span><br><span class="line">  &#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">6</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">7</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">8</span>)</span><br><span class="line">  resolve()</span><br><span class="line">&#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">9</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 2 8 3 4 9 5 7 6 1</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 面试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 面试 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>vue高级特性及部分原理</title>
      <link href="/vue%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7%E5%8F%8A%E9%83%A8%E5%88%86%E5%8E%9F%E7%90%86/"/>
      <url>/vue%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7%E5%8F%8A%E9%83%A8%E5%88%86%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p><code>vue</code>常用高级特性、自定义v-model、slot插槽、mixin抽离公共代码、keep-alive缓存组件、$nextTick、动态组件、异步组件、vuex、vue-router等。vue中的响应式原理、组件渲染过程、模板渲染、虚拟DOMvdom、diff算法等。<br><a id="more"></a></p><h2 id="Vue-高级特性"><a href="#Vue-高级特性" class="headerlink" title="Vue 高级特性"></a>Vue 高级特性</h2><ol><li><p>自定义v-model  <code>:value与@input 结合实现</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- input-price --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">:value</span>=<span class="string">"price"</span></span></span><br><span class="line"><span class="tag">　　@<span class="attr">input</span>=<span class="string">"price=$event.target.value"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- app.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input-price</span> <span class="attr">v-model</span>=<span class="string">"price"</span>&gt;</span><span class="tag">&lt;/<span class="name">input-price</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>slot <code>插槽 作用域插槽 具名插槽</code></p></li><li><p>mixin <code>抽离多个组件中相同的逻辑</code><br><code>mixin存在问题:1. 变量来源不明确，不利于阅读多  2. mixin可能造成命名冲突  3. mixin组件可能出现多对多关系，复杂度较高.  vue3 composition API 解决这些问题</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- mixin.js --&gt;</span></span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123; city: '北京' &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    showName() &#123; console.log(this.name) &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    console.log('mixin mounted', this.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">&lt;!-- mixin demo --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;name&#125;&#125; &#123;&#123;major&#125;&#125; &#123;&#123;city&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"showName"</span>&gt;</span>显示姓名<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> myMixin <span class="keyword">from</span> <span class="string">'./mixin'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  mixins: [myMixin], <span class="comment">// 可以添加多个，会自动合并起来</span></span></span><br><span class="line"><span class="undefined">  data() &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">      name: <span class="string">'tew'</span>,</span></span><br><span class="line"><span class="actionscript">      major: <span class="string">'web 前端'</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;&#125;,</span></span><br><span class="line"><span class="undefined">  mounted() &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">'component mounted'</span>, <span class="keyword">this</span>.name)</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>keep-alive <code>缓存 频繁切换不需要重复渲染组件</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive&gt; <span class="xml"><span class="comment">&lt;!-- tab 切换 --&gt;</span></span></span><br><span class="line">  &lt;KeepAliveStageA v-if="state === 'A'"/&gt; &lt;!-- v-show --&gt;</span><br><span class="line">  &lt;KeepAliveStageB v-if="state === 'B'"/&gt;</span><br><span class="line">  &lt;KeepAliveStageC v-if="state === 'C'"/&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure></li><li><p>$nextTick  <code>由于异步渲染 会在DOM渲染完之后被触发，以获取最新DOM节点</code></p></li><li><p>refs <code>元素设置 ref=&quot;ul&quot; 属性 获取DOM元素 this.$refs.ul</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* &lt;ul ref="ul"&gt;</span></span><br><span class="line"><span class="comment">  &lt;li v-for="(item, index) in list" :key="index"&gt;</span></span><br><span class="line"><span class="comment">      &#123;&#123;item&#125;&#125;</span></span><br><span class="line"><span class="comment">  &lt;/li&gt;</span></span><br><span class="line"><span class="comment">&lt;/ul&gt;</span></span><br><span class="line"><span class="comment">&lt;button @click="addItem"&gt;添加一项&lt;/button&gt; */</span></span><br><span class="line">addItem() &#123;</span><br><span class="line">  <span class="keyword">this</span>.list.push(<span class="string">`<span class="subst">$&#123;<span class="built_in">Date</span>.now()&#125;</span>`</span>)</span><br><span class="line">  <span class="keyword">this</span>.list.push(<span class="string">`<span class="subst">$&#123;<span class="built_in">Date</span>.now()&#125;</span>`</span>)</span><br><span class="line">  <span class="comment">// 1. 异步渲染，$nextTick 待 DOM 渲染完再回调</span></span><br><span class="line">  <span class="comment">// 2. 页面渲染时会将 data 的修改做整合，多次 data 修改只会渲染一次</span></span><br><span class="line">  <span class="keyword">this</span>.$nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 获取 DOM 元素</span></span><br><span class="line">    <span class="keyword">const</span> ulElem = <span class="keyword">this</span>.$refs.ul</span><br><span class="line">    <span class="built_in">console</span>.log( ulElem.childNodes.length )</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>动态组件 <code>&lt;component :is=&quot;componentname&quot; /&gt;</code></p></li><li>异步组件 按需加载 <code>components: { DescPopup: () =&gt; import(&#39;../components/descPopup&#39;)}</code></li><li>vue 生命周期</li><li>vuex<br><code>state mutation getters action</code><br><code>dispatch commit mapState mapMutations mapGetters mapActions</code></li><li>vue-router<ul><li>路由模式（hash（默认） H5 history(需要server端支持)）</li><li>路由配置（动态路由(动态参数) 懒加载）</li><li>路由守卫</li></ul></li><li>event事件是 原生的event事件 事件被挂载到当前元素</li></ol><h2 id="Vue原理"><a href="#Vue原理" class="headerlink" title="Vue原理"></a>Vue原理</h2><p><code>Vue原理主要三部分: 组件化、响应式、vdom和diff</code></p><ol><li>组件化和MVVM  <code>数据驱动视图 M model V view VM 模型(指令 事件等将view和model链接起来)</code></li><li><p>响应式原理 核心API <code>Object.defineProperty</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Object.defineProperty的缺点</span></span><br><span class="line"><span class="comment">// 1. 复杂对象需要深度监听 需要递归调用， 一次性计算量大</span></span><br><span class="line"><span class="comment">// 2. 无法监听新增属性/删除属性(Vue.set/Vue.delete)</span></span><br><span class="line"><span class="comment">// 3. 无法监听原生数组 需要特殊处理 重写了数组的7个方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 重新定义数组原型</span></span><br><span class="line"><span class="keyword">const</span> oldArrayProperty = <span class="built_in">Array</span>.prototype</span><br><span class="line"><span class="comment">// 创建新对象，原型指向 oldArrayProperty ，再扩展新的方法不会影响原型</span></span><br><span class="line"><span class="keyword">const</span> arrProto = <span class="built_in">Object</span>.create(oldArrayProperty);</span><br><span class="line">[<span class="string">'push'</span>, <span class="string">'pop'</span>, <span class="string">'shift'</span>, <span class="string">'unshift'</span>, <span class="string">'splice'</span>].forEach(<span class="function"><span class="params">methodName</span> =&gt;</span> &#123;</span><br><span class="line">  arrProto[methodName] = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    updateView() <span class="comment">// 触发视图更新</span></span><br><span class="line">    oldArrayProperty[methodName].call(<span class="keyword">this</span>, ...arguments)</span><br><span class="line">    <span class="comment">// Array.prototype.push.call(this, ...arguments)</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重新定义属性，监听起来</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">defineReactive</span>(<span class="params">target, key, value</span>) </span>&#123;</span><br><span class="line">  observer(value) <span class="comment">// 深度监听</span></span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(target, key, &#123; <span class="comment">// 核心 API</span></span><br><span class="line">    get() &#123; <span class="keyword">return</span> value &#125;,</span><br><span class="line">    set(newValue) &#123;</span><br><span class="line">      <span class="keyword">if</span> (newValue !== value) &#123;</span><br><span class="line">        observer(newValue) <span class="comment">// 深度监听</span></span><br><span class="line">        <span class="comment">// 设置新值</span></span><br><span class="line">        <span class="comment">// 注意，value 一直在闭包中，此处设置完之后，再 get 时也是会获取最新的值</span></span><br><span class="line">        value = newValue</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听对象属性</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">observer</span>(<span class="params">target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> target !== <span class="string">'object'</span> || target === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> target  <span class="comment">// 不是对象或数组</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 污染全局的 Array 原型</span></span><br><span class="line">  <span class="comment">// Array.prototype.push = function () &#123;</span></span><br><span class="line">  <span class="comment">//     updateView()</span></span><br><span class="line">  <span class="comment">//     ...</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(target)) &#123;</span><br><span class="line">    target.__proto__ = arrProto</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 重新定义各个属性（for in 也可以遍历数组）</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> target) &#123;</span><br><span class="line">    defineReactive(target, key, target[key])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>vdom(Virtual DOM)</code>是实现<code>vue</code>和<code>react</code>的重要基石 <code>snabbdom vdom库</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vdom 数据驱动视图 控制DOM操作</span></span><br><span class="line"><span class="comment">// vdom 用JS模拟DOM结构 计算出最小变更， 操作DOM</span></span><br><span class="line"><span class="comment">/* 真实DOM</span></span><br><span class="line"><span class="comment">&lt;div id="div1" class="wrap"&gt;</span></span><br><span class="line"><span class="comment">  &lt;p&gt;vdom&lt;/p&gt;</span></span><br><span class="line"><span class="comment">  &lt;ul style="font-size: 20px"&gt;</span></span><br><span class="line"><span class="comment">    &lt;li&gt;a&lt;/li&gt;</span></span><br><span class="line"><span class="comment">  &lt;/ul&gt;</span></span><br><span class="line"><span class="comment">&lt;/div&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/* JS 模拟DOM</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">  tag: 'div',</span></span><br><span class="line"><span class="comment">  props:&#123; className: 'wrap', id: 'div1' &#125;,</span></span><br><span class="line"><span class="comment">  children: [</span></span><br><span class="line"><span class="comment">    &#123; tag: 'p', children: 'vdom' &#125;,</span></span><br><span class="line"><span class="comment">    &#123;</span></span><br><span class="line"><span class="comment">      tag: 'ul',</span></span><br><span class="line"><span class="comment">      props: &#123; style:'font-size: 20px'&#125;,</span></span><br><span class="line"><span class="comment">      children: [</span></span><br><span class="line"><span class="comment">        &#123; tag: 'li', children: 'a' &#125;</span></span><br><span class="line"><span class="comment">      ]</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">  ]</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li><li><p>diff算法是vdom中最核心、最关键的部分  vdom树的diff对比</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 只比较同一层级 不跨级比较</span></span><br><span class="line"><span class="comment">// tag不相同 则直接删除重建，不再深度比较</span></span><br><span class="line"><span class="comment">// tag和key 两者都相同 则认为是相同节点，不再深度比较</span></span><br><span class="line"><span class="comment">// vdom核心概念: h, vnode, ptach, diff, key等</span></span><br></pre></td></tr></table></figure></li><li><p>模板编译</p><ul><li><p>with语法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">100</span>, <span class="attr">b</span>: <span class="number">200</span> &#125;</span><br><span class="line"><span class="comment">// with 能改变 &#123;&#125; 内自由变量的查找方式 将 &#123;&#125; 内自由变量当做 obj 的属性来查找</span></span><br><span class="line"><span class="keyword">with</span>(obj)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a) <span class="comment">// 100</span></span><br><span class="line">  <span class="built_in">console</span>.log(b) <span class="comment">// 200</span></span><br><span class="line">  <span class="built_in">console</span>.log(c) <span class="comment">// 报错</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// with 慎用 他打破了作用域规则 易读性变差</span></span><br></pre></td></tr></table></figure></li><li><p><code>vue-template-complier</code>将模板编译为render函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模板编译是将模板转化为某种JS代码</span></span><br><span class="line"><span class="comment">// 模板编译为render函数 执行render函数返回vnode</span></span><br><span class="line"><span class="comment">// 基于vnode在执行patch和diff</span></span><br><span class="line"><span class="comment">// webpack vue-loader 会在开发环境编译模板</span></span><br></pre></td></tr></table></figure></li><li><p>执行render函数生成vnode render函数代替template</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'title'</span>, &#123;</span><br><span class="line">  <span class="comment">// template: '&lt;div class="test"&gt;&lt;a href="xxx"&gt;this is a tag&lt;/a&gt;&lt;/div&gt;'</span></span><br><span class="line">  render: <span class="function"><span class="keyword">function</span>(<span class="params">createElement</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> createElement(<span class="string">'div'</span>,&#123; <span class="attr">className</span>: <span class="string">'test'</span>&#125; , [</span><br><span class="line">      createElement(a, &#123; <span class="attr">attrs</span>: &#123; <span class="attr">href</span>: <span class="string">'xxx'</span> &#125;&#125;, <span class="string">'this is a atg'</span>)</span><br><span class="line">    ])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>组件渲染/更新过程<br><code>初次渲染</code></p></li></ol><ul><li>解析模板为render函数</li><li>触发响应式, 监听data属性getter setter</li><li>执行render函数(会触发getter), 生成vnode, patch(elem, vnode)<br><code>更新过程</code></li><li>修改data, 触发setter</li><li>重新执行render函数, 生成newVnode</li><li>patch(vnode, newVnode)</li></ul><ol start="7"><li>前段路由</li></ol><ul><li><p>hash<br><code>hash变化不会刷新页面, 会触发网页跳转,即浏览器的前进、后退</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>hash test<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn1"</span>&gt;</span>修改 hash<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// hash 变化，包括：</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// a. JS 修改 url</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// b. 手动修改 url 的 hash</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// c. 浏览器前进、后退</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.onhashchange = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'old url'</span>, event.oldURL)</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'new url'</span>, event.newURL)</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'hash:'</span>, location.hash)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 页面初次加载，获取 hash</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.addEventListener(<span class="string">'DOMContentLoaded'</span>, () =&gt; &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'hash:'</span>, location.hash)</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// JS 修改 url</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">'btn1'</span>).addEventListener(<span class="string">'click'</span>, () =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">      location.href = <span class="string">'#/user'</span></span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>H5 history<br><code>主要使用 history.pushState和window.onpopstate 实现</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>history API test<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn1"</span>&gt;</span>修改 url<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 页面初次加载，获取 path</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.addEventListener(<span class="string">'DOMContentLoaded'</span>, () =&gt; &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'load'</span>, location.pathname)</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 打开一个新的路由  用 pushState 方式，浏览器不会刷新页面</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">'btn1'</span>).addEventListener(<span class="string">'click'</span>, () =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> state = &#123; name: <span class="string">'page1'</span> &#125;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'切换路由到'</span>, <span class="string">'page1'</span>)</span></span><br><span class="line"><span class="actionscript">      history.pushState(state, <span class="string">''</span>, <span class="string">'page1'</span>)</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 监听浏览器前进、后退</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.onpopstate = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'onpopstate'</span>, event.state, location.pathname)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 需要 server 端配合，可参考</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// https://router.vuejs.org/zh/guide/essentials/history-mode.html</span></span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="Vue面试题"><a href="#Vue面试题" class="headerlink" title="Vue面试题"></a>Vue面试题</h2><ol><li><p>v-show和v-if的区别</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// v-show 通过css display 控制显示和隐藏</span></span><br><span class="line"><span class="comment">// v-if 组件真正的渲染和销毁, 而不是显示和隐藏</span></span><br><span class="line"><span class="comment">// 频繁切换显示状态用 v-show, 否则用 v-if</span></span><br></pre></td></tr></table></figure></li><li><p>为何v-for中要用key<br><code>key可以提升vue的编译效率 提高复用</code><br><code>key不能是index和random, 因为diff算法中通过tag和key来判断, 是否是相同节点sameNode</code><br><code>当使用index索引做key时, 删除列表元素会有bug(bug产生原因就是vue就地复用策略导致的)</code></p></li><li>生命周期(父子组件生命周期)<br>加载渲染过程 <code>父beforeCreate-&gt;父created-&gt;父beforeMounted-&gt;子beforeCreate-&gt;子created-&gt;子beforeMount-&gt;子mounted-&gt;父mounted</code><br>子组件更新过程 <code>父beforeUpdate-&gt;子beforeUpdate-&gt;子updated-&gt;父updated</code><br>父组件更新过程 <code>父beforeUpdate-&gt;父updated</code><br>销毁过程 <code>父beforeDestroy-&gt;子beforeDestroy-&gt;子destroyed-&gt;父destroyed</code></li><li>Vue组件如何通讯</li></ol><ul><li>父子组件 <code>props和$emit</code></li><li>自定义事件 <code>event.$on event.$emit event.$off</code></li><li>vuex</li><li>provide和inject</li><li>$parent和$children/$refs</li><li>eventbus</li><li>$attrs/$listeners</li><li>dispatch/boardcast</li></ul><ol start="5"><li>描述组件渲染和和更新的过程<br><code>初次渲染</code></li></ol><ul><li>解析模板为render函数</li><li>触发响应式, 监听data属性getter setter</li><li>执行render函数(会触发getter), 生成vnode, patch(elem, vnode)<br><code>更新过程</code></li><li>修改data, 触发setter</li><li>重新执行render函数, 生成newVnode</li><li>patch(vnode, newVnode)</li></ul><ol start="6"><li><p>双向数据绑定v-model的实现原理 <code>:value与@input 结合实现</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- input-price --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">:value</span>=<span class="string">"price"</span></span></span><br><span class="line"><span class="tag">　　@<span class="attr">input</span>=<span class="string">"price=$event.target.value"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- app.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input-price</span> <span class="attr">v-model</span>=<span class="string">"price"</span>&gt;</span><span class="tag">&lt;/<span class="name">input-price</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>computed有何特点<br><code>computed 会缓存, data不变不会重新计算 提高性能</code></p></li><li><p>如何将组件所有props传递给子组件<br><code>&lt;com v-bind=&quot;$props&quot;&gt;</code></p></li><li><p>何时使用异步组件<br><code>加载大组件  路由异步加载</code></p></li><li><p>何时需要使用<code>beforeDestroy</code></p></li></ol><ul><li>解绑自定义事件 event.$off</li><li>清楚定时器</li><li>解除自定义的DOM事件, 如scroll等</li></ul><ol start="11"><li>vuex中action和mutation有何区别</li></ol><ul><li>action中处理异步, mutation不可以处理异步只处理同步</li><li>action可以整合多个mutation</li></ul><ol start="12"><li>Vue常见性能优化方式</li></ol><ul><li>自定义事件 dom事件及时销毁</li><li>合理使用异步组件</li><li>合理使用keep-alive</li><li>data层级不要太深</li></ul>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>一些面试题(2)</title>
      <link href="/%E4%B8%80%E4%BA%9B%E9%9D%A2%E8%AF%95%E9%A2%98(2)/"/>
      <url>/%E4%B8%80%E4%BA%9B%E9%9D%A2%E8%AF%95%E9%A2%98(2)/</url>
      
        <content type="html"><![CDATA[<h2 id="第1题-作用域"><a href="#第1题-作用域" class="headerlink" title="第1题 作用域"></a>第1题 作用域</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// (1) 变量提升 var num1， num2， function f1()&#123;&#125;</span></span><br><span class="line"><span class="keyword">var</span> num1 = <span class="number">55</span></span><br><span class="line"><span class="keyword">var</span> num2 = <span class="number">66</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params">num, num1</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// 有参数先声明形参的临时作用域 var num， num1 形参赋值 num=55， num1=66</span></span><br><span class="line">  num = <span class="number">100</span> <span class="comment">// 修改num</span></span><br><span class="line">  num1 = <span class="number">100</span> <span class="comment">// 修改num1</span></span><br><span class="line">  num2 = <span class="number">100</span> <span class="comment">// 查找当前作用域 没有上一层作用域查找 找到全局 num2并修改为100</span></span><br><span class="line">  <span class="built_in">console</span>.log(num) <span class="comment">// 100</span></span><br><span class="line">  <span class="built_in">console</span>.log(num1) <span class="comment">// 100</span></span><br><span class="line">  <span class="built_in">console</span>.log(num2) <span class="comment">// 100</span></span><br><span class="line">&#125;</span><br><span class="line">f1(num1, num2)</span><br><span class="line"><span class="built_in">console</span>.log(num2) <span class="comment">// 100 全局num2在函数内部被修改为100</span></span><br><span class="line"><span class="built_in">console</span>.log(num1) <span class="comment">// 55 全局num1</span></span><br><span class="line"><span class="built_in">console</span>.log(num) <span class="comment">// 全局未找到num声明则报错 num is not defiend</span></span><br></pre></td></tr></table></figure><h2 id="第2题-值类型和引用类型的传递"><a href="#第2题-值类型和引用类型的传递" class="headerlink" title="第2题 值类型和引用类型的传递"></a>第2题 值类型和引用类型的传递</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name =  name</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params">person</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// 形参临时作用域  var person 形参声明 person = p (0x111) 赋值</span></span><br><span class="line">  person.name = <span class="string">'ls'</span> <span class="comment">// 将 0x1111 地址中的name修改为 &#123; name: 'ls', age: 16 &#125;</span></span><br><span class="line">  person = <span class="keyword">new</span> Person(<span class="string">'ww'</span>, <span class="number">18</span>) <span class="comment">// 重新开辟空间 Ox2222 &#123;name: 'ww', age: 18&#125; 局部变量person指向新地址Ox2222</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person(<span class="string">'zs'</span>, <span class="number">16</span>) <span class="comment">// 创建对象地址 Ox1111</span></span><br><span class="line"><span class="built_in">console</span>.log(p.name) <span class="comment">// zs</span></span><br><span class="line">f1(p)</span><br><span class="line"><span class="built_in">console</span>.log(p.name) <span class="comment">// ls 输出 Ox1111 地址中的 name: ls</span></span><br></pre></td></tr></table></figure><h2 id="第3题-字符串转驼峰命名"><a href="#第3题-字符串转驼峰命名" class="headerlink" title="第3题 字符串转驼峰命名"></a>第3题 字符串转驼峰命名</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将 'get-element-by-id' 转化为 'getElementById'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toHump</span>(<span class="params">str</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> arr = str.split(<span class="string">'-'</span>)</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">1</span>;i&lt;arr.length;i++)&#123;</span><br><span class="line">    arr[i] = arr[i].charAt(<span class="number">0</span>).toUpperCase() + arr[i].substring(<span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr.join(<span class="string">''</span>)</span><br><span class="line">&#125;</span><br><span class="line">toHump(<span class="string">'get-element-by-id'</span>) <span class="comment">// getElementById</span></span><br></pre></td></tr></table></figure><h2 id="第4题-冒泡排序"><a href="#第4题-冒泡排序" class="headerlink" title="第4题 冒泡排序"></a>第4题 冒泡排序</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">2</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="keyword">var</span> len = arr.length<span class="number">-1</span></span><br><span class="line"><span class="comment">// 轮数</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;len;i++)&#123;</span><br><span class="line">  <span class="comment">// 次数</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>;j&lt;len-i;j++)&#123;</span><br><span class="line">    <span class="comment">// 交换位置</span></span><br><span class="line">    <span class="keyword">if</span>(arr[j]&gt;arr[j+<span class="number">1</span>])&#123;</span><br><span class="line">      <span class="keyword">var</span> temp = arr[j]</span><br><span class="line">      arr[j] = arr[j+<span class="number">1</span>]</span><br><span class="line">      arr[j+<span class="number">1</span>] = temp</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(arr)</span><br></pre></td></tr></table></figure><h2 id="第5题-不使用reverse反转数组"><a href="#第5题-不使用reverse反转数组" class="headerlink" title="第5题 不使用reverse反转数组"></a>第5题 不使用reverse反转数组</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 交换位置 反转数组</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;arr.length/<span class="number">2</span>;i++) &#123;</span><br><span class="line">  <span class="comment">// arr[0] 和 arr[arr.length-1-0] 交换</span></span><br><span class="line">  <span class="comment">// arr[1] 和 arr[arr.length-1-1] 交换</span></span><br><span class="line">  <span class="comment">// arr[2] 和 arr[arr.length-1-2] 交换</span></span><br><span class="line">  <span class="comment">// 利用第三方变量交换两个变量的值</span></span><br><span class="line">  <span class="keyword">var</span> temp = arr[i]</span><br><span class="line">  arr[i] = arr[arr.length<span class="number">-1</span>-i]</span><br><span class="line">  arr[arr.length<span class="number">-1</span>-i] = temp</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(arr)</span><br></pre></td></tr></table></figure><h2 id="第6题-js综合面试题getName"><a href="#第6题-js综合面试题getName" class="headerlink" title="第6题 js综合面试题getName"></a>第6题 js综合面试题getName</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 变量提升 函数提升</span></span><br><span class="line"><span class="comment">1 function Foo()&#123;</span></span><br><span class="line"><span class="comment">    getName = function()&#123; console.log(1) &#125;</span></span><br><span class="line"><span class="comment">    return this</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">// 2 var getName 被同名函数 getName() 覆盖</span></span><br><span class="line"><span class="comment">// 3 function getName()&#123; console.log(5) &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">// 执行代码阶段</span></span><br><span class="line"><span class="comment">Foo.getName = function()&#123; console.log(2) &#125;</span></span><br><span class="line"><span class="comment">Foo.prototype.getName = function()&#123; console.log(3) &#125;</span></span><br><span class="line"><span class="comment">getName = function()&#123; console.log(4) &#125;</span></span><br><span class="line"><span class="comment">4 getName = function()&#123; console.log(4) &#125; // 全局方法</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">最终执行到这里时</span></span><br><span class="line"><span class="comment">function Foo()&#123;</span></span><br><span class="line"><span class="comment">  getName = function()&#123; console.log(1) &#125;</span></span><br><span class="line"><span class="comment">  return this</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">Foo.getName = function()&#123; console.log(2) &#125; // 类的静态方法</span></span><br><span class="line"><span class="comment">Foo.prototype.getName = function()&#123; console.log(3) &#125; // 累的实例方法</span></span><br><span class="line"><span class="comment">getName = function()&#123; console.log(4) &#125; // 全局方法</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="built_in">console</span>.log(<span class="number">1</span>) &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">&#125;</span><br><span class="line">Foo.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="built_in">console</span>.log(<span class="number">2</span>) &#125;  <span class="comment">// 类的静态方法</span></span><br><span class="line">Foo.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="built_in">console</span>.log(<span class="number">3</span>) &#125;</span><br><span class="line"><span class="keyword">var</span> getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="built_in">console</span>.log(<span class="number">4</span>) &#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span>&#123; <span class="built_in">console</span>.log(<span class="number">5</span>) &#125;</span><br><span class="line"></span><br><span class="line">Foo.getName() <span class="comment">// 2  执行类的静态方法 function()&#123; console.log(2) &#125;</span></span><br><span class="line">getName() <span class="comment">// 4 执行全局方法 function()&#123; console.log(4) &#125;()</span></span><br><span class="line"><span class="comment">// Foo() 执行 将全局getName修改为 getName = function()&#123; console.log(1) &#125; 并返回this --&gt; window</span></span><br><span class="line">Foo().getName() <span class="comment">// 1  (Foo()).getName()--&gt; window.getName()</span></span><br><span class="line">getName() <span class="comment">// 1 执行全局方法 getName = function()&#123; console.log(1) &#125;</span></span><br><span class="line"><span class="comment">// . 操作符优先级高 new (Foo.getName)() --&gt; new (function()&#123; console.log(2) &#125;)()</span></span><br><span class="line"><span class="keyword">new</span> Foo.getName() <span class="comment">// 2</span></span><br><span class="line"><span class="comment">// (new Foo()).getName()--&gt; foo.getName() === Foo.prototype.getName()</span></span><br><span class="line"><span class="comment">// foo.getName === Foo.prototype.getName 实例对象的隐式原型就等于构造函数的显示原型</span></span><br><span class="line"><span class="keyword">new</span> Foo().getName() <span class="comment">// 3</span></span><br><span class="line"><span class="comment">// new ((new Foo()).getName)()--&gt; new (foo.getName)()--&gt; new (function()&#123; console.log(3) &#125;)()</span></span><br><span class="line"><span class="keyword">new</span> <span class="keyword">new</span> Foo().getName() <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><p><img src="/image/interview/getName.png" alt="getName"></p><h2 id="第7题-什么是函数节流？-什么是函数防抖"><a href="#第7题-什么是函数节流？-什么是函数防抖" class="headerlink" title="第7题 什么是函数节流？ 什么是函数防抖"></a>第7题 什么是函数节流？ 什么是函数防抖</h2><ul><li><p>函数节流：一个函数执行一次后，只有大于设定的执行周期后才会执行第二次<br>需要频繁触发的函数，在规定时间内，只让函数触发的第一次生效，后面不生效</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 节流函数</span></span><br><span class="line"><span class="comment">* @param fn 要被节流的函数</span></span><br><span class="line"><span class="comment">* @param delay 规定的时间</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, delay</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> lastTime = <span class="number">0</span> <span class="comment">// 记录上一次函数触发的时间</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> nowTime = <span class="built_in">Date</span>.now() <span class="comment">// 记录当前函数触发的时间</span></span><br><span class="line">    <span class="keyword">if</span> (nowTime - lastTime &gt; delay) &#123;</span><br><span class="line">      fn.call(<span class="keyword">this</span>) <span class="comment">// 修改this指向</span></span><br><span class="line">    &#125;</span><br><span class="line">    lastTime = nowTime <span class="comment">// 同步时间</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.onscroll = throttle(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'scroll'</span>)</span><br><span class="line">&#125;, <span class="number">60</span>)</span><br></pre></td></tr></table></figure></li><li><p>防抖函数：一个需要频繁触发的函数，在规定时间内，只让函数触发的最后一次生效，前面的不生效</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 防抖函数</span></span><br><span class="line"><span class="comment">* @param fn 要被防抖的函数</span></span><br><span class="line"><span class="comment">* @param delay 规定的时间</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, delay</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> timer = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    clearTimeout(timer) <span class="comment">// 清除上一次延时器</span></span><br><span class="line">    <span class="comment">// 重新设置新的延时器</span></span><br><span class="line">    timer = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      fn.call(<span class="keyword">this</span>)</span><br><span class="line">    &#125;, delay)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">input.oninput = debounce(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(input.value)</span><br><span class="line">&#125;, <span class="number">200</span>)</span><br></pre></td></tr></table></figure></li></ul><h2 id="第8题-多维数组扁平化"><a href="#第8题-多维数组扁平化" class="headerlink" title="第8题 多维数组扁平化"></a>第8题 多维数组扁平化</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,[<span class="number">6</span>,<span class="number">7</span>]]]</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flatten</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [].concat(</span><br><span class="line">    ...arr.map(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">Array</span>.isArray(item) ? flatten(item) : item)</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(flatten(arr))</span><br></pre></td></tr></table></figure><h2 id="第9题-变量隐式转换"><a href="#第9题-变量隐式转换" class="headerlink" title="第9题 变量隐式转换"></a>第9题 变量隐式转换</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123; &#125;,</span><br><span class="line">    b = &#123; <span class="attr">key</span>:<span class="string">'b'</span> &#125;,</span><br><span class="line">    c = &#123; <span class="attr">key</span>:<span class="string">'c'</span> &#125;;</span><br><span class="line">a[b] = <span class="number">123</span>;</span><br><span class="line">a[c] = <span class="number">456</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a[b]) <span class="comment">// 456</span></span><br><span class="line"><span class="comment">/* 首先a[b] 这里面b最后显示成什么？</span></span><br><span class="line"><span class="comment">  关于变量隐式转换，对象的a[]这种写法，里面添加的是属性名称--string类型</span></span><br><span class="line"><span class="comment">  所以a[b]，b的原类型是object，目标是string类型。实际上是执行了a[b.toString()]</span></span><br><span class="line"><span class="comment">  同理a[c]也一样</span></span><br><span class="line"><span class="comment">  a[b.toString()]=123;</span></span><br><span class="line"><span class="comment">  a[c.toString()]=456;</span></span><br><span class="line"><span class="comment">  Object类型的变量 执行toString() 结果都是同样的字符串。----"[object Object]"</span></span><br><span class="line"><span class="comment">  所以a["[object Object]"]=123;  a["[object Object]"]=456;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="第10题-连等号执行顺序"><a href="#第10题-连等号执行顺序" class="headerlink" title="第10题 连等号执行顺序"></a>第10题 连等号执行顺序</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> y = <span class="number">1</span>, x = y = <span class="keyword">typeof</span> x;</span><br><span class="line"><span class="built_in">console</span>.log(x) <span class="comment">// undefiend</span></span><br><span class="line"><span class="comment">/* var y; var x  // x ,y 此时都是undefiend  ---&gt; y = 1</span></span><br><span class="line"><span class="comment">  连等号从右向左执行</span></span><br><span class="line"><span class="comment">  typeof x --&gt;undefiend(字符串) --&gt;y = undefined(字符串) --&gt; x = undefied(字符串)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="第11题-toString-特例"><a href="#第11题-toString-特例" class="headerlink" title="第11题 toString 特例"></a>第11题 toString 特例</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对象.toString() ---&gt; [object Object]</span></span><br><span class="line"><span class="built_in">console</span>.log(&#123;<span class="attr">a</span>: <span class="number">1</span>&#125;.toString()==<span class="string">'[object Object]'</span>);</span><br><span class="line"><span class="comment">// 纯数字.toString()  .在前面是纯数字时会被当成 小数点</span></span><br><span class="line"><span class="comment">// 10.toString() ==&gt; (10.)toString() 报错</span></span><br><span class="line"><span class="comment">// 10..toString() ==&gt; (10.).toString() '10'</span></span><br></pre></td></tr></table></figure><h2 id="第12题-对象引用"><a href="#第12题-对象引用" class="headerlink" title="第12题 对象引用"></a>第12题 对象引用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="attr">n</span>:<span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">var</span> b = a</span><br><span class="line">a = &#123;<span class="attr">n</span>:<span class="number">2</span>&#125;</span><br><span class="line">a.x = a</span><br><span class="line"><span class="built_in">console</span>.log(a.x) <span class="comment">// &#123;n: 2, x: &#123; n:2, x: &#123;n:2, x: ...&#125;&#125;&#125; 无限</span></span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// &#123;n:1&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(b.x) <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// = 赋值操作 不但会将右边的值保存到左边的变量中, 而且还会返回等号右边的值 a = &#123;n:2&#125; // &#123;n:2&#125;</span></span><br><span class="line"><span class="comment">// A=B=C连等赋值真正的运算规则是 B=C; A=B 即连续赋值是从右至左永远只取等号右边的表达式结果赋值到等号左侧。</span></span><br><span class="line"><span class="keyword">var</span> a = &#123;<span class="attr">n</span>:<span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">var</span> b = a</span><br><span class="line">a.x = a = &#123;<span class="attr">n</span>:<span class="number">2</span>&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// &#123;n: 2&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(a.x) <span class="comment">// undefiend</span></span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// &#123;n:1, x: &#123;n:2&#125;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(b.x) <span class="comment">// &#123;n:2&#125;</span></span><br><span class="line"><span class="comment">/*解答思路：</span></span><br><span class="line"><span class="comment">1. 首先将对象&#123;n:1&#125;赋值给a变量 再将a赋值给b 这是一层浅拷贝过程 所以a和b变量都指向同一个对象&#123;n:1&#125;</span></span><br><span class="line"><span class="comment">2. 由于点运算符优先于赋值运算符所以先在&#123;n：1&#125;对象中创建了一个x属性 &#123;n:1，x:（暂时无值）&#125; 这个过程 因为运算符优先级的原因 赋值符号还未执行的时候就已经完成了</span></span><br><span class="line"><span class="comment">3. 再然后执行 a = &#123;n:2&#125; 此时a的引用地址发生了改变 从对象&#123;n:1&#125;指向了&#123;n:2&#125;</span></span><br><span class="line"><span class="comment">4. a.x此时指向的是 &#123;n:1，x:（暂时无值）&#125;对象 然后将&#123;n：2&#125; 赋值给了a.x属性 此时A对象&#123;n:1， x：&#123;n：2&#125;&#125;</span></span><br><span class="line"><span class="comment">5. 此时的a.x属性的父级对象a的初始引用地址是A对象 而A对象赋值给了b变量 所以你能在b.x中得到对象&#123;n：2&#125;</span></span><br><span class="line"><span class="comment">6. 原对象地址因无人引用他 被垃圾回收机制回收了 对象被赋值了B对象&#123;n：2&#125; 所以原有的a.x为undefined</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="第13题-var-会突破if限制"><a href="#第13题-var-会突破if限制" class="headerlink" title="第13题 var 会突破if限制"></a>第13题 <code>var 会突破if限制</code></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"World!"</span>;</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  var name 变量提神  if限制不住var变量提升</span></span><br><span class="line"><span class="comment">  ...</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> name === <span class="string">"undefined"</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">"Jack"</span></span><br><span class="line">    <span class="built_in">console</span>.log(name)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"><span class="comment">// Jack</span></span><br></pre></td></tr></table></figure><h2 id="第14题-原型链与对象属性查找"><a href="#第14题-原型链与对象属性查找" class="headerlink" title="第14题 原型链与对象属性查找"></a>第14题 原型链与对象属性查找</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">A.prototype.n = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> A()</span><br><span class="line">A.prototype = &#123;</span><br><span class="line">  n: <span class="number">2</span>,</span><br><span class="line">  m: <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> c = <span class="keyword">new</span> A()</span><br><span class="line"><span class="built_in">console</span>.log(b.n, b.m, c.n, c.m) <span class="comment">// 1 undefined 2 3</span></span><br></pre></td></tr></table></figure><h2 id="第15题-变量提升-this-原型链"><a href="#第15题-变量提升-this-原型链" class="headerlink" title="第15题 变量提升 this 原型链"></a>第15题 变量提升 this 原型链</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  getAge = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">10</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">&#125;</span><br><span class="line">Person.getAge = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">20</span>)</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.getAge = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">30</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> getAge = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">40</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAge</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">50</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">变量提升  1. function Person &#123;getAge = function () &#123; console.log(10) &#125; return this &#125;</span></span><br><span class="line"><span class="comment">         2. var getAge;  function getAge() &#123; console.log(50) &#125;</span></span><br><span class="line"><span class="comment">执行  3. Person.getAge = function () &#123; console.log(20) &#125; 给Person添加静态属性 getAge = function () &#123; console.log(20) &#125;</span></span><br><span class="line"><span class="comment">      4. Person.prototype.getAge = function () &#123; console.log(30) &#125; 给Person原型上添加属性 getAge = function () &#123; console.log(30) &#125;</span></span><br><span class="line"><span class="comment">      5. 为全局的getAge赋值 getAge = function () &#123; console.log(40) &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">Person.getAge() <span class="comment">// 20 ===&gt; function () &#123; console.log(20) &#125;()  输出 20</span></span><br><span class="line">getAge() <span class="comment">// 40 ===&gt; 执行全局 getAge = function () &#123; console.log(40) &#125; 输出 40</span></span><br><span class="line">Person().getAge() <span class="comment">// 10 ===&gt; 执行Person()  将全局 getAge修改为 function () &#123; console.log(10) &#125; 并返回this--&gt; window 调用window.getAge 即全局getAge 输出10</span></span><br><span class="line">getAge() <span class="comment">// 10 ===&gt; 执行全局 getAge 输出10</span></span><br><span class="line"><span class="keyword">new</span> Person.getAge() <span class="comment">// 20 ==&gt; new 运算先找()才执行  执行 new Person.getAge() --&gt;Person.getAge --&gt; new function () &#123; console.log(20) &#125; 输出20</span></span><br><span class="line"><span class="keyword">new</span> Person().getAge() <span class="comment">// 30 ===&gt; new 先找()执行  var p = new Person() 创建实例对象p 调用p的方法 为找到则去构造函数的原型上查找 Person.prototype.getAge = function () &#123; console.log(30) &#125; 执行 function () &#123; console.log(30) &#125; 输出30  实例对象的 p.__proto__=== Person.prototype</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 面试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 面试 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>一些面试题(1)</title>
      <link href="/%E4%B8%80%E4%BA%9B%E9%9D%A2%E8%AF%95%E9%A2%98(1)/"/>
      <url>/%E4%B8%80%E4%BA%9B%E9%9D%A2%E8%AF%95%E9%A2%98(1)/</url>
      
        <content type="html"><![CDATA[<p>记录一些常见的面试题, 加深巩固下基础知识, 及时扫盲.<br><a id="more"></a></p><h4 id="JavaScript的数据类型都有什么？"><a href="#JavaScript的数据类型都有什么？" class="headerlink" title="JavaScript的数据类型都有什么？"></a>JavaScript的数据类型都有什么？</h4><ul><li>基本数据类型：string, boolean, number, undefined, null, symbol(es6), bigInt(es10)</li><li>引用数据类型：object(Array,Date,RegExp,Function)</li></ul><h4 id="javascript的typeof返回哪些数据类型"><a href="#javascript的typeof返回哪些数据类型" class="headerlink" title="javascript的typeof返回哪些数据类型"></a>javascript的typeof返回哪些数据类型</h4><ol><li><p>javascript的typeof返回那些数据类型？<br><code>object number function boolean undefined string symbol bigint</code></p></li><li><p>检测数组的几种方式<br><code>Array.isArray(arr)</code><br><code>arr.toString().call([]) // [Object Array]</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取数据类型 类似typeof 但比typeof强大</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getType</span>(<span class="params">v</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// .+?  惰匹匹配</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(v).match(<span class="regexp">/\[object (.+?)\]/</span>)[<span class="number">1</span>].toLowerCase()</span><br><span class="line">&#125;</span><br><span class="line">getType([]) <span class="comment">// "array"</span></span><br><span class="line">getType(<span class="literal">NaN</span>) <span class="comment">// "number"</span></span><br><span class="line">getType(<span class="built_in">Symbol</span>(<span class="number">1</span>)) <span class="comment">// "symbol"</span></span><br><span class="line">getType(BigInt(<span class="string">"9007199254740995"</span>)) <span class="comment">// "bigint"</span></span><br><span class="line">getType(<span class="literal">null</span>) <span class="comment">// "null"</span></span><br><span class="line">getType(<span class="literal">undefined</span>) <span class="comment">// "undefined"</span></span><br><span class="line">getType(<span class="string">'0'</span>) <span class="comment">// "string"</span></span><br><span class="line">getType(&#123;&#125;) <span class="comment">// "object"</span></span><br><span class="line">getType(<span class="built_in">parseInt</span>) <span class="comment">// "function"</span></span><br><span class="line">getType(<span class="keyword">new</span> <span class="built_in">Date</span>()) <span class="comment">// "date"</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="事件绑定和普通事件有什么区别"><a href="#事件绑定和普通事件有什么区别" class="headerlink" title="事件绑定和普通事件有什么区别"></a>事件绑定和普通事件有什么区别</h4><ul><li>普通事件onclick的方法不支持添加多个事件，最下面的事件会覆盖上面的</li><li>事件绑定（addEventListener）方式添加事件可以添加多个, 支持事件冒泡和事件捕获</li></ul><h4 id="call和apply的区别"><a href="#call和apply的区别" class="headerlink" title="call和apply的区别"></a>call和apply的区别</h4><ul><li>参数的不同 call 第二个参数以后是参数列表  apply第二个参数是参数序列（数组）</li></ul><h4 id="window-onload和-document-ready区别"><a href="#window-onload和-document-ready区别" class="headerlink" title="window.onload和$(document).ready区别"></a>window.onload和$(document).ready区别</h4><ul><li>window.onload 是在dom文档树加载完和所有文件加载完之后执行的函数</li><li>$(document).ready 在dom文档树加载完之后执行的函数（文档树加载完不代表全部文件加载完）</li><li>$(document).ready要比window.onload先执行</li><li>window.onload只能出来一次，$(document).ready可以出现多次</li></ul><h4 id="判断数组方式"><a href="#判断数组方式" class="headerlink" title="判断数组方式"></a>判断数组方式</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="built_in">Array</span>.isArray === <span class="string">"undefined"</span>)&#123;</span><br><span class="line">  <span class="built_in">Array</span>.isArray = <span class="function"><span class="keyword">function</span>(<span class="params">arg</span>)</span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(arg)===<span class="string">"[object Array]"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Javascript中callee和caller的作用？"><a href="#Javascript中callee和caller的作用？" class="headerlink" title="Javascript中callee和caller的作用？"></a>Javascript中callee和caller的作用？</h4><ul><li>caller是返回一个对函数的引用，该函数调用了当前函数；</li><li>callee是返回正在被执行的function函数，也就是所指定的function对象的正文。</li></ul><h4 id="谈谈Cookie的弊端？"><a href="#谈谈Cookie的弊端？" class="headerlink" title="谈谈Cookie的弊端？"></a>谈谈Cookie的弊端？</h4><ul><li>Cookie数量和长度的限制。每个domain最多只能有20条cookie，每个cookie长度不能超过4KB，否则会被截掉。</li><li>安全性问题。如果cookie被拦截了，就可以取得所有的session信息。即使加密也与事无补，因为拦截者并不需要知道cookie的意义，他只要原样转发cookie就可以达到目的了。</li></ul><h4 id="哪些操作会造成内存泄漏？"><a href="#哪些操作会造成内存泄漏？" class="headerlink" title="哪些操作会造成内存泄漏？"></a>哪些操作会造成内存泄漏？</h4><ul><li>内存泄漏: 指一块被分配的内存既不能使用又不能回收，直到浏览器进程结束。</li></ul><ol><li>setTimeout 的第一个参数使用字符串而非函数的话，会引发内存泄漏。</li><li>闭包</li><li>控制台日志</li><li>循环（在两个对象彼此引用且彼此保留时，就会产生一个循环）</li></ol><h4 id="javascript-中的垃圾回收机制？"><a href="#javascript-中的垃圾回收机制？" class="headerlink" title="javascript 中的垃圾回收机制？"></a>javascript 中的垃圾回收机制？</h4><ul><li>垃圾回收: 垃圾回收器定期扫描对象，并计算引用了每个对象的其他对象的数量。如果一个对象的引用数量为0(没有其他对象引用过该对象)，或对该对象的惟一引用是循环的，那么该对象的内存即可回收。</li><li>在Javascript中，如果一个对象不再被引用，那么这个对象就会被GC回收。如果两个对象互相引用，而不再被第3者所引用，那么这两个互相引用的对象也会被回收。</li></ul><h4 id="获取非行间样式"><a href="#获取非行间样式" class="headerlink" title="获取非行间样式"></a>获取非行间样式</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStyle</span>(<span class="params">obj,attr,value</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> obj.currentStyle ? obj.currentStyle(attr) : obj.getComputedStyle(attr, <span class="literal">false</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="事件委托是什么"><a href="#事件委托是什么" class="headerlink" title="事件委托是什么"></a>事件委托是什么</h4><ul><li>利用事件冒泡的原理，自己要触发的事件，让他的父元素代替执行！</li></ul><h4 id="原生ajax步骤"><a href="#原生ajax步骤" class="headerlink" title="原生ajax步骤"></a>原生ajax步骤</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr =<span class="literal">null</span>;<span class="comment">//创建对象</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</span><br><span class="line">xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">xhr = <span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>)</span><br><span class="line">&#125;</span><br><span class="line">xhr.open(<span class="string">'方式'</span>,<span class="string">'地址'</span>,<span class="string">'标志位'</span>) <span class="comment">// 初始化请求</span></span><br><span class="line">xhr.setRequestHeader(<span class="string">''</span>, <span class="string">''</span>) <span class="comment">// 设置http头信息</span></span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125; <span class="comment">// 指定回调函数</span></span><br><span class="line">xhr.send() <span class="comment">// 发送请求</span></span><br><span class="line">xhr.abort() <span class="comment">// 在接收响应之前调用abort方法来取消异步请求</span></span><br></pre></td></tr></table></figure><h4 id="请解释一下-JavaScript-的同源策略。"><a href="#请解释一下-JavaScript-的同源策略。" class="headerlink" title="请解释一下 JavaScript 的同源策略。"></a>请解释一下 JavaScript 的同源策略。</h4><ul><li>同源策略是一种安全协议，指一段脚本只能读取来自同一来源的窗口和文档的属性。所谓同源指的是：协议，域名，端口三者都相同</li></ul><h4 id="一个页面从输入-URL-到页面加载显示完成，这个过程中都发生了什么？"><a href="#一个页面从输入-URL-到页面加载显示完成，这个过程中都发生了什么？" class="headerlink" title="一个页面从输入 URL 到页面加载显示完成，这个过程中都发生了什么？"></a>一个页面从输入 URL 到页面加载显示完成，这个过程中都发生了什么？</h4><ol><li>当发送一个 URL 请求时，浏览器都会开启一个线程来处理这个请求，同时在远程 DNS 服务器上启动一个 DNS 查询。这能使浏览器获得请求对应的 IP 地址。</li><li>浏览器与远程 Web 服务器通过 TCP 三次握手协商来建立一个 TCP/IP 连接。该握手包括一个同步报文，一个同步-应答报文和一个应答报文，这三个报文在 浏览器和服务器之间传递。该握手首先由客户端尝试建立起通信，而后服务器应答并接受客户端的请求，最后由客户端发出该请求已经被接受的报文。</li><li>一旦 TCP/IP 连接建立，浏览器会通过该连接向远程服务器发送 HTTP 的 GET 请求。远程服务器找到资源并使用 HTTP 响应返回该资源，值为 200 的 HTTP 响应状态表示一个正确的响应。</li><li>浏览器对加载到的资源（HTML、JS、CSS等）进行语法解析，建立相应的内部数据结构（如HTML的DOM）；</li><li>载入解析到的资源文件，渲染页面显示。</li></ol><h4 id="什么是伪数组？如何将伪数组转化为标准数组？"><a href="#什么是伪数组？如何将伪数组转化为标准数组？" class="headerlink" title="什么是伪数组？如何将伪数组转化为标准数组？"></a>什么是伪数组？如何将伪数组转化为标准数组？</h4><ul><li>伪数组（类数组）：无法直接调用数组方法或期望length属性有什么特殊的行为，但仍可以对真正数组遍历方法来遍历它们.如 argument, NodeList</li><li>可以使用Array.prototype.slice.call(argument)将数组转化为真正的Array对象</li></ul><h4 id="关于javascript中apply-和call-方法的区别？"><a href="#关于javascript中apply-和call-方法的区别？" class="headerlink" title="关于javascript中apply()和call()方法的区别？"></a>关于javascript中apply()和call()方法的区别？</h4><ul><li>相同点:两个方法产生的作用是完全一样的</li><li>不同点:方法传递的参数不同<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.call(<span class="keyword">this</span>,obj1,obj2,obj3)</span><br><span class="line"><span class="built_in">Object</span>.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>)</span><br><span class="line"><span class="comment">// apply()接收两个参数，第一个是函数运行的作用域(this)，另一个是参数数组。</span></span><br><span class="line"><span class="comment">// call()接收多个参数方法, 第一个参数为函数运行的作用域(this)，其他参数为传递给函数的参数列表</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="通用的事件侦听器函数"><a href="#通用的事件侦听器函数" class="headerlink" title="通用的事件侦听器函数"></a>通用的事件侦听器函数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">markyun.Event = &#123;</span><br><span class="line">  <span class="comment">// 页面加载完成后</span></span><br><span class="line">  readyEvent: <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (fn==<span class="literal">null</span>) &#123;</span><br><span class="line">      fn=<span class="built_in">document</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> oldonload = <span class="built_in">window</span>.onload</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">window</span>.onload != <span class="string">'function'</span>) &#123;</span><br><span class="line">      <span class="built_in">window</span>.onload = fn</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          oldonload()</span><br><span class="line">          fn()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 视能力分别使用dom0||dom2||IE方式 来绑定事件</span></span><br><span class="line">  <span class="comment">// 参数： 操作的元素,事件名称 ,事件处理程序</span></span><br><span class="line">  addEvent: <span class="function"><span class="keyword">function</span>(<span class="params">element, type, handler</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (element.addEventListener) &#123;</span><br><span class="line">      <span class="comment">//事件类型、需要执行的函数、是否捕捉</span></span><br><span class="line">      element.addEventListener(type, handler, <span class="literal">false</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.attachEvent) &#123;</span><br><span class="line">      element.attachEvent(<span class="string">'on'</span> + type, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        handler.call(element)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      element[<span class="string">'on'</span> + type] = handler</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 移除事件</span></span><br><span class="line">  removeEvent: <span class="function"><span class="keyword">function</span>(<span class="params">element, type, handler</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (element.removeEnentListener) &#123;</span><br><span class="line">      element.removeEnentListener(type, handler, <span class="literal">false</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.datachEvent) &#123;</span><br><span class="line">      element.detachEvent(<span class="string">'on'</span> + type, handler)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      element[<span class="string">'on'</span> + type] = <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 阻止事件 (主要是事件冒泡，因为IE不支持事件捕获)</span></span><br><span class="line">  stopPropagation: <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (ev.stopPropagation) &#123;</span><br><span class="line">      ev.stopPropagation()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      ev.cancelBubble = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 取消事件的默认行为</span></span><br><span class="line">  preventDefault : <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (event.preventDefault) &#123;</span><br><span class="line">      event.preventDefault()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      event.returnValue = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 获取事件目标</span></span><br><span class="line">  getTarget: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> event.target || event.srcElement</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 获取event对象的引用，取到事件的所有信息，确保随时能使用event；</span></span><br><span class="line">  getEvent: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> ev = e || <span class="built_in">window</span>.event</span><br><span class="line">    <span class="keyword">if</span> (!ev) &#123;</span><br><span class="line">      <span class="keyword">var</span> c = <span class="keyword">this</span>.getEvent.caller</span><br><span class="line">      <span class="keyword">while</span> (c) &#123;</span><br><span class="line">        ev = c.arguments[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">if</span> (ev &amp;&amp; Event == ev.constructor) &#123;</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">        c = c.caller</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ev</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="javascript继承的方式？"><a href="#javascript继承的方式？" class="headerlink" title="javascript继承的方式？"></a>javascript继承的方式？</h4><p><code>原型链继承 借用构造函数继承 原型+构造函数继承 寄生式继承</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 原型链继承</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.age = <span class="number">20</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">'jack'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat()</span><br><span class="line"><span class="built_in">console</span>.log(cat.name); <span class="comment">// jaack</span></span><br><span class="line"><span class="built_in">console</span>.log(cat.age); <span class="comment">// undefined</span></span><br><span class="line"><span class="comment">// 让Cat对象拥有了Animal对象的属性和方法</span></span><br><span class="line">Cat.prototype = <span class="keyword">new</span> Animal()</span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat()</span><br><span class="line"><span class="built_in">console</span>.log(cat.name); <span class="comment">// jaack</span></span><br><span class="line"><span class="built_in">console</span>.log(cat.age); <span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 借用构造函数继承</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.age = <span class="number">20</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Cat的所有对象借用了Animal对象的构造函数</span></span><br><span class="line">  Animal.call(<span class="keyword">this</span>)</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">'jack'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat()</span><br><span class="line"><span class="built_in">console</span>.log(cat.name); <span class="comment">// jaack</span></span><br><span class="line"><span class="built_in">console</span>.log(cat.age); <span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 原型 + 构造函数继承组合继承</span></span><br><span class="line"><span class="comment">// 4. 寄生式继承</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">createPerson</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> obj = &#123;&#125;</span><br><span class="line">  Person.call(obj, name, age)</span><br><span class="line">  <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = createPerson(<span class="string">'tew'</span>, <span class="number">28</span>)</span><br><span class="line"><span class="built_in">console</span>.log(person) <span class="comment">// &#123;name: "tew", age: 28&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(person.constructor) <span class="comment">// ƒ Object() &#123; [native code] &#125;</span></span><br></pre></td></tr></table></figure></p><h4 id="如何理解闭包-闭包作用是什么、优缺点？"><a href="#如何理解闭包-闭包作用是什么、优缺点？" class="headerlink" title="如何理解闭包?闭包作用是什么、优缺点？"></a>如何理解闭包?闭包作用是什么、优缺点？</h4><p>使用闭包主要是为了设计私有的方法和变量.<br>闭包的优点是可以避免全局变量的污染<br>闭包的三个特性:<br>  函数嵌套函数<br>  函数外部可以引用内部的参数和变量<br>  参数和变量不会被垃圾回收机制回收<br>闭包的作用</p><ol><li>保护（形成一个私有作用域，保护内部私有变量，不受外界干扰） 如：多人开发规避函数重名或变量重名问题</li><li>保存（形成一个不销毁的栈内存，把一些值保存起来）如：使用闭包解决循环绑定事件索引问题<br><code>闭包的缺点是变量会常驻内存,会增大内存使用量,使用不当很容易造成内存泄漏</code></li></ol><h4 id="用js将字符串str的所有单词的首字母大写"><a href="#用js将字符串str的所有单词的首字母大写" class="headerlink" title="用js将字符串str的所有单词的首字母大写"></a>用js将字符串str的所有单词的首字母大写</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test = <span class="string">'a tom is stupid,sda.'</span>;</span><br><span class="line"><span class="keyword">var</span> a = test.replace(<span class="regexp">/\b\w+\b/g</span>,<span class="function"><span class="keyword">function</span>(<span class="params">word</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> word.substr(<span class="number">0</span>,<span class="number">1</span>).toUpperCase() + word.substr(<span class="number">1</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(a)  <span class="comment">// A Tom Is Stupid,Sda.</span></span><br></pre></td></tr></table></figure><h4 id="“use-strict”-严格模式有哪些问题"><a href="#“use-strict”-严格模式有哪些问题" class="headerlink" title="“use strict” 严格模式有哪些问题"></a>“use strict” 严格模式有哪些问题</h4><p>A.全局变量必须显示声明,给一个未用var声明的全局变量赋值会报错<br>B.禁止删除变量, configurable设置为true的属性才能被删除<br>C.对象不能有重名的属性,函数不能有重名的参数<br>D.函数必须声明在顶层(if/for中声明函数会报错)</p><h4 id="栈和队列的区别"><a href="#栈和队列的区别" class="headerlink" title="栈和队列的区别"></a>栈和队列的区别</h4><p>栈的插入和删除操作都是在一端进行的,而队列的操作却是在两端进行的.<br>队列先进先出,栈先进后出<br>栈只允许在末尾一端进行插入和删除,而队列只允许在末尾插入,在表头一端进行删除</p><h4 id="栈和堆的区别"><a href="#栈和堆的区别" class="headerlink" title="栈和堆的区别"></a>栈和堆的区别</h4><p>栈区(stack) 由编译器自动分配释放, 存放函数的参数值,局部变量的值等     一种先进后出的数据结构<br>堆区(heap)  一般由程序员分配释放, 若程序员不释放,程序结束时可能被系统回收.   堆可以被看成是一棵树</p><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><ul><li><code>注意: 一个函数的父级作用域是它定义时的作用域  而不是他执行时的作用域</code></li></ul><h4 id="描述new一个对象额过程"><a href="#描述new一个对象额过程" class="headerlink" title="描述new一个对象额过程"></a>描述new一个对象额过程</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> 1. 创建一个新对象</span></span><br><span class="line"><span class="comment"> 2. this指向这个新对象</span></span><br><span class="line"><span class="comment"> 3. 执行代码 即对this赋值</span></span><br><span class="line"><span class="comment"> 4. 返回this（默认）</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="comment">// return this 默认有着一行</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="iframe"><a href="#iframe" class="headerlink" title="iframe"></a>iframe</h2><ul><li>iframe 会阻塞主页面的onload事件</li><li>搜索引擎的检索程序无法解读这种页面,不利于SEO</li><li>iframe和主页面共享连接池, 浏览器对相同域的链接有限制,会影响页面的并行加载</li><li>要使用iframe,最好是通过javascript动态给iframe的src属性赋值</li></ul>]]></content>
      
      
      <categories>
          
          <category> 面试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 面试 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>页面嵌套iframe后rem失效</title>
      <link href="/%E9%A1%B5%E9%9D%A2%E5%B5%8C%E5%A5%97iframe%E5%90%8Erem%E5%A4%B1%E6%95%88/"/>
      <url>/%E9%A1%B5%E9%9D%A2%E5%B5%8C%E5%A5%97iframe%E5%90%8Erem%E5%A4%B1%E6%95%88/</url>
      
        <content type="html"><![CDATA[<p>最近在一个页面嵌套使用了<code>iframe</code>之后,发现<code>iframe</code>嵌套的页面样式乱了,但是页面样式都应用上了,查看元素之后发现,嵌套的<code>iframe</code>里面的<code>html</code>并没有动态的设置上<code>font-size</code>,它也没有应用外面的<code>html</code>的<code>font-size</code>大小，还是<code>iframe</code>自身默认<code>rem</code>值即<code>1rem=16px</code>,所以解决办法是给<code>iframe</code>里面的<code>html</code>也动态设置上<code>font-size</code>,但前提是必须在页面加载完成才有效即<code>window.onload</code>里面.<br><a id="more"></a></p><h2 id="未设置之前"><a href="#未设置之前" class="headerlink" title="未设置之前"></a>未设置之前</h2><p><img src="/image/other/iframe1.png" alt="iframe"></p><h2 id="设置iframe中html的font-size大小"><a href="#设置iframe中html的font-size大小" class="headerlink" title="设置iframe中html的font-size大小"></a>设置iframe中html的font-size大小</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"./test.html"</span> <span class="attr">frameborder</span>=<span class="string">"0"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"100%"</span> <span class="attr">id</span>=<span class="string">"myIframe"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript"><span class="comment">//等比缩放</span></span></span><br><span class="line"><span class="actionscript">!(<span class="function"><span class="keyword">function</span><span class="params">(doc, win)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> timer,</span></span><br><span class="line"><span class="undefined">        docEle = doc.documentElement,</span></span><br><span class="line"><span class="javascript">        evt = <span class="string">"onorientationchange"</span> <span class="keyword">in</span> <span class="built_in">window</span> ? <span class="string">"orientationchange"</span> : <span class="string">"resize"</span>,</span></span><br><span class="line"><span class="actionscript">        setFontSize = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> width = docEle.getBoundingClientRect().width;</span></span><br><span class="line"><span class="actionscript">            width &amp;&amp; (docEle.style.fontSize = <span class="number">20</span> * (width / <span class="number">320</span>) + <span class="string">"px"</span>);</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// iframe的html元素font-size设置 必须在加载完成去设置</span></span></span><br><span class="line"><span class="actionscript">            win.onload = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                myIframe.contentWindow.document.documentElement.style.fontSize = width / <span class="number">16</span> + <span class="string">"px"</span></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="actionscript">    win.addEventListener(evt, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">        clearTimeout(timer);</span></span><br><span class="line"><span class="undefined">        timer = setTimeout(setFontSize, 1000);</span></span><br><span class="line"><span class="actionscript">    &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="undefined">    setFontSize()</span></span><br><span class="line"><span class="actionscript">    doc.addEventListener(<span class="string">"DOMContentLoaded"</span>, setFontSize, <span class="literal">false</span>);</span></span><br><span class="line"><span class="javascript">&#125;(<span class="built_in">document</span>, <span class="built_in">window</span>));</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="设置之后"><a href="#设置之后" class="headerlink" title="设置之后"></a>设置之后</h2><p><img src="/image/other/iframe2.png" alt="iframe"></p>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> iframe </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>webp图片使用</title>
      <link href="/webp%E5%9B%BE%E7%89%87/"/>
      <url>/webp%E5%9B%BE%E7%89%87/</url>
      
        <content type="html"><![CDATA[<p><code>webp</code>是谷歌推出的一种图片格式，它的优点就是同等画面质量下，体积比jpg、png这些少了25%以上。并能节省大量的服务器带宽资源和数据空间。Facebook 淘宝等知名网站已经开始测试并使用WebP格式。但WebP是一种有损压缩。相较编码JPEG文件，编码同样质量的WebP文件需要占用更多的计算资源。<br><a id="more"></a></p><h2 id="webp兼容性"><a href="#webp兼容性" class="headerlink" title="webp兼容性"></a>webp兼容性</h2><p>并不是所有浏览器都支持webp格式<a href="https://caniuse.com/#search=webp" target="_blank" rel="noopener">查看浏览器支持情况</a><br><img src="/image/webp/webp1.png" alt="webp1"></p><h2 id="webp工具及在线网站"><a href="#webp工具及在线网站" class="headerlink" title="webp工具及在线网站"></a>webp工具及在线网站</h2><p><a href="https://www.upyun.com/webp" target="_blank" rel="noopener">WebP - 图片格式的发展趋势 - 又拍云</a><br><a href="https://convertio.co/zh/jpg-webp/" target="_blank" rel="noopener">JPG轉WEBP轉換器。在线自由 — Convertio</a><br><a href="https://cn.office-converter.com/JPG-to-WEBP" target="_blank" rel="noopener">JPG to WEBP, 免费在线JPG转换成WebP转换器 - JPG转换成WebP</a><br><a href="https://blog.csdn.net/aa464971/article/details/77963949" target="_blank" rel="noopener">WebP官方转换工具手把手安装教程</a><br><a href="https://www.xnview.com/en/xnconvert/" target="_blank" rel="noopener">XnConvert</a></p><h2 id="在项目中如何转换webp"><a href="#在项目中如何转换webp" class="headerlink" title="在项目中如何转换webp"></a>在项目中如何转换webp</h2><ul><li><p>使用WebP转换插件（imagemin-webp） <code>npm i -D imagemin imagemin-webp</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> imagemin = <span class="built_in">require</span>(<span class="string">'imagemin'</span>);</span><br><span class="line"><span class="keyword">const</span> imageminWebp = <span class="built_in">require</span>(<span class="string">'imagemin-webp'</span>);</span><br><span class="line">imagemin([<span class="string">'images/*.&#123;jpg&#125;'</span>], <span class="string">'images'</span>, &#123;</span><br><span class="line">  use: [ imageminWebp(&#123;<span class="attr">quality</span>: <span class="number">60</span>&#125;)]</span><br><span class="line">&#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Images optimized'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>使用gulp-webp 需要gulp4及以上版本 <code>npm i -D gulp-webp</code><br><code>[gulp-webp相关参数](https://github.com/imagemin/imagemin-webp#imageminwebpoptions)</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"><span class="keyword">const</span> webp = <span class="built_in">require</span>(<span class="string">'gulp-webp'</span>);</span><br><span class="line"><span class="comment">//任务[转换webp] 有损压缩</span></span><br><span class="line">gulp.task(<span class="string">'convert-webp'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  gulp.src(<span class="string">'images/**/*.&#123;jpg,png,gif&#125;'</span>)</span><br><span class="line">  .pipe(webp(&#123;</span><br><span class="line">    quality: <span class="number">70</span>,</span><br><span class="line">    preset: <span class="string">'photo'</span>,</span><br><span class="line">    method: <span class="number">4</span></span><br><span class="line">  &#125;))</span><br><span class="line">  .pipe(gulp.dest(<span class="string">'dist/images'</span>))</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 无损压缩</span></span><br><span class="line">gulp.task(<span class="string">'convert-webp'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  gulp.src(<span class="string">'images/**/*.&#123;jpg,png,gif&#125;'</span>)</span><br><span class="line">  .pipe(webp(&#123;</span><br><span class="line">    lossless: <span class="literal">true</span></span><br><span class="line">  &#125;))</span><br><span class="line">  .pipe(gulp.dest(<span class="string">'dist/images'</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h2 id="使用webp的方式"><a href="#使用webp的方式" class="headerlink" title="使用webp的方式"></a>使用webp的方式</h2><ul><li>服务端处理<br><code>在支持webp图片的浏览器向服务器发送请求时,会在请求头Accept中带上image/webp,服务器根据是否包含这个头信息决定是否返回webp图片</code></li><li>前端检测是否支持webp然后请求相应格式的图片<br>通过特性检查用户浏览器是否支持webp,通常在页面中先执行一段webp的检测,对页面中使用img标签引入图片时可使用picture兼容webp方式.如果是css中的引入的图片,使用检测webp代码给html设置单独的类,通过这个类名引入webp背景图片覆盖原来其他格式的图片.</li></ul><h2 id="在gulp构建工具中webp前端的使用方式"><a href="#在gulp构建工具中webp前端的使用方式" class="headerlink" title="在gulp构建工具中webp前端的使用方式"></a>在gulp构建工具中webp前端的使用方式</h2><ol><li><p>通过js判断是否支持webp 并给html设置class为webp</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 方法一 firefox不支持该语法 console.log(document.createElement('canvas').toDataURL('image/webp'))</span></span><br><span class="line"><span class="comment">if (document.createElement('canvas').toDataURL('image/webp').indexOf('data:image/webp') == 0) &#123;</span></span><br><span class="line"><span class="comment">    document.documentElement.classList.add('webp')</span></span><br><span class="line"><span class="comment">&#125;  */</span></span><br><span class="line"><span class="comment">// 方法二</span></span><br><span class="line"><span class="keyword">var</span> image = <span class="keyword">new</span> Image()</span><br><span class="line"><span class="comment">// 一张支持alpha透明度的webp的图片，使用base64编码</span></span><br><span class="line">image.src = <span class="string">'data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA=='</span>;</span><br><span class="line"><span class="comment">// 图片加载完成时候的操作</span></span><br><span class="line">image.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 图片加载成功且宽度为1，那么就代表支持webp了，因为这张base64图是webp格式。如果不支持会触发image.error方法</span></span><br><span class="line">  <span class="keyword">if</span> (image.width == <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">// html根节点添加class，并且埋入cookie</span></span><br><span class="line">    <span class="built_in">document</span>.documentElement.classList.add(<span class="string">'webp'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在页面中使用<picture>标签<br><code>&lt;picture&gt;标签利用多个&lt;source&gt;和一个&lt;img&gt;来设置显示的图像,如果用户的浏览器中不支持&lt;picture&gt;，浏览器将会将它渲染为一个&lt;div&gt;，并使用其中的&lt;img&gt;,不要将image/webp的格式放在旧格式的后面</code></picture></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">picture</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">srcset</span>=<span class="string">"images/adv1.png.webp"</span> <span class="attr">type</span>=<span class="string">'image/webp'</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/adv1.png"</span> <span class="attr">alt</span>=<span class="string">""</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">picture</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">picture</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">srcset</span>=<span class="string">"images/adv2.png.webp"</span> <span class="attr">type</span>=<span class="string">'image/webp'</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/adv2.png"</span> <span class="attr">alt</span>=<span class="string">""</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">picture</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>在css中使用背景图片时 支持webp时 使用webp背景图覆盖原来图片</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在scss中使用</span></span><br><span class="line">@<span class="keyword">mixin</span> bg(<span class="variable">$url</span>) &#123;</span><br><span class="line">  <span class="attribute">background</span>:url(<span class="variable">$url</span>) no-repeat center;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">100%</span>;</span><br><span class="line">  @at-root .webp &amp;&#123;</span><br><span class="line">    <span class="attribute">background-image</span>:url(<span class="variable">$url</span> + <span class="string">'.webp'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.sign-top</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">680px</span>;</span><br><span class="line">  @<span class="keyword">include</span> bg(<span class="string">'../images/bg-top.png'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>浏览器运行结果<br><code>支持webp的浏览器 采用webp图片</code><br><img src="/image/webp/webp4.png" alt="webp4"><br><code>不支持webp的浏览器 采用原来的图片格式</code><br><img src="/image/webp/webp5.png" alt="webp5"></p></li></ol><h2 id="在项目上线后处理后端返回的webp图片资源"><a href="#在项目上线后处理后端返回的webp图片资源" class="headerlink" title="在项目上线后处理后端返回的webp图片资源"></a>在项目上线后处理后端返回的webp图片资源</h2><p><code>前提是要后端 通过nginx+lua+imageMagic生成webp图片,然后前端使用picture标签显示webp图片不支持则使用原来图片格式jpg或png</code></p><h2 id="webp的缺陷在某些场景下失真很严重例如有颜色的纯文字"><a href="#webp的缺陷在某些场景下失真很严重例如有颜色的纯文字" class="headerlink" title="webp的缺陷在某些场景下失真很严重例如有颜色的纯文字"></a>webp的缺陷在某些场景下失真很严重例如有颜色的纯文字</h2><p><code>图片颜色变暗了</code><br><img src="/image/webp/webp3.png" alt="webp3"></p><h2 id="webp优势图片大小大大缩小"><a href="#webp优势图片大小大大缩小" class="headerlink" title="webp优势图片大小大大缩小"></a>webp优势图片大小大大缩小</h2><p><img src="/image/webp/webp2.png" alt="webp2"></p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://www.jianshu.com/p/73ca9e8b986a" target="_blank" rel="noopener">webp在项目中的实践</a><br><a href="https://www.jianshu.com/p/360b5654243e" target="_blank" rel="noopener">重要的图像优化之五：什么是WebP？</a></p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 其他 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>requestAnimationFrame实现动画</title>
      <link href="/requestAnimationFrame%E5%AE%9E%E7%8E%B0%E5%8A%A8%E7%94%BB/"/>
      <url>/requestAnimationFrame%E5%AE%9E%E7%8E%B0%E5%8A%A8%E7%94%BB/</url>
      
        <content type="html"><![CDATA[<p><code>requestAnimationFrame</code>是<code>html5</code>提供的一个专门用于请求动画的API，顾名思义就是请求动画帧。<code>requestAnimationFrame</code>采用系统时间间隔，保持最佳绘制效率，不会因为间隔时间过短，造成过度绘制，增加开销；也不会因为间隔时间太长，使用动画卡顿不流畅，让各种网页动画效果能够有一个统一的刷新机制，从而节省系统资源，提高系统性能，改善视觉效果。<br><a id="more"></a></p><h2 id="requestAnimationFrame的优点"><a href="#requestAnimationFrame的优点" class="headerlink" title="requestAnimationFrame的优点"></a>requestAnimationFrame的优点</h2><ul><li>采用系统时间间隔，保持最佳绘制效率，间隔时间相对精确，不会引起丢帧，不会卡断。而<code>setTimeout</code>和<code>setInterval</code>时间间隔不精确。</li><li><code>requestAnimationFrame</code>会把每一帧中的所有DOM操作集中起来，在一次重绘或回流中就完成，并且重绘或回流的时间间隔紧紧跟随浏览器的刷新频率,一般是大约每16.7ms执行一次</li><li><code>requestAnimationFrame</code>是由浏览器专门为动画提供的API，在运行时浏览器会自动优化方法的调用，并且如果页面不是激活状态下或者页面被隐藏或最小化时，动画会自动暂停，有效节省了CPU开销，当页面被激活时，动画从上次暂停的地方继续执行。可解决使用setTimeout或setInterval定时器的轮播图可能存在的问题。</li><li>使用<code>setTimeout或setInterval</code>实现的动画，当页面被隐藏或最小化时，setTimeout 仍然在后台执行动画任务，由于此时页面处于不可见或不可用状态，刷新动画是没有意义的，完全是浪费CPU资源，由于动画在后台执行在返回页面未刷新时，有时会看到轮播图快速执行多次。</li><li>在隐藏或不可见的元素中，<code>requestAnimationFrame</code>将不会进行重绘或回流，这当然就意味着更少的CPU、GPU和内存使用量</li></ul><h2 id="如何使用requestAnimationFrame"><a href="#如何使用requestAnimationFrame" class="headerlink" title="如何使用requestAnimationFrame"></a>如何使用requestAnimationFrame</h2><p><code>requestAnimationFrame的用法与setTimeout很相似，只是不需要设置时间间隔而已。requestAnimationFrame使用一个回调函数作为参数，这个回调函数会在浏览器重绘之前调用。它返回一个整数，表示定时器的编号，这个值可以传递给cancelAnimationFrame用于取消这个函数的执行。</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义requestAnimationFrame定时器</span></span><br><span class="line"><span class="keyword">var</span> timer = requestAnimationFrame(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(timer) <span class="comment">// 1</span></span><br><span class="line"><span class="comment">// cancelAnimationFrame 取消定时器</span></span><br><span class="line">cancelAnimationFrame(timer) <span class="comment">//控制台什么都不输出</span></span><br></pre></td></tr></table></figure></p><h2 id="兼容性处理"><a href="#兼容性处理" class="headerlink" title="兼容性处理"></a>兼容性处理</h2><p><code>IE9及以下浏览器不支持该方法</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.requestAnimFrame = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">window</span>.requestAnimationFrame ||</span><br><span class="line">  <span class="built_in">window</span>.webkitRequestAnimationFrame ||</span><br><span class="line">  <span class="built_in">window</span>.mozRequestAnimationFrame ||</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params"> callback </span>) </span>&#123;</span><br><span class="line">    <span class="built_in">window</span>.setTimeout( callback, <span class="number">1000</span> / <span class="number">60</span> )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></p><p><img src="/image/other/requestAnimationFrame.png" alt="requestAnimationFrame"></p><h2 id="简单使用案例"><a href="#简单使用案例" class="headerlink" title="简单使用案例"></a>简单使用案例</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-id">#porgress</span> &#123;</span></span><br><span class="line"><span class="undefined">      display: block;</span></span><br><span class="line"><span class="undefined">      margin: 16px 0;</span></span><br><span class="line"><span class="undefined">      width: 400px;</span></span><br><span class="line"><span class="undefined">      height: 16px;</span></span><br><span class="line"><span class="undefined">      border-radius: 8px;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">background-color</span>:<span class="selector-id">#ececf4</span>;</span></span><br><span class="line"><span class="undefined">      display: flex;</span></span><br><span class="line"><span class="undefined">      overflow: hidden;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-id">#porgress</span> <span class="selector-class">.inner</span>&#123;</span></span><br><span class="line"><span class="undefined">      width: 0px;</span></span><br><span class="line"><span class="undefined">      height: 16px;</span></span><br><span class="line"><span class="undefined">      border-radius: 8px;</span></span><br><span class="line"><span class="undefined">      font-size: 12px;</span></span><br><span class="line"><span class="undefined">      text-align: center;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">background-image</span>: <span class="selector-tag">linear-gradient</span>(<span class="selector-tag">to</span> <span class="selector-tag">right</span>, <span class="selector-id">#8575ff</span>, <span class="selector-id">#6bcdfe</span>);</span></span><br><span class="line"><span class="css">      <span class="comment">/* startColorstr表示起点的颜色，endColorstr 表示终点颜色。GradientType 表示渐变类型，0 为缺省值，表示垂直渐变，1 表示水平渐变 */</span></span></span><br><span class="line"><span class="undefined">      filter: progid:DXImageTransform.Microsoft.gradient(GradientType=1, startColorstr=#8575ff, endColorstr=#6bcdfe);/*IE9*/</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"porgress"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"inner"</span>&gt;</span>0%<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>执行动画<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">/* 当页面最小化  或  隐藏时  或者  切换页面处于未激活时</span></span><br><span class="line"><span class="undefined">动画会自动暂停  重新激活 动画会从上次暂停的地方继续执行*/</span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> timer;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> startTime = <span class="number">0</span></span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> endTime = <span class="number">0</span></span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> n;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> inner = <span class="built_in">document</span>.querySelector(<span class="string">'.inner'</span>)</span></span><br><span class="line"><span class="actionscript">btn.onclick = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="undefined">  n = 0;</span></span><br><span class="line"><span class="actionscript">  inner.style.width = <span class="string">'0px'</span></span></span><br><span class="line"><span class="undefined">  cancelAniFrame &amp;&amp; cancelAniFrame(timer)</span></span><br><span class="line"><span class="javascript">  startTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(startTime, <span class="string">'动画开始时间'</span>)</span></span><br><span class="line"><span class="undefined">  timer = requestAnimFrame(step)</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">step</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">if</span> (<span class="built_in">parseInt</span>(inner.style.width) &lt; <span class="number">400</span>) &#123;</span></span><br><span class="line"><span class="javascript">    inner.style.width = <span class="built_in">parseInt</span>(inner.style.width) + <span class="number">4</span> + <span class="string">'px'</span></span></span><br><span class="line"><span class="javascript">    inner.innerHTML =   <span class="built_in">parseInt</span>(inner.style.width) / <span class="number">4</span> + <span class="string">'%'</span></span></span><br><span class="line"><span class="undefined">    timer = requestAnimFrame(step)</span></span><br><span class="line"><span class="undefined">    n++</span></span><br><span class="line"><span class="actionscript">  &#125; <span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">    endTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(endTime, <span class="string">'动画结束时间'</span>)</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(n, <span class="string">'动画执行次数'</span>) <span class="comment">// 100</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log((endTime - startTime)/n, <span class="string">'每次执行的时间'</span>)</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 16.7 每次可能有点差别但都是16.x毫秒 在ie中大约时15ms</span></span></span><br><span class="line"><span class="undefined">    cancelAniFrame &amp;&amp; cancelAniFrame(timer)</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="javascript"><span class="built_in">window</span>.requestAnimFrame = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">return</span> <span class="built_in">window</span>.requestAnimationFrame || <span class="built_in">window</span>.webkitRequestAnimationFrame ||</span></span><br><span class="line"><span class="javascript">  <span class="built_in">window</span>.mozRequestAnimationFrame || <span class="function"><span class="keyword">function</span>(<span class="params"> callback </span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.setTimeout( callback, <span class="number">1000</span> / <span class="number">60</span> )</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;)();</span></span><br><span class="line"><span class="javascript"><span class="built_in">window</span>.cancelAniFrame = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">return</span> <span class="built_in">window</span>.cancelAnimationFrame || <span class="built_in">window</span>.mozCancelAnimationFrame</span></span><br><span class="line"><span class="undefined">&#125;)();</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js基础 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>vue开发中常见问题</title>
      <link href="/vue%E5%BC%80%E5%8F%91%E4%B8%AD%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
      <url>/vue%E5%BC%80%E5%8F%91%E4%B8%AD%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p><code>vue</code>开发中常见问题及简单处理办法,model层数据变化,但视图未及时更新,路由切换时或路由参数变化时（即组件切换），页面（组件）不更新.在路由组件内部或子组件想刷新当前路由,而不刷新刷新整个页面.<br><a id="more"></a></p><h2 id="vue关于img-src动态赋值问题-或在vue中的script中引用图片时"><a href="#vue关于img-src动态赋值问题-或在vue中的script中引用图片时" class="headerlink" title="vue关于img src动态赋值问题 或在vue中的script中引用图片时"></a>vue关于img src动态赋值问题 或在vue中的script中引用图片时</h2><p><code>只需要加上require即可</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 场景1 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">"require('../assets/images/'+imgsrc+'.png')"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 场景2 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">this</span>.photo = <span class="built_in">require</span>(<span class="string">'../assets/img/photo.png'</span>)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="生产环境请将-productionSourceMap-false-即生产环境-关闭sourcemap-否则会在浏览器source里面看到所有源码"><a href="#生产环境请将-productionSourceMap-false-即生产环境-关闭sourcemap-否则会在浏览器source里面看到所有源码" class="headerlink" title="生产环境请将 productionSourceMap: false 即生产环境 关闭sourcemap 否则会在浏览器source里面看到所有源码"></a>生产环境请将 <code>productionSourceMap: false</code> 即生产环境 关闭sourcemap 否则会在浏览器source里面看到所有源码</h2><h2 id="vue数据更新了但页面视图没更新问题"><a href="#vue数据更新了但页面视图没更新问题" class="headerlink" title="vue数据更新了但页面视图没更新问题"></a>vue数据更新了但页面视图没更新问题</h2><ol><li><p>利用 Vue.$forceUpdate() 解决 vue数据更新了但页面视图没更新问题</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/vue/2.2.2/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;JSON.stringify(obj)&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">  el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">  data:&#123;</span></span><br><span class="line"><span class="actionscript">    obj: &#123; id: <span class="string">'001'</span> &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="actionscript">vm.obj.msg = <span class="string">'hello'</span> <span class="comment">// 不是响应式的 视图未反生变化 仍然展示 &#123;"id":"001"&#125;</span></span></span><br><span class="line"><span class="actionscript">vm.$forceUpdate() <span class="comment">// 加上强制更新视图 展示 &#123;"id":"001","msg":"hello"&#125;</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>通过<strong>重新赋值</strong>解决vue数据更新了但页面视图没更新问题</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/vue/2.2.2/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;JSON.stringify(obj)&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">  el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">  data:&#123;</span></span><br><span class="line"><span class="actionscript">    obj: &#123; id: <span class="string">'001'</span> &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="actionscript">vm.obj.msg = <span class="string">'hello'</span> <span class="comment">// 不是响应式的 视图未反生变化 仍然展示 &#123;"id":"001"&#125;</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// 使用重新赋值解决 数据变化 视图未发生变化</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// 将属性添加到data对象上才能让 Vue.js 转换它，才能让它是响应的。</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// 方式1 直接构建新对象再重新赋值 推荐使用</span></span></span><br><span class="line"><span class="undefined">vm.obj = &#123;</span></span><br><span class="line"><span class="undefined">    ...vm.obj,</span></span><br><span class="line"><span class="actionscript">    msg: <span class="string">'hello'</span></span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="actionscript"><span class="comment">// 方式2 将对象合并到新对象上再重新赋值 会改变对象的属性顺序</span></span></span><br><span class="line"><span class="javascript">vm.obj = <span class="built_in">Object</span>.assign(&#123;<span class="attr">msg</span>: <span class="string">'hello'</span>&#125;,vm.obj)</span></span><br><span class="line"><span class="actionscript"><span class="comment">// vm.obj = Object.assign(vm.obj, &#123;msg: 'hello'&#125;)  // 将新对象合并到旧对象再赋值 无法实现</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>使用 <code>Vue.set()</code> 或 <code>this.$set()</code><br><code>Vue.set(对象, 属性, 值)</code> 或 <code>this.$set(对象, 属性, 值)</code></p></li></ol><ul><li><p>无法检测对象属性的添加或删除<br><code>官方 - 由于 JavaScript（ES5） 的限制，Vue.js 不能检测到对象属性的添加或删除。因为 Vue.js 在初始化实例时将属性转为 getter/setter，所以属性必须在 data 对象上才能让 Vue.js 转换它，才能让它是响应的。</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/vue/2.2.2/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;JSON.stringify(obj)&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">  el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">  data:&#123;</span></span><br><span class="line"><span class="actionscript">    obj: &#123; id: <span class="string">'001'</span> &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="actionscript"><span class="comment">// vm.obj.msg = 'hello' // 不是响应式的 视图未反生变化 仍然展示 &#123;"id":"001"&#125;</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// delete vm.obj.id       // 不是响应式的 仍然展示 &#123;"id":"001"&#125;</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// 解决办法</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// 动态添加 - Vue.set</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// Vue.set(vm.obj, 'msg', 'hello') // 响应式的 视图展示  &#123;"id":"001","msg":"hello"&#125;</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// // 动态添加 - vm.$set</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// vm.$set(vm.obj, 'msg', 'hello') // 响应式的 视图展示  &#123;"id":"001","msg":"hello"&#125;</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// // 动态添加多个</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// vm.obj = Object.assign(&#123;&#125;, vm.obj, &#123; 'msg': 'hello' &#125;) // 响应式的 视图展示 &#123;"id":"001","msg":"hello"&#125;</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// // 动态移除 - Vue.delete</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// Vue.delete(vm.obj, 'id') // 响应式的 视图展示 &#123;&#125;</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// // 动态移除 - vm.$delete</span></span></span><br><span class="line"><span class="actionscript">vm.$<span class="keyword">delete</span>(vm.obj, <span class="string">'id'</span>) <span class="comment">// 响应式的 视图展示 &#123;&#125;</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>Vue 不能检测通过数组索引直接修改一个数组项也不能检测到数组长度的变化<br><code>官方 - 由于 JavaScript 的限制，Vue 不能检测数组和对象的变化；</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-for</span>=<span class="string">"item in items"</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">  el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">  data: &#123;</span></span><br><span class="line"><span class="actionscript">    items: [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="actionscript">vm.items[<span class="number">1</span>] = <span class="string">'x'</span> <span class="comment">// 不是响应性的 页面中items依然为 ['a', 'b', 'c']</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// 解决办法</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// Vue.set</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// Vue.set(vm.items, 1, 'x') // 页面中items同步响应修改为 ['a', 'x', 'c']</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// vm.$set</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// vm.$set(vm.items, 1, 'x') // 页面中items同步响应修改为 ['a', 'x', 'c']</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// Array.prototype.splice</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// vm.items.splice(1, 1, 'x') // 页面中items同步响应修改为 ['a', 'x', 'c']</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// // 数组长度的变化</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// vm.items.length = 2 // 不是响应性的 页面中items依然为 ['a', 'b', 'c']</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// 解决数组长度未变化</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// vm.items.splice(2) // 页面中items同步响应修改为 ['a', 'x']</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="路由切换时或路由参数变化时（即组件切换），页面（组件）不更新（数据不更新）"><a href="#路由切换时或路由参数变化时（即组件切换），页面（组件）不更新（数据不更新）" class="headerlink" title="路由切换时或路由参数变化时（即组件切换），页面（组件）不更新（数据不更新）"></a>路由切换时或路由参数变化时（即组件切换），页面（组件）不更新（数据不更新）</h2><p><code>路由视图组件引用了相同组件时，当路由参会变化时，会导致该组件无法更新</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- app.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/home/foo"</span>&gt;</span>To Foo<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/home/baz"</span>&gt;</span>To Baz<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/home/bar"</span>&gt;</span>To Bar<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- home.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"home"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">'Home'</span>,</span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123; msg: <span class="keyword">this</span>.$route.params.name &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- router/index.js --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 路由构建选项 routes 中配置了一个动态路由 '/home/:name'，它们共用一个路由组件 Home，这代表他们复用 RouterView</span></span><br><span class="line"><span class="comment">当进行路由切换时，页面只会渲染第一次路由匹配到的参数，之后再进行路由切换时，msg 是没有变化的。 --&gt;</span></span><br><span class="line">new VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;path: '/home/:name', component: Home &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><code>解决办法</code></p><ol><li><p>通过 watch 监听 $route 的变化。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 在home.vue中监听 $route 变化 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"home"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">'Home'</span>,</span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123; msg: <span class="keyword">this</span>.$route.params.name &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  watch: &#123;</span></span><br><span class="line"><span class="undefined">    $route: &#123;</span></span><br><span class="line"><span class="actionscript">      handler: <span class="function"><span class="keyword">function</span> <span class="params">(route)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.msg = route.params.name</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="actionscript">      immediate: <span class="literal">true</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>利用组件内守卫<code>beforeRouteUpdate</code>路由参数更新时触发 可以代替watch</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"home"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">'Home'</span>,</span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123; msg: <span class="keyword">this</span>.$route.params.name &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="javascript">  beforeRouteUpdate (to, <span class="keyword">from</span>, next) &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">this</span>.msg = to.params.name</span></span><br><span class="line"><span class="undefined">    next()</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>给&lt;router-view :key=&quot;key&quot;&gt;&lt;/router-view&gt;增加一个不同:key值</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 修改app.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/home/foo"</span>&gt;</span>To Foo<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/home/Bar"</span>&gt;</span>To Bar<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span> <span class="attr">:key</span>=<span class="string">"key"</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">'app'</span>,</span></span><br><span class="line"><span class="undefined">  computed: &#123;</span></span><br><span class="line"><span class="undefined">    key () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="keyword">this</span>.$route.path + <span class="built_in">Math</span>.random()</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>给&lt;router-view v-if=&quot;routerAlive&quot;&gt;&lt;/router-view&gt;增加一个不同v-if值，先摧毁&lt;router-link&gt;，然后再重新创建</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/home/foo"</span> @<span class="attr">click.native</span>=<span class="string">"routerRefresh"</span>&gt;</span>To Foo<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/home/Bar"</span> @<span class="attr">click.native</span>=<span class="string">"routerRefresh"</span>&gt;</span>To Bar<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span> <span class="attr">v-if</span>=<span class="string">"routerAlive"</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123; routerAlive: <span class="literal">true</span> &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="undefined">    routerRefresh () &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.routerAlive = <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.routerAlive = <span class="literal">true</span></span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><p><code>总结： 如果使用的是编程式导航路由，还是使用watch监听路由或者使用组件内路由钩子beforeRouteUpdate比较好</code></p><h2 id="在路由组件内部或子组件刷新当前路由即刷新当前路由页面"><a href="#在路由组件内部或子组件刷新当前路由即刷新当前路由页面" class="headerlink" title="在路由组件内部或子组件刷新当前路由即刷新当前路由页面"></a>在路由组件内部或子组件刷新当前路由即刷新当前路由页面</h2><p><code>在日常开发中在当前路由组件中或当前路由子组件执行删除或新增数据之后需要刷新当前路由页面更新数据，但又不想使用location.reload(), 则可以使用provide和inject配合router-view的v-if来解决刷新问题</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 根组件 app.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span> <span class="attr">v-if</span>=<span class="string">"routerAlive"</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123; routerAlive: <span class="literal">true</span> &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="actionscript">  provide () &#123; <span class="comment">// 在父组件中创建属性</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">      routerRefresh: <span class="keyword">this</span>.routerRefresh</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="undefined">    routerRefresh () &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.routerAlive = <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.routerAlive = <span class="literal">true</span></span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Home.vue 当前路由页面 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"home"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Child</span> <span class="attr">:parentData</span>=<span class="string">"parentData"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> Child <span class="keyword">from</span> <span class="string">'./child'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">'Home'</span>,</span></span><br><span class="line"><span class="undefined">  components: &#123;</span></span><br><span class="line"><span class="undefined">    Child</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">      parentData: [1, 2]</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- child.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;parentData&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"delData"</span>&gt;</span>更改数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"linkToHome"</span>&gt;</span>跳转到当前路由，parentData为修改后[1, 2, 3]<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"linkToHomeFresh"</span>&gt;</span>刷新当前路由，使parentData回到初始值[1, 2]<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  props: [<span class="string">'parentData'</span>],</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">'child'</span>,</span></span><br><span class="line"><span class="actionscript">  inject: [<span class="string">'routerRefresh'</span>], <span class="comment">// 在子组件中注入在父组件中出创建的属性</span></span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="undefined">    delData () &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.parentData.push(<span class="number">3</span>)</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    linkToHome () &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.$router.push(<span class="string">'/'</span>) <span class="comment">// 路由跳转到首页但未刷新首页</span></span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    linkToHomeFresh () &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.routerRefresh() <span class="comment">// 刷新首页</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"scss"</span> <span class="attr">scoped</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-tag">button</span>&#123; <span class="attribute">margin-top</span>: <span class="number">10px</span> &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>##</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>使用uniapp开发跨端小程序</title>
      <link href="/uniapp/"/>
      <url>/uniapp/</url>
      
        <content type="html"><![CDATA[<p><code>uni-app</code>是一个使用 Vue.js 开发所有前端应用的框架，开发者编写一套代码，可发布到iOS、Android、H5、以及各种小程序（微信/支付宝/百度/头条/QQ/钉钉/淘宝）、快应用等多个平台。uni-app在跨平台的过程中，不牺牲平台特色，可优雅的调用平台专有能力。<br><a id="more"></a></p><h2 id="uniapp官网地址"><a href="#uniapp官网地址" class="headerlink" title="uniapp官网地址"></a>uniapp官网地址</h2><p><a href="https://uniapp.dcloud.io" target="_blank" rel="noopener">uniapp官网地址</a></p><h2 id="uniapp的优势"><a href="#uniapp的优势" class="headerlink" title="uniapp的优势"></a>uniapp的优势</h2><ul><li>开发者/案例数量更多</li><li>平台能力不受限  支持原生代码混写和原生sdk集成</li><li>性能体验优秀 体验更好的Hybrid框架，加载新页面速度更快</li><li>周边生态丰富 支持NPM、支持小程序组件和SDK、兼容mpvue组件和项目、兼容weex组件</li><li>学习成本低 采用vue语法+微信小程序api</li><li>开发成本低 开发成本，招聘、管理、测试各方面成本都大幅下降</li></ul><h2 id="uinapp特色"><a href="#uinapp特色" class="headerlink" title="uinapp特色"></a>uinapp特色</h2><ul><li><a href="https://uniapp.dcloud.io/platform" target="_blank" rel="noopener">条件编译</a><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> APP-PLUS</span></span><br><span class="line">需要条件编译的代码            仅出现在App平台下的代码</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> H5</span></span><br><span class="line">需要条件编译的代码            除了H5平台,其他平台均存在的代码</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> H5 || MP-WEIXIN</span></span><br><span class="line">需要条件编译的代码            在H5平台或微信小程序平台存在的代码</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure></li></ul><p><code>条件编译是利用注释实现的，在不同语法里注释写法不一样，js使用 // #ifdef、css 使用 /* #ifdef */、vue/nvue 模板里使用 &lt;!-- #ifdef --&gt;</code></p><ul><li>App端的Nvue开发</li><li>HTML5+</li></ul><h2 id="uniapp开发环境搭建"><a href="#uniapp开发环境搭建" class="headerlink" title="uniapp开发环境搭建"></a>uniapp开发环境搭建</h2><ul><li>通过 HBuilderX 可视化界面 <a href="https://uniapp.dcloud.io/quickstart" target="_blank" rel="noopener">快速上手</a></li></ul><p><code>运行uni-app 第一次使用，需要配置开发工具的相关路径。点击工具栏的运行 -&gt; 运行到小程序模拟器 -&gt; 运行设置，配置相应小程序开发者工具的路径</code></p><p><code>在微信开发者工具打开时,需要先在微信开发者工具中开启服务端口 设置 -&gt; 安全 -&gt; 开启服务端口</code></p><ul><li>通过vue-cli命令行<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">全局安装vue-cli  npm install -g @vue/cli</span><br><span class="line">创建uni-app  vue create -p dcloudio/uni-preset-vue my-project</span><br><span class="line">运行、发布uni-app</span><br><span class="line">npm run <span class="symbol">dev:</span>%PLATFORM%</span><br><span class="line">npm run <span class="symbol">build:</span>%PLATFORM%</span><br><span class="line">%PLATFORM% 取值 app-plus(app平台)、h5、mp-alipay(支付宝)、mp-baidu(百度)、mp-weixin(微信)、mp-toutiao(头条)、</span><br><span class="line">mp-qq(qq)、mp-<span class="number">360</span>(<span class="number">360</span>)、quickapp-webview(快应用通用)、quickapp-webview-huawei(快应用华为)、quickapp-webview-<span class="class"><span class="keyword">union</span>(快应用联盟)</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="uniapp生命周期"><a href="#uniapp生命周期" class="headerlink" title="uniapp生命周期"></a>uniapp生命周期</h2><p><a href="https://uniapp.dcloud.io/collocation/frame/lifecycle" target="_blank" rel="noopener">生命周期</a></p><ul><li><p>应用生命周期 <code>只能在App.vue中使用</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// onLaunch  应用初始化完成 全局只触发一次</span></span><br><span class="line"><span class="comment">// onShow  应用启动的时候 或者从后台进入前台会触发</span></span><br><span class="line"><span class="comment">// onHide  应用从前台进入后台</span></span><br></pre></td></tr></table></figure></li><li><p>页面生命周期</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// onload 监听页面加载 可以获取页面传参</span></span><br><span class="line"><span class="comment">// onReady 监听页面的初次渲染完成</span></span><br><span class="line"><span class="comment">// onShow 监听页面显示 包括从下级页面点返回露出当前页面</span></span><br><span class="line"><span class="comment">// onHide 监听页面隐藏</span></span><br><span class="line"><span class="comment">// onUnload 监听页面卸载</span></span><br><span class="line"><span class="comment">// onPullDownRefresh 监听用户下拉动作，一般用于下拉刷新</span></span><br><span class="line"><span class="comment">// onReachBottom 页面滚动到底部的事件 一般用于上拉加载</span></span><br><span class="line"><span class="comment">// onTabItemTap 点击 tabbar 触发</span></span><br><span class="line"><span class="comment">// onShareAppMessage 用户点击右上角分享</span></span><br></pre></td></tr></table></figure></li><li><p>组件生命周期(即vue的生命周期)uni-app 组件支持的生命周期，与vue标准组件的生命周期相同<br><code>常用生命周期执行顺序</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App Launch</span></span><br><span class="line"><span class="comment">// APP Show</span></span><br><span class="line"><span class="comment">// Page Onload</span></span><br><span class="line"><span class="comment">// Page onShow</span></span><br><span class="line"><span class="comment">// component beforeCreate</span></span><br><span class="line"><span class="comment">// component created</span></span><br><span class="line"><span class="comment">// component beforeMounted</span></span><br><span class="line"><span class="comment">// component Mounted</span></span><br><span class="line"><span class="comment">// Page onReady</span></span><br><span class="line"><span class="comment">// component beforeDestroy</span></span><br><span class="line"><span class="comment">// component destroyed</span></span><br><span class="line"><span class="comment">// Page onUnload</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="uniap默认模板目录"><a href="#uniap默认模板目录" class="headerlink" title="uniap默认模板目录"></a>uniap默认模板目录</h2><ul><li>components 自定义组件的目录</li><li>pages 页面存放目录</li><li>static 静态文件资源目录</li><li>unpackage 编译后的文件存放目录</li><li>app.vue 全局公用的状态数据等</li><li>main.js 应用入口</li><li>manifest.json 项目基础配置</li><li>pages.json 页面相关配置 注册页面 设置页面名称等</li><li>uni.scss 公用的scss变量 无需import这个文件</li></ul><h2 id="uniapp配置启动模式-condition"><a href="#uniapp配置启动模式-condition" class="headerlink" title="uniapp配置启动模式 condition"></a>uniapp配置启动模式 condition</h2><h2 id="uniapp使用中其他问题"><a href="#uniapp使用中其他问题" class="headerlink" title="uniapp使用中其他问题"></a>uniapp使用中其他问题</h2><ul><li><p>屏蔽自定义导航栏 <code>仅支持 default/custom。custom即取消默认的原生导航栏</code> <a href="https://uniapp.dcloud.io/collocation/pages?id=customnav" target="_blank" rel="noopener">注意事项</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"globalStyle"</span>: &#123;</span><br><span class="line">  <span class="string">"navigationStyle"</span>: <span class="string">"custom"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>自动导入自定义组件 无需import</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// components/navbar/navbar.vue</span></span><br><span class="line"><span class="comment">// index.vue 中 直接使用 &lt;navbar /&gt;  等同于以下</span></span><br><span class="line"><span class="comment">// import navbar from '../components/navbar/navbar.vue'</span></span><br><span class="line"><span class="comment">// components: &#123;</span></span><br><span class="line"><span class="comment">//   navbar</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure></li><li><p>在非H5 app mp-alipay中胶囊的位置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取胶囊位置</span></span><br><span class="line"><span class="keyword">const</span> menuButtonInfo = uni.getMenuButtonBoundingClientRect()</span><br><span class="line"><span class="built_in">console</span>.log(menuButtonInfo)</span><br><span class="line"><span class="comment">// wx &#123;width: 87, height: 32, left: 278, right: 365, top: 26, bottom: 58&#125;</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> uniapp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uniapp </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Vue-cli3常用配置</title>
      <link href="/Vue-Cli3/"/>
      <url>/Vue-Cli3/</url>
      
        <content type="html"><![CDATA[<p><code>vue-cli3.0</code> <code>功能丰富</code>：对babel、Typescript、ESLint提供开箱即用的支持;<code>易于扩展</code>;<code>无需Eject</code>：vue cli 完全可配置的，无需再使用webpack配置;<code>CLI图形化界面</code>：vue ui图形化界面创建、开发和管理项目;<code>即刻创建原型</code>：用单个vue文件实现新的灵感;为现代浏览器轻松产出原生的ES2015代码，或将你的vue组件构建为原生的Web Components组件<br><a id="more"></a></p><h2 id="Vue-cli3安装"><a href="#Vue-cli3安装" class="headerlink" title="Vue-cli3安装"></a>Vue-cli3安装</h2><ul><li><a href="https://cli.vuejs.org/zh/guide/" target="_blank" rel="noopener">Vue-cli</a></li><li>先卸载vue-cli2 <code>npm uninstall vue-cli -g</code></li><li>安装vue-cli3 <code>npm install -g @vue/cli</code></li><li>查看安装vue-cli版本 <code>vue -V</code></li><li>使用图形界面创建项目  <code>vue ui</code></li><li>使用命令行创建项目 <code>vue create project</code></li><li>进入项目目录 <code>cd project</code></li><li>启动项目 <code>npm run serve</code><br><code>在Vue-cli3中要使用vue-cli2.x版本 需要全局安装桥接工具 npm install -g @vue/cli-init 然后在使用vue init webpack project 初始化项目</code></li><li><p>配置<code>npm run serve</code>后自动打开浏览器 在package.json中修改</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"serve"</span>: <span class="string">"vue-cli-service serve --open"</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li><li><p>vue-cli3默认的目录结构</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">├── node_modules     <span class="comment"># 项目依赖包目录</span></span><br><span class="line">├── public</span><br><span class="line">│   ├── favicon.ico  <span class="comment"># ico图标</span></span><br><span class="line">│   └── index.html   <span class="comment"># 首页模板</span></span><br><span class="line">├── src</span><br><span class="line">│   ├── assets       <span class="comment"># 样式图片目录</span></span><br><span class="line">│   ├── components   <span class="comment"># 组件目录</span></span><br><span class="line">│   ├── views        <span class="comment"># 页面目录</span></span><br><span class="line">│   ├── App.vue      <span class="comment"># 父组件</span></span><br><span class="line">│   ├── main.<span class="keyword">js </span>     <span class="comment"># 入口文件</span></span><br><span class="line">│   ├── router.<span class="keyword">js </span>   <span class="comment"># 路由配置文件</span></span><br><span class="line">│   └── store.<span class="keyword">js </span>    <span class="comment"># vuex状态管理文件</span></span><br><span class="line">├── .gitignore       <span class="comment"># git忽略文件</span></span><br><span class="line">├── .postcssrc.<span class="keyword">js </span>   <span class="comment"># postcss配置文件</span></span><br><span class="line">├── <span class="keyword">babel.config.js </span> <span class="comment"># babel配置文件</span></span><br><span class="line">└── package.<span class="keyword">json </span>    <span class="comment"># 包管理文件</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="与vue-cli-2-x的差异"><a href="#与vue-cli-2-x的差异" class="headerlink" title="与vue-cli 2.x的差异"></a>与vue-cli 2.x的差异</h2><p><code>使用vue-cli 2.x构建出的目录会包含相应的webpack配置文件，但是在vue-cli 3.x中提供了一种开箱即用的模式，隐藏了webpack的配置，即你无需配置 webpack 就可以运行项目，并且它提供了一个 vue.config.js 文件来满足开发者对其封装的 webpack 默认配置的修改</code></p><h2 id="vue-config-js配置"><a href="#vue-config-js配置" class="headerlink" title="vue.config.js配置"></a>vue.config.js配置</h2><p><code>Vue-cli3</code>中<code>vue.config.js</code>文件配置参考文档：<a href="https://cli.vuejs.org/zh/config" target="_blank" rel="noopener">参考文档</a>`<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js 配置说明</span></span><br><span class="line"><span class="comment">//官方vue.config.js 参考文档 https://cli.vuejs.org/zh/config/#css-loaderoptions</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// 部署生产环境和开发环境下的URL。默认情况下，Vue CLI 会假设你的应用是被部署在一个域名的根路径上</span></span><br><span class="line">  <span class="comment">//例如 https://www.my-app.com/。如果应用被部署在一个子路径上，你就需要用这个选项指定这个子路径。例如，如果你的应用被部署在 https://www.my-app.com/my-app/，则设置 publicPath 为 /my-app/。</span></span><br><span class="line">  publicPath: process.env.NODE_ENV === <span class="string">"production"</span> ?<span class="string">'/my-app/'</span>:<span class="string">'/'</span>,</span><br><span class="line">  <span class="comment">// outputDir: 在npm run build 生成文件的目录名称（要和baseUrl的生产环境路径一致）</span></span><br><span class="line">  outputDir: <span class="string">"dist"</span>,</span><br><span class="line">  <span class="comment">//用于放置生成的静态资源 (js、css、img、fonts) 的；（项目打包之后，静态资源会放在这个文件夹下）</span></span><br><span class="line">  assetsDir: <span class="string">"assets"</span>,</span><br><span class="line">  <span class="comment">//指定生成的 index.html 的输出路径  (打包之后，改变系统默认的index.html的文件名)</span></span><br><span class="line">  <span class="comment">// indexPath: "myIndex.html",</span></span><br><span class="line">  <span class="comment">//默认情况下，生成的静态资源文件名中包含了 hash以便更好的控制缓存。将这个选项设为 false 来关闭文件名哈希。(false的时候就是让原来的文件名不改变)</span></span><br><span class="line">  filenameHashing: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// lintOnSave：&#123; type:Boolean default:true &#125; 问你是否使用eslint</span></span><br><span class="line">  lintOnSave: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">//是否使用包含运行时编译器的 Vue 构建版本。设置为 true 后你就可以在 Vue 组件中使用 template 选项了，但是这会让你的应用额外增加 10kb 左右。(默认false)</span></span><br><span class="line">  runtimeCompiler: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 如果你不需要生产环境的 source map，可以将其设置为 false 以加速生产环境构建。</span></span><br><span class="line"><span class="comment">   * 打包之后发现map文件过大，项目文件体积很大，设置为false就可以不输出map文件</span></span><br><span class="line"><span class="comment">   * 不使用source map 可以防止在生产环境看到源代码</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  productionSourceMap: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// 它支持webPack-dev-server的所有选项</span></span><br><span class="line">  devServer: &#123;</span><br><span class="line">    host: <span class="string">"localhost"</span>, <span class="comment">// 指定使用一个host默认是 localhost</span></span><br><span class="line">    port: <span class="number">8899</span>, <span class="comment">// 端口号</span></span><br><span class="line">    https: <span class="literal">false</span>, <span class="comment">// https:&#123;type:Boolean&#125;</span></span><br><span class="line">    open: <span class="literal">true</span>, <span class="comment">//是否自动启动浏览器</span></span><br><span class="line">    overlay: &#123;</span><br><span class="line">      <span class="comment">// 设置让浏览器 overlay 同时显示警告和错误 false不显示</span></span><br><span class="line">      warnings: <span class="literal">false</span>,</span><br><span class="line">      errors: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 配置代理</span></span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="string">"/api"</span>: &#123;</span><br><span class="line">        target: <span class="string">"&lt;url&gt;"</span>,</span><br><span class="line">        ws: <span class="literal">true</span>,</span><br><span class="line">        changeOrigin: <span class="literal">true</span>,</span><br><span class="line">        pathRewrite: &#123; <span class="comment">// 替换路径</span></span><br><span class="line">          <span class="string">'^/api'</span>: <span class="string">'/jsons'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//调整 webpack 配置 在 vue.config.js 中的 configureWebpack 选项提供一个对象</span></span><br><span class="line">  <span class="comment">//该对象将会被 webpack-merge 合并入最终的 webpack 配置</span></span><br><span class="line">  configureWebpack: &#123; <span class="comment">// 配置别名方式1</span></span><br><span class="line">    name: name,</span><br><span class="line">    resolve: &#123;</span><br><span class="line">      alias: &#123; <span class="comment">// 配置别名 将复杂的文件路径定义成一个变量来访问</span></span><br><span class="line">        <span class="string">'@'</span>: resolve(<span class="string">'src'</span>),</span><br><span class="line">        <span class="string">'_common'</span>: resolve(<span class="string">'src/common'</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 是一个函数，会接收一个基于 webpack-chain 的 ChainableConfig 实例。允许对内部的 webpack 配置进行更细粒度的修改。可以让我们能够使用链式操作来修改配置</span></span><br><span class="line">  chainWebpack(config) &#123;</span><br><span class="line">    config.module</span><br><span class="line">      .rule(<span class="string">'vue'</span>)</span><br><span class="line">      .use(<span class="string">'vue-loader'</span>)</span><br><span class="line">      .loader(<span class="string">'vue-loader'</span>)</span><br><span class="line">      .tap(<span class="function"><span class="params">options</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 修改它的选项...</span></span><br><span class="line">        <span class="keyword">return</span> option</span><br><span class="line">      &#125;)</span><br><span class="line">    <span class="comment">// 配置别名方式2 在样式中或html模板中引用路径的间写时前面需要加上~符 避免解析失败</span></span><br><span class="line">    <span class="comment">// .bg&#123;background-url:~_assets/common/bg1.jpg&#125; 或 &lt;img src="~_assets/common/banner1.png" /&gt;</span></span><br><span class="line">    config.resolve.alias</span><br><span class="line">      .set(<span class="string">'@'</span>, path.resolve(<span class="string">'src'</span>))</span><br><span class="line">      .set(<span class="string">'_assets'</span>, path.resolve(<span class="string">'src/assets'</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h2 id="查看默认及修改后的webpack配置"><a href="#查看默认及修改后的webpack配置" class="headerlink" title="查看默认及修改后的webpack配置"></a>查看默认及修改后的webpack配置</h2><ul><li><code>vue inspect</code> 查看所有的webpack配置</li><li><code>vue inspect --mode &lt;mode&gt;</code>  查看某个环境的配置 mode取值有 develop、test、develop</li><li><p><code>vue inspect --rules</code> 查看所有已配置规则名称列表</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">vue inspect --rules</span><br><span class="line">[</span><br><span class="line">  <span class="string">'vue'</span>,</span><br><span class="line">  <span class="string">'images'</span>,</span><br><span class="line">  <span class="string">'svg'</span>,</span><br><span class="line">  <span class="string">'media'</span>,</span><br><span class="line">  <span class="string">'fonts'</span>,</span><br><span class="line">  <span class="string">'pug'</span>,</span><br><span class="line">  <span class="string">'css'</span>,</span><br><span class="line">  <span class="string">'postcss'</span>,</span><br><span class="line">  <span class="string">'scss'</span>,</span><br><span class="line">  <span class="string">'sass'</span>,</span><br><span class="line">  <span class="string">'less'</span>,</span><br><span class="line">  <span class="string">'stylus'</span>,</span><br><span class="line">  <span class="string">'js'</span>,</span><br><span class="line">  <span class="string">'eslint'</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></li><li><p><code>vue inspect --rule &lt;ruleName&gt;</code> 查看指定规则的配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">vue inspect --rule images</span><br><span class="line">/* config.module.rule(<span class="string">'images'</span>) */</span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">test</span>: /\.(png|jpe?g|gif|webp)(\?.*)?$/,</span><br><span class="line">  use: [</span><br><span class="line">    /* config.module.rule(<span class="string">'images'</span>).use(<span class="string">'url-loader'</span>) */</span><br><span class="line">    &#123;</span><br><span class="line">      loader: <span class="string">'xxx\\node_modules\\url-loader\\dist\\cjs.js'</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        <span class="built_in">limit</span>: 4096,</span><br><span class="line">        fallback: &#123;</span><br><span class="line">          loader: <span class="string">'xxx\\node_modules\\file-loader\\dist\\cjs.js'</span>,</span><br><span class="line">          options: &#123;</span><br><span class="line">            name: <span class="string">'img/[name].[hash:8].[ext]'</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>vue inspect --plugins</code> 查看所有plugins插件配置名称列表</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">vue inspect --plugins</span><br><span class="line">[</span><br><span class="line">  <span class="string">'vue-loader'</span>,</span><br><span class="line">  <span class="string">'define'</span>,</span><br><span class="line">  <span class="string">'case-sensitive-paths'</span>,</span><br><span class="line">  <span class="string">'friendly-errors'</span>,</span><br><span class="line">  <span class="string">'html'</span>,</span><br><span class="line">  <span class="string">'preload'</span>,</span><br><span class="line">  <span class="string">'prefetch'</span>,</span><br><span class="line">  <span class="string">'copy'</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></li><li><p><code>vue inspect plugin &lt;pluginName&gt;</code> 查看指定的plugin插件的配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vue inspect --plugin html</span><br><span class="line">/* config.plugin(<span class="string">'html'</span>) */</span><br><span class="line">new HtmlWebpackPlugin(</span><br><span class="line">  &#123;</span><br><span class="line">    title: <span class="string">'pro'</span>,</span><br><span class="line">    templateParameters: <span class="function"><span class="title">function</span></span> () &#123; /* omitted long <span class="keyword">function</span> */ &#125;,</span><br><span class="line">    template: <span class="string">'xxx\\public\\index.html'</span></span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li><li><p><code>vue inspect plugins</code> 查看所有plugins插件配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  /* config.plugin(<span class="string">'vue-loader'</span>) */</span><br><span class="line">  new VueLoaderPlugin(),</span><br><span class="line">  /* config.plugin(<span class="string">'define'</span>) */</span><br><span class="line">  new DefinePlugin(</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">'process.env'</span>: &#123;</span><br><span class="line">        NODE_ENV: <span class="string">'"development"'</span>,</span><br><span class="line">        BASE_URL: <span class="string">'"/"'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ),</span><br><span class="line">  /* config.plugin(<span class="string">'case-sensitive-paths'</span>) */</span><br><span class="line">  new CaseSensitivePathsPlugin(),</span><br><span class="line">  ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li></ul><h2 id="env文件与环境配置"><a href="#env文件与环境配置" class="headerlink" title=".env文件与环境配置"></a>.env文件与环境配置</h2><p>不同的配置文件.env对应不同的环境<br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">.env</span>                <span class="comment"># 在所有的环境中被载入</span></span><br><span class="line"><span class="string">.env.local</span>          <span class="comment"># 在所有的环境中被载入，但会被 git 忽略</span></span><br><span class="line"><span class="string">.env.</span>[mode]         <span class="comment"># 只在指定的模式中被载入</span></span><br><span class="line"><span class="string">.env.</span>[mode]<span class="string">.local</span>   <span class="comment"># 只在指定的模式中被载入，但会被 git 忽略</span></span><br><span class="line">相同配置项的权重：<span class="string">.env.</span>[mode]<span class="string">.local</span> &gt; <span class="string">.env.</span>[mode] &gt; <span class="string">.env.local</span> &gt; <span class="string">.env</span></span><br><span class="line">修改package.json中的npm-script脚本的命令如：</span><br><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">//</span> 测试环境 对应配置文件 <span class="string">.env.test</span></span><br><span class="line">  <span class="string">"build-test"</span>: <span class="string">"vue-cli-service build --mode=test"</span>,</span><br><span class="line">  <span class="string">//</span> 生产环境 对应配置文件 <span class="string">.env.prod</span></span><br><span class="line">  <span class="string">"build-prod"</span>: <span class="string">"vue-cli-service build --mode=prod"</span></span><br><span class="line">&#125;</span><br><span class="line">build-test 会读取<span class="string">.env.test</span>配置文件</span><br><span class="line">build-prod 会读取<span class="string">.env.prod</span>配置文件</span><br><span class="line">vue-cli-service serve 会使用默认环境development</span><br><span class="line">vue-cli-service build 会使用默认环境production</span><br><span class="line"><span class="string">//</span> vue.config.js</span><br><span class="line">console.log<span class="params">(process.env.NODE_ENV)</span>; <span class="string">//</span> development（在终端输出）</span><br><span class="line">仅支持注入环境配置文件中以 VUE_APP_ 开头的变量</span><br><span class="line"><span class="string">//</span> <span class="string">.env.test</span></span><br><span class="line">VUE_APP_clientId = 350</span><br><span class="line">VUE_APP_DBS_URL = 'http:<span class="string">//33.11.22.45</span>'</span><br><span class="line"><span class="string">//</span> 使用</span><br><span class="line">headers.clientId =process.env.VUE_APP_clientId</span><br></pre></td></tr></table></figure></p><h2 id="在VueCLI3使用template模板报错"><a href="#在VueCLI3使用template模板报错" class="headerlink" title="在VueCLI3使用template模板报错"></a>在VueCLI3使用template模板报错</h2><blockquote><p>[Vue warn]: You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.</p></blockquote><p><code>VueCLI3默认使用vue.runtime.js，不允许编译template模板，用了template选项，会报错。解决方案有两种，一是手动将template改写为Render函数；另一种是修改vue.config.js：module.exports={runtimeCompiler: true // 使用包含运行时编译器的 Vue 构建版本。可以在 Vue 组件中使用 template 选项，但是额外增加 10kb 左右}</code></p><h2 id="build-js-说明"><a href="#build-js-说明" class="headerlink" title="build.js 说明"></a>build.js 说明</h2><ul><li>app.[hash].css      将组件中的css编译合并</li><li>app.[hash].js       包含所有components中的js代码(当前应用程序开发的所有代码(业务代码))</li><li>vendor.[hash].js    包含了所有引用的node_mdules中的代码(第三方库代码 vue/vue-router/axios等)</li></ul><h2 id="生产环境请将-productionSourceMap-false-即生产环境-关闭sourcemap-否则会在浏览器source里面看到所有源码"><a href="#生产环境请将-productionSourceMap-false-即生产环境-关闭sourcemap-否则会在浏览器source里面看到所有源码" class="headerlink" title="生产环境请将 productionSourceMap: false 即生产环境 关闭sourcemap 否则会在浏览器source里面看到所有源码"></a>生产环境请将 <code>productionSourceMap: false</code> 即生产环境 关闭sourcemap 否则会在浏览器source里面看到所有源码</h2>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>javascript补漏</title>
      <link href="/javascript%E8%A1%A5%E6%BC%8F/"/>
      <url>/javascript%E8%A1%A5%E6%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="JSON-stringify-obj-特性"><a href="#JSON-stringify-obj-特性" class="headerlink" title="JSON.stringify(obj) 特性"></a>JSON.stringify(obj) 特性</h2><ul><li><p><code>undefined</code>、<code>任意的函数</code>以及<code>symbol</code>作为<code>对象属性值</code>时<code>JSON.stringify()</code>将<code>跳过（忽略）</code>对它们进行序列化</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = &#123;</span><br><span class="line">  a: <span class="string">"aaa"</span>,</span><br><span class="line">  b: <span class="literal">undefined</span>,</span><br><span class="line">  c: <span class="built_in">Symbol</span>(<span class="string">"dd"</span>),</span><br><span class="line">  fn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">JSON</span>.stringify(data) <span class="comment">// "&#123;"a":"aaa"&#125;"</span></span><br></pre></td></tr></table></figure></li><li><p><code>undefined</code>、<code>任意的函数</code>以及<code>symbol</code>作为<code>数组元素值</code>时，<code>JSON.stringify()</code>将会将它们序列化为<code>null</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify([<span class="string">"aaa"</span>, <span class="literal">undefined</span>, <span class="function"><span class="keyword">function</span> <span class="title">aa</span>(<span class="params"></span>) </span>&#123;&#125;, <span class="built_in">Symbol</span>(<span class="string">'dd'</span>)])</span><br><span class="line"><span class="comment">// "["aaa",null,null,null]"</span></span><br></pre></td></tr></table></figure></li><li><p><code>undefined</code>、<code>任意的函数</code>以及<code>symbol</code>被<code>JSON.stringify()</code>作为单独的值进行序列化时，都会返回 <code>undefined</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(<span class="literal">undefined</span>) <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(<span class="function"><span class="keyword">function</span> <span class="title">aa</span>(<span class="params"></span>)</span>&#123;&#125;) <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(<span class="built_in">Symbol</span>(<span class="string">'tew'</span>)) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></li><li><p><code>JSON.stringify()</code> 将会正常序列化<code>Date</code>的值。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(&#123; <span class="attr">now</span>: <span class="keyword">new</span> <span class="built_in">Date</span>() &#125;)</span><br><span class="line"><span class="comment">// "&#123;"now":"2018-11-10T17:42:11.973Z"&#125;"</span></span><br></pre></td></tr></table></figure></li><li><p><code>JSON.stringify()</code> 会将<code>NaN</code>和<code>Infinity</code>格式的数值及<code>null</code>都会被当做<code>null</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(<span class="literal">NaN</span>) <span class="comment">// "null"</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(<span class="literal">null</span>) <span class="comment">// "null"</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(<span class="literal">Infinity</span>) <span class="comment">// "null"</span></span><br></pre></td></tr></table></figure></li><li><p><code>JSON.stringify(obj, replacer, space)</code> 各个参数使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* replacer 为函数时 有两个参数 key value*/</span></span><br><span class="line"><span class="keyword">const</span> data = &#123;</span><br><span class="line">  a: <span class="string">"aaa"</span>,</span><br><span class="line">  b: <span class="literal">undefined</span>,</span><br><span class="line">  c: <span class="built_in">Symbol</span>(<span class="string">"tew"</span>),</span><br><span class="line">  fn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">JSON</span>.stringify(data, (key, value) =&gt; &#123;</span><br><span class="line">  <span class="keyword">switch</span> (<span class="keyword">typeof</span> value) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"undefined"</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="string">"undefined"</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"symbol"</span>:</span><br><span class="line">      <span class="keyword">return</span> value.toString()</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"function"</span>:</span><br><span class="line">      <span class="keyword">return</span> value.toString()</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// "&#123;"a":"aaa","b":"undefined","c":"Symbol(tew)","fn":"function() &#123;\n    return true;\n  &#125;"&#125;"</span></span><br><span class="line"><span class="comment">/* 作为数组时 可以过滤对象指定的属性名 */</span></span><br><span class="line"><span class="keyword">const</span> jsonObj = &#123;</span><br><span class="line">  name: <span class="string">"tew"</span>,</span><br><span class="line">  age: <span class="number">18</span>,</span><br><span class="line">  hobby: <span class="string">"travel,cheese"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 只保留 hobby 属性的值</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(jsonObj, [<span class="string">"hobby"</span>]); <span class="comment">// "&#123;"hobby":"travel,cheese"&#125;"</span></span><br><span class="line"><span class="comment">/* 第三个参数可以格式化输出格式 缩进的空格数 */</span></span><br><span class="line"><span class="keyword">const</span> jsonObj = &#123;</span><br><span class="line">  name: <span class="string">"tew"</span>,</span><br><span class="line">  age: <span class="number">18</span>,</span><br><span class="line">  hobby: <span class="string">"travel,cheese"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">JSON</span>.stringify(jsonObj,<span class="literal">null</span>,<span class="number">2</span>);</span><br><span class="line"><span class="comment">/* "&#123;</span></span><br><span class="line"><span class="comment">  "name": "tew",</span></span><br><span class="line"><span class="comment">  "age": 18,</span></span><br><span class="line"><span class="comment">  "hobby": "travel,cheese"</span></span><br><span class="line"><span class="comment">&#125;" /*</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="bind兼容"><a href="#bind兼容" class="headerlink" title="bind兼容"></a>bind兼容</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!-[<span class="number">1</span>,]) &#123;</span><br><span class="line">  <span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span>(<span class="params">oThis</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span></span><br><span class="line">    <span class="keyword">var</span> arg = [].slice.call(<span class="built_in">arguments</span>,<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      that.apply(oThis,arg)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><ul><li><p>随机排序</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [</span><br><span class="line">  &#123; <span class="string">"price"</span>: <span class="number">66</span>, <span class="string">"id"</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="string">"price"</span>: <span class="number">99</span>, <span class="string">"id"</span>: <span class="number">2</span> &#125;,</span><br><span class="line">  &#123; <span class="string">"price"</span>: <span class="number">11</span>, <span class="string">"id"</span>: <span class="number">4</span> &#125;,</span><br><span class="line">  &#123; <span class="string">"price"</span>: <span class="number">44</span>, <span class="string">"id"</span>: <span class="number">3</span> &#125;</span><br><span class="line">]</span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.random() - <span class="number">0.5</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>按指定字段排序</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params">property</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> value1 = a[property]</span><br><span class="line">    <span class="keyword">var</span> value2 = b[property]</span><br><span class="line">    <span class="keyword">return</span> value1 - value2</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">arr = arr.sort(compare(<span class="string">'price'</span>))</span><br><span class="line"><span class="built_in">console</span>.log(arr)</span><br></pre></td></tr></table></figure></li></ul><h2 id="日期截取"><a href="#日期截取" class="headerlink" title="日期截取"></a>日期截取</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> date = <span class="string">'20190108180155'</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/(\d&#123;4&#125;)(\d&#123;2&#125;)(\d&#123;2&#125;)(\d&#123;2&#125;)(\d&#123;2&#125;)(\d&#123;2&#125;)/</span></span><br><span class="line">date.replace(reg, <span class="string">'$1年$2月$3日 $4:$5:$6'</span>)</span><br></pre></td></tr></table></figure><h2 id="逻辑运算符与短路"><a href="#逻辑运算符与短路" class="headerlink" title="逻辑运算符与短路"></a>逻辑运算符与短路</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** &amp;&amp; || 逻辑与 &amp;&amp; 优先级高于 逻辑或 ||</span></span><br><span class="line"><span class="comment">1. 在条件判断中</span></span><br><span class="line"><span class="comment">  &amp;&amp; 所有条件都为真 整体才为整</span></span><br><span class="line"><span class="comment">  || 只要有一个条件为真 整体就为真</span></span><br><span class="line"><span class="comment">2. 在非条件判断中 如赋值操作中</span></span><br><span class="line"><span class="comment">  || -&gt;  A || B 首先看A的真假 A为真返回A的值 A为假 返回B的值(不管真假)</span></span><br><span class="line"><span class="comment">    1 || 2 ==&gt; 1       0 || false ==&gt; false</span></span><br><span class="line"><span class="comment">  &amp;&amp; -&gt;  A &amp;&amp; B 首先看A的真假 A为假返回A的值 A为真 返回B的值(不管真假)</span></span><br><span class="line"><span class="comment">    1 &amp;&amp; 2 ==&gt; 2       0 &amp;&amp; false ==&gt; 0</span></span><br></pre></td></tr></table></figure><h2 id="Number-toFixed"><a href="#Number-toFixed" class="headerlink" title="Number.toFixed()"></a>Number.toFixed()</h2><p><code>如果该方法在一个非Number类型的对象上调用会报错。</code></p><h2 id="判断一个对象是否为数组的最好方式"><a href="#判断一个对象是否为数组的最好方式" class="headerlink" title="判断一个对象是否为数组的最好方式"></a>判断一个对象是否为数组的最好方式</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArray</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj) == <span class="string">"[object Array]"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 不能使用 instanceof 和 constructor</span></span><br></pre></td></tr></table></figure><h2 id="encodeURIComponent-与-encodeURI"><a href="#encodeURIComponent-与-encodeURI" class="headerlink" title="encodeURIComponent 与 encodeURI"></a>encodeURIComponent 与 encodeURI</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// encodeURIComponent和decodeURIComponent可以编码和解码URI特殊字符（如#，/，￥等）</span></span><br><span class="line"><span class="comment">// encodeURI和decodeURI对URI的特殊字符是没有编码和解码能力的</span></span><br><span class="line"><span class="keyword">var</span> codeVal = <span class="built_in">encodeURI</span>(<span class="string">'20180711#abc'</span>);</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">'http://www.baidu.com?code='</span> + codeVal;</span><br><span class="line"><span class="built_in">console</span>.log(url) <span class="comment">// http://www.xxx.com?code=20180711#abc</span></span><br><span class="line"><span class="built_in">decodeURI</span>(location.search)  <span class="comment">//"?code=20180711"</span></span><br><span class="line"><span class="keyword">var</span> codeVal = <span class="built_in">encodeURIComponent</span>(<span class="string">'20180711#abc'</span>);</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">'http://www.baidu.com?code='</span> + codeVal;</span><br><span class="line"><span class="built_in">console</span>.log(url) <span class="comment">// "http://www.baidu.com?code=20180711%23abc"</span></span><br><span class="line"><span class="built_in">decodeURIComponent</span>(location.search) <span class="comment">//"?code=20180711#abc"</span></span><br></pre></td></tr></table></figure><h2 id="Object-freeze-对象冻结"><a href="#Object-freeze-对象冻结" class="headerlink" title="Object.freeze 对象冻结"></a>Object.freeze 对象冻结</h2><p><code>Object.freeze()</code>方法可以冻结一个对象。一个被冻结的对象再也不能被修改；冻结了一个对象则不能向这个对象添加新的属性，不能删除已有属性，不能修改该对象已有属性的可枚举性、可配置性、可写性，以及不能修改已有属性的值。此外，冻结一个对象后该对象的原型也不能被修改。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  tew: <span class="string">'view'</span>,</span><br><span class="line">&#125;</span><br><span class="line">obj.tew = <span class="string">'app'</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.isFrozen(obj)) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.tew) <span class="comment">// app</span></span><br><span class="line"><span class="built_in">Object</span>.freeze(obj) <span class="comment">// 冻结对象</span></span><br><span class="line">obj.tew = <span class="string">'update'</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.isFrozen(obj)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.tew) <span class="comment">// app</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 深度冻结</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepFreeze</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">Object</span>.freeze(obj)</span><br><span class="line">  <span class="keyword">for</span>(key <span class="keyword">in</span> obj)&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj[key] === <span class="string">'object'</span> &amp;&amp; obj[key] != <span class="literal">null</span>) &#123;</span><br><span class="line">      deepFreeze(obj[key])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> deepObj = &#123;</span><br><span class="line">  age: <span class="string">'26'</span>,</span><br><span class="line">  tew: &#123;</span><br><span class="line">    age: <span class="string">'26'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Object.freeze(deepObj)</span></span><br><span class="line"><span class="comment">// deepObj.age = '18'</span></span><br><span class="line"><span class="comment">// deepObj.tew.age = '18'</span></span><br><span class="line"><span class="comment">// console.log(deepObj.age) // 26</span></span><br><span class="line"><span class="comment">// console.log(deepObj.tew.age) //18</span></span><br><span class="line">deepFreeze(deepObj)</span><br><span class="line">deepObj.age = <span class="string">'19'</span></span><br><span class="line">deepObj.tew.age = <span class="string">'19'</span></span><br><span class="line"><span class="built_in">console</span>.log(deepObj.age) <span class="comment">// 26</span></span><br><span class="line"><span class="built_in">console</span>.log(deepObj.tew.age) <span class="comment">// 26</span></span><br></pre></td></tr></table></figure></p><h2 id="MutationObserver-监听改变"><a href="#MutationObserver-监听改变" class="headerlink" title="MutationObserver 监听改变"></a>MutationObserver 监听改变</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> mutationObserver = <span class="keyword">new</span> MutationObserver(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(app.children.length);</span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="undefined">  mutationObserver.observe(app, &#123;</span></span><br><span class="line"><span class="actionscript">    childList: <span class="literal">true</span></span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="javascript">  <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span></span><br><span class="line"><span class="javascript">    app.appendChild(<span class="built_in">document</span>.createElement(<span class="string">'p'</span>))</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js基础 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>异步解决方案之promise</title>
      <link href="/%E5%BC%82%E6%AD%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8Bpromise/"/>
      <url>/%E5%BC%82%E6%AD%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8Bpromise/</url>
      
        <content type="html"><![CDATA[<p><code>Promise</code>对象是一个代理对象（代理一个值），被代理的值在<code>Promise</code>对象创建时可能是未知的。它允许你为异步操作的成功和失败分别绑定相应的处理方法（handlers）。 这让异步方法可以像同步方法那样返回值，但并不是立即返回最终执行结果，而是一个能代表未来出现的结果的<code>promise</code>对象。<br><a id="more"></a></p><h2 id="异步操作-Promise"><a href="#异步操作-Promise" class="headerlink" title="异步操作 Promise"></a>异步操作 Promise</h2><blockquote><p>Promise是ES6新增的异步编程解决方案,它是一个对象,可以通过Promise构造函数来实例化 new Promise(cb)</p></blockquote><ul><li>基本语法 <code>new Promise( function(resolve, reject) {…} )</code><br>通过创建 Promise 对象开启一个异步操作的过程，一般用几步完成多次异步操作：</li></ul><ol><li>new Promise(fn) 返回一个Promise 对象</li><li>在fn 中指定异步等处理</li><li>处理结果正常的话，调用resolve(处理结果值)</li><li>处理结果错误的话，调用reject(Error对象)<br>Promise 内部是有状态的(pending、fulfilled、rejected)，Promise 对象根据状态来确定执行哪个方法。Promise 在实例化的时候状态是默认 pending 的，当异步操作是完成的(调用resolve)，状态会被修改为 fulfilled，如果异步操作遇到异常(调用reject)，状态会被修改为 rejected,状态转化是单向的，不可逆转，已经确定的状态（fulfilled/rejected）无法转回初始状态（pending），而且只能是从 pending 到 fulfilled 或者 rejected</li></ol><ul><li><p><code>Promise.prototype.then()</code><br><code>promise.then(onFulfilled, onRejected)</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123; resolve(<span class="string">'传递给then的值'</span>) &#125;)</span><br><span class="line">promise.then(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value)</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.error(error)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 创建一个 Promise 对象，定义了处理 onFulfilled 和 onRejected 的函数（handler），然后返回这个 Promise对象。</span></span><br><span class="line"><span class="comment">// 这个 Promise 对象会在变为 resolve 或者 reject 的时候分别调用相应注册的回调函数。</span></span><br><span class="line"><span class="comment">// 当 handler 返回一个正常值的时候，这个值会传递给 Promise 对象的 onFulfilled 方法。</span></span><br><span class="line"><span class="comment">// 定义的 handler 中产生异常的时候，这个值则会传递给 Promise 对象的 onRejected 方法。</span></span><br></pre></td></tr></table></figure></li><li><p><code>Promise.prototype.catch()</code><br>使用 Promise 对象的 catch 方法来捕获异步操作过程中出现的任何异常。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'es'</span>))</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">test().catch(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(e.message) <span class="comment">// es</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p><code>Promise.resolve()</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Promise.resolve()是Promise静态方法 Promise.resolve(value)可以认为是以下代码的语法糖。</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123; resolve(<span class="number">42</span>) &#125;)</span><br><span class="line"><span class="comment">// 方法 Promise.resolve(value) 的返回值也是一个 Promise 对象，所以我们可以像下面那样接着对其返回值进行 .then 调用。</span></span><br><span class="line"><span class="built_in">Promise</span>.resolve(<span class="number">42</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123; <span class="built_in">console</span>.log(value) &#125;)</span><br></pre></td></tr></table></figure></li><li><p><code>Promise.reject()</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Promise.reject()是Promise静态方法 Promise.reject(error)可以认为是以下代码的语法糖。</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123; reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'出错了'</span>)) &#125;)</span><br><span class="line"><span class="comment">// 这段代码的功能是调用该Promise 对象通过then指定的 onRejected 函数，并将错误（Error）对象传递给这个 onRejected 函数。</span></span><br><span class="line"><span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'BOOM!'</span>))</span><br></pre></td></tr></table></figure></li><li><p><code>Promise.all(promiseArray)</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="built_in">Promise</span>.resolve(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="built_in">Promise</span>.resolve(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">var</span> p3 = <span class="built_in">Promise</span>.resolve(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">Promise</span>.all([p1, p2, p3]).then(<span class="function"><span class="keyword">function</span> (<span class="params">results</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(results) <span class="comment">// [1, 2, 3]</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// Promise.all返回一个新的 Promise对象，参数传递promise数组中所有的 Promise 对象都变为resolve的时候，该方法才会返回，新创建的 Promise 则会使用这些 promise 的值。</span></span><br><span class="line"><span class="comment">// 如果参数中的任何一个promise为reject的话，则整个Promise.all调用会立即终止，并返回一个reject的新的 Promise 对象。</span></span><br><span class="line"><span class="comment">// Promise.all并不是串行的  而是并行的  例如 数组中的每个请求都有延迟则promise.all()返回是延迟时间最长的大约是3s 而不是 6s</span></span><br><span class="line"><span class="built_in">console</span>.time()</span><br><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(resolve, <span class="number">3000</span>, <span class="string">'pro1'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(resolve, <span class="number">2000</span>, <span class="string">'pro2'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(resolve, <span class="number">1000</span>, <span class="string">'pro3'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">Promise</span>.all([promise1, promise2, promise3]).then(<span class="function">(<span class="params">values</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.timeEnd()</span><br><span class="line">  <span class="built_in">console</span>.log(values)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 3001.1630859375ms</span></span><br><span class="line"><span class="comment">// ["pro1", "pro2", "pro3"]</span></span><br></pre></td></tr></table></figure></li><li><p><code>Promise.race(promiseArray)</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="built_in">Promise</span>.resolve(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="built_in">Promise</span>.resolve(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">var</span> p3 = <span class="built_in">Promise</span>.resolve(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">Promise</span>.race([p1, p2, p3]).then(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value) <span class="comment">// 1</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// Promise.race返回一个新的 Promise对象。参数 promise 数组中的任何一个 Promise 对象如果变为 resolve或者 reject 的话，该函数就会返回，并使用这个 Promis 对象的值进行 resolve 或者 reject。返回最早完成的promise对象</span></span><br><span class="line"><span class="built_in">console</span>.time()</span><br><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(resolve, <span class="number">3000</span>, <span class="string">'pro1'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(resolve, <span class="number">2000</span>, <span class="string">'pro2'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(resolve, <span class="number">1000</span>, <span class="string">'pro3'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">Promise</span>.race([promise1, promise2, promise3]).then(<span class="function">(<span class="params">values</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.timeEnd()</span><br><span class="line">  <span class="built_in">console</span>.log(values)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 1000.848876953125ms</span></span><br><span class="line"><span class="comment">// pro3</span></span><br></pre></td></tr></table></figure></li><li><p><code>promise的链式调用</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">'pro1'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">'pro2'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">'pro3'</span>)</span><br><span class="line">&#125;)</span><br><span class="line">promise1.then(<span class="function">(<span class="params">res1</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res1, <span class="string">'res1'</span>)</span><br><span class="line">  <span class="keyword">return</span> promise2</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">res2</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res2, <span class="string">'res2'</span>)</span><br><span class="line">  <span class="keyword">return</span> promise3</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">res3</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res3, <span class="string">'res3'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// pro1 res1</span></span><br><span class="line"><span class="comment">// pro2 res2</span></span><br><span class="line"><span class="comment">// pro3 res3</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> es6 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>es6基础(三)</title>
      <link href="/es6%E5%9F%BA%E7%A1%80(%E4%B8%89)/"/>
      <url>/es6%E5%9F%BA%E7%A1%80(%E4%B8%89)/</url>
      
        <content type="html"><![CDATA[<p><code>ES6</code>全称<code>ECMAScript 6.0</code>,部分浏览器不支持ES6，在应用程序的构建过程中需要使用<code>babel</code>将<code>ES6</code>转换为<code>ES5</code>. es6新特性：<code>默认参数</code>、<code>箭头函数</code>、<code>模块化</code>、<code>Proxy</code>、<code>Generator构造器函数</code>、<code>Promise</code>等<br><a id="more"></a></p><h2 id="函数的扩展"><a href="#函数的扩展" class="headerlink" title="函数的扩展"></a>函数的扩展</h2><ul><li><p>默认参数 函数体内不能再使用<code>let const</code>声明形参 默认参数必须放在最后面</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a=<span class="number">10</span>, b=<span class="number">20</span></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a, b)</span><br><span class="line">&#125;</span><br><span class="line">fn() <span class="comment">// 10 20</span></span><br><span class="line">fn(<span class="number">6</span>) <span class="comment">// 6 20</span></span><br><span class="line">fn(<span class="number">8</span>, <span class="number">9</span>) <span class="comment">// 8 9</span></span><br><span class="line"><span class="comment">// 间隔传递默认参数可以使用 undefiend代替</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y=<span class="number">7</span>, z=<span class="number">43</span></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y + z</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(f(<span class="number">1</span>, <span class="literal">undefined</span>, <span class="number">20</span>)) <span class="comment">// 28</span></span><br><span class="line"><span class="comment">// 函数体内不能再使用`let const`声明形参</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">3</span>; <span class="comment">// Identifier 'a' has already been declared</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>函数的Rest参数(…参数名) 剩余参数<br>Spread Operator扩展运算符(…实参) 和 Rest Parameter(…形参) 是形似但相反意义的操作符，Rest Parameter 是把不定的参数“收敛”到数组，而 Spread Operator 是把固定的数组内容“打散”到对应的参数<br>用于获取函数的多余参数,这样就不需要使用<code>arguments</code>对象了<code>rest</code>参数搭配的变量是一个数组,该变量会把多余的参数放入数组中.后边不能再有其他参数,否则会报错</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">...arr</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arr) <span class="comment">// [1, 2, 3, 4, 5]</span></span><br><span class="line">  <span class="keyword">let</span> res = <span class="number">0</span></span><br><span class="line">  arr.map(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    res+=item</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>) <span class="comment">// 15</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum1</span>(<span class="params">arg, ...arr</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arr) <span class="comment">// [2, 3, 4, 5]</span></span><br><span class="line">  <span class="keyword">let</span> res = arg</span><br><span class="line">  arr.map(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    res+=item</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;</span><br><span class="line">sum1(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>) <span class="comment">// 15</span></span><br><span class="line"><span class="comment">// Spread Operator(扩展运算符)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum5</span> (<span class="params">x = <span class="number">1</span>, y = <span class="number">2</span>, z = <span class="number">3</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y + z</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(sum5(...[<span class="number">4</span>]))<span class="comment">// 9</span></span><br><span class="line"><span class="built_in">console</span>.log(sum5(...[<span class="number">4</span>, <span class="number">5</span>]))<span class="comment">// 12</span></span><br><span class="line"><span class="built_in">console</span>.log(sum5(...[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]))<span class="comment">// 15</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h2><p><code>使用 =&gt; 定义函数 箭头左边是参数 右边是函数体</code></p><ul><li><p>基本用法 只有一个参数和函数体只有<code>return</code>一条语句时可简写</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 只有一个参数时  () 可省略 只有一句return时 &#123;&#125; return也可省略</span></span><br><span class="line"><span class="keyword">const</span> es6Fun = <span class="function"><span class="params">a</span> =&gt;</span> a</span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line"><span class="keyword">const</span> es5Fun = <span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123; <span class="keyword">return</span> a &#125;</span><br><span class="line"><span class="built_in">console</span>.log(es6Fun(<span class="number">1</span>)) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(es5Fun(<span class="number">1</span>)) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure></li><li><p>有多个参数时 用<code>()</code>将参数包起来</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fun = <span class="function">(<span class="params">a,b</span>) =&gt;</span> a + b</span><br><span class="line"><span class="built_in">console</span>.log(fun(<span class="number">1</span>, <span class="number">2</span>)) <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></li><li><p>函数体有多行代码时 要将多行代码用<code>{}</code>包起来</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fun = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  a = a*a</span><br><span class="line">  b = b*b</span><br><span class="line">  <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(fun(<span class="number">2</span>, <span class="number">3</span>)) <span class="comment">// 13</span></span><br></pre></td></tr></table></figure></li><li><p>当函数体只有一行return语句且返回的是字面量对象 ,要用<code>()</code>将返回值包起来</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fun2 = <span class="function">(<span class="params">a, b</span>) =&gt;</span> (&#123;a,b&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(fun2(<span class="number">1</span>, <span class="number">2</span>)) <span class="comment">// &#123;a:1, b:2&#125;</span></span><br><span class="line"><span class="comment">// es5 排序实例</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">5</span>,<span class="number">1</span>,<span class="number">3</span>]</span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> b - a</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [5, 3, 1]</span></span><br><span class="line"><span class="comment">// es6 箭头函数 排序实例</span></span><br><span class="line">arr.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b)</span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [1, 3, 5]</span></span><br></pre></td></tr></table></figure></li><li><p>箭头函数使用注意事项</p><ul><li>箭头函数不能用作Generator生成器函数</li><li><p>函数体内没有自己的this对象,内部this对象是定义时上下文(作用域)的this对象, 不是调用时的this对象. 不能改箭头函数使用 call apply bind去更改其内部的this指向.箭头函数中的this只取决包裹箭头函数的第一个普通函数的this</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">// 定义时作用域</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// fn()() // Window window</span></span><br><span class="line">fn().call(&#123;<span class="attr">a</span>:<span class="number">2</span>&#125;) <span class="comment">// Window window 无法使用 call 改变箭头函数this对象</span></span><br><span class="line"><span class="comment">// fn.call(&#123;a:1&#125;)() // &#123;a: 1&#125; &#123;a: 1&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>箭头函数体内没有<code>arguments</code>对象,可以用<code>rest</code>参数代替</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fun3 = <span class="function">(<span class="params">...rest</span>) =&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(rest)</span><br><span class="line">&#125;</span><br><span class="line">fun3(<span class="number">1</span>,<span class="number">2</span>) <span class="comment">// [1, 2]</span></span><br><span class="line"><span class="keyword">let</span> fun4 = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>)</span><br><span class="line">&#125;</span><br><span class="line">fun4(<span class="number">1</span>,<span class="number">2</span>) <span class="comment">// arguments is not defined</span></span><br></pre></td></tr></table></figure></li><li><p>箭头函数不可以当做构造函数,不可以使用new命令,否则会报错</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Fun = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b</span><br><span class="line"><span class="keyword">new</span> Fun(<span class="number">1</span>,<span class="number">2</span>) <span class="comment">// Fun is not a constructor</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><ul><li><p><code>es6</code>中每一个<code>模块</code>就是一个<code>文件</code>，希望外部可以读取模块中的内容，就必须使用<code>export</code>将其暴露出去(导出)， 子其他模块使用<code>import</code>导入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> name = <span class="string">'tew'</span></span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; name &#125; <span class="keyword">from</span> <span class="string">'./a.js'</span></span><br><span class="line"><span class="built_in">console</span>.log(name) <span class="comment">// tew</span></span><br></pre></td></tr></table></figure></li><li><p>如果要导出多个变量可以将这些变量包装成对象进行模块化导出</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">'tew'</span></span><br><span class="line"><span class="keyword">let</span> age = <span class="number">18</span></span><br><span class="line"><span class="keyword">let</span> fn = <span class="function">(<span class="params">name</span>) =&gt;</span> <span class="string">`My name is <span class="subst">$&#123;name&#125;</span>`</span></span><br><span class="line"><span class="keyword">export</span> &#123; name, age, fn &#125;</span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; name, age, fn &#125; <span class="keyword">from</span> <span class="string">'./a.js'</span></span><br><span class="line"><span class="built_in">console</span>.log(fn(<span class="string">'Bob'</span>)) <span class="comment">// My name is Bob</span></span><br><span class="line"><span class="built_in">console</span>.log(age) <span class="comment">// 18</span></span><br></pre></td></tr></table></figure></li><li><p>使用<code>as</code>对导出变量或导入变量进行重命名</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">'tew'</span></span><br><span class="line"><span class="keyword">let</span> age = <span class="number">18</span></span><br><span class="line"><span class="keyword">let</span> fn = <span class="function">(<span class="params">name</span>) =&gt;</span> <span class="string">`My name is <span class="subst">$&#123;name&#125;</span>`</span></span><br><span class="line"><span class="keyword">export</span> &#123; name <span class="keyword">as</span> myName, age, fn <span class="keyword">as</span> myFn &#125;</span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; myName <span class="keyword">as</span> name, age, myFn <span class="keyword">as</span> fn &#125; <span class="keyword">from</span> <span class="string">'./a.js'</span></span><br><span class="line"><span class="built_in">console</span>.log(name) <span class="comment">// tew</span></span><br><span class="line"><span class="built_in">console</span>.log(fn(<span class="string">'Bob'</span>)) <span class="comment">// My name is Bob</span></span><br><span class="line"><span class="comment">// 直接导入整个模块</span></span><br><span class="line"><span class="comment">// import * as info from './a.js'</span></span><br><span class="line"><span class="comment">// console.log(info.name) // tew</span></span><br></pre></td></tr></table></figure></li><li><p>默认导出 一个模块只能有一个<code>export default</code>默认导出</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'默认导出'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">import</span> fn <span class="keyword">from</span> <span class="string">'./a.js'</span></span><br><span class="line"><span class="built_in">console</span>.log(fn()) <span class="comment">// 默认导出</span></span><br></pre></td></tr></table></figure></li><li><p>混合导出 同时有<code>export</code>和<code>export default</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'默认导出'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> name = <span class="string">'tew'</span></span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="keyword">import</span> fn, &#123;name&#125; <span class="keyword">from</span> <span class="string">'./a.js'</span></span><br><span class="line"><span class="built_in">console</span>.log(fn()) <span class="comment">// 默认导出</span></span><br><span class="line"><span class="built_in">console</span>.log(name) <span class="comment">// tew</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h2><h2 id="Generator构造器函数"><a href="#Generator构造器函数" class="headerlink" title="Generator构造器函数"></a>Generator构造器函数</h2>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> es6 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>es6基础(二)</title>
      <link href="/es6%E5%9F%BA%E7%A1%80(%E4%BA%8C)/"/>
      <url>/es6%E5%9F%BA%E7%A1%80(%E4%BA%8C)/</url>
      
        <content type="html"><![CDATA[<p><code>ES6</code>全称<code>ECMAScript 6.0</code>,是<code>JavaScript</code>的下一个版本标准，2015.06 发版。ES6 主要是为了解决 ES5 的先天不足，比如 JavaScript 里并没有类的概念。es6新特性：<code>Symbol</code>、<code>class</code>、<code>数值的扩展</code>、<code>字符串的扩展</code>、<code>数组的扩展</code>、<code>对象的扩展</code>等<br><a id="more"></a></p><h2 id="Symbol数据类型"><a href="#Symbol数据类型" class="headerlink" title="Symbol数据类型"></a>Symbol数据类型</h2><ul><li><p><code>Symbol</code>表示独一无二的值,它是js中的第七种数据类型.</p><ul><li>基本的数据类型: <code>null undefined number boolean string symbol bigInt</code></li><li>引用数据类型 <code>object</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s1 = <span class="built_in">Symbol</span>(<span class="string">'tew'</span>)</span><br><span class="line"><span class="keyword">let</span> s2 = <span class="built_in">Symbol</span>(<span class="string">'tew'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(s1) <span class="comment">// Symbol(tew)</span></span><br><span class="line"><span class="built_in">console</span>.log(s2) <span class="comment">// Symbol(tew)</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> s1) <span class="comment">// symbol</span></span><br><span class="line"><span class="built_in">console</span>.log(s1==s2)  <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(s1===s2) <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>Symbol使用注意事项</code></p><ul><li><p><code>Symbol</code>函数不能使用new否则会报错, 它是原始数据类型不是对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s3 = <span class="keyword">new</span> <span class="built_in">Symbol</span>(<span class="string">'tew'</span>) <span class="comment">// Symbol is not a constructor</span></span><br></pre></td></tr></table></figure></li><li><p><code>Symbol</code>函数接收一个字符串作为参数,表示对<code>Symbol</code>的描述和区分,主要是为了在控制台显示,或者转为字符串的时候,比较容易区分. 字符串只是描述,不代表其他.</p></li><li><p><code>Symbol</code>不能隐式转换，但可以显示转换为字符串或者布尔值,转换为Number的话会报错。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>(<span class="built_in">Symbol</span>(<span class="string">'tew'</span>))) <span class="comment">// Symbol(tew) string</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Symbol</span>(<span class="string">'tew'</span>).toString()) <span class="comment">// Symbol(tew) string</span></span><br><span class="line"><span class="built_in">console</span>.log(!<span class="built_in">Symbol</span>(<span class="string">'tew'</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>(<span class="built_in">Symbol</span>(<span class="string">'tew'</span>))) <span class="comment">// Cannot convert a Symbol value to a number</span></span><br></pre></td></tr></table></figure></li><li><p><code>Symbol</code>不能与其他值做任何运算,会报错</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Symbol</span>(<span class="string">'tew'</span>)+<span class="string">'1'</span>) <span class="comment">// Cannot convert a Symbol value to a string</span></span><br></pre></td></tr></table></figure></li><li><p><code>Symbol</code>作为对象的属性名使用时,属性不会出现在<code>for in/of</code>中,也不会被<code>Object.keys()</code>、<code>Object.getOwnPropertyNames()</code>、<code>JSON.stringify()</code>返回,</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> yyy = <span class="built_in">Symbol</span>(<span class="string">'ss'</span>)</span><br><span class="line"><span class="comment">// 不能写成 &#123;yyy: 'hello'&#125; 需要加 []</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;[yyy]: <span class="string">'hello'</span>, <span class="attr">a</span>:<span class="number">2</span>&#125;</span><br><span class="line"><span class="built_in">console</span>.log(obj) <span class="comment">// &#123;a: 2, Symbol(ss): "hello"&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj[yyy]) <span class="comment">// hello</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> i <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i) <span class="comment">// a 未出现 Symbol(ss): "hello"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(obj)) <span class="comment">// ["a"]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(obj)) <span class="comment">// &#123;"a":2&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>在直接使用symbol作为属性名的时候,只能使用通过<code>obj[Object.getOwnPropertySymbols(obj)[0]]</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  [<span class="built_in">Symbol</span>()]: <span class="number">123</span>,</span><br><span class="line">  a: <span class="number">22</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(obj) <span class="comment">// &#123;a: 22, Symbol(): 123&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj[<span class="built_in">Symbol</span>()]) <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertySymbols(obj)) <span class="comment">// [Symbol()]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertySymbols(obj)[<span class="number">0</span>]) <span class="comment">// Symbol()</span></span><br><span class="line"><span class="built_in">console</span>.log(obj[<span class="built_in">Object</span>.getOwnPropertySymbols(obj)[<span class="number">0</span>]]) <span class="comment">// 123</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="Class类"><a href="#Class类" class="headerlink" title="Class类"></a>Class类</h2><p>传统方法是通过构造函数,定义并生成新对象,是一种基于原型的面向对象系统Es6中可以使用class声明一个类,之后以这个类来实例化对象</p><ul><li><p><code>es5</code>传统方式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Tew = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.a = a</span><br><span class="line">  <span class="keyword">this</span>.b = b</span><br><span class="line">&#125;</span><br><span class="line">Tew.prototype = &#123;</span><br><span class="line">  <span class="keyword">constructor</span>: Tew,</span><br><span class="line">  print: function()&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.a + <span class="string">' '</span> + <span class="keyword">this</span>.b)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> tew = <span class="keyword">new</span> Tew(<span class="string">'hello'</span>, <span class="string">'world'</span>).print() <span class="comment">// hello world</span></span><br></pre></td></tr></table></figure></li><li><p><code>es6</code>方式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tew</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(a,b)&#123;</span><br><span class="line">    <span class="keyword">this</span>.a = a</span><br><span class="line">    <span class="keyword">this</span>.b = b</span><br><span class="line">  &#125;</span><br><span class="line">  print()&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.a +<span class="string">' '</span> + <span class="keyword">this</span>.b)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> Tew(<span class="string">'hello'</span>, <span class="string">'world'</span>).print() <span class="comment">// hello world</span></span><br></pre></td></tr></table></figure></li><li><p><code>class</code>使用注意事项</p><ul><li>Tew中的constructor方法是构造函数,this关键字则代表实例对象,也就是说,es5中的构造函数Tew,对应Es6的Tew这个类的构造方法,主要用于初始化对象的属性</li><li>定义类的方法的时候,前面不需要加上function关键字,方法之间不需要逗号分隔,加了会报错</li><li>构造函数的prototype属性,在es6的类上继续存在,而且类的所有方法都定义在类的prototype属性上面</li><li>定义在类中的方法都是不可以被枚举的</li><li>constructor方法是类的默认方法.通过new命令生成对象实例时,自动调用该方法.一个类必须有constructor方法,如没有显示定义,会默认添加一个空的contructor方法</li><li>用new实例化对象,如忘记使用new,将会报错</li></ul></li><li><p><code>es6 class</code>类的继承</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Humen</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>()&#123;</span><br><span class="line">    <span class="keyword">this</span>.eyes  = <span class="number">2</span></span><br><span class="line">    <span class="keyword">this</span>.hands = <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">  say()&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'I can say'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> humen = <span class="keyword">new</span> Humen()</span><br><span class="line"><span class="built_in">console</span>.log(humen) <span class="comment">// Humen &#123;eyes: 2, hands: 2&#125;</span></span><br><span class="line">humen.say() <span class="comment">// I can say</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Women</span> <span class="keyword">extends</span> <span class="title">Humen</span></span>&#123;</span><br><span class="line">  say()&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Women say'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> women = <span class="keyword">new</span> Women()</span><br><span class="line"><span class="built_in">console</span>.log(women) <span class="comment">// Women &#123;eyes: 2, hands: 2&#125;</span></span><br><span class="line">women.say() <span class="comment">// Women say</span></span><br></pre></td></tr></table></figure><ul><li>子类继承父类使用<code>extends</code>关键字,为父类指定静态方法,使用static方法名</li><li>构造函数或方法是在类被实例化以后立刻调用的,可以用来传参</li><li><code>super</code> 在构造函数中可以当一个函数来使用,相当于调用父类的构造函数</li><li><code>super.父类方法</code> 调用父类的方法</li><li><code>super</code> 在原型方法中,可以当一个对象来使用,相当于父类的原型对象,并且会自动绑定this到子类上<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Humen</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>()&#123;</span><br><span class="line">    <span class="keyword">this</span>.eyes  = <span class="number">2</span></span><br><span class="line">    <span class="keyword">this</span>.hands = <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">  say()&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'I can say'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Thief</span> <span class="keyword">extends</span> <span class="title">Humen</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>()&#123;</span><br><span class="line">    <span class="keyword">super</span>() <span class="comment">// 子类继承父类必须调用父类的构造函数 必须放在第一句</span></span><br><span class="line">    <span class="comment">// 子类可以增加或修改父类的属性</span></span><br><span class="line">    <span class="keyword">this</span>.hands = <span class="number">3</span></span><br><span class="line">    <span class="keyword">this</span>.face  = <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 重写父类的方法</span></span><br><span class="line">  say()&#123;</span><br><span class="line">    <span class="keyword">super</span>.say() <span class="comment">// 调用父类的方法</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Thief say'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 子类扩展的方法</span></span><br><span class="line">  run()&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Thief run'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> thief = <span class="keyword">new</span> Thief()</span><br><span class="line"><span class="built_in">console</span>.log(thief) <span class="comment">// Thief &#123;eyes: 2, hands: 3, face: 1&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(thief.hands) <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(thief.face) <span class="comment">// 1</span></span><br><span class="line">thief.say() <span class="comment">// Thief say</span></span><br><span class="line">thief.run() <span class="comment">// Thief run</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>静态方法 es5中类的方法是静态方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// es5 静态方法只能通过 类名.静态方法名() 调用，不能使用对象实例调用</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">type</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.type = type</span><br><span class="line">  <span class="keyword">this</span>.walk = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="built_in">console</span>.log(<span class="string">'对象实例的方法'</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line">Animal.eat = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">'定义在类上的静态方法'</span>) &#125;</span><br><span class="line"><span class="keyword">var</span> dog = <span class="keyword">new</span> Animal(<span class="string">'dog'</span>)</span><br><span class="line">dog.walk() <span class="comment">// 对象实例的方法</span></span><br><span class="line">Animal.eat() <span class="comment">// 定义在类上的静态方法 只能通过类去调用</span></span><br><span class="line">dog.eat() <span class="comment">//  dog.eat is not a function</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//es6 静态方法只能通过 类名.静态方法名() 调用，不能使用对象实例调用</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>()&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">  walk ()&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'普通方法'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> eat ()&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'静态方法'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> people = <span class="keyword">new</span> People(<span class="string">'tew'</span>)</span><br><span class="line">people.walk() <span class="comment">// 普通方法</span></span><br><span class="line">People.eat() <span class="comment">// 静态方法</span></span><br><span class="line">people.eat() <span class="comment">// people.eat is not a function</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="数值的扩展"><a href="#数值的扩展" class="headerlink" title="数值的扩展"></a>数值的扩展</h2><ul><li><code>Math.trunc(num)</code> 干掉小数点,返回整数部分。</li><li><code>Math.sign(num)</code> 判断参数是正数,负数,正0还是负0,是正数时返回1 ,是负数时返回-1,0的时候返回0,-0的时候返回-0,NaN,对于非数值，会先将其转换为数值。</li><li><code>Math.hypot(3,4)</code> 返回参数的平方和(勾股定理)</li><li><code>Math.cbrt(8)</code> 返回参数的立方根</li><li><code>Number.isInteger(num)</code> 判断是否是整数 数值3.0和3.00都会被认为是整数。</li><li><code>Number.isNaN(num)</code> 用来检查一个值是否为NaN<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.trunc(<span class="number">1.634</span>)) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.sign(<span class="number">5</span>)) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.sign(<span class="number">-5</span>)) <span class="comment">// -1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.sign(<span class="number">0</span>)) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.sign(<span class="number">-0</span>)) <span class="comment">// -0</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.sign(<span class="literal">NaN</span>)) <span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.sign(<span class="literal">null</span>)) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.hypot(<span class="number">3</span>,<span class="number">4</span>)) <span class="comment">// 5</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.cbrt(<span class="number">8</span>)) <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>.isInteger(<span class="number">3.0</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>.isInteger(<span class="number">3.1</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="字符串的扩展"><a href="#字符串的扩展" class="headerlink" title="字符串的扩展"></a>字符串的扩展</h2><ul><li><p>模板字符串 在模板字符串中使用 <code>${&#39;字符串&#39;|&#39;运算符&#39;|变量}</code>    <code>${表达式}</code> 插值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> flag = <span class="literal">true</span>, text = <span class="string">'模板字符串'</span></span><br><span class="line"><span class="keyword">let</span> html = <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;ul&gt;</span></span><br><span class="line"><span class="string">    &lt;li&gt;<span class="subst">$&#123;text.slice(<span class="number">0</span>,<span class="number">2</span>)&#125;</span>&lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;li class="<span class="subst">$&#123;flag?<span class="string">'show'</span>:<span class="string">'hide'</span>&#125;</span>"&gt;<span class="subst">$&#123;text&#125;</span>&lt;/li&gt;</span></span><br><span class="line"><span class="string">  &lt;/ul&gt;`</span></span><br><span class="line"><span class="built_in">console</span>.log(html)<span class="comment">//&lt;ul&gt;&lt;li&gt;模板&lt;/li&gt;&lt;li class="show"&gt;模板字符串&lt;/li&gt;&lt;/ul&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>str.repeat(n)</code>      重复n个相同的字符串</p></li><li><code>str.includes(&#39;a&#39;)</code>  字符串中是否包含某字符</li><li><code>str.startsWith(&#39;a&#39;)</code> 字符串是否已某字符开头</li><li><p><code>str.endsWith(&#39;a&#39;)</code>   字符串是否已某字符结尾</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">'abca'</span></span><br><span class="line"><span class="built_in">console</span>.log(str.repeat(<span class="number">2</span>)) <span class="comment">// abcaabca</span></span><br><span class="line"><span class="built_in">console</span>.log(str) <span class="comment">// abca</span></span><br><span class="line"><span class="built_in">console</span>.log(str.includes(<span class="string">'a'</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(str.includes(<span class="string">'d'</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(str.startsWith(<span class="string">'a'</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(str.startsWith(<span class="string">'b'</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(str.endsWith(<span class="string">'a'</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(str.endsWith(<span class="string">'b'</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li><li><p><code>str.padStart(2,&#39;0&#39;)</code> 向前填充字符</p></li><li><code>str.padEnd(2,&#39;0&#39;)</code>   向后填充字符<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'1'</span>.padStart(<span class="number">2</span>, <span class="string">'0'</span>)) <span class="comment">// 01</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'01'</span>.padStart(<span class="number">2</span>, <span class="string">'0'</span>)) <span class="comment">// 01</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'1'</span>.padEnd(<span class="number">2</span>, <span class="string">'0'</span>)) <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'10'</span>.padEnd(<span class="number">2</span>, <span class="string">'0'</span>)) <span class="comment">// 10</span></span><br><span class="line"><span class="keyword">let</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line"><span class="built_in">console</span>.log(date.getHours().toString().padStart(<span class="number">2</span>, <span class="string">'0'</span>) + <span class="string">'时'</span>) <span class="comment">// 09时</span></span><br><span class="line"><span class="built_in">console</span>.log(date.getMinutes().toString().padStart(<span class="number">2</span>, <span class="string">'0'</span>) + <span class="string">'分'</span>) <span class="comment">// 08分</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="数组的扩展"><a href="#数组的扩展" class="headerlink" title="数组的扩展"></a>数组的扩展</h2><ul><li><p><code>Array.from()</code> 将类数组转化成数组如<code>NodeList arguments string</code>等</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> lis = <span class="built_in">document</span>.querySelectorAll(<span class="string">'li'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.isArray(lis)) <span class="comment">// false</span></span><br><span class="line"><span class="keyword">let</span> lis2 = <span class="built_in">Array</span>.from(lis)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.isArray(lis2)) <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li><li><p><code>Array.of(e1,e2,…)</code> 按顺序创建包含每个参数的数组,不考虑参数的数量和数据类型</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Array.of()和Array()区别在于处理整数参数</span></span><br><span class="line"><span class="comment">// Array(n)  n个长度的undefiend数组</span></span><br><span class="line"><span class="comment">// Array.of(n) 一个长度的数组 [n]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.of(<span class="number">1</span>, <span class="string">'a'</span>, &#123;&#125;, [], <span class="literal">true</span>)) <span class="comment">// [1, "a", &#123;…&#125;, Array(0), true]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>(<span class="number">1</span>, <span class="string">'a'</span>, &#123;&#125;, [], <span class="literal">true</span>)) <span class="comment">// [1, "a", &#123;…&#125;, Array(0), true]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.of(<span class="number">7</span>)) <span class="comment">// [7]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>(<span class="number">7</span>)) <span class="comment">// (7) [empty × 7]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>(<span class="number">7</span>).length) <span class="comment">// 7</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>(<span class="number">7</span>)[<span class="number">1</span>]) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr.find()</code> 返回数组中满足函数的第一个元素的值,否则返回<code>undefined</code></p></li><li><p><code>arr.findIndex()</code> 返回数组中满足函数的第一个元素的索引,否则返回<code>-1</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="string">'2'</span>, <span class="string">'3'</span>, <span class="literal">true</span>]</span><br><span class="line"><span class="keyword">let</span> resFind = arr.find(<span class="function">(<span class="params">item</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> item &gt; <span class="number">1</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> resFindIndex = arr.findIndex(<span class="function">(<span class="params">item</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> item &gt; <span class="number">1</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(resFind) <span class="comment">// '2'</span></span><br><span class="line"><span class="built_in">console</span>.log(resFindIndex) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr.fill()</code> 用固定值填充数组中从指定起始索引到指定终止索引内的全部元素,不包括终止索引。(<code>会改变原数组</code>)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="string">'2'</span>, <span class="literal">true</span>]</span><br><span class="line"><span class="comment">// console.log(arr.fill('a')) // ["a", "a", "a"]</span></span><br><span class="line"><span class="comment">// console.log(arr.fill('a', 1)) // [1, "a", "a"]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.fill(<span class="string">'a'</span>, <span class="number">1</span>, <span class="number">2</span>)) <span class="comment">// [1, "a", true]</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr.includes()</code> 检测数组是否包含某元素,<code>可判断NAN</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="literal">NaN</span>, <span class="string">'a'</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.includes(<span class="number">1</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.includes(<span class="literal">NaN</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.includes(<span class="string">'b'</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li><li><p><code>扩展运算符(spread)…</code> 将类数组转为用逗号分隔的参数序列</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">11</span>]</span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'tew'</span></span><br><span class="line"><span class="built_in">console</span>.log(...arr) <span class="comment">// 1 4 7 3 2 11</span></span><br><span class="line"><span class="built_in">console</span>.log(...str) <span class="comment">// t e w</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.max.apply(<span class="literal">null</span>,arr)) <span class="comment">// 11</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.max(...arr)) <span class="comment">// 11</span></span><br></pre></td></tr></table></figure></li><li><p>用于取出参数对象的所有可遍历属性,拷贝到当前对象之中(浅拷贝)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 展开一个对象</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>&#125;</span><br><span class="line"><span class="keyword">let</span> obj1 = &#123;</span><br><span class="line">  c:<span class="string">'children'</span>,</span><br><span class="line">  name:<span class="string">'tew'</span>,</span><br><span class="line">  ...obj</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(&#123;...obj&#125;) <span class="comment">// &#123;a: 1, b: 2&#125; 可以浅拷贝对象</span></span><br><span class="line"><span class="built_in">console</span>.log(obj1) <span class="comment">//&#123;c: "children", name: "tew", a: 1, b: 2&#125;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="对象的扩展"><a href="#对象的扩展" class="headerlink" title="对象的扩展"></a>对象的扩展</h2><ul><li><p>对象属性名和属性值相同时可简写, 属性可以是表达式,对象的方法简写可省略<code>:function</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="string">'c'</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  a, <span class="comment">// 属性名和值相同时可简写</span></span><br><span class="line">  [b+a]: <span class="string">'3'</span>, <span class="comment">// 属性可以使表达式</span></span><br><span class="line">  say () &#123; <span class="comment">// 对象方法简写</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.a + <span class="string">'--'</span> + <span class="keyword">this</span>[b+a])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(obj) <span class="comment">// &#123;a: 1, c1: "3", say: ƒ&#125;</span></span><br><span class="line">obj.say() <span class="comment">// 1--3</span></span><br></pre></td></tr></table></figure></li><li><p><code>Object.is(a,a)</code> 比较两个值是否相等 多数情况下Object.is等价于”===” 可以判断NaN，但<code>-0</code>和<code>0</code>不相等</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.is(<span class="number">1</span>,<span class="number">1</span>))  <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.is(<span class="literal">null</span>,<span class="literal">null</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.is(<span class="literal">undefined</span>,<span class="literal">undefined</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">NaN</span> === <span class="literal">NaN</span>) <span class="comment">// fasle</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.is(<span class="literal">NaN</span>,<span class="literal">NaN</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.is(<span class="number">0</span>,<span class="number">-0</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.is(+<span class="number">0</span>,<span class="number">-0</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li><li><p><code>Object.keys()</code> 返回一个数组，数组中每一项是对象中可被遍历的键名</p></li><li><code>Object.values()</code> 返回一个数组，数组中每一项是对象中可被遍历的键值</li><li><code>Object.entries()</code> 返回一个数组，数组中每一项是对象中可被遍历的键值对数组</li><li><code>Object.getOwnPropertyNames()</code> 返回一个数组，由指定对象的所有自身属性的属性名（包括不可枚举属性但不包括Symbol值作为名称的属性）组成。</li><li><code>Object.getOwnPropertyDescriptors(obj)</code> 返回对象所有属性的描述对象</li><li><code>Object.getOwnPropertyDescriptor(obj, &#39;a&#39;)</code> 返回指定属性的描述对象</li><li><p><code>Object.getOwnPropertySymbols(obj)</code> 方法返回一个给定对象自身的所有<code>Symbol</code>属性的数组。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="string">'c'</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  a, <span class="comment">// 属性名和值相同时可简写</span></span><br><span class="line">  [b+a]: <span class="string">'3'</span>, <span class="comment">// 属性可以使表达式</span></span><br><span class="line">  say () &#123; <span class="comment">// 对象方法简写</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.a + <span class="string">'--'</span> + <span class="keyword">this</span>[b+a])</span><br><span class="line">  &#125;,</span><br><span class="line">  [<span class="built_in">Symbol</span>(<span class="string">'tew'</span>)]:<span class="string">'hello'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(obj) <span class="comment">// &#123;a: 1, c1: "3", Symbol(tew): "hello", say: ƒ&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(obj)) <span class="comment">// ["a", "c", "say"]</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj, <span class="string">'a'</span>, &#123;</span><br><span class="line">  enumerable: <span class="literal">false</span> <span class="comment">//是否可枚举 默认值为true</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(obj)) <span class="comment">// ["c", "say"]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyNames(obj)) <span class="comment">// ["a", "c", "say"]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.values(obj)) <span class="comment">// ["3", ƒ]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.entries(obj)) <span class="comment">//[["c", "3"],["say", ƒ]]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyDescriptors(obj))</span><br><span class="line"><span class="comment">/* &#123;</span></span><br><span class="line"><span class="comment">  a: &#123;value: 1, writable: true, enumerable: false, configurable: true&#125;</span></span><br><span class="line"><span class="comment">  c1: &#123;value: "3", writable: true, enumerable: true, configurable: true&#125;</span></span><br><span class="line"><span class="comment">  say: &#123;writable: true, enumerable: true, configurable: true, value: ƒ&#125;</span></span><br><span class="line"><span class="comment">  Symbol(tew): &#123;value: "hello", writable: true, enumerable: true, configurable: true&#125;</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyDescriptor(obj, <span class="string">'a'</span>))</span><br><span class="line"><span class="comment">//&#123;value: 1, writable: true, enumerable: false, configurable: true&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertySymbols(obj)) <span class="comment">//[Symbol(tew)]</span></span><br></pre></td></tr></table></figure></li><li><p><code>Object.assign(target,[obj1])</code> 用于对象的合并,将源对象的所有可枚举属性,复制到目标对象target中,如果目标对象与源对象有同名属性,或多个源对象有同名属性,则后面的属性会覆盖前面的属性.<code>String</code>类型和 <code>Symbol</code>类型的属性都会被拷贝 只拷贝源对象的自身属性(不拷贝继承属性),也不拷贝不可枚举的属性(enumerable: false) 是浅拷贝而不是深拷贝</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  a,</span><br><span class="line">  [<span class="built_in">Symbol</span>(<span class="string">'tew'</span>)]:<span class="string">'hello'</span>,</span><br><span class="line">  say () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.a + <span class="string">'--'</span> + <span class="keyword">this</span>[b])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.assign(&#123;<span class="attr">a</span>:<span class="number">3</span>&#125;, obj)) <span class="comment">// &#123;a: 1, Symbol(tew): "hello", say: ƒ&#125;</span></span><br><span class="line"><span class="comment">// 如果只有一个参数,会直接返回该参数,不是对象则会先转成对象.</span></span><br><span class="line"><span class="comment">// 如果一个参数是null或undefiend无法转成对象则会报错</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.assign(obj)) <span class="comment">// &#123;a: 1, Symbol(tew): "hello", say: ƒ&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.assign(<span class="number">2</span>)) <span class="comment">// Number &#123;2&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.assign(<span class="literal">null</span>)) <span class="comment">// Cannot convert undefined or null to object</span></span><br><span class="line"><span class="comment">// console.log(Object.assign(undefined)) //Cannot convert undefined or null to object</span></span><br></pre></td></tr></table></figure></li><li><p><code>Object.defineProperty()</code> 添加/修改属性 或 自定义<code>Setters</code>和<code>Getters</code>(Vue2双向绑定原理就是基于此)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 添加/修改属性  */</span></span><br><span class="line">obj2 = &#123;<span class="attr">x</span>: <span class="number">1</span>&#125;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj2, <span class="string">'y'</span>, &#123;</span><br><span class="line">  <span class="comment">//描述或设置了该属性的细节</span></span><br><span class="line">  value: <span class="number">100</span>, <span class="comment">// 设置的值</span></span><br><span class="line">  writable: <span class="literal">true</span>, <span class="comment">//是否可被改写 默认值为true</span></span><br><span class="line">  enumerable: <span class="literal">true</span>, <span class="comment">//是否可枚举 默认值为true</span></span><br><span class="line">  configurable: <span class="literal">true</span> <span class="comment">//是否可被删除 默认值为true</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(obj2) <span class="comment">// &#123;x: 1, y: 100&#125;</span></span><br><span class="line">obj2.y = <span class="number">200</span> <span class="comment">// 改写</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> obj2) &#123;</span><br><span class="line">  <span class="comment">//枚举属性</span></span><br><span class="line">  <span class="built_in">console</span>.log(key + <span class="string">'--'</span> + obj2[key]) <span class="comment">// x--1  y--200</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">delete</span> obj2.y <span class="comment">// 可删除</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2) <span class="comment">// &#123;x: 1&#125;</span></span><br><span class="line"><span class="comment">/* 自定义 Setters 和 Getters 实现简单的双向绑定 */</span></span><br><span class="line"><span class="comment">//&lt;input type="text" id="model"&gt;&lt;br/&gt;</span></span><br><span class="line"><span class="comment">//&lt;div id="modelText"&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="keyword">let</span> user = &#123;&#125;</span><br><span class="line">modelText.textContent = model.value = <span class="string">'默认值'</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(user,<span class="string">"name"</span>,&#123; <span class="comment">// 监听name属性改变</span></span><br><span class="line">  get:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> defaultName</span><br><span class="line">  &#125;,</span><br><span class="line">  set:<span class="function"><span class="keyword">function</span>(<span class="params">newValue</span>)</span>&#123;</span><br><span class="line">    modelText.textContent = newValue</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">model.addEventListener(<span class="string">"keyup"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  user.name = <span class="keyword">this</span>.value</span><br><span class="line">&#125;, <span class="literal">false</span>)</span><br></pre></td></tr></table></figure></li></ul><h2 id="正则的扩展"><a href="#正则的扩展" class="headerlink" title="正则的扩展"></a>正则的扩展</h2><ul><li>y修饰符</li><li>u修饰符</li></ul>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> es6 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>es6基础(一)</title>
      <link href="/es6%E5%9F%BA%E7%A1%80(%E4%B8%80)/"/>
      <url>/es6%E5%9F%BA%E7%A1%80(%E4%B8%80)/</url>
      
        <content type="html"><![CDATA[<p><code>ECMAScript 6.0</code>简称(es6) 是继<code>ECMAScript 5</code>之后的<code>javascript</code>语言的下一代标准,它的目标是使得<code>javascript</code>语言可以用来编写复杂的大型应用程序。es6新特性：<code>let</code>、<code>const</code>、<code>解构赋值</code>、<code>Set</code>、<code>Map</code>、<code>Iterrator接口</code>等<br><a id="more"></a></p><h2 id="Let"><a href="#Let" class="headerlink" title="Let"></a>Let</h2><ol><li>使用let声明的变量,所声明的变量只在命令所在的代码块有效. for if 等形成块级作用域</li><li>为什么需要块级作用域  内层变量会覆盖外层变量 用来计数的循环变量泄漏为全局变量<br><img src="/image/es6/let1.png" alt="let1"></li><li>使用let命令声明的变量在预解析的时候不会被提升  let声明的变量不允许未定义就使用<br><img src="/image/es6/let2.png" alt="let1"></li><li>暂时性死区 只要块级作用域内存在let命令,它所声明的变量就绑定在这个区域内,不再受外部的影响.  当前作用域在执行之前，浏览器会做语法检测，如果语法检测不通过会直接报错，整个代码不执行<br>console.log(typeof a)  //暂时性死区<br><img src="/image/es6/let4.png" alt="let1"></li><li>let不允许在同一个作用域下声明已经存在的变量   不能在函数内部重新声明参数<br><img src="/image/es6/let3.png" alt="let1"><br><code>var 声明的变量由函数来划分作用域</code><br><code>let  声明的变量由代码块来划分作用域   一对{ } 包括的区域被称为代码块</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&lt;div&gt;</span></span><br><span class="line"><span class="comment">  &lt;button&gt;按钮1&lt;/button&gt;</span></span><br><span class="line"><span class="comment">  &lt;button&gt;按钮2&lt;/button&gt;</span></span><br><span class="line"><span class="comment">  &lt;button&gt;按钮3&lt;/button&gt;</span></span><br><span class="line"><span class="comment">  &lt;button&gt;按钮4&lt;/button&gt;</span></span><br><span class="line"><span class="comment">&lt;/div&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// 给多个button添加点击事件，并弹出对应的索引值</span></span><br><span class="line"><span class="keyword">var</span> btns = <span class="built_in">document</span>.querySelectorAll(<span class="string">'button'</span>)</span><br><span class="line"><span class="comment">/* 问题代码</span></span><br><span class="line"><span class="comment">for(var i=0;i&lt;btns.length;i++)&#123;</span></span><br><span class="line"><span class="comment">  btns[i].onclick = function() &#123;</span></span><br><span class="line"><span class="comment">    console.log(i) // 6 6 6 6</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// 方法1 使用let</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;btns.length;i++)&#123;</span><br><span class="line">  btns[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i) <span class="comment">// 1 2 3 4</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 方法二 自定义属性存索引</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;btns.length;i++)&#123;</span><br><span class="line">  btns[i].index = i</span><br><span class="line">  btns[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.index) <span class="comment">// 1 2 3 4</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 方法三 闭包</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;btns.length;i++)&#123;</span><br><span class="line">  <span class="comment">// 遍历过程 仅将事件处理函数赋值给按钮的onclick属性 不调用函数</span></span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params">i</span>))</span>&#123; <span class="comment">// 形参相当于局部变量 var i</span></span><br><span class="line">    btns[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 每调用一次 就创建一个函数 并将本次传入的i值放在局部变量 被永久保存起来</span></span><br><span class="line">      <span class="built_in">console</span>.log(i) <span class="comment">// 1 2 3 4</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="Const"><a href="#Const" class="headerlink" title="Const"></a>Const</h2><p>Const命令同样有上面let的1,2,3条特点,第一:所声明的常量只在其所在的代码块内有效,第二声明的常量不会被提升,第三不能声明已经被声明过得常量,除了这些,在使用const声明常量的时候需要注意的两点.</p><ol><li><p>声明的时候必须赋值 否咋报错</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> C</span><br><span class="line"><span class="comment">// Uncaught SyntaxError: Missing initializer in const declaration</span></span><br></pre></td></tr></table></figure></li><li><p>声明的常量储存简单的数据类型不可改变其值,如果存储的是对象,那么引用不可以被改变,对象的属性是可以被修改</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> C = <span class="number">1</span>; C = <span class="number">2</span></span><br><span class="line"><span class="comment">// Uncaught SyntaxError: Assignment to constant variable.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">10</span>&#125;</span><br><span class="line">obj.a = <span class="number">20</span></span><br><span class="line"><span class="built_in">console</span>.log(obj) <span class="comment">// &#123;a: 20&#125;</span></span><br><span class="line">obj = &#123;<span class="attr">a</span>: <span class="number">30</span>&#125;</span><br><span class="line"><span class="comment">// Uncaught TypeError: Assignment to constant variable</span></span><br></pre></td></tr></table></figure></li><li><p>声明不可更改的常量对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr1 = <span class="built_in">Object</span>.freeze([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.isFrozen(arr1)) <span class="comment">// true</span></span><br><span class="line">arr1[<span class="number">0</span>] = <span class="number">4</span></span><br><span class="line"><span class="built_in">console</span>.log(arr1) <span class="comment">// [1, 2, 3]</span></span><br><span class="line">arr1.push(<span class="number">4</span>) <span class="comment">// Uncaught TypeError: Cannot add property 3, object is not extensible</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="顶层对象window的属性"><a href="#顶层对象window的属性" class="headerlink" title="顶层对象window的属性"></a>顶层对象window的属性</h2><p>Es6为了保持兼容性,var命令和function命令声明的全局变量,依旧是顶层对象的属性.另一方面规定,let命令,const命令,class命令声明的全局变量,不属于顶层对象的属性.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.a) <span class="comment">// 1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.fn) <span class="comment">// fn()&#123;&#125;</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.b) <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">const</span> c = <span class="number">3</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.c) <span class="comment">// undefined</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.Person) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></p><h2 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h2><blockquote><p>解构赋值: 按照一定的模式从数组和对象中提取值,并对变量进行赋值,解构不成功,变量的值都会是undefined. 只要等号两边的模式相同.左边的变量就可以被赋予对象的值</p></blockquote><ol><li><p>基本类型的解构赋值<br><code>null和undefined 不能进行解构</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 字符串的解构</span></span><br><span class="line"><span class="keyword">let</span> [a,b,c] = <span class="string">'123'</span></span><br><span class="line"><span class="built_in">console</span>.log(a,b,c) <span class="comment">// 1 2 3</span></span><br><span class="line"><span class="comment">// length属性的解构</span></span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">length</span>: len&#125; = <span class="string">'tew'</span></span><br><span class="line"><span class="built_in">console</span>.log(len) <span class="comment">// 3</span></span><br><span class="line"><span class="comment">// null和undefined 不能进行解构</span></span><br><span class="line"><span class="keyword">let</span> [n] = <span class="literal">undefined</span> <span class="comment">// Uncaught TypeError: undefined is not iterable</span></span><br><span class="line"><span class="keyword">let</span> [m] = <span class="literal">null</span> <span class="comment">// Uncaught TypeError: null is not iterable</span></span><br></pre></td></tr></table></figure></li><li><p>数组的解构赋值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a,b,c] = [<span class="number">1</span>,<span class="string">'test'</span>, <span class="literal">false</span>]</span><br><span class="line"><span class="built_in">console</span>.log(a,b,c) <span class="comment">// 1 "test" false</span></span><br><span class="line"><span class="keyword">let</span> [x, [[y],z]] = [<span class="number">1</span>,[[[<span class="string">'a'</span>, <span class="string">'b'</span>]], <span class="literal">false</span>]]</span><br><span class="line"><span class="built_in">console</span>.log(x, y, z) <span class="comment">// 1  ["a", "b"]  false</span></span><br></pre></td></tr></table></figure></li><li><p>对象的解构赋值<br>允许你为对象的不同属性绑定变量名,左侧类似一个对象字面量,对象中是一个名值对的列表,冒号左侧是属性名称,右侧是变量名称,每个属性都会去右侧对象中查找相应的值,每一个值都会赋值给它对应的变量.先找到同名的属性,然后赋值给变量,真正赋值的是变量,而不是属性</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;<span class="attr">a</span>:b&#125; = &#123;<span class="attr">a</span>:<span class="number">1</span>&#125;</span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// Uncaught ReferenceError: a is not defined</span></span><br></pre></td></tr></table></figure><ul><li><p>属性名和变量名相同可简写</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;a, b&#125; = &#123;<span class="attr">b</span>: <span class="string">'bbb'</span>, <span class="attr">a</span>: <span class="string">'aaa'</span>&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a,b) <span class="comment">// aaa bbb</span></span><br></pre></td></tr></table></figure></li><li><p>对象解构赋值的默认值 <code>默认值生效的条件是属性值严格等于undefined</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;x,y=<span class="number">5</span>&#125; = &#123;<span class="attr">x</span>:<span class="number">1</span>&#125;</span><br><span class="line"><span class="built_in">console</span>.log(x, y) <span class="comment">// 1 5</span></span><br><span class="line"><span class="keyword">let</span> &#123;msg=<span class="string">'tew'</span>&#125; = &#123;<span class="attr">msg</span>: <span class="string">'default'</span>&#125;</span><br><span class="line"><span class="built_in">console</span>.log(msg) <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 只有属性值是 === undefined 才会采用默认值</span></span><br><span class="line"><span class="keyword">let</span> &#123;a = <span class="number">3</span>&#125; = &#123;<span class="attr">a</span>: <span class="literal">undefined</span>&#125;</span><br><span class="line"><span class="keyword">let</span> &#123;b = <span class="number">3</span>&#125; = &#123;<span class="attr">b</span>: <span class="string">'undefined'</span>&#125;</span><br><span class="line"><span class="keyword">let</span> &#123;c = <span class="number">3</span>&#125; = &#123;<span class="attr">c</span>: <span class="literal">null</span>&#125;</span><br><span class="line"><span class="keyword">let</span> &#123;d = <span class="number">3</span>&#125; = &#123;<span class="attr">d</span>: <span class="literal">false</span>&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a,b, c,d) <span class="comment">// 3 'undefined'  null false</span></span><br></pre></td></tr></table></figure></li><li><p>选择性解构赋值,用逗号可省略隔开</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [,,c] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="built_in">console</span>.log(c) <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></li><li><p>将右侧多余的值以数组形式赋值给左边的变量–rest模式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [head, ...tail] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="built_in">console</span>.log(head, tail) <span class="comment">// 1 [2, 3]</span></span><br></pre></td></tr></table></figure></li><li><p>起别名 原名称:别名 只能用别名来访问</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;name, <span class="attr">a</span>:num&#125; = &#123;<span class="string">'name'</span>:<span class="string">'tew'</span>, <span class="attr">a</span>: <span class="number">9</span>&#125;</span><br><span class="line"><span class="built_in">console</span>.log(name, num) <span class="comment">// tew  9</span></span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// a is not defined</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>函数参数的解构赋值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params">a=<span class="number">1</span>,b=<span class="number">2</span></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a,b)</span><br><span class="line">&#125;</span><br><span class="line">fn2() <span class="comment">// 1 2</span></span><br><span class="line">fn2(&#123;<span class="attr">b</span>:<span class="number">9</span>&#125;) <span class="comment">// &#123;b:9&#125; 2</span></span><br><span class="line"><span class="comment">// 函数参数解构赋值 默认值</span></span><br><span class="line"><span class="comment">// 函数在未传值时才会使用默认值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">&#123;a=<span class="number">1</span>,b=<span class="number">2</span>&#125; = &#123;&#125;</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// 解构赋值 &#123;a=1, b=2&#125; = 传过来的实参 (默认&#123;&#125;)</span></span><br><span class="line">  <span class="built_in">console</span>.log(a,b)</span><br><span class="line">&#125;</span><br><span class="line">fn() <span class="comment">// 1 2</span></span><br><span class="line">fn(&#123;<span class="attr">b</span>:<span class="number">5</span>&#125;) <span class="comment">// 1 5</span></span><br><span class="line"><span class="comment">// 函数在未传值时才会使用默认值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params">&#123;a, b&#125; = &#123;a:<span class="number">3</span>, b:<span class="number">4</span>&#125;</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// 解构赋值 &#123;a=1, b=2&#125; = 传过来的实参(默认&#123;a:3, b:4&#125;)</span></span><br><span class="line">  <span class="built_in">console</span>.log(a,b)</span><br><span class="line">&#125;</span><br><span class="line">fn1() <span class="comment">// 3 4</span></span><br><span class="line">fn1(&#123;<span class="attr">a</span>:<span class="number">5</span>&#125;) <span class="comment">// 5 undefined</span></span><br><span class="line">fn1(&#123;<span class="attr">a</span>:<span class="number">10</span>, <span class="attr">b</span>:<span class="number">20</span>&#125;) <span class="comment">// 10 20</span></span><br><span class="line">fn1(&#123;&#125;) <span class="comment">// undefined undefined</span></span><br></pre></td></tr></table></figure></li><li><p>解构赋值的用途</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 1. 交换变量  */</span></span><br><span class="line"><span class="keyword">let</span> x = <span class="number">100</span>, y = <span class="number">200</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'交换前'</span>, x, y); <span class="comment">// 交换前 100 200</span></span><br><span class="line">[x, y] = [y, x] <span class="comment">//表达式前语句必须有;分号</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'交换后'</span>, x, y) <span class="comment">// 交换后 200 100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 2. 从函数返回多个值(数组或对象) */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    id:<span class="number">10001</span>,</span><br><span class="line">    name: <span class="string">'tew'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> &#123;id, name&#125; = fun1()</span><br><span class="line"><span class="built_in">console</span>.log(id, name)</span><br><span class="line"><span class="comment">/* 3. 当函数参数顺序不确定时 */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">&#123;id, name&#125;</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(id, name)</span><br><span class="line">&#125;</span><br><span class="line">fn(&#123;<span class="attr">name</span>: <span class="string">'tew'</span>, <span class="attr">id</span>: <span class="string">'002'</span>&#125;) <span class="comment">// 002 tew</span></span><br><span class="line"><span class="comment">/* 4. 提取json数据 例如axios返回的数据 */</span></span><br><span class="line"><span class="comment">// let &#123;status, data&#125; = this.$axios.post('xx')</span></span><br><span class="line"><span class="keyword">let</span> data = &#123;</span><br><span class="line">  id: <span class="string">'003'</span>,</span><br><span class="line">  nick: <span class="string">'bob'</span>,</span><br><span class="line">  score: &#123; <span class="attr">math</span>: <span class="number">95</span>, <span class="attr">chinese</span>: <span class="number">90</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">id</span>:num, nick, <span class="attr">score</span>: &#123; math &#125; &#125; = data</span><br><span class="line"><span class="built_in">console</span>.log(num, nick, math) <span class="comment">// 003 bob 95</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="数据结构-Set"><a href="#数据结构-Set" class="headerlink" title="数据结构 Set"></a>数据结构 Set</h2><blockquote><p>Set是由一组无序且唯一(既不能重复)的项组成 ,key和value相同,没有重复的value</p></blockquote><ul><li><p>创建set 可以接受数组或类数组作为参数,用来初始化</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建 Set</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// Set(3) &#123;1, 2, 3&#125;</span></span><br><span class="line"><span class="comment">// Set的属性 a.size</span></span><br><span class="line"><span class="built_in">console</span>.log(a.size) <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></li><li><p><code>set.add(value)</code> 添加数据 返回值为set结构本身</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a.add(<span class="string">'a'</span>).add(<span class="string">'b'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// Set(5) &#123;1, 2, 3, "a", "b"&#125;</span></span><br></pre></td></tr></table></figure></li><li><p><code>set.delete(value)</code> 删除指定的数据,返回布尔值,表示删除是否成功</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a.delete(<span class="string">'a'</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// Set(4) &#123;1, 2, 3, "b"&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(a.delete(<span class="string">'a'</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li><li><p><code>set.has(value)</code> 判断该值是否为set成员,返回一个布尔值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a.has(<span class="string">'b'</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(a.has(<span class="string">'a'</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li><li><p><code>set.keys()</code> 返回所有键名</p></li><li><code>set.values()</code> 返回所有键名</li><li><p><code>set.entries()</code> 返回所有键值对</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a.keys()) <span class="comment">// SetIterator &#123;1, 2, 3, "b"&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(a.values()) <span class="comment">// SetIterator &#123;1, 2, 3, "b"&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(a.entries()) <span class="comment">// SetIterator &#123;1 =&gt; 1, 2 =&gt; 2, 3 =&gt; 3, "b" =&gt; "b"&#125;</span></span><br></pre></td></tr></table></figure></li><li><p><code>set.forEach(function(value,key,set){})</code> 遍历</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value, key, set</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key+<span class="string">'--'</span>+value) <span class="comment">// 1--1 2--2 3--3 b--b</span></span><br><span class="line">  <span class="built_in">console</span>.log(set) <span class="comment">// SetIterator &#123;1, 2, 3, "b"&#125;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p><code>set.clear()</code> 清除所有数据,无返回值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a.clear()</span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// Set(0) &#123;&#125;</span></span><br></pre></td></tr></table></figure></li><li><p><code>set</code> 应用场景（去重、交集、并集、差集）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数组去重</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="string">'a'</span>, <span class="literal">true</span>, <span class="string">'a'</span>, <span class="literal">true</span>]</span><br><span class="line"><span class="built_in">console</span>.log([...new <span class="built_in">Set</span>(arr)]) <span class="comment">// [1, "a", true]</span></span><br><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">3</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">1</span>]</span><br><span class="line"><span class="comment">// 合并并去重</span></span><br><span class="line"><span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>([...arr1, ...arr2]))) <span class="comment">//[4, 6, 8, 2, 1, 3, 7]</span></span><br><span class="line"><span class="comment">// 交集</span></span><br><span class="line"><span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>([...arr1])).filter(<span class="function"><span class="params">item</span> =&gt;</span> arr2.includes(item)) <span class="comment">// [6, 8, 1]</span></span><br><span class="line">[...new <span class="built_in">Set</span>([...arr1])].filter(<span class="function"><span class="params">item</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Set</span>(arr2).has(item)) <span class="comment">// [6, 8, 1]</span></span><br><span class="line"><span class="comment">// 差集</span></span><br><span class="line"><span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>([...arr1])).filter(<span class="function"><span class="params">item</span> =&gt;</span> !arr2.includes(item)) <span class="comment">// [4, 2]</span></span><br><span class="line">[...new <span class="built_in">Set</span>([...arr1])].filter(<span class="function"><span class="params">item</span> =&gt;</span> !<span class="keyword">new</span> <span class="built_in">Set</span>(arr2).has(item)) <span class="comment">// [4, 2]</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="数据结构-Map"><a href="#数据结构-Map" class="headerlink" title="数据结构 Map"></a>数据结构 Map</h2><blockquote><p>Map类似于对象,也是键值对的集合,但是’键’不限于字符串.各种数据的值(包括对象)都可以当成键,也就是说,Object结构提供了’字符串–值’的对应,Map提供了’值–值’的对应.</p></blockquote><ul><li><p>创建map数据结构</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="string">'a'</span>, <span class="number">1</span>],</span><br><span class="line">  [<span class="string">'b'</span>, <span class="number">2</span>]</span><br><span class="line">])</span><br><span class="line"><span class="built_in">console</span>.log(map) <span class="comment">// Map(2) &#123;"a" =&gt; 1, "b" =&gt; 2&#125;</span></span><br><span class="line"><span class="comment">// Map的属性size</span></span><br><span class="line"><span class="built_in">console</span>.log(map.size) <span class="comment">// 2</span></span><br></pre></td></tr></table></figure></li><li><p><code>map.set(key,value)</code> 设置值,返回整个map结构,如果可以已经有值,则键值会被更新,否则新生成该键.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">map.set(<span class="string">'name'</span>, <span class="string">'tew'</span>).set(<span class="string">'id'</span>, <span class="number">001</span>)</span><br><span class="line"><span class="built_in">console</span>.log(map) <span class="comment">// &#123;"a" =&gt; 1, "b" =&gt; 2, "name" =&gt; "tew", "id" =&gt; 1&#125;</span></span><br></pre></td></tr></table></figure></li><li><p><code>map.get(key)</code> get方法读取key对应的键值,如果找不到key,返回undefined</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">'name'</span>)) <span class="comment">// tew</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">'age'</span>)) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></li><li><p><code>.map.delate(key)</code> 删除某个键,返回布尔值true成功,false失败</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(map.delete(<span class="string">'id'</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(map.delete(<span class="string">'age'</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(map) <span class="comment">// Map(3) &#123;"a" =&gt; 1, "b" =&gt; 2, "name" =&gt; "tew"&#125;</span></span><br></pre></td></tr></table></figure></li><li><p><code>map.has(key)</code> 判断某个键是否在当前map对象之中</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(map.has(<span class="string">'name'</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(map.has(<span class="string">'age'</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li><li><p><code>map.keys()</code>  返回所有的键名</p></li><li><code>map.values()</code>  返回所有的键值</li><li><p><code>map.entries()</code>  返回所有键值对</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(map.keys()) <span class="comment">// MapIterator &#123;"a", "b", "name"&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(map.values()) <span class="comment">// MapIterator &#123;1, 2, "tew"&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(map.entries()) <span class="comment">// MapIterator &#123;"a" =&gt; 1, "b" =&gt; 2, "name" =&gt; "tew"&#125;</span></span><br></pre></td></tr></table></figure></li><li><p><code>map.forEach(value, key, map)</code> 遍历map每个成员</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">map.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value, key, map</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key+<span class="string">'--'</span>+value) <span class="comment">// a--1 b--2 name--tew</span></span><br><span class="line">  <span class="built_in">console</span>.log(map) <span class="comment">// Map(3) &#123;"a" =&gt; 1, "b" =&gt; 2, "name" =&gt; "tew"&#125;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p><code>map.clear()</code> 清除所有数据,没有返回值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">map.clear()</span><br><span class="line"><span class="built_in">console</span>.log(map) <span class="comment">// Map(0) &#123;&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>map的键是基本数据类型时,只要两个值严格相等,map将其视为一个键,但NaN不严格相等与自身,但map将其视为同一个键</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">map.set(<span class="literal">NaN</span>, <span class="number">10</span>).set(<span class="literal">NaN</span>, <span class="number">20</span>) <span class="comment">// Map(1) &#123;NaN =&gt; 20&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>map的键是对象的时候,比较的是引用(内存地址),只有引用地址一样才可以</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">map.set(&#123;&#125;, <span class="string">'对象'</span>).set(&#123;&#125;, <span class="string">'对象'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(map) <span class="comment">// Map(3) &#123;&#123;…&#125; =&gt; "对象", &#123;…&#125; =&gt; "对象"&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(&#123;&#125;)) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="Iterrator和for-of循环"><a href="#Iterrator和for-of循环" class="headerlink" title="Iterrator和for-of循环"></a>Iterrator和for-of循环</h2><blockquote><p>Iterator(迭代器)是一种接口,为不同的数据结构,提供统一的访问机制,任何数据结构只要部署Iterator接口,就可以完成遍历操作,而且这种遍历操作是依次处理数据结构的所有成员</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">iterrator</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    next: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> index&lt;arr.length ? &#123; <span class="attr">value</span>: arr[index++], <span class="attr">done</span>:<span class="literal">false</span> &#125;:&#123; <span class="attr">value</span>: <span class="literal">undefined</span>, <span class="attr">done</span>:<span class="literal">true</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> it = iterrator(arr)</span><br><span class="line"><span class="built_in">console</span>.log(it.next()) <span class="comment">// &#123;value: 1, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(it.next()) <span class="comment">// &#123;value: 2, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(it.next()) <span class="comment">// &#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure><ul><li>Iterator遍历(使用<code>for of</code>) 为各种数据结构,提供统一简便的访问接口使成员能够按某种次序排列</li><li><p>Iterator的遍历过程</p><ul><li>创建一个指针对象,指向当前数据结构的起始位置,遍历器对象本质就是指针对象</li><li>每一次调用next方法都会返回当前指针所对应的成员的信息,返回一个包含value和done两个属性的对象,其中,value属性就是当前成员的值,done属性是不布尔值,表示遍历是否结束.</li><li>凡是具有Symbol.iterator 属性的数据结构都具有Iterator接口 (数组 Set Map)</li><li>对象是没有Symbol.iterator属性<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">"a"</span>,<span class="number">2</span>])</span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([[<span class="string">"a"</span>, <span class="number">1</span>]])</span><br><span class="line"><span class="keyword">const</span> obj = &#123;<span class="attr">a</span>: <span class="number">1</span>&#125;</span><br><span class="line"><span class="built_in">console</span>.log(arr[<span class="built_in">Symbol</span>.iterator]) <span class="comment">// ƒ values() &#123; [native code] &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(arr[<span class="built_in">Symbol</span>.iterator]() <span class="comment">// Array Iterator &#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(set[<span class="built_in">Symbol</span>.iterator]()) <span class="comment">// SetIterator &#123;"a", 2&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(map[<span class="built_in">Symbol</span>.iterator]()) <span class="comment">// MapIterator &#123;"a" =&gt; 1&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj[<span class="built_in">Symbol</span>.iterator]) <span class="comment">// undefiend</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>具备iterator接口的数据机构都可以进行<code>解构赋值</code>和<code>扩展运算符</code>、<code>for of遍历</code>操作</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> es6 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>HTTP协议原理与实践</title>
      <link href="/http/"/>
      <url>/http/</url>
      
        <content type="html"><![CDATA[<a id="more"></a><h3 id="http三次握手"><a href="#http三次握手" class="headerlink" title="http三次握手"></a>http三次握手</h3><h3 id="URI-URL-URN"><a href="#URI-URL-URN" class="headerlink" title="URI URL URN"></a>URI URL URN</h3><ul><li>URI 统一资源标志符 用来唯一标识互联网上的信息资源 包括URL和URN</li><li>URL 统一资源定位符 如:<a href="https://www.baidu.com/s?wd=aa" target="_blank" rel="noopener">https://www.baidu.com/s?wd=aa</a></li><li>URN 永久统一资源定位符 在资源更换地址后还能找到</li></ul><h3 id="HTTP报文格式"><a href="#HTTP报文格式" class="headerlink" title="HTTP报文格式"></a>HTTP报文格式</h3><h3 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h3><ul><li>cors预请求 允许方法 GET HEAD POST</li><li>cors预请求 允许content-type <code>text/plain</code> <code>multipart/form-data</code> <code>application/x-www-form-urlencoded</code></li></ul><h3 id="缓存头Cache-control"><a href="#缓存头Cache-control" class="headerlink" title="缓存头Cache-control"></a>缓存头Cache-control</h3><ul><li>可缓存性 public private no-cahe</li><li>到期时间 max-age=seconds  s-maxage=seconds  max-stale=seconds</li><li><p>其他 no-store no-transform</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 客户端 index.html</span></span><br><span class="line">&lt;script src=<span class="string">"/cache.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="comment">// 服务端 server.js</span></span><br><span class="line"><span class="keyword">if</span> (request.url === <span class="string">'/cache.js'</span>) &#123;</span><br><span class="line">  response.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">    <span class="string">'Content-Type'</span>: <span class="string">'text/javascript'</span>,</span><br><span class="line">    <span class="string">'Cache-Control'</span>: <span class="string">'max-age=20'</span></span><br><span class="line">  &#125;)</span><br><span class="line">  response.end(<span class="string">'console.log("script loaded")'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 使用 Cache-Control:max-age=20后 客户端再20S之内访问cache会读取客户端缓存得cache.js,过期后会重新请求</span></span><br><span class="line"><span class="comment">// 服务端 server.js</span></span><br><span class="line"><span class="keyword">if</span> (request.url === <span class="string">'/cache.js'</span>) &#123;</span><br><span class="line">  response.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">    <span class="string">'Content-Type'</span>: <span class="string">'text/javascript'</span>,</span><br><span class="line">    <span class="string">'Cache-Control'</span>: <span class="string">'no-store'</span></span><br><span class="line">  &#125;)</span><br><span class="line">  response.end(<span class="string">'console.log("script loaded")'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 使用Cache-Control: no-store 禁止客户端使用缓存</span></span><br></pre></td></tr></table></figure></li><li><p>Last-Modified 上次修改时间 配合If-Modified-Since或者If-Unmodified-Since使用 对比上次修改时间以验证资源是否需要更新</p></li><li>Etag 数据签名 配合If-Match或者If-Non-Match使用 对比资源的签名判断是否使用缓存</li><li>参考文章：<a href="https://blog.csdn.net/u014465934/article/details/83796427" target="_blank" rel="noopener">Expires、Cache-Control、Last-Modified和If-Modified—Since、Etag和If-None-Match</a>  <a href="https://segmentfault.com/a/1190000019178114?utm_source=weekly&amp;utm_medium=email&amp;utm_campaign=email_weekly" target="_blank" rel="noopener">通过HTTP Header控制缓存</a></li></ul><h3 id="Cookie与session"><a href="#Cookie与session" class="headerlink" title="Cookie与session"></a>Cookie与session</h3><ul><li><p>cookie 通过Set-Cookie设置下次请求会自动带上，键值对，可以设置多个</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. max-age和expires设置过期时间</span></span><br><span class="line"><span class="comment">// 2. secure只在https时候发送</span></span><br><span class="line"><span class="comment">// 3. HttpOnly无法通过document.cookie访问</span></span><br><span class="line"><span class="comment">// 服务端</span></span><br><span class="line">response.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">  <span class="string">'Content-Type'</span>: <span class="string">'text/html'</span>,</span><br><span class="line">  <span class="comment">// 'Set-Cookie': 'id=123' // 设置单个cookie</span></span><br><span class="line">  <span class="comment">// 'Set-Cookie': 'id=123;max-age=5' // 设置单个cookie失效时间</span></span><br><span class="line">  <span class="comment">// 'Set-Cookie': ['id=123;max-age=5','abc=456'] // 设置多个cookie</span></span><br><span class="line">  <span class="string">'Set-Cookie'</span>: [<span class="string">'id=123; max-age=2'</span>, <span class="string">'abc=456;domain=test.com'</span>] <span class="comment">// 设置多个cookie并设置domain</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 客户端 获取cookie</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.cookie)</span><br></pre></td></tr></table></figure></li><li><p>session</p></li></ul><h3 id="Http长连接-Connection-39-39-keep-alive-39-（HTTP1-1才支持）"><a href="#Http长连接-Connection-39-39-keep-alive-39-（HTTP1-1才支持）" class="headerlink" title="Http长连接 Connection&#39;: &#39;keep-alive&#39; （HTTP1.1才支持）"></a>Http长连接 <code>Connection&#39;: &#39;keep-alive&#39;</code> （HTTP1.1才支持）</h3><ul><li>HTTP协议采用请求-应答模式，当使用普通模式，非keep-alive时，每个请求/应答,客户端和服务端都要新建一个连接，完成之后立即断开（HTTP为无连接的协议）</li><li>当使用Keep-alive模式（又称持久连接，长链接），keep-alive功能使客户端到服务器端的连接持续有效，当客户端对服务器有后继请求时，keep-alive功能避免了重新建立连接。</li></ul><h3 id="Accept等头部信息"><a href="#Accept等头部信息" class="headerlink" title="Accept等头部信息"></a>Accept等头部信息</h3><ul><li>Accept: text/html</li><li>Accept-Encoding:gzip,deflate,br</li><li>Accept-Language:zh-CN,zh;q:0.9</li><li>User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1</li><li>referer: 发出请求的页面的URL</li></ul><h3 id="Content"><a href="#Content" class="headerlink" title="Content"></a>Content</h3><ul><li>Content-Type<ul><li>Content-Type:’application/x-www-form-urlencoded’ name=1212&amp;password=sds</li><li>Content-Type: multipart/form-data; boundary=—-WebKitFormBoundary5hG57FPGsLkJqcnt</li></ul></li><li>Content-Encoding:’gzip’</li><li>Content-Language</li></ul><h3 id="重定向-Location"><a href="#重定向-Location" class="headerlink" title="重定向 Location"></a>重定向 Location</h3><ul><li>301与302区别 浏览器第二次访问时 不在请求服务器从失效链接重定向新的地址，而直接请求新地址</li></ul><h3 id="Content-Security-Policy"><a href="#Content-Security-Policy" class="headerlink" title="Content-Security-Policy"></a>Content-Security-Policy</h3><h2 id="客户端请求-http-request"><a href="#客户端请求-http-request" class="headerlink" title="客户端请求 http.request"></a>客户端请求 http.request</h2><ul><li>application/json</li><li>application/x-www-form-urlencoded 表单提交</li><li>multipart/form-data 文件上传</li><li>text/xml</li></ul><h2 id="消息头"><a href="#消息头" class="headerlink" title="消息头"></a>消息头</h2><ul><li>Content-Type&lt;实体首部&gt;：发送内容类型</li><li>Content-Length&lt;实体首部&gt;：发送内容长度</li><li>Location&lt;响应首部&gt;：重定向地址</li><li>Cookie&lt;请求首部&gt;：包含要发送给服务器的Cookie</li><li>Set-Cookie&lt;响应首部&gt;：服务器端向客户端发送 cookie</li></ul><h2 id="状态码"><a href="#状态码" class="headerlink" title="状态码"></a>状态码</h2><ul><li>1xx  提示信息–表示请求已被成功接收，继续处理</li><li>2xx  成功 - 表示请求已被成功接收，理解，接受</li><li>3xx  重定向 - 要完成请求必须进行更进一步的处理</li><li>4xx  客户端错误 - 请求有语法错误或请求无法实现</li><li>5xx  服务器端错误 - 服务器未能实现合法的请求</li></ul><h2 id="http状态码有那些？分别代表是什么意思？"><a href="#http状态码有那些？分别代表是什么意思？" class="headerlink" title="http状态码有那些？分别代表是什么意思？"></a>http状态码有那些？分别代表是什么意思？</h2><ul><li>100 Continue   继续，一般在发送post请求时，已发送了http header之后服务端将返回此信息，表示确认，之后发送具体参数信息</li><li>200 OK         客户端请求成功，正常返回信息</li><li>201 Created    请求成功并且服务器创建了新的资源</li><li>202 Accepted   服务器已接受请求，但尚未处理</li><li>301 Moved Permanently  永久重定向。旧地址已废弃无法访问，第二次访问时，不在请求服务器从失效链接重定向新的地址，而直接请求新地址</li><li>302 Found        临时性重定向。 旧地址还可以访问</li><li>303 See Other    临时性重定向，且总是使用 GET 请求新的 URI。</li><li>304 Not Modified 自从上次请求后，请求的网页未修改过。服务端告诉浏览器可以使用缓存</li><li>400 Bad Request  客户端请求有语法错误， 不能被服务器所理解</li><li>401 Unauthorized 请求未授权。</li><li>403 Forbidden    禁止访问。服务器收到请求但是拒绝提供服务</li><li>404 Not Found    请求资源不存在</li><li>500 Internal Server Error  最常见的服务器端错误。服务器发生不可预期的错误</li><li>503 Service Unavailable 服务器端暂时无法处理请求（可能是过载或维护）。</li></ul><h2 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h2><p><code>HTTPS是使用加密通道来传输HTTP的内容。但是HTTPS首先与服务端建立一条TLS加密通道。TLS构建于TCP协议之上，它实际上是对传输的内容做一次加密，所以从传输内容上看，HTTPS跟HTTP没有任何区别。</code><br>HTTPS的作用</p><ul><li>确定请求的目标服务端身份</li><li>保证传输的数据不会被网络中间节点窃听或者篡改</li></ul><h2 id="HTTP2"><a href="#HTTP2" class="headerlink" title="HTTP2"></a>HTTP2</h2><p><code>服务端推送能够在客户端发送第一个请求到服务端时，提前把一部分内容推送给客户端，放入缓存当中，这可以避免客户端请求顺序带来的并行度不高，从而导致的性能问题。</code><br><code>TCP连接复用，则使用同一个TCP连接来传输多个HTTP请求，避免了TCP连接建立时的三次握手开销，和初建TCP连接时传输窗口小的问题。</code><br>HTTP2改进点</p><ul><li>支持服务端推送</li><li>支持TCP连接复用</li></ul>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> http协议 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>深入学习redux</title>
      <link href="/%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0redux/"/>
      <url>/%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0redux/</url>
      
        <content type="html"><![CDATA[<p><code>Redux</code>是<code>JavaScript</code>状态容器，提供可预测化的状态管理。可以让你构建一致化的应用，运行于不同的环境（客户端、服务器、原生应用），并且易于测试。不仅于此，它还提供 超爽的开发体验，比如有一个时间旅行调试器可以编辑后实时预览。<code>Redux</code>由<code>Flux</code>演变而来，避开了 Flux 的复杂性。 不管你有没有使用过它们，只需几分钟就能上手<code>Redux</code>。<br><a id="more"></a></p><h2 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h2><p><code>Redux Flow</code> redux 工作流<br><img src="/image/react/ReduxFlow.png" alt="Redux Flow"><br><code>注: react组件要改变store里面的数据,首先要dispatch(派发)一个action,传递给store,然后store再把之前的state数据和action转发给reducer函数,reducer接收到action和state之后,做一些处理,然后返回一个新的state(newState)给store, 之后store用新的state替换掉之前旧的state数据,store数据改变后, react组件感知到store数据改变,然后从store重新取数据,更新组件的内容,页面发生变化.</code></p><ul><li>安装 Redux <code>npm i redux</code></li><li>创建 state容器</li><li>创建 reducer 必须一个函数</li><li><p>在state中引入reducer</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">'./reducer'</span></span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br><span class="line"></span><br><span class="line"><span class="comment">// store/reducer.js</span></span><br><span class="line"><span class="keyword">const</span> defaultState = &#123;</span><br><span class="line">  inputValue: <span class="string">''</span>,</span><br><span class="line">  list: []</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (state = defaultState, action) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> state</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建action todolist.js</span></span><br><span class="line"><span class="comment">// input绑定  onChange=&#123;this.InpuChange.bind(this)&#125;</span></span><br><span class="line">InpuChange (e) &#123;</span><br><span class="line">  <span class="keyword">const</span> action = &#123; <span class="comment">// 定义action</span></span><br><span class="line">    type: <span class="string">'change_input_value'</span>,</span><br><span class="line">    value: e.target.value</span><br><span class="line">  &#125;</span><br><span class="line">  store.dispatch(action) <span class="comment">// 派发action给reducer</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// store/reducer.js reducer接收action</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (state = defaultState, action) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(state, action);</span><br><span class="line">  <span class="keyword">if</span> (action.type == <span class="string">'change_input_value'</span>) &#123;</span><br><span class="line">    <span class="comment">// 拷贝一份state reducer可以接收state, 但是建议不要直接修改state</span></span><br><span class="line">    <span class="keyword">const</span> newState = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(state))</span><br><span class="line">    newState.inputValue = action.value</span><br><span class="line">    <span class="keyword">return</span> newState  <span class="comment">//返回给store</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> state</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// store进行数据替换 store中的state数据变化</span></span><br><span class="line"><span class="comment">// todolist.js  更新组件页面数据</span></span><br><span class="line">store.subscribe(<span class="keyword">this</span>.changeStore.bind(<span class="keyword">this</span>)) <span class="comment">// 订阅store的改变</span></span><br><span class="line">changeStore () &#123;</span><br><span class="line">  <span class="keyword">this</span>.setState(store.getState()) <span class="comment">// 重新获取store中state数据</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在chrome应用商店 搜索并安装 Redux DevTools Chrome 调试Redux</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在store.index.js 中创建store时加入这句</span></span><br><span class="line"><span class="keyword">const</span> store = createStore(</span><br><span class="line">  reducer,</span><br><span class="line">  <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION__()</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li><li><p>添加actionTypes.js的意义在于  用常量去表示action类型, 在dispacth和reducer中action.type不一致导致字符串不报错难以排查问题, 使用常量如果写错会报错, 且便于修改action的名称,只需要修改定时的action值即可</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// actionTypes.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> CHANGE_INPUT_VALUE = <span class="string">'change_input_value'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ADD_TODO_ITEM = <span class="string">'add_todo_item'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> DELETE_TODO_ITEM = <span class="string">'delete_todo_item'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// reducer.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;CHANGE_INPUT_VALUE, ADD_TODO_ITEM, DELETE_TODO_ITEM &#125; <span class="keyword">from</span> <span class="string">'./actionTypes'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (state = defaultState, action) =&gt; &#123;</span><br><span class="line">  <span class="comment">// store 和 input的value实现响应   reducer可以接收state,</span></span><br><span class="line">  <span class="keyword">if</span> (action.type === CHANGE_INPUT_VALUE) &#123;</span><br><span class="line">    <span class="comment">// 拷贝一份state 一定不能直接修改state 需要返回一个新的state数据</span></span><br><span class="line">    <span class="keyword">const</span> newState = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(state))</span><br><span class="line">    newState.inputValue = action.value</span><br><span class="line">    <span class="keyword">return</span> newState</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// todoList.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;CHANGE_INPUT_VALUE, ADD_TODO_ITEM, DELETE_TODO_ITEM &#125; <span class="keyword">from</span> <span class="string">'./actionTypes'</span></span><br><span class="line">InpuChange (e) &#123;</span><br><span class="line">  <span class="keyword">const</span> action = &#123;</span><br><span class="line">    type: CHANGE_INPUT_VALUE,</span><br><span class="line">    value: e.target.value</span><br><span class="line">  &#125;</span><br><span class="line">  store.dispatch(action)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>使用actionCreator统一创建action</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// actionCreators.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;CHANGE_INPUT_VALUE, ADD_TODO_ITEM, DELETE_TODO_ITEM &#125; <span class="keyword">from</span> <span class="string">'./actionTypes'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getChangeInputValue = <span class="function">(<span class="params">value</span>) =&gt;</span> (&#123;</span><br><span class="line">  type: CHANGE_INPUT_VALUE,</span><br><span class="line">  value</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getAddTodoItem = <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</span><br><span class="line">  type: ADD_TODO_ITEM</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getDeleteItem = <span class="function">(<span class="params">index</span>) =&gt;</span> (&#123;</span><br><span class="line">  type: DELETE_TODO_ITEM,</span><br><span class="line">  index</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// TodoList.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; getChangeInputValue, getAddTodoItem, getDeleteItem &#125; <span class="keyword">from</span> <span class="string">'./store/actionCreators'</span></span><br><span class="line">InpuChange(e) &#123;</span><br><span class="line">  store.dispatch(getChangeInputValue(e.target.value))</span><br><span class="line">&#125;</span><br><span class="line">buttonClick() &#123;</span><br><span class="line">  store.dispatch(getAddTodoItem())</span><br><span class="line">&#125;</span><br><span class="line">itemDeleteHandle(index) &#123;</span><br><span class="line">  store.dispatch(getDeleteItem(index))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>combineReducers对reducer进行拆分管理</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// /common/header/store/reducer.js</span></span><br><span class="line"><span class="keyword">const</span> defaultState = &#123;</span><br><span class="line">  focused: <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (state = defaultState, action ) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> newState = &#123;...state&#125; <span class="comment">// 拷贝新对象</span></span><br><span class="line">  <span class="keyword">if</span> (action.type === <span class="string">'focus_input'</span>) &#123;</span><br><span class="line">    newState.focused = <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (action.type === <span class="string">'blur_input'</span>) &#123;</span><br><span class="line">    newState.focused = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newState</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// /store/reducer.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"><span class="keyword">import</span> headerReducer <span class="keyword">from</span> <span class="string">'../common/header/store/reducer'</span></span><br><span class="line"><span class="keyword">const</span> reducer = combineReducers(&#123;</span><br><span class="line">  header: headerReducer</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> reducer</span><br><span class="line"><span class="comment">// header/index.js</span></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    focused: state.header.focused</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>使用Immutable.js来管理store中的state数据使其不可更改<br><code>npm i immutable</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// header/reducer.js</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actionCreators <span class="keyword">from</span> <span class="string">'./actionTypes'</span></span><br><span class="line"><span class="keyword">import</span> &#123; fromJS &#125; <span class="keyword">from</span> <span class="string">'immutable'</span></span><br><span class="line"><span class="keyword">const</span> defaultState = fromJS(&#123;</span><br><span class="line">  focused: <span class="literal">false</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (state = defaultState, action ) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (action.type === actionCreators.SEARCH_FOCUS) &#123;</span><br><span class="line">    <span class="comment">// immutable对象色set方法,返回一个全新的对象</span></span><br><span class="line">    <span class="keyword">return</span> state.set(<span class="string">'focused'</span>,<span class="literal">true</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (action.type === actionCreators.SEARCH_BLUR) &#123;</span><br><span class="line">    <span class="keyword">return</span> state.set(<span class="string">'focused'</span>, <span class="literal">false</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> state</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// heade/index.js</span></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// 使用get()获取immutable对象下的state属性</span></span><br><span class="line">    focused: state.header.get(<span class="string">'focused'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>使用redux-immutable统一数据格式<br><code>npm i redux-immutable</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// /store/reducer.js</span></span><br><span class="line"><span class="comment">// import &#123; combineReducers &#125; from 'redux'</span></span><br><span class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">'redux-immutable'</span></span><br><span class="line"><span class="keyword">import</span> headerReducer <span class="keyword">from</span> <span class="string">'../common/header/store/reducer'</span></span><br><span class="line"><span class="keyword">const</span> reducer = combineReducers(&#123;</span><br><span class="line">  header: headerReducer</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> reducer</span><br><span class="line"><span class="comment">// heade/index.js</span></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// 使用get()获取immutable对象下的state属性</span></span><br><span class="line">    <span class="comment">// focused: state.get('header').get('focused')</span></span><br><span class="line">    focused: state.getIn([<span class="string">'header'</span>, <span class="string">'focused'</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>redux的三要素  store是唯一的   只有store能够改变自己的内容   Reducer必须是纯函数</p></li><li>纯函数指的是给固定的输入,就一定会有固定的输出,不管调用多少次,而且不会有任何的副作用</li></ul><h2 id="使用Redux-thunk中间件实现ajax请求-实际上是对dispatch的升级"><a href="#使用Redux-thunk中间件实现ajax请求-实际上是对dispatch的升级" class="headerlink" title="使用Redux-thunk中间件实现ajax请求(实际上是对dispatch的升级)"></a>使用Redux-thunk中间件实现ajax请求(实际上是对dispatch的升级)</h2><ul><li>npm i redux-thunk -S</li><li><p>在创建redux时,配置redux-thunk,redux-devtools</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware, compose &#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">'redux-thunk'</span></span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">'./reducer'</span></span><br><span class="line"><span class="keyword">const</span> composeEnhancers =<span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?</span><br><span class="line">  <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(&#123;&#125;) : compose</span><br><span class="line"><span class="keyword">const</span> enhancer = composeEnhancers(</span><br><span class="line">  applyMiddleware(thunk)</span><br><span class="line">)</span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer, enhancer)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure></li><li><p>在<code>actionCreator</code>创建action，就可以使用函数作为返回值了</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// actionCreator.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> initTodoList = <span class="function">(<span class="params">data</span>) =&gt;</span> (&#123;</span><br><span class="line">  type: INIT_TODOLIST,</span><br><span class="line">  data</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getTodoList = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 接收 dispatch 参数，直接使用，相当于调用store.dispatch方法</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</span><br><span class="line">    axios.get(<span class="string">'/list.json'</span>).then( <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(res.data)</span><br><span class="line">      dispatch(initTodoList(res.data))</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在组件<code>componentDidMount</code>钩子函数中调用getTodoList</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">componentDidMount () &#123;</span><br><span class="line">  store.dispatch(getTodoList())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>reducer接收store转发的state和action，处理改变state</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// reducer.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (state = defaultState, action) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (action.type === INIT_TODOLIST) &#123;</span><br><span class="line">    <span class="keyword">const</span> newState = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(state))</span><br><span class="line">    newState.list = action.data</span><br><span class="line">    <span class="keyword">return</span> newState</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="使用Redux-saga中间件处理异步请求"><a href="#使用Redux-saga中间件处理异步请求" class="headerlink" title="使用Redux-saga中间件处理异步请求"></a>使用Redux-saga中间件处理异步请求</h2><ul><li>npm i redux-saga -S</li><li><p>在创建redux时,配置redux-saga,redux-devtools</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js  redux</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware, compose &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">'./reducer'</span>;</span><br><span class="line"><span class="keyword">import</span> createSagaMiddleware <span class="keyword">from</span> <span class="string">'redux-saga'</span></span><br><span class="line"><span class="keyword">import</span> todoSaga <span class="keyword">from</span> <span class="string">'./todoSaga'</span> <span class="comment">// saga文件处理异步请求  必须是一个generator函数</span></span><br><span class="line"><span class="keyword">const</span> sagaMiddleware = createSagaMiddleware()</span><br><span class="line"><span class="keyword">const</span> composeEnhancers =</span><br><span class="line">  <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?</span><br><span class="line">  <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(&#123;&#125;) : compose;</span><br><span class="line"><span class="keyword">const</span> enhancer = composeEnhancers(</span><br><span class="line">  applyMiddleware(sagaMiddleware)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer, enhancer);</span><br><span class="line">sagaMiddleware.run(todoSaga) <span class="comment">// 执行todosaga</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure></li><li><p>在<code>actionCreator</code>创建action 在<code>actionTypes</code>创建常量<code>GET_INIT_LIST</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// actionTypes.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> GET_INIT_LIST = <span class="string">'get_init_list'</span></span><br><span class="line"><span class="comment">// actionCreator.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getInitList = <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</span><br><span class="line">  type: GET_INIT_LIST</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>创建todoSaga.js文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; takeEvery, put &#125; <span class="keyword">from</span> <span class="string">'redux-saga/effects'</span></span><br><span class="line"><span class="keyword">import</span> &#123; GET_INIT_LIST &#125; <span class="keyword">from</span> <span class="string">'./actionTypes'</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">import</span> &#123; initTodoList &#125; <span class="keyword">from</span> <span class="string">'./actionCreators'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">fetchList</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">yield</span> axios.get(<span class="string">'/list.json'</span>)</span><br><span class="line">    <span class="keyword">yield</span> put(initTodoList(res.data))</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    consoloe.log(err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">todoSaga</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> takeEvery(GET_INIT_LIST, fetchList)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> todoSaga</span><br></pre></td></tr></table></figure></li><li><p>在组件<code>componentDidMount</code>钩子函数中调用getInitList</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getInitList &#125; <span class="keyword">from</span> <span class="string">'./store/actionCreators'</span></span><br><span class="line">componentDidMount () &#123;</span><br><span class="line">  store.dispatch(getInitList())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>reducer接收store转发的state和action，处理改变state</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// reducer.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (state = defaultState, action) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (action.type === INIT_TODOLIST) &#123;</span><br><span class="line">    <span class="keyword">const</span> newState = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(state))</span><br><span class="line">    newState.list = action.data</span><br><span class="line">    <span class="keyword">return</span> newState</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="React-redux的作用是为了在项目中使用Redux更加方便。"><a href="#React-redux的作用是为了在项目中使用Redux更加方便。" class="headerlink" title="React-redux的作用是为了在项目中使用Redux更加方便。"></a>React-redux的作用是为了在项目中使用Redux更加方便。</h2><ul><li><code>npm install --save react-redux</code></li><li><p>使用 <code>Provider</code> 提供器包裹组件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store'</span></span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></span><br><span class="line"><span class="keyword">import</span> Todo <span class="keyword">from</span> <span class="string">'./Todo'</span></span><br><span class="line"><span class="keyword">const</span> App = (</span><br><span class="line">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">    &lt;Todo /&gt;</span><br><span class="line">  &lt;<span class="regexp">/Provider&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br><span class="line"><span class="regexp">ReactDOM.render(App, document.getElementById('root'));</span></span><br></pre></td></tr></table></figure></li><li><p>使用 <code>connect</code> 将组件和<code>store</code>连接起来</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Todo.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Todo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;input value=&#123;<span class="keyword">this</span>.props.inputValue&#125; onChange=&#123;<span class="keyword">this</span>.props.changeInputValue&#125;/&gt;</span><br><span class="line">          &lt;button&gt;提交&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>div&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">const mapStateToProps = (state) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">  return &#123; inputValue: state.inputValue &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">const mapDispatchToProps = (dispatch) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">  return &#123;</span></span><br><span class="line"><span class="regexp">    changeInputValue (e) &#123;</span></span><br><span class="line"><span class="regexp">      dispatch(&#123;</span></span><br><span class="line"><span class="regexp">        type: 'change_input_value',</span></span><br><span class="line"><span class="regexp">        value: e.target.value</span></span><br><span class="line"><span class="regexp">      &#125;)</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default connect(mapStateToProps, mapDispatchToProps)(Todo)</span></span><br></pre></td></tr></table></figure></li><li><p>reducer接收store转发的state和action，处理改变state</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// reducer.js</span></span><br><span class="line"><span class="keyword">const</span> defaultState = &#123;</span><br><span class="line">  inputValue: <span class="string">''</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (state = defaultState, action) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (action.type === <span class="string">'change_input_value'</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> newState = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(state))</span><br><span class="line">    newState.inputValue = action.value</span><br><span class="line">    <span class="keyword">return</span> newState</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>typescript(I)</title>
      <link href="/Typescript/"/>
      <url>/Typescript/</url>
      
        <content type="html"><![CDATA[<p><code>TypeScript</code> 是一种由微软开发的的强类型编程语言。它是JavaScript的一个<code>超集</code>，可以编译成纯Javascript，<code>兼容JavaScript</code>，提供<code>类和模块</code>的概念，它的最大的特点就是<code>类型化</code>。未来前端开发的趋势。不能在浏览器或node中直接运行需要先编译为Javascript才能运行。<br><a id="more"></a></p><h3 id="typescript编译环境"><a href="#typescript编译环境" class="headerlink" title="typescript编译环境"></a>typescript编译环境</h3><ul><li>方式一 全局安装typescript <code>npm i typescript -g</code><br><code>在命令行使用 tsc xxx.ts 将ts编译生成对应的js文件</code></li><li>方式二 全局安装ts-node <code>npm i ts-node -g</code><br><code>在命令行使用 ts-node xxx.ts 执行ts文件，不会生成js文件就可以运行</code></li></ul><h3 id="typescript配置文件"><a href="#typescript配置文件" class="headerlink" title="typescript配置文件"></a>typescript配置文件</h3><ul><li>npm init -y 创建package.json</li><li>tsc –init 创建一个 tsconfig.json配置文件</li></ul><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><ul><li>基础数据类型 <code>boolean、number、string、undefined、null、symbol、enum、any、void、never、tuple、array、object</code></li><li><p>高级类型 <code>union 组合类型、Nullable 可空类型、Literal 预定义类型</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">boolen 布尔值  var isDone:boolen = false</span></span><br><span class="line"><span class="comment">number 数值型  var isNumber:number = 6</span></span><br><span class="line"><span class="comment">string 字符型  var name:string = 'bob'</span></span><br><span class="line"><span class="comment">never 不会出现的值</span></span><br><span class="line"><span class="comment">array  数组 在元素类型后加[]  arr:number[]=[1,2]</span></span><br><span class="line"><span class="comment">元祖  数组长度固定，元素类型也固定 let x:[string,number]=['1',2]</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// TypeScript中数组使用'[]'来声明</span></span><br><span class="line"><span class="keyword">var</span> list:number[] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] <span class="comment">// 同 list = [1,2,3]  list:Array&lt;number&gt; = [1,2,3]</span></span><br><span class="line"><span class="keyword">var</span> name:string[] = [<span class="string">'赵'</span>,<span class="string">'钱'</span>,<span class="string">'孙'</span>,<span class="string">'李'</span>]</span><br><span class="line"><span class="comment">// 通过下标访问数组元素</span></span><br><span class="line"><span class="built_in">console</span>.log(list[<span class="number">1</span>]) <span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 使用泛型+关键字Array+any 定义任意类型的数组 使用</span></span><br><span class="line"><span class="keyword">var</span> arr:<span class="built_in">Array</span>&lt;any&gt; = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="string">'赵'</span>,<span class="string">'钱'</span>,<span class="literal">false</span>,&#123;&#125;,<span class="number">3.2</span>];</span><br><span class="line"><span class="built_in">console</span>.log(list[<span class="number">6</span>]) <span class="comment">// &#123;&#125;</span></span><br><span class="line"><span class="comment">// 使用any声明 任意类型数组</span></span><br><span class="line"><span class="keyword">var</span> arr:any[] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="string">'赵'</span>,<span class="string">'钱'</span>,<span class="literal">false</span>,&#123;&#125;,<span class="number">3.2</span>];</span><br><span class="line"><span class="comment">// 元组 tuple 数组长度固定 类型也固定 元祖声明时必须指定类型</span></span><br><span class="line"><span class="keyword">const</span> arr:[number, string, <span class="literal">undefined</span>] = [<span class="number">1</span>, <span class="string">'2'</span>, <span class="literal">undefined</span>]</span><br></pre></td></tr></table></figure></li><li><p><code>enum</code> 枚举类型用于定义数值集合 用关键字enum来声明</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果不声明第一项的值 那么Red值就是0,然后每一项都加1</span></span><br><span class="line">enum Color&#123;</span><br><span class="line">  Red, <span class="comment">// 枚举元素列表</span></span><br><span class="line">  Green,</span><br><span class="line">  Blue</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> c:Color = Color.Blue</span><br><span class="line"><span class="built_in">console</span>.log(c); <span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 如果为某一项指定一个值则后面的值依次递增</span></span><br><span class="line">enum Color&#123;</span><br><span class="line">  Red, <span class="comment">// 枚举元素列表</span></span><br><span class="line">  Green = <span class="number">5</span>,</span><br><span class="line">  Blue</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> c:Color = Color.Red;</span><br><span class="line"><span class="keyword">var</span> d:Color = Color.Blue;</span><br><span class="line"><span class="built_in">console</span>.log(c); <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(d); <span class="comment">// 6</span></span><br><span class="line"><span class="comment">// 另外枚举类型还有一个比较特殊的功能，假如我们有一个数值，但是我们不知道枚举类型中是否有定义，可以用以下方式来获取，代码如下</span></span><br><span class="line">enum Color &#123;</span><br><span class="line">  Red = <span class="number">1</span>,</span><br><span class="line">  Green,</span><br><span class="line">  Blue</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> colorName: string = Color[<span class="number">2</span>]; <span class="comment">//访问第二个枚举子元素Green</span></span><br><span class="line"><span class="built_in">console</span>.log(colorName); <span class="comment">// Green</span></span><br><span class="line">colorName = Color[<span class="number">4</span>];</span><br><span class="line"><span class="built_in">console</span>.log(colorName); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></li><li><p><code>any</code> 任意类型,动态的，能够赋予任意类型。声明时未指定类型,会被识别为任意类型</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> notSure:any = <span class="number">4</span>;</span><br><span class="line">notSure = <span class="string">'maybe a string'</span>;</span><br><span class="line">notSure = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> list:any[] = [<span class="number">1</span>,<span class="literal">true</span>,<span class="string">'free'</span>];</span><br><span class="line">list[<span class="number">1</span>] = &#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(list[<span class="number">1</span>]); <span class="comment">// &#123;&#125;</span></span><br><span class="line">notSure() <span class="comment">// notSure is not a function</span></span><br></pre></td></tr></table></figure></li><li><p><code>unknown</code> 与 <code>any</code>类似 使用时需要做判断 可能会报错</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> notSure:unknown = <span class="number">4</span>;</span><br><span class="line">notSure = <span class="string">'maybe a string'</span>;</span><br><span class="line">notSure = <span class="literal">false</span>;</span><br><span class="line">notSure() <span class="comment">// notSure is not a function</span></span><br></pre></td></tr></table></figure></li><li><p><code>union</code>联合类型 只能访问此联合类型的所有类型里共有的属性或方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> union:string|number;</span><br><span class="line">union = <span class="string">'字符串'</span></span><br><span class="line">union = <span class="number">2</span></span><br><span class="line"><span class="built_in">console</span>.log(union)</span><br><span class="line"><span class="built_in">console</span>.log(union.length) <span class="comment">// 类型“number”上不存在属性“length”。</span></span><br></pre></td></tr></table></figure></li><li><p><code>Literal</code>字面量类型 只能在声明的字面量里取值 不能赋值为其他值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> literal:<span class="number">1</span>|<span class="string">'a'</span>|<span class="literal">true</span>|[<span class="number">1</span>,<span class="number">3</span>]</span><br><span class="line">literal = <span class="literal">true</span></span><br><span class="line">literal = <span class="number">3</span> <span class="comment">// 不能将类型 3 分配给 “1|'a'|true|[1,3]”</span></span><br><span class="line"><span class="built_in">console</span>.log(literal)</span><br></pre></td></tr></table></figure></li><li><p><code>void</code> 函数无返回值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 哈数默认的返回类型就是 void 仅能在函数中使用 返回类型指定为void,表示该函数不返回任何值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">warnUser</span>(<span class="params"></span>):<span class="title">void</span></span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'定义一个无返回值得函数'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(warnUser()) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></li></ul><p><code>类型推断：当给一个变量赋值初始化时，如果变量类型没有给出时，TS会自动的去尝试分析变量的类型,如果TS无法分析变量类型的话，我们就需要使用类型声明</code></p><ul><li><code>类型适配(类型断言)</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> msg:any;</span><br><span class="line">msg = <span class="string">'ac'</span> <span class="comment">// 虽然声明为string 但类型还是any  无法自动提示字符串的方法</span></span><br><span class="line"><span class="comment">// console.log(msg.endsWith('c'))</span></span><br><span class="line"><span class="comment">// 类型适配方法1 (&lt;string&gt;msg)</span></span><br><span class="line"><span class="keyword">let</span> res = (<span class="xml"><span class="tag">&lt;<span class="name">string</span>&gt;</span>msg).endsWith('c')</span></span><br><span class="line"><span class="xml">// 类型适配方法2 (msg as string)</span></span><br><span class="line"><span class="xml">let res1 = (msg as string).endsWith('c')</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="函数的定义与调用"><a href="#函数的定义与调用" class="headerlink" title="函数的定义与调用"></a>函数的定义与调用</h3><ul><li><p>函数的定义与调用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">return_type该函数的返回值类型 return data需要返回的数据</span></span><br><span class="line"><span class="comment">特殊的返回值类型  void 无返回值  never 不会执行</span></span><br><span class="line"><span class="comment">未指定返回类型 默认为 void</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">function_name</span>(<span class="params">arg:number,arg1:number,....</span>):<span class="title">return_type</span></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> data</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x:number,y:number</span>):<span class="title">number</span></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x+y</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">5</span>,<span class="number">6</span>)) <span class="comment">// 11</span></span><br></pre></td></tr></table></figure></li><li><p>函数的参数<br><code>注：可选参数和默认参数必须在参数列表的最后。</code></p></li></ul><ol><li><p><code>可选参数</code>: 在参数名后面，冒号前面添加一个问号，则表明该参数是可选的</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildName</span>(<span class="params">firstName:string,lastName?:string</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (lastName) &#123;</span><br><span class="line">    <span class="keyword">return</span> firstName + <span class="string">' '</span> + lastName</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> firstName</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(buildName(<span class="string">'Bob'</span>)) <span class="comment">// Bob</span></span><br><span class="line"><span class="built_in">console</span>.log(buildName(<span class="string">'Bob'</span>,<span class="string">'Ada'</span>)) <span class="comment">// Bob Ada</span></span><br></pre></td></tr></table></figure></li><li><p><code>默认参数</code>: 在参数名后直接给定一个值，如果这个值没有被传入，将会被赋值为默认值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildName</span>(<span class="params">firstName:string, lastName=<span class="string">'Smith'</span></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> firstName + <span class="string">' '</span> + lastName</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(buildName(<span class="string">'JR'</span>)); <span class="comment">// JR Smith</span></span><br><span class="line"><span class="built_in">console</span>.log(buildName(<span class="string">'JR'</span>,<span class="string">'James'</span>)); <span class="comment">// JR James</span></span><br></pre></td></tr></table></figure></li><li><p><code>解构赋值的参数类型</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//           参数解构    参数类型声明            返回值类型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">&#123; a, b &#125;: &#123; a: number, b: number &#125;</span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> c = add(&#123; <span class="attr">a</span>: <span class="number">2</span>, <span class="attr">b</span>: <span class="number">3</span> &#125;)</span><br><span class="line"><span class="built_in">console</span>.log(c) <span class="comment">// 5</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="class类"><a href="#class类" class="headerlink" title="class类"></a>class类</h3><ul><li>类的结构及声明 创建一个<code>TypeScript</code>类 必须使用<code>class</code>关键字进行声明</li><li>属性和方法的定义</li></ul><ol><li>属性: 类的属性实质为在类体内定义的变量，用于保存或设置参数</li><li>方法: 类的方法实质为在类体内定义的函数，用于实现某项功能，其定义方法与普通函数定义方法相同，同时可以应用访问权限关键字对方法访问权限进行限制<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> 类名</span>&#123;</span><br><span class="line">  name:string; <span class="comment">// 定义类的属性</span></span><br><span class="line">  fun()&#123;&#125;  <span class="comment">// 定义一个无返回值的方法</span></span><br><span class="line">  say():string&#123; <span class="comment">// 定义返回值类型为string的方法</span></span><br><span class="line">    <span class="keyword">return</span>  <span class="string">'返回值'</span> <span class="comment">// 返回函数值</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><ul><li><p>静态属性 可以使用<code>static</code>关键字标注类的属性<br><code>注:类的静态属性在类的内部只能使用 类名.静态属性方式调用(calc.count) 而不能使用this.count调用</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calc</span></span>&#123;</span><br><span class="line">  <span class="keyword">static</span> count=<span class="number">10</span>;</span><br><span class="line">  add(data1:number):number&#123;</span><br><span class="line">    <span class="keyword">var</span> sum=Calc.count+data1;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> test=<span class="keyword">new</span> Calc();</span><br><span class="line"><span class="built_in">console</span>.log(test.add(<span class="number">20</span>)); <span class="comment">// 30</span></span><br><span class="line"><span class="comment">// 类的静态属性在类的内部只能使用 类名.静态属性方式调用(calc.count) 而不能使用this.count调用</span></span><br></pre></td></tr></table></figure></li><li><p>构造函数</p><blockquote><p>是一种特殊的方法。用来在创建对象时初始化对象， 即为对象成员变量赋初始值.而<code>TypeScript</code>的构造函数用关键字<code>constructor</code>来实现。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span>&#123;  <span class="comment">//定义student类</span></span><br><span class="line">  name:string;  <span class="comment">//定义类的属性</span></span><br><span class="line">  <span class="keyword">constructor</span>(myname:string)&#123; <span class="comment">//定义构造函数</span></span><br><span class="line">    <span class="keyword">this</span>.name=myname;</span><br><span class="line">  &#125;</span><br><span class="line">  study()&#123; <span class="comment">//定义类的方法</span></span><br><span class="line">    <span class="comment">//定义该方法所要实现的功能</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote></li><li><p>类的实例化</p><blockquote><p>一般情况下，创建一个类后并不能直接的对属性和方法进行引用，必须对类进行实例化，即创建一个对象。TypeScript中用new 关键字创建对象。实例化后通过“.”来访问属性和方法。</p></blockquote></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span>&#123;  <span class="comment">//定义student类</span></span><br><span class="line">    name:string;  <span class="comment">//定义类的属性</span></span><br><span class="line">    <span class="keyword">constructor</span>(myname:string)&#123; <span class="comment">//定义带参数的构造函数</span></span><br><span class="line">        <span class="keyword">this</span>.name=myname;</span><br><span class="line">    &#125;</span><br><span class="line">    study()&#123; <span class="comment">//定义类的方法</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"&lt;h1&gt;study "</span>+<span class="keyword">this</span>.name+<span class="string">"&lt;/h1&gt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    write():string&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> s1=<span class="keyword">new</span> Student(<span class="string">"Jim"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"&lt;h2&gt;attr "</span>+s1.name+<span class="string">"&lt;/h2&gt;"</span>); <span class="comment">//获取name属性</span></span><br><span class="line">s1.study();   <span class="comment">// 调用study方法</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"&lt;h3&gt;write "</span>+s1.write()+<span class="string">"&lt;/h3&gt;"</span>);</span><br></pre></td></tr></table></figure><h3 id="类的继承"><a href="#类的继承" class="headerlink" title="类的继承"></a>类的继承</h3><blockquote><p><code>TypeScript</code>中用关键字<code>extends</code>指明继承关系。例如，已经定义了类A，如果让类B继承A,我们把A叫做基类，B叫子类。</p><blockquote><p>要在子类中调用基类中的属性与方法就要使用<code>super</code>关键字</p></blockquote></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123; <span class="comment">// 定义基类</span></span><br><span class="line">    name: string;</span><br><span class="line">    <span class="keyword">constructor</span>(theName:string)&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = theName;</span><br><span class="line">    &#125;</span><br><span class="line">    move(meters:number) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">" moved "</span> + meters + <span class="string">'m.'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Snake</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">    contructor(name:string)&#123;</span><br><span class="line">        <span class="keyword">super</span>(name); <span class="comment">// 调用基类的构造函数</span></span><br><span class="line">    &#125;</span><br><span class="line">    move()&#123; <span class="comment">// 重写基类的方法</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'----Snake----'</span>)</span><br><span class="line">        <span class="keyword">super</span>.move(<span class="number">5</span>); <span class="comment">// 调用基类的方法</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> Snake(<span class="string">'Tom'</span>);</span><br><span class="line">s.move();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">在Typescript中我们采用extends关键字来标识类的继承关系,在实例中重写父类的方法,并通过super关键字来调用父类的方法</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="interface接口-强约束对象的属性、属性的个数、属性值的类型"><a href="#interface接口-强约束对象的属性、属性的个数、属性值的类型" class="headerlink" title="interface接口 强约束对象的属性、属性的个数、属性值的类型"></a>interface接口 强约束对象的属性、属性的个数、属性值的类型</h3><ul><li>可描述类的一部分抽象行为，也可描述对象的结构形状</li><li>接口一般首字母大写</li><li>赋值的时候，变量的形状必须和接口的形状保持一致</li><li>接口中可定义可选属性 只读属性 任意属性<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">  name: string,</span><br><span class="line">  age?: number <span class="comment">// ?可选参数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> getPersonName = <span class="function">(<span class="params">person: Person</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(person.name, <span class="string">'get'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> setPersonName = <span class="function">(<span class="params">person: Person, name: string</span>) =&gt;</span> &#123;</span><br><span class="line">  person.name = name</span><br><span class="line">  <span class="built_in">console</span>.log(person.name, <span class="string">'set'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> person = &#123;<span class="attr">name</span>: <span class="string">'tew'</span>&#125;</span><br><span class="line">getPersonName(person) <span class="comment">// tew</span></span><br><span class="line">setPersonName(person, <span class="string">'bob'</span>) <span class="comment">// bob</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="类的访问控制"><a href="#类的访问控制" class="headerlink" title="类的访问控制"></a>类的访问控制</h3><ul><li><code>public</code> 允许在类的内外被使用(<code>默认为public</code>)</li><li><code>private</code> 允许在类的内部被使用</li><li><code>protected</code> 允许在类的内部及继承的子类中被使用<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* public  private */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  private name: string = <span class="string">'tew'</span>;</span><br><span class="line">  public getName() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> person = <span class="keyword">new</span> Person()</span><br><span class="line"><span class="comment">// console.log(person.name)</span></span><br><span class="line"><span class="comment">//  Property 'name' is private and only accessible within class 'Person'.</span></span><br><span class="line">person.getName() <span class="comment">// tew</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* protected */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  protected name: string = <span class="string">'yang'</span></span><br><span class="line">  protected getName() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sheep</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  getSheepName() &#123;</span><br><span class="line">    <span class="keyword">this</span>.getName() <span class="comment">// yang 等同 super.getName()</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name) <span class="comment">// yang</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> sheep = <span class="keyword">new</span> Sheep()</span><br><span class="line"><span class="comment">// sheep.getName()</span></span><br><span class="line"><span class="comment">// Property 'getName' is protected and only accessible within class 'Animal' and its subclasses.</span></span><br><span class="line">sheep.getSheepName()</span><br></pre></td></tr></table></figure></li></ul><h3 id="abstract-抽象类"><a href="#abstract-抽象类" class="headerlink" title="abstract 抽象类"></a>abstract 抽象类</h3><ul><li>readonly 类的修饰符 初始值之后不可再修改</li><li>abstract 抽象类<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="comment">// readonly 只读不可修改</span></span><br><span class="line">  public readonly name: string;</span><br><span class="line">  <span class="keyword">constructor</span>(name: string) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = <span class="keyword">new</span> Person(<span class="string">'tew'</span>);</span><br><span class="line"><span class="comment">// person.name = 'hello';</span></span><br><span class="line"><span class="built_in">console</span>.log(person.name);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 抽象类 不能实例化  只能被继承</span></span><br><span class="line">abstract <span class="class"><span class="keyword">class</span> <span class="title">Geom</span> </span>&#123;</span><br><span class="line">  getType() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Gemo'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 抽象方法只能定义  不能实现</span></span><br><span class="line">  abstract getArea(): number;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 继承抽象类 并实现抽象方法</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">extends</span> <span class="title">Geom</span> </span>&#123;</span><br><span class="line">  getArea() &#123; <span class="comment">// 实现抽象类</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">123</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> Circle().getArea()) <span class="comment">//123</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="泛型-generic-泛指的类型"><a href="#泛型-generic-泛指的类型" class="headerlink" title="泛型  generic 泛指的类型"></a>泛型 <t> generic 泛指的类型</t></h3><ul><li><p>函数泛型</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">join</span>&lt;<span class="title">T</span>&gt;(<span class="params">first: T, second: T</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;first&#125;</span><span class="subst">$&#123;second&#125;</span>`</span></span><br><span class="line">&#125;</span><br><span class="line">join&lt;string&gt;(<span class="string">'1'</span>, <span class="string">'2'</span>)</span><br><span class="line">join&lt;number&gt;(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// function map&lt;T&gt;(arg: Array&lt;T&gt;)&#123; return arg &#125;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">map</span>&lt;<span class="title">T</span>&gt;(<span class="params">arg: T[]</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arg</span><br><span class="line">&#125;</span><br><span class="line">map&lt;string&gt;([<span class="string">'1'</span>])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">join1</span>&lt;<span class="title">T</span>, <span class="title">P</span>&gt;(<span class="params">first: T, second: P</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;first&#125;</span><span class="subst">$&#123;second&#125;</span>`</span></span><br><span class="line">&#125;</span><br><span class="line">join1&lt;string, number&gt;(<span class="string">'1'</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure></li><li><p>类中的泛型</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>d.ts 类型描述文件 类型定义文件</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> typescript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> typescript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>使用clipboard实现复制文本到剪贴板</title>
      <link href="/%E4%BD%BF%E7%94%A8clipboard%E5%AE%9E%E7%8E%B0%E5%A4%8D%E5%88%B6%E6%96%87%E6%9C%AC%E5%88%B0%E5%89%AA%E8%B4%B4%E6%9D%BF/"/>
      <url>/%E4%BD%BF%E7%94%A8clipboard%E5%AE%9E%E7%8E%B0%E5%A4%8D%E5%88%B6%E6%96%87%E6%9C%AC%E5%88%B0%E5%89%AA%E8%B4%B4%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<p><code>clipboard</code>是一款轻量级的实现复制文本到剪贴板功能的<code>JavaScrip</code>t插件。通过该插件可以将输入框，文本域，DIV元素中的文本等文本内容复制到剪贴板中.<br><code>clipboard</code>支持主流的浏览器：<code>chrome 42+、Firefox 41+、IE 9+、opera 29、Safari 10+</code><br><a id="more"></a></p><h2 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h2><ul><li>直接引入cdn或下载到本地<br><code>&lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.8/clipboard.min.js&quot;&gt;&lt;/script&gt;</code></li><li>在npm脚手架中使用<br><code>npm install clipboard --save</code><br><code>import Clipboard from &#39;clipboard&#39;</code></li></ul><h2 id="clipboard复印内容的方式"><a href="#clipboard复印内容的方式" class="headerlink" title="clipboard复印内容的方式"></a>clipboard复印内容的方式</h2><ul><li><p>从target复制目标内容</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn"</span>&gt;</span>Copy_target<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> clipboard = <span class="keyword">new</span> ClipboardJS(<span class="string">'.btn'</span>, &#123;</span></span><br><span class="line"><span class="actionscript">  <span class="comment">// 通过target指定要复印的节点</span></span></span><br><span class="line"><span class="actionscript">  target: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> <span class="built_in">document</span>.querySelector(<span class="string">'.btn'</span>)</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="actionscript">clipboard.on(<span class="string">'success'</span>, <span class="function"><span class="keyword">function</span><span class="params">(e)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="actionscript">clipboard.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span><span class="params">(e)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>通过function的text要复制的内容</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn"</span>&gt;</span>Copy<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> clipboard = <span class="keyword">new</span> ClipboardJS(<span class="string">'.btn'</span>, &#123;</span></span><br><span class="line"><span class="actionscript">  <span class="comment">// 点击copy按钮，直接通过text直接返回复印的内容</span></span></span><br><span class="line"><span class="actionscript">  text: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> <span class="string">'text 复制内容'</span></span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="actionscript">clipboard.on(<span class="string">'success'</span>, <span class="function"><span class="keyword">function</span><span class="params">(e)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="actionscript">clipboard.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span><span class="params">(e)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>通过属性返回复制的内容</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn"</span> <span class="attr">data-clipboard-text</span>=<span class="string">"通过属性复制"</span>&gt;</span>Copy<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> clipboard = <span class="keyword">new</span> ClipboardJS(<span class="string">'.btn'</span>)</span></span><br><span class="line"><span class="actionscript">clipboard.on(<span class="string">'success'</span>, <span class="function"><span class="keyword">function</span><span class="params">(e)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="actionscript">clipboard.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span><span class="params">(e)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="使用中遇到过的问题"><a href="#使用中遇到过的问题" class="headerlink" title="使用中遇到过的问题"></a>使用中遇到过的问题</h2><ul><li><p>clipboard复制成功或失败多次回调的问题</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 只需要在成功或失败时 及时销毁即可</span></span><br><span class="line"><span class="keyword">var</span> clipboard = <span class="keyword">new</span> ClipboardJS(<span class="string">'.btn'</span>)</span><br><span class="line">clipboard.on(<span class="string">'success'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(e)</span><br><span class="line">  clipboard.destroy()</span><br><span class="line">&#125;)</span><br><span class="line">clipboard.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(e)</span><br><span class="line">  clipboard.destroy()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>复制文本时文本会被选中</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> clipboard = <span class="keyword">new</span> ClipboardJS(<span class="string">'.btn'</span>)</span><br><span class="line">clipboard.on(<span class="string">'success'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  e.clearSelection() <span class="comment">// 禁止复制文字后文字被选中</span></span><br><span class="line">  clipboard.destroy()</span><br><span class="line">&#125;)</span><br><span class="line">clipboard.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  clipboard.destroy()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>在vue的弹窗组件中无法复制的问题</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 解决办法：使用$ref获取实例化需要传入的DOM --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hello"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-popover</span></span></span><br><span class="line"><span class="tag">      <span class="attr">placement</span>=<span class="string">"bottom"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">width</span>=<span class="string">"400"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">trigger</span>=<span class="string">"click"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">"gridData"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">min-width</span>=<span class="string">"150"</span> <span class="attr">property</span>=<span class="string">"date"</span> <span class="attr">label</span>=<span class="string">"日期"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">min-width</span>=<span class="string">"100"</span> <span class="attr">prop</span>=<span class="string">"name"</span> <span class="attr">label</span>=<span class="string">"姓名"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> @<span class="attr">click</span>=<span class="string">"copy(scope)"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:ref</span>=<span class="string">"'copy' + scope.$index"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:data-clipboard-text</span>=<span class="string">"scope.row.name"</span>&gt;</span>&#123;&#123; scope.row.name &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">slot</span>=<span class="string">"reference"</span>&gt;</span>click 激活<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-popover</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> ClipboardJS <span class="keyword">from</span> <span class="string">'clipboard'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">'HelloWorld'</span>,</span></span><br><span class="line"><span class="undefined">  data() &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">      gridData: [&#123;</span></span><br><span class="line"><span class="actionscript">        date: <span class="string">'2016-05-02'</span>,</span></span><br><span class="line"><span class="actionscript">        name: <span class="string">'王小虎'</span></span></span><br><span class="line"><span class="undefined">      &#125;,&#123;</span></span><br><span class="line"><span class="actionscript">        date: <span class="string">'2016-05-02'</span>,</span></span><br><span class="line"><span class="actionscript">        name: <span class="string">'王老鼠'</span></span></span><br><span class="line"><span class="undefined">      &#125;],</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="undefined">    copy (scope) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> el = <span class="keyword">this</span>.$refs[<span class="string">'copy'</span>+scope.$index]</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> clipboard = <span class="keyword">new</span> ClipboardJS(el)</span></span><br><span class="line"><span class="actionscript">      clipboard.on(<span class="string">'success'</span>, ()=&gt;&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.$message(<span class="string">'复制成功'</span>)</span></span><br><span class="line"><span class="undefined">        clipboard.destroy()</span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="actionscript">      clipboard.on(<span class="string">'error'</span>, ()=&gt;&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.$message(<span class="string">'复制失败'</span>)</span></span><br><span class="line"><span class="undefined">        clipboard.destroy()</span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="undefined">      clipboard.onClick(event)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>第一次点击复制不生效，第二次才生效的问题<br>点击复制时使用<code>clipboard.onClick()</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">copy (scope) &#123;</span><br><span class="line">  <span class="keyword">let</span> el = <span class="keyword">this</span>.$refs[<span class="string">'copy'</span>+scope.$index]</span><br><span class="line">  <span class="keyword">let</span> clipboard = <span class="keyword">new</span> ClipboardJS(el)</span><br><span class="line">  clipboard.on(<span class="string">'success'</span>, ()=&gt;&#123;</span><br><span class="line">    <span class="keyword">this</span>.$message(<span class="string">'复制成功'</span>)</span><br><span class="line">    clipboard.destroy()</span><br><span class="line">  &#125;)</span><br><span class="line">  clipboard.on(<span class="string">'error'</span>, ()=&gt;&#123;</span><br><span class="line">    <span class="keyword">this</span>.$message(<span class="string">'复制失败'</span>)</span><br><span class="line">    clipboard.destroy()</span><br><span class="line">  &#125;)</span><br><span class="line">  clipboard.onClick(event)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>最终版使用 event.target 代替传入的DOM 不需要获取DOM或ref</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hello"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-popover</span> <span class="attr">placement</span>=<span class="string">"bottom"</span> <span class="attr">width</span>=<span class="string">"400"</span> <span class="attr">trigger</span>=<span class="string">"click"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">"gridData"</span> <span class="attr">ref</span>=<span class="string">"atb"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">min-width</span>=<span class="string">"150"</span> <span class="attr">property</span>=<span class="string">"date"</span> <span class="attr">label</span>=<span class="string">"日期"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">min-width</span>=<span class="string">"100"</span> <span class="attr">prop</span>=<span class="string">"name"</span> <span class="attr">label</span>=<span class="string">"姓名"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> @<span class="attr">click</span>=<span class="string">"test"</span> <span class="attr">:data-clipboard-text</span>=<span class="string">"scope.row.name"</span>&gt;</span>&#123;&#123; scope.row.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">slot</span>=<span class="string">"reference"</span>&gt;</span>click 激活<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-popover</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> ClipboardJS <span class="keyword">from</span> <span class="string">'clipboard'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">'HelloWorld'</span>,</span></span><br><span class="line"><span class="undefined">  data() &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">      gridData: [&#123;</span></span><br><span class="line"><span class="actionscript">        date: <span class="string">'2016-05-02'</span>,</span></span><br><span class="line"><span class="actionscript">        name: <span class="string">'王小虎'</span></span></span><br><span class="line"><span class="undefined">      &#125;,&#123;</span></span><br><span class="line"><span class="actionscript">        date: <span class="string">'2016-05-02'</span>,</span></span><br><span class="line"><span class="actionscript">        name: <span class="string">'王老鼠'</span></span></span><br><span class="line"><span class="undefined">      &#125;],</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="undefined">    test (event) &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 需要注意的是要复制的内容是元素本身</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> clipboard = <span class="keyword">new</span> ClipboardJS(event.target) <span class="comment">// 使用event.target 代替 获取DOM</span></span></span><br><span class="line"><span class="actionscript">      clipboard.on(<span class="string">'success'</span>, (e)=&gt;&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.$message(<span class="string">'复制成功'</span>)</span></span><br><span class="line"><span class="actionscript">        e.clearSelection() <span class="comment">// 禁止复制文字后文字被选中</span></span></span><br><span class="line"><span class="undefined">        clipboard.destroy()</span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="actionscript">      clipboard.on(<span class="string">'error'</span>, (e)=&gt;&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.$message(<span class="string">'复制失败'</span>)</span></span><br><span class="line"><span class="undefined">        clipboard.destroy()</span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="actionscript">      clipboard.onClick(event) <span class="comment">// 解决第一次点击无法复制的问题 第二次可正常复制的问题</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>个人收藏夹</title>
      <link href="/%E4%B8%AA%E4%BA%BA%E6%94%B6%E8%97%8F%E5%A4%B9/"/>
      <url>/%E4%B8%AA%E4%BA%BA%E6%94%B6%E8%97%8F%E5%A4%B9/</url>
      
        <content type="html"><![CDATA[<p>好记性不如烂笔头，日常开发中，打开过或这浏览过的网页无数个，总有那么一些让你舍不得关掉。最终就把它们收入麾下，特此整理在一个简单的收藏夹中。包括一些好用的插件，常用的网站，好的博客，所知道的前端团队等等。<br><a id="more"></a></p><h2 id="工具类或插件库"><a href="#工具类或插件库" class="headerlink" title="工具类或插件库"></a>工具类或插件库</h2><ul><li><a href="http://www.jq22.com/" target="_blank" rel="noopener">jQuery插件库-收集最全最新最好的jQuery插件</a></li><li><a href="https://github.com/iamjoel/front-end-plugins" target="_blank" rel="noopener">Web 前端常用插件</a></li><li><a href="http://www.htmleaf.com/jQuery/Slideshow-Scroller/" target="_blank" rel="noopener">jQuery库 / 幻灯片和轮播图_jQuery之家-自由分享jQuery、html5、css3的插件</a></li><li><a href="https://icons8.com/preloaders/" target="_blank" rel="noopener">各式各样的loading</a></li><li><a href="https://ustbhuangyi.github.io/better-scroll" target="_blank" rel="noopener">better-scroll</a></li><li><a href="http://www.sortablejs.com/index.html" target="_blank" rel="noopener">SortableJS 功能强大的JavaScript 拖拽库</a></li><li><a href="https://tinypng.com/" target="_blank" rel="noopener">TinyPNG 图片压缩</a></li><li><a href="https://www.toptal.com/developers/css/sprite-generator" target="_blank" rel="noopener">雪碧图在线生成工具</a></li><li><a href="http://tool.luodao.me/css-sprite" target="_blank" rel="noopener">css prites，css精灵，雪碧图生成</a></li></ul><h2 id="素材类"><a href="#素材类" class="headerlink" title="素材类"></a>素材类</h2><ul><li><a href="https://www.dowebok.com/" target="_blank" rel="noopener">dowebok - 做好网站</a></li><li><a href="http://www.51yuansu.com/?z=lccwlpsyp" target="_blank" rel="noopener">觅元素<em>设计元素的免费下载网站</em>免抠素材</a></li></ul><h2 id="前端常用技术官网网站"><a href="#前端常用技术官网网站" class="headerlink" title="前端常用技术官网网站"></a>前端常用技术官网网站</h2><ul><li><a href="https://cn.vuejs.org" target="_blank" rel="noopener">vue.js 官网</a></li><li><a href="https://www.swiper.com.cn/" target="_blank" rel="noopener">swiper中文网</a></li><li><a href="https://element.eleme.cn/#/zh-CN" target="_blank" rel="noopener">Element - 网站快速成型工具</a></li><li><a href="https://www.easy-mock.com/" target="_blank" rel="noopener">easy-mock</a></li><li><a href="https://www.iviewui.com/" target="_blank" rel="noopener">iView</a></li><li><a href="http://www.layui.com/" target="_blank" rel="noopener">layui</a></li><li><a href="http://www.bootcss.com/" target="_blank" rel="noopener">Bootstrap</a></li></ul><h2 id="前端团队博客"><a href="#前端团队博客" class="headerlink" title="前端团队博客"></a>前端团队博客</h2><h2 id="学习类网站"><a href="#学习类网站" class="headerlink" title="学习类网站"></a>学习类网站</h2><ul><li><a href="https://coding.imooc.com" target="_blank" rel="noopener">慕课网</a></li><li><a href="https://www.miaov.com/" target="_blank" rel="noopener">妙味课堂</a></li><li><a href="https://www.html.cn/" target="_blank" rel="noopener">从html、css到 js，WEB前端开发在线学习视频教程 - html中文网</a></li></ul><h2 id="知名大神博客"><a href="#知名大神博客" class="headerlink" title="知名大神博客"></a>知名大神博客</h2><ul><li><a href="https://www.zhangxinxu.com/" target="_blank" rel="noopener">张鑫旭的个人主页 » 张鑫旭-鑫空间-鑫生活</a></li><li><a href="https://github.com/zhangxinxu" target="_blank" rel="noopener">张鑫旭 github</a></li><li><a href="http://www.ruanyifeng.com/blog/" target="_blank" rel="noopener">阮一峰的个人网站 - Ruan YiFeng’s Personal Website</a></li></ul><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul><li><a href="https://blog.csdn.net/heyw886/article/details/82621612" target="_blank" rel="noopener">配置ESLint(代码检查)</a></li><li><a href="http://www.cutterman.cn/zh/cutterman" target="_blank" rel="noopener">最好用的切图工具</a></li><li><a href="https://www.jianshu.com/p/b03a8d7b1719" target="_blank" rel="noopener">Markdown 语法整理大集合</a></li><li><a href="https://juejin.im/post/5c356b106fb9a049ef26c368" target="_blank" rel="noopener">VS Code 折腾记系列</a></li><li><a href="https://docute.org/zh/" target="_blank" rel="noopener">docute  无需编译的文档生成器</a></li></ul><h2 id="好用的chrome插件"><a href="#好用的chrome插件" class="headerlink" title="好用的chrome插件"></a>好用的chrome插件</h2><ul><li><code>Vue.js devtools</code>  Vue官方发布的一款调试 Vue 项目的插件</li><li><code>Vue Performance Devtool</code> 分析我们页面中各个组件的性能情况</li><li><code>Postman</code> 非常好用的接口调试工具</li><li><code>FeHelper</code> 是百度 FE 团队开发的一款前端工具集插件</li><li><code>Can I Use</code> 查看某一特性的浏览器支持程度</li><li><code>JSONView</code> 将后台返回的 JSON 字符串数据自动格式化成规范 JSON 格式的插件</li><li><code>Wappalyzer</code> 一款查看当前网站使用的前后端技术的插件</li><li><code>Mobile/Responsive Web Design Tester</code> 一款用于测试页面在不同机型下呈现的插件</li><li><code>Resolution Test</code> 一款用于测试页面在不同分辨率下呈现的插件</li><li><code>草料二维码</code> 将当前页面或指定页面生成二维码</li></ul>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 其他 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>深拷贝、浅拷贝与循环引用</title>
      <link href="/%E6%B7%B1%E6%8B%B7%E8%B4%9D%E4%B8%8E%E6%B5%85%E6%8B%B7%E8%B4%9D/"/>
      <url>/%E6%B7%B1%E6%8B%B7%E8%B4%9D%E4%B8%8E%E6%B5%85%E6%8B%B7%E8%B4%9D/</url>
      
        <content type="html"><![CDATA[<p>对于javascript而言，想要实现对象的拷贝/复制，单纯的使用赋值语句是不全面的，对于简单数据（值类型）是没问题的，但是对于对象这种复杂数据类型就会有意想不到的问题。一般而言，深拷贝与浅拷贝只针对像Object，Array这样的复杂对象。浅拷贝只拷贝一层对象的属性，而深拷贝则递归拷贝了所有层级。<br><a id="more"></a></p><h2 id="浅拷贝与深拷贝的区别"><a href="#浅拷贝与深拷贝的区别" class="headerlink" title="浅拷贝与深拷贝的区别"></a>浅拷贝与深拷贝的区别</h2><ul><li>浅拷贝：只会将复制目标对象的第一层的各个属性依次复制，不会进行递归复制。浅拷贝时,如果属性是基本类型值,拷贝的是基本类型的值,改变其中不一个对象不会改变另一个对象。如果属性是引用类型地址，并不会分配新的对地址，是将两个对象指向同一地址，修改其中一个对象的属性，则另一个对象的属性也会改变。</li><li>深拷贝：递归拷贝目标对象的所有属性。深拷贝会在堆内存开辟新的地址，两个对象对应两个不同的地址，修改其中一个不会改变另一个对象。</li></ul><h2 id="浅拷贝的实现方式"><a href="#浅拷贝的实现方式" class="headerlink" title="浅拷贝的实现方式"></a>浅拷贝的实现方式</h2><ul><li><p>常用方式拷贝-遍历属性拷贝</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  a: <span class="number">100</span>,</span><br><span class="line">  b: [<span class="number">10</span>, <span class="number">20</span>],</span><br><span class="line">  c: &#123;</span><br><span class="line">    x: <span class="number">10</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> obj2 = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!obj.hasOwnProperty(key)) <span class="keyword">break</span></span><br><span class="line">  obj2[key] = obj[key]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// console.log(obj2) // &#123;a: 100, b: [10, 20], c: &#123; x:10 &#125;&#125;</span></span><br><span class="line">obj2.a = <span class="number">200</span> <span class="comment">// 修改对象属性为基本类型值 另一个对象不会改变 值类型拷贝 开辟新的栈</span></span><br><span class="line">obj2.b[<span class="number">1</span>] = <span class="number">50</span> <span class="comment">// 修改对象属性为引用类型时 另一个对象会改变 浅拷贝时引用类型拷贝的是引用类型的指针</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2) <span class="comment">// &#123;a: 200, b: [50, 20], c: &#123; x:10 &#125;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj) <span class="comment">// &#123;a: 100, b: [50, 20], c: &#123; x:10 &#125;&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>扩展运算符 …</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  a: <span class="number">100</span>,</span><br><span class="line">  b: [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>],</span><br><span class="line">  c: &#123;</span><br><span class="line">    x: <span class="number">10</span></span><br><span class="line">  &#125;,</span><br><span class="line">  d: <span class="regexp">/^\d+$/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> obj2 = &#123;...obj&#125;</span><br><span class="line"><span class="comment">// console.log(obj2) // &#123;a: 100, b: [10, 20], c: &#123; x:10 &#125;&#125;</span></span><br><span class="line">obj2.a = <span class="number">200</span> <span class="comment">// 修改对象属性为基本类型值 另一个对象不会改变 值类型拷贝 开辟新的栈</span></span><br><span class="line">obj2.b[<span class="number">1</span>] = <span class="number">50</span> <span class="comment">// 修改对象属性为引用类型时 另一个对象会改变 浅拷贝时引用类型拷贝的是引用类型的指针</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2) <span class="comment">// &#123;a: 200, b: [50, 20], c: &#123; x:10 &#125;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj) <span class="comment">// &#123;a: 100, b: [50, 20], c: &#123; x:10 &#125;&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>Object.assign()</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj1 = &#123;</span><br><span class="line">  a:<span class="number">100</span>,</span><br><span class="line">  b: &#123;</span><br><span class="line">    x:<span class="number">100</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj2 = <span class="built_in">Object</span>.assign(&#123;&#125;, obj1)</span><br><span class="line">obj2.a = <span class="number">200</span> <span class="comment">// 改变对象基本类型值 原对象未改变</span></span><br><span class="line">obj2.b.x = <span class="number">200</span> <span class="comment">// 改变对象引用类型值 原对象也被改变</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2) <span class="comment">// &#123;a: 200, b: &#123; x: 200 &#125;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj1) <span class="comment">// &#123;a: 100, b: &#123; x: 200 &#125;&#125;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="深拷贝的实现方式"><a href="#深拷贝的实现方式" class="headerlink" title="深拷贝的实现方式"></a>深拷贝的实现方式</h2><ul><li><p><code>JSON.parse(JSON.stringify(obj))</code><br><code>存在弊端 属性值为 undefined symbol 正则 函数 Date 会有问题</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a. 属性值为正则表达式时 会将 正则转化为 &#123;&#125;</span></span><br><span class="line"><span class="comment">// b. 属性值为任意函数, undefined, symbol时 在非数组中 出现丢失 会被忽略, 在数组中会被转化为null</span></span><br><span class="line"><span class="comment">// c. 属性值为 new Date() 时 会转化为具体时间"2019-05-20T14:02:41.568Z"</span></span><br><span class="line"><span class="comment">// d. 会抛弃对象原来的constructor,不管这个对象原来的构造函数是什么,深拷贝后都会变成Object</span></span><br><span class="line"><span class="comment">// e. 无法处理对象中存在循环引用问题</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  a: <span class="number">100</span>,</span><br><span class="line">  b: [<span class="number">10</span>, <span class="literal">undefined</span>],</span><br><span class="line">  c: &#123;<span class="attr">x</span>: <span class="number">10</span>&#125;,</span><br><span class="line">  d: <span class="regexp">/^\d+$/</span>,</span><br><span class="line">  e: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;,</span><br><span class="line">  f: <span class="keyword">new</span> <span class="built_in">Date</span>(),</span><br><span class="line">  g: <span class="literal">undefined</span>,</span><br><span class="line">  h: <span class="built_in">Symbol</span>(<span class="string">'tew'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj2 = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(obj))</span><br><span class="line"><span class="built_in">console</span>.log(obj2) <span class="comment">// &#123;a:100,b:[10,null],c:&#123;x:10&#125;,d:&#123;&#125;,f:"2019-05-20T14:02:41.568Z"]</span></span><br></pre></td></tr></table></figure></li><li><p>递归拷贝</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  a: <span class="number">100</span>,</span><br><span class="line">  b: [<span class="number">10</span>, <span class="literal">undefined</span>],</span><br><span class="line">  c: &#123;<span class="attr">x</span>: <span class="number">10</span>&#125;,</span><br><span class="line">  d: <span class="regexp">/^\d+$/</span>,</span><br><span class="line">  e: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;,</span><br><span class="line">  f: <span class="keyword">new</span> <span class="built_in">Date</span>(),</span><br><span class="line">  g: <span class="literal">undefined</span>,</span><br><span class="line">  h: <span class="built_in">Symbol</span>(<span class="string">'tew'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 比较完善的递归拷贝 不考虑对象的循环引用</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// 过滤特殊情况</span></span><br><span class="line">  <span class="keyword">if</span> (obj === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">"object"</span>) <span class="keyword">return</span> obj <span class="comment">// 不是对象就不用拷贝</span></span><br><span class="line">  <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> <span class="built_in">RegExp</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">RegExp</span>(obj)</span><br><span class="line">  <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> <span class="built_in">Date</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(obj)</span><br><span class="line">  <span class="comment">// let newObj = &#123;&#125; 会使 数组变成对象&#123;&#125; 如 [10, undefined] 变成 &#123;0:10,1:undefined&#125;</span></span><br><span class="line">  <span class="comment">// 不直接创建空对象目的：克隆的结果和之前保持相同的所属类 如Array和Synmol</span></span><br><span class="line">  <span class="comment">// 防止抛弃对象原来的constructor 深拷贝后变成 Object</span></span><br><span class="line">  <span class="keyword">let</span> newObj = <span class="keyword">new</span> obj.constructor;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="comment">// 保证 key 不是原型的属性</span></span><br><span class="line">    <span class="keyword">if</span> (obj.hasOwnProperty(key)) &#123;</span><br><span class="line">      newObj[key] = deepClone(obj[key]) <span class="comment">// 将值进行递归调用</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(newObj))</span><br><span class="line">  <span class="keyword">return</span> newObj;</span><br><span class="line">&#125;</span><br><span class="line">deepClone(obj)</span><br><span class="line"><span class="comment">// &#123;a:100,b:[10,undefined],c:&#123;x:10&#125;,d:/^\d+$/,e:f(),f:2019-05-20T14:02:41.568Z,g:undefined,h: Symbol(tew)&#125;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="对象存在循环引用使用递归深拷贝会出现栈溢出"><a href="#对象存在循环引用使用递归深拷贝会出现栈溢出" class="headerlink" title="对象存在循环引用使用递归深拷贝会出现栈溢出"></a>对象存在循环引用使用递归深拷贝会出现栈溢出</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  x: <span class="number">1</span>,</span><br><span class="line">  y: <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line">obj.z = obj</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// 过滤特殊情况</span></span><br><span class="line">  <span class="keyword">if</span> (obj === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">"object"</span>) <span class="keyword">return</span> obj</span><br><span class="line">  <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> <span class="built_in">RegExp</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">RegExp</span>(obj)</span><br><span class="line">  <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> <span class="built_in">Date</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(obj)</span><br><span class="line">  <span class="keyword">let</span> newObj = <span class="keyword">new</span> obj.constructor;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.hasOwnProperty(key)) &#123;</span><br><span class="line">      newObj[key] = deepClone(obj[key])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(newObj))</span><br><span class="line">  <span class="keyword">return</span> newObj;</span><br><span class="line">&#125;</span><br><span class="line">deepClone(obj)</span><br><span class="line"><span class="comment">// Uncaught RangeError: Maximum call stack size exceeded</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>git cherry-pick、git rebase、git revert</title>
      <link href="/git%E5%85%B6%E4%BB%96%E7%94%A8%E6%B3%95/"/>
      <url>/git%E5%85%B6%E4%BB%96%E7%94%A8%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p><code>git cherry-pick</code>可以理解为”挑拣”提交，它会获取某一个分支的单笔提交，并作为一个新的提交引入到你当前分支上。 当我们需要在<code>master</code>合入<code>dev</code>某次分支的提交时，我们不能对整个<code>dev</code>分支进行合并，因为可能有未开发完成的内容，而是只想将<code>dev</code>某一次提交合入到<code>master</code>分支上，那么就要使用<code>git cherry-pick</code>了。<br><a id="more"></a></p><h2 id="git-cherry-pick-挑拣式提交"><a href="#git-cherry-pick-挑拣式提交" class="headerlink" title="git cherry-pick 挑拣式提交"></a>git cherry-pick 挑拣式提交</h2><h5 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// git cherry-pick [&lt;options&gt;] &lt;commit-id&gt;</span></span><br><span class="line"><span class="comment">// 常用options</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  --quit           退出当前的chery-pick序列</span></span><br><span class="line"><span class="comment">  --continue       继续当前的chery-pick序列</span></span><br><span class="line"><span class="comment">  --abort          取消当前的chery-pick序列，恢复当前分支</span></span><br><span class="line"><span class="comment">  -n, --no-commit  不自动提交</span></span><br><span class="line"><span class="comment">  -e, --edit       编辑提交信息</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h5 id="git-cherry-pick-commitid"><a href="#git-cherry-pick-commitid" class="headerlink" title="git cherry-pick commitid"></a>git cherry-pick commitid</h5><ul><li>当<code>cherry-pick</code>时，成功自动提交，则直接<code>git push</code>即可</li><li>当<code>cherry-pick</code>时，存在冲突，未成功提交，解决冲突后再<code>git commit</code>手动提交 或者 <code>git add .</code> 再使用<code>git cherry-pick --continue</code>继续<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git cherry-pick <span class="number">2555</span>c6e</span><br><span class="line">error: could <span class="keyword">not</span> apply <span class="number">2555</span>c6e... [Description]:branch2 commit <span class="number">2</span></span><br><span class="line">hint: <span class="keyword">after</span> resolving <span class="keyword">the</span> conflicts, mark <span class="keyword">the</span> corrected paths</span><br><span class="line">hint: <span class="keyword">with</span> <span class="string">'git add &lt;paths&gt;'</span> <span class="keyword">or</span> <span class="string">'git rm &lt;paths&gt;'</span></span><br><span class="line">hint: <span class="keyword">and</span> commit <span class="keyword">the</span> <span class="built_in">result</span> <span class="keyword">with</span> <span class="string">'git commit'</span></span><br></pre></td></tr></table></figure></li></ul><h5 id="git-cherry-pick-–quit"><a href="#git-cherry-pick-–quit" class="headerlink" title="git cherry-pick –quit"></a>git cherry-pick –quit</h5><ul><li>中断<code>cherry-pick</code>,当前分支中未冲突的内容状态将为modified</li></ul><h5 id="git-cherry-pick-–abort"><a href="#git-cherry-pick-–abort" class="headerlink" title="git cherry-pick –abort"></a>git cherry-pick –abort</h5><ul><li>取消<code>cherry-pick</code> 当前分支恢复到cherry-pick前的状态，没有改变。</li></ul><h5 id="从一个分支cherry-pick多个commit"><a href="#从一个分支cherry-pick多个commit" class="headerlink" title="从一个分支cherry-pick多个commit"></a>从一个分支cherry-pick多个commit</h5><ul><li><p>想在该分支合并多个连续的<code>commit</code>提交时, 只需要在commitId中添加<code>两个点..</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// git cherry-pick commitId1..conmmitId5</span></span><br><span class="line"><span class="comment">// 注意 此时合并的commit 不包括第一个commitiId 只合并 conmmitId2到conmmitId5</span></span><br></pre></td></tr></table></figure></li><li><p>想在该分支合并多个不连续<code>commit</code>提交时, 将commitId用空格隔开即可`</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// git cherry-pick commitId1 conmmitId3</span></span><br><span class="line"><span class="comment">// 注意 此时合并 conmmitId1 conmmitId3 到当前分支</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="git-rebase-变基-使提交记录更简洁"><a href="#git-rebase-变基-使提交记录更简洁" class="headerlink" title="git rebase 变基(使提交记录更简洁)"></a>git rebase 变基(使提交记录更简洁)</h2><ul><li><code>将本地未push到远程的多条commit提交记录合并成一条记录提交到远程</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// git rebase -i 将本地的多次提交合并为一个，以简化提交历史</span></span><br><span class="line"><span class="comment">// git rebase -i HEAD~n 将本地的n次提交合并为一个，以简化提交历史</span></span><br><span class="line"><span class="comment">// 在弹出的交互式界面中完成合并操作 将需要合并的commit选择s操作合并</span></span><br></pre></td></tr></table></figure></li></ul><p><code>不要通过rebase对任何已经提交到远程公共仓库中的commit进行修改（你自己一个人玩的分支除外）</code><br><a href="https://www.jianshu.com/p/4a8f4af4e803" target="_blank" rel="noopener">rebase 用法小结</a></p><ul><li><p>使用<code>git pull --rebase</code>可以避免无用的<code>Merge branch xxxbranch of xxx into xxxbranch</code><br><code>在你开发提交后未push到远程时，如果其他人提交了远程记录，当你在push时，需要先git pull拉取代码，如果无冲突，再push到远程后，可以在提交记录中发现有一条类似 Merge branch xxxbranch of xxx into xxxbranch的体积记录，显然不太美观，最好的操作是使用git pull --rebase进行变基拉取代码，再提交时，就不会产生Merge这种无用的提交信息，如果有冲突需要先解决冲突再push</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// git fetch + git rebase  替换 git pull 减少分支的分叉</span></span><br><span class="line">git fetch origin dev</span><br><span class="line">git rebase origin/dev</span><br></pre></td></tr></table></figure></li><li><p><code>当使用git rebase产生冲突时，需要先解决冲突，然后按照操作 git rebase --continue 继续执行合并提交记录</code></p></li></ul><h2 id="git-revert-撤销某个已经提交的的快照"><a href="#git-revert-撤销某个已经提交的的快照" class="headerlink" title="git revert 撤销某个已经提交的的快照"></a>git revert 撤销某个已经提交的的快照</h2><p><code>和reset 重置到某个指定版本不一样。它是在提交记录最后面加上一个撤销上次更改的新提交，而不是从项目历史中移除这个提交，这避免了 Git 丢失项目历史。</code></p><ul><li><code>git revert HEAD</code> 生成一个撤销最近的一次提交的新提交</li><li><code>git revert HEAD^</code> 生成一个撤销最近一次提交的上一次提交的新提交</li><li><code>git revert HEAD^^</code> 生成一个撤销最近一次提交的上两次提交的新提交</li><li><code>git revert HEAD~n</code> 生成一个撤销最近一次提交的上n次提交的新提交</li><li><code>git revert &lt;commit_id&gt;</code> 生成一个撤销指定提交版本的新提交<br><code>revert（撤销）是撤销公共提交的安全方式，reset（重设/回退）是重设/回退本地更改。因为两个命令的目的不同，它们的实现也不一样：重设完全地移除了一堆更改，而撤销保留了原来的更改，用一个新的提交来实现撤销。千万不要用 git reset 回退已经被推送到公共仓库上的 提交，它只适用于回退本地修改（从未提交到公共仓库中）。如果你需要修复一个公共提交，最好使用 git revert。</code></li></ul>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>whistle移动端调试利器</title>
      <link href="/whistle%E7%A7%BB%E5%8A%A8%E7%AB%AF%E8%B0%83%E8%AF%95%E5%88%A9%E5%99%A8/"/>
      <url>/whistle%E7%A7%BB%E5%8A%A8%E7%AB%AF%E8%B0%83%E8%AF%95%E5%88%A9%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p><code>whistle</code>基于<code>Node</code>实现的跨平台web调试代理工具，类似的工具有Windows平台上的Fiddler，主要用于查看、修改HTTP、HTTPS、Websocket的请求、响应，也可以作为HTTP代理服务器使用，不同于Fiddler通过断点修改请求响应的方式，whistle采用的是类似配置系统hosts的方式，一切操作都可以通过配置实现，支持域名、路径、正则表达式、通配符、通配路径等多种匹配方式，且可以通过Node模块扩展功能：<br><a id="more"></a></p><h2 id="安装使用"><a href="#安装使用" class="headerlink" title="安装使用"></a>安装使用</h2><p><a href="http://wproxy.org/whistle/" target="_blank" rel="noopener">whistle官网</a></p><ul><li>安装 <code>npm i -g whistle</code></li><li>启动：<code>w2 start</code></li><li>手机或浏览器设置代理：<code>http://192.168.5.16:8899</code> 确保手机和电脑处于同一局域网下</li><li><a href="http://wproxy.org/whistle/webui/https.html" target="_blank" rel="noopener">安装证书</a><br><code>ios安装证书后需要添加为信任或验证 设置-&gt;通用-&gt;描述文件与设备管理-&gt;找到证书然后验证</code><br><img src="/image/other/whistle1.png" alt="简介"></li><li>浏览器打开 <code>http://192.168.5.16:8899</code> 手机或电脑设置好代理和安装完证书之后就可以实现抓包了<br><img src="/image/other/whistle2.png" alt="简介"></li></ul><h2 id="线上资源文件指向本地-可修改本地代码调试在线网页"><a href="#线上资源文件指向本地-可修改本地代码调试在线网页" class="headerlink" title="线上资源文件指向本地 可修改本地代码调试在线网页"></a>线上资源文件指向本地 可修改本地代码调试在线网页</h2><p><code>在Rules中新建一个规则 https://www.test.cn/flow file://D:\project\flow</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 替换单个文件</span></span><br><span class="line"><span class="string">'https://www.test.cn/flow/index.html file://D:\project\flow\index.html'</span></span><br><span class="line"><span class="string">'https://www.test.cn/flow/js/flow.js file://D:\project\flow\js\flow/flow.js'</span></span><br><span class="line"><span class="comment">// 替换整个项目</span></span><br><span class="line"><span class="string">'https://www.test.cn/flow file://D:\project\flow'</span></span><br></pre></td></tr></table></figure></p><h2 id="注入调试-vConsole-或者-Eruda-需安装插件"><a href="#注入调试-vConsole-或者-Eruda-需安装插件" class="headerlink" title="注入调试 vConsole 或者 Eruda  需安装插件"></a>注入调试 vConsole 或者 Eruda  需安装插件</h2><p><code>该规则需要安装插件：npm i -g whistle.inspect，插件官网 如果需要注入Eruda，只需改成 whistle.inspect://e</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 页面自动注入 vConsole</span></span><br><span class="line"><span class="string">'https://www.test.cn/flow/index.html whistle.inspect://'</span></span><br><span class="line"><span class="comment">// 页面自动注入 Eruda</span></span><br><span class="line"><span class="string">'https://www.test.cn/flow/index.html whistle.inspect://e'</span></span><br></pre></td></tr></table></figure></p><h2 id="使用-log-功能打印日志："><a href="#使用-log-功能打印日志：" class="headerlink" title="使用 log 功能打印日志："></a>使用 log 功能打印日志：</h2><p><code>在移动端真机调试中，我们无法像浏览器控制台那样，查看输出的日志和数据，以往的替代方案是在页面上使用vconsole插件，而有了whistle后，我们可以这样做：</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 打开目标页面后  在右侧找到 log面板打开即可查看 log信息</span></span><br><span class="line"><span class="string">'http://www.baidu.com/ log://'</span></span><br></pre></td></tr></table></figure></p><h2 id="使用whistle内置的Weinre调试移动端页面："><a href="#使用whistle内置的Weinre调试移动端页面：" class="headerlink" title="使用whistle内置的Weinre调试移动端页面："></a>使用whistle内置的Weinre调试移动端页面：</h2><p><code>weinre相信大家都很熟悉，而whistle内置了weinre，使用方法如下：在rules配置：https://www.test.cn weinre://flow这时候，就能在http://192.168.5.16:8899/weinre/client/#flow 看到调试界面了</code><br><img src="/image/other/whistle3.png" alt="简介"></p><h2 id="使用-mock-修改响应-该规则需要安装插件-whistle-vase"><a href="#使用-mock-修改响应-该规则需要安装插件-whistle-vase" class="headerlink" title="使用 mock 修改响应 该规则需要安装插件 whistle.vase"></a>使用 mock 修改响应 该规则需要安装插件 whistle.vase</h2><p><code>npm i -g whistle.vase</code> <a href="https://github.com/whistle-plugins/whistle.vase" target="_blank" rel="noopener">插件官网</a><br><code>代理环境打开 http://vase.local.whistlejs.com</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加名为 systemDate，Engine为 mock 的数据</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"retCode"</span>: <span class="string">"000000"</span>,</span><br><span class="line">  <span class="string">"retDesc"</span>: <span class="string">"SUCCESS"</span>,</span><br><span class="line">  <span class="string">"rspBody"</span>: &#123;</span><br><span class="line">    <span class="string">"date"</span>: <span class="string">"2018-11-16 15:55:46"</span>,</span><br><span class="line">    <span class="string">"test"</span>: <span class="string">"@cword(1,10)"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>替换接口响应 <code>https://www.test.cn/flow/getPayRule vase://getPayRule</code></p><p>注：<code>若whistle.vase为1.0.1及以下 使用以下方式 否则替换不成功</code><br><code>https://www.test.cn/flow/getPayRule whistle.vase://getPayRule</code><br><img src="/image/other/whistle4.png" alt="简介"></p><h2 id="其他用法"><a href="#其他用法" class="headerlink" title="其他用法"></a>其他用法</h2><ul><li>禁用缓存 <code>https://www.test.cn cache://no-store</code></li><li>禁用缓存 <code>https://www.test.cn cache://no-store</code></li><li>模拟5秒超时后网络不通 <code>https://www.test.cn/newBillsQry/getNewBills reqDelay://5000 enable://abort</code></li><li>响应延时3秒 <code>https://www.test.cn/newBillsQry/getNewBills resDelay://3000</code></li><li>修改响应码或模拟HTTP状态码异常 <code>https://www.test.cn/newBillsQry/getNewBills statusCode://502</code></li><li>模拟低网速传输 <code>https://www.test.cn/newBillsQry/getNewBills resSpeed://3</code></li><li>往页面插入脚本<br><code>会在网页最后以 script 标签的形式插入，花括号的值是内置编辑器保存的文件，在主菜单 “Value” 下可找到或者是指定的文件</code><br><code>https://www.test.cn/index.html js://{test.js} 或 js://C:\Users\Administrator\Desktop\test.js</code></li><li>往页面插入样式<br><code>在网页里以 style 标签的形式插入</code><br><code>https://www.test.cn/index.html css://{test.css} 或 css://C:\Users\Administrator\Desktop\test.css</code></li></ul><h2 id="配置代理非vue项目"><a href="#配置代理非vue项目" class="headerlink" title="配置代理非vue项目"></a>配置代理非vue项目</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"># Rules1  线上资源文件指向本地</span><br><span class="line">https:<span class="comment">//www.test.cn/flow/js/recharge/recharge.js  file://F:\flow\js\recharge\recharge.js</span></span><br><span class="line">https:<span class="comment">//www.test.cn/flow file://F:flow  excludeFilter:///publicClient.*/i</span></span><br><span class="line"></span><br><span class="line"># Rules2  页面注入VConsole 需安装插件  npm i -g whistle.inspect</span><br><span class="line">https:<span class="comment">//www.test.cn/flow/detail.html whistle.inspect://</span></span><br><span class="line"></span><br><span class="line"># Rules3  页面注入eruda 需安装插件  npm i -g whistle.inspect</span><br><span class="line">https:<span class="comment">//www.test.cn/flow/detail.html whistle.inspect://e</span></span><br><span class="line"></span><br><span class="line"># Rules4  使用mock修改响应体  需全局安装  npm i -g whistle.vase</span><br><span class="line"># 打开http://vase.local.whistlejs.com 添加要修改的接口响应然后修改</span><br><span class="line">https:<span class="comment">//www.test.cn/flow/getPayRule vase://getPayRule</span></span><br><span class="line"># 若whistle.vase版本为'1.0.1'及以下使用以下方式</span><br><span class="line">https:<span class="comment">//www.test.cn/flow/getPayRule whistle.vase://getPayRule</span></span><br><span class="line"></span><br><span class="line"># Rules5  注入weinre 调试样式或查看布局</span><br><span class="line">https:<span class="comment">//www.test.cn/flow/addRecord.html weinre://addRecord</span></span><br><span class="line"></span><br><span class="line"># 禁用缓存</span><br><span class="line">https:<span class="comment">//www.test.cn/flow cache://no-store</span></span><br><span class="line"></span><br><span class="line"># 模拟 10 秒超时后网络不通</span><br><span class="line">https:<span class="comment">//www.test.cn/flow/getNewBills reqDelay://5000 enable://abort</span></span><br><span class="line"></span><br><span class="line"># 模拟接口响应延时</span><br><span class="line">https:<span class="comment">//www.test.cn/flow/getNewBills resDelay://3000</span></span><br><span class="line"></span><br><span class="line"># 模拟接口异常 HTTP状态码</span><br><span class="line">https:<span class="comment">//www.test.cn/flow/getNewBills statusCode://502</span></span><br><span class="line"></span><br><span class="line"># 模拟低网速传输</span><br><span class="line">https:<span class="comment">//www.test.cn/flow/getNewBills resSpeed://3</span></span><br></pre></td></tr></table></figure><h2 id="配置代理vue项目"><a href="#配置代理vue项目" class="headerlink" title="配置代理vue项目"></a>配置代理vue项目</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"># 方法一 用本地修改的代码打包后  再用打包后文件替换线上文件</span><br><span class="line">https:<span class="comment">//www.test.cn/flow F:\flow\build</span></span><br><span class="line"></span><br><span class="line"># 方法二 启动本地vue项目 将线上目录替换成本地npm run dev后的路径</span><br><span class="line">https:<span class="comment">//www.test.cn/flow/ 192.168.5.16:8787/ includeFilter:///\.js/ excludeFilter:///.*flow.*/</span></span><br><span class="line">https:<span class="comment">//www.test.cn/flow/ 192.168.5.16:8787/</span></span><br><span class="line">https:<span class="comment">//www.test.cn/find/ 192.168.5.16:8787/find/</span></span><br><span class="line">https:<span class="comment">//www.test.cn/public/ 192.168.5.16:8787/public/</span></span><br><span class="line">^https:<span class="comment">//www.test.cn/*.js 192.168.5.16:8787/$1.js</span></span><br><span class="line"></span><br><span class="line"># Rules2  页面注入VConsole 需安装插件  npm i -g whistle.inspect</span><br><span class="line">https:<span class="comment">//www.test.cn/flow/detail.html whistle.inspect://</span></span><br><span class="line"></span><br><span class="line"># Rules3  页面注入eruda 需安装插件  npm i -g whistle.inspect</span><br><span class="line">https:<span class="comment">//www.test.cn/flow/detail.html whistle.inspect://e</span></span><br><span class="line"></span><br><span class="line"># Rules4  使用mock修改响应体  需全局安装  npm i -g whistle.vase</span><br><span class="line"># 打开http://vase.local.whistlejs.com 添加要修改的接口响应然后修改</span><br><span class="line">https:<span class="comment">//www.test.cn/flow/getPayRule vase://getPayRule</span></span><br><span class="line"># 若whistle.vase版本为'1.0.1'及以下使用以下方式</span><br><span class="line">https:<span class="comment">//www.test.cn/flow/getPayRule whistle.vase://getPayRule</span></span><br><span class="line"></span><br><span class="line"># Rules5  注入weinre 调试样式或查看布局</span><br><span class="line">https:<span class="comment">//www.test.cn/flow/addRecord.html weinre://addRecord</span></span><br><span class="line"></span><br><span class="line"># 禁用缓存</span><br><span class="line">https:<span class="comment">//www.test.cn/flow cache://no-store</span></span><br><span class="line"></span><br><span class="line"># 模拟 10 秒超时后网络不通</span><br><span class="line">https:<span class="comment">//www.test.cn/flow/getNewBills reqDelay://5000 enable://abort</span></span><br><span class="line"></span><br><span class="line"># 模拟接口响应延时</span><br><span class="line">https:<span class="comment">//www.test.cn/flow/getNewBills resDelay://3000</span></span><br><span class="line"></span><br><span class="line"># 模拟接口异常 HTTP状态码</span><br><span class="line">https:<span class="comment">//www.test.cn/flow/getNewBills statusCode://502</span></span><br><span class="line"></span><br><span class="line"># 模拟低网速传输</span><br><span class="line">https:<span class="comment">//www.test.cn/flow/getNewBills resSpeed://3</span></span><br></pre></td></tr></table></figure><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://mp.weixin.qq.com/s?__biz=MzAxODE2MjM1MA==&amp;mid=2651555335&amp;idx=1&amp;sn=f99fbea0c9c10e7872ba917be6ece664&amp;chksm=802551c6b752d8d0b2e6eac2dd96455fc978bbfe08dd206f3183674c830e87cc9d03deb926a9&amp;mpshare=1&amp;scene=23&amp;srcid=1116HlD3w33fXb8TqPj6z80u#rd" target="_blank" rel="noopener">H5 移动调试全攻略</a><br><a href="http://wproxy.org/whistle/" target="_blank" rel="noopener">关于whistle · GitBook</a></p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>react初体验</title>
      <link href="/react%E5%88%9D%E4%BD%93%E9%AA%8C/"/>
      <url>/react%E5%88%9D%E4%BD%93%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<p><code>React</code>是<code>Facebook</code>在<code>2013年5月</code>推出的开源的函数式编程的前端框架，用于构建用户界面的。拥有较高的性能，声明式设计（采用声明范式）、高效、灵活、JSX语法、组件、单向响应的数据流等特点，已经成为Web开发的主流框架。JSX是JavaScript中的一种语法扩展，类似于XML格式的语言。<br><a id="more"></a></p><h2 id="React简介"><a href="#React简介" class="headerlink" title="React简介"></a>React简介</h2><blockquote><p>Facebook在 <code>2013年5月</code> 推出的开源的函数式编程的前端框架</p></blockquote><h2 id="React开发环境的搭建"><a href="#React开发环境的搭建" class="headerlink" title="React开发环境的搭建"></a>React开发环境的搭建</h2><ul><li><code>npm i create-react-app -g</code>  全局安装<code>Create-react-app</code>脚手架</li><li><code>create-react-app my-app</code> 使用脚手架初始化项目</li><li><code>cd my-app</code>  进入工程目录</li><li><code>npm start</code>  启动项目</li><li><code>npm run build</code> 打包项目</li><li><code>npm run eject</code> 将webpack等配置显示出来便于自定义修改</li></ul><h2 id="组件化理解"><a href="#组件化理解" class="headerlink" title="组件化理解"></a>组件化理解</h2><ul><li>组件的封装：封装视图、数据、变化逻辑</li><li>组件的复用：、props传递、复用</li></ul><h2 id="JSX本质是什么"><a href="#JSX本质是什么" class="headerlink" title="JSX本质是什么"></a>JSX本质是什么</h2><p><code>JSX是语法糖, 需要被解析成JS才能运行, 核心方法是 React.createElement()函数</code></p><h2 id="React基础"><a href="#React基础" class="headerlink" title="React基础"></a>React基础</h2><ul><li>react 双向绑定 和 插值用 {}  <code>{this.state.inputValue}</code></li><li><p>react 实现类似双向绑定是 state或props发生改变, render函数就会重新执行</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 受控组件  form表单元素 value受 state 控制  只能通过 setState 修改</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Todo</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.state = &#123; <span class="attr">inputValue</span>: <span class="string">''</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  render()&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;input value=&#123;<span class="keyword">this</span>.state.inputValue&#125; onChange=&#123;<span class="keyword">this</span>.changeInput.bind(<span class="keyword">this</span>)&#125; /&gt;</span><br><span class="line">        &lt;div&gt;&#123;<span class="keyword">this</span>.state.inputValue&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">  changeInput(e)&#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">inputValue</span>: e.target.value &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 非受控组件 通过 ref 控制 表单元素值不受state控制</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Todo</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">//需要状态时，需要构造函数</span></span><br><span class="line">  <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">  &#125;</span><br><span class="line">  render()&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;input value=&#123;<span class="keyword">this</span>.state.inputValue&#125;</span><br><span class="line">          ref=&#123;(textInput) =&gt; &#123;<span class="keyword">this</span>.textInput = textInput&#125;&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">        &lt;div&gt;&#123;<span class="keyword">this</span>.textInput&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Todo</span><br></pre></td></tr></table></figure></li><li><p>事件绑定 onClick 事件名大写 JSX使用变量 {变量}</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="keyword">this</span>.btnHandle.bind(<span class="keyword">this</span>)&#125; &gt;提交&lt;<span class="regexp">/button&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>props 属性  组将像一个函数，接受特定得输出，但不能修改</p></li><li><p>state 状态  组件内部得数据，可以动态改变 this.setState()更新state得唯一路径</p></li><li><p>注释</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">//todolist deomo  注释方法一 单行注释必须换行写</span></span><br><span class="line">&#125;</span><br><span class="line">&#123;<span class="comment">/* todolistdemo 注释方法二 */</span>&#125;</span><br></pre></td></tr></table></figure></li><li><p>Fragment  占位符不会在页面中渲染出来</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;Fragment&#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line">&lt;Fragment&gt;</span><br><span class="line">  &lt;div className=<span class="string">"box"</span> ref = <span class="string">'box'</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/Fragment&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>不能使用class定义类名   class必须写成className</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input className = <span class="string">"input"</span> /&gt;</span><br></pre></td></tr></table></figure></li><li><p>style样式</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p style=<span class="string">"&#123;&#123;fontSize:'40px', color:'blue'&#125;&#125;"</span>&gt;</span><br></pre></td></tr></table></figure></li><li><p>展示html标签</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> &lt;li</span><br><span class="line">  dangerouslySetInnerHTML = &#123;&#123;<span class="attr">__html</span>: item&#125;&#125;</span><br><span class="line">&gt;<span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p>使用htmlFor代替label中的for</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;label htmlFor=<span class="string">"ipt"</span>&gt;关联input&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">&lt;input id = "ipt" className = "input" /</span>&gt;</span><br></pre></td></tr></table></figure></li><li><p>组件使用及父子组件传值</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 父组件 */</span></span><br><span class="line"><span class="comment">// 引入</span></span><br><span class="line"><span class="keyword">import</span> TodoItemList <span class="keyword">from</span> <span class="string">'./TodoItemList'</span></span><br><span class="line"><span class="comment">// 使用 传值</span></span><br><span class="line">&lt;TodoItemList list = &#123;<span class="keyword">this</span>.state.list&#125;  deleteItem = &#123;<span class="keyword">this</span>.handleItem.bind(<span class="keyword">this</span>)&#125;/&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 子组件 */</span></span><br><span class="line"><span class="comment">// props 接收父组件属性传入的值</span></span><br><span class="line">render () &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">this</span>.props.list.map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">onClick</span> = <span class="string">&#123;this.handleItem.bind(this,</span> <span class="attr">index</span>)&#125;&gt;</span>&#123;item&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">handleItem (index) &#123;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ 调用父组件方法</span></span><br><span class="line"><span class="regexp">  this.props.deleteItem(index)</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>context 提供了在组件中共享值得方法 不必通过props单向传递</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// theme-context.js  创建context对象</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">const</span> ThemeContext = React.createContext()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ThemeContext</span><br><span class="line"><span class="comment">// app.js</span></span><br><span class="line"><span class="keyword">import</span> ThemeContext <span class="keyword">from</span> <span class="string">'./theme-context'</span></span><br><span class="line"><span class="keyword">import</span> ThemeBar <span class="keyword">from</span> <span class="string">'./component/ThemeBar'</span></span><br><span class="line"><span class="keyword">const</span> themes = &#123;</span><br><span class="line">  light: &#123; <span class="attr">className</span>: <span class="string">'btn btn-primary'</span>, <span class="attr">bgColor</span>: <span class="string">'#333333'</span>&#125;,</span><br><span class="line">  dark: &#123; <span class="attr">className</span>: <span class="string">'btn btn-light'</span>, <span class="attr">bgColor</span>: <span class="string">'#eeeeee'</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 使用 ThemeContext.Provider 包裹</span></span><br><span class="line">&lt;ThemeContext.Provider value=&#123;themes[<span class="keyword">this</span>.state.theme]&#125;&gt;</span><br><span class="line">  &lt;button className=<span class="string">"btn btn-light"</span></span><br><span class="line">    onClick=&#123;() =&gt; &#123; <span class="keyword">this</span>.setState(&#123;<span class="attr">theme</span>: <span class="string">'light'</span>&#125;)&#125;&#125;</span><br><span class="line">  &gt;浅色主题&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">  &lt;button className="btn btn-secondary"</span></span><br><span class="line"><span class="regexp">    onClick=&#123;() =&gt; &#123; this.setState(&#123;theme: 'dark'&#125;)&#125;&#125;</span></span><br><span class="line"><span class="regexp">  &gt;深色主题&lt;/</span>button&gt;</span><br><span class="line">  &lt;ThemeBar /&gt;</span><br><span class="line">&lt;<span class="regexp">/ThemeContext.Provider&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ ThemeBar.js</span></span><br><span class="line"><span class="regexp">import React from 'react'</span></span><br><span class="line"><span class="regexp">import ThemeContext from '../</span>theme-context<span class="string">';</span></span><br><span class="line"><span class="string">const ThemeBar = () =&gt; &#123;</span></span><br><span class="line"><span class="string">  return (</span></span><br><span class="line"><span class="string">    &lt;ThemeContext.Consumer&gt;</span></span><br><span class="line"><span class="string">      &#123; theme =&gt; &#123;</span></span><br><span class="line"><span class="string">        return (</span></span><br><span class="line"><span class="string">          &lt;div className="alert mt-5" style=&#123;&#123;backgroundColor:theme.bgColor,color:theme.color&#125;&#125;&gt;</span></span><br><span class="line"><span class="string">            &lt;p&gt;样式区域&lt;/p&gt;</span></span><br><span class="line"><span class="string">            &lt;button className=&#123;theme.className&#125;&gt;样式按钮&lt;/button&gt;</span></span><br><span class="line"><span class="string">          &lt;/div&gt;</span></span><br><span class="line"><span class="string">        )</span></span><br><span class="line"><span class="string">      &#125;&#125;</span></span><br><span class="line"><span class="string">    &lt;/ThemeContext.Consumer&gt;</span></span><br><span class="line"><span class="string">  )</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">export default ThemeBar</span></span><br></pre></td></tr></table></figure></li><li><p>无状态组件(函数组件):只根据props渲染页面，没有内部的state,只有render函数 它就是一个函数 无状态组件性能高</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; Input, Button, List &#125; <span class="keyword">from</span> <span class="string">'antd'</span>;</span><br><span class="line"><span class="keyword">const</span> TodoListUI = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"todo"</span>&gt;</span><br><span class="line">      &lt;div className=<span class="string">"input-box"</span>&gt;</span><br><span class="line">        &lt;Input  placeholder=<span class="string">"Basic usage"</span> value=&#123; props.inputValue &#125; onChange=&#123; props.InpuChange &#125;/&gt;</span><br><span class="line">        &lt;Button type=<span class="string">"primary"</span> onClick=&#123; props.buttonClick &#125;&gt;todo&lt;<span class="regexp">/Button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">      &lt;List size=<span class="string">"small"</span> bordered dataSource=&#123; props.list &#125;</span><br><span class="line">        renderItem=&#123; (item,index) =&gt;</span><br><span class="line">          &lt;List.Item onClick=&#123;() =&gt; &#123; props.itemDeleteHandle(index)&#125;&#125;&gt;&#123; item &#125;&lt;<span class="regexp">/List.Item&gt;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">      /</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default TodoListUI</span></span><br></pre></td></tr></table></figure></li><li><p>props类型检查与默认值<br><a href="https://reactjs.org/docs/typechecking-with-proptypes.html" target="_blank" rel="noopener">Typechecking With PropTypes – React</a></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span></span><br><span class="line"><span class="comment">// 类型校验</span></span><br><span class="line">MyComponent.propTypes = &#123;</span><br><span class="line">  list: PropTypes.oneofType([Proptypes.array, Proptypes.string]),</span><br><span class="line">  deleteItem: PropTypes.func,</span><br><span class="line">  test: PropTypes.string.isRequired</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 默认值</span></span><br><span class="line">MyComponent.defaultProps = &#123;</span><br><span class="line">  test: <span class="string">'test'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>props,state与render函数的关系</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 当组件的state或者props发生改变时, render函数就会重新执行</span></span><br><span class="line"><span class="comment">// 2. 当父组件的render函数被执行时, 它的子组件的render都将被重新执行</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="虚拟DOM"><a href="#虚拟DOM" class="headerlink" title="虚拟DOM"></a>虚拟DOM</h2><blockquote><p>虚拟DOM就是一个JS对象, 用它来描述真实的DOM</p></blockquote><p><code>优点:</code><br><code>1. 大大的提升了性能(减少了真实DOM的创建与对比,虚拟DOM创建的是js对象)</code><br><code>2. 它使得跨端应用得以实现. React Native</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JSX --&gt; createElement --&gt; 虚拟DOM(JS对象) --&gt; 真实DOM</span></span><br><span class="line"><span class="comment">// 虚拟DOM中的Diff算法  虚拟DOM同层比对   DOM key值相同比对</span></span><br><span class="line">真实DOM</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1. state数据</span></span><br><span class="line"><span class="comment">2. JSX 模板</span></span><br><span class="line"><span class="comment">3. 数据 + 模板 结合, 生成真实的DOM 来显示</span></span><br><span class="line"><span class="comment">4. state 发生改变</span></span><br><span class="line"><span class="comment">5. 数据 + 模板 结合生成真实的DOM, 替换原始的DOM</span></span><br><span class="line"><span class="comment">缺陷: 第一次生成完整DOM  第二次生成完整DOM 用第二次DOM替换第一次DOM, 非常耗性能</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">虚拟DOM</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1. state 数据</span></span><br><span class="line"><span class="comment">2. JSX 模板</span></span><br><span class="line"><span class="comment">3. 数据 + 模板生成虚拟DOM</span></span><br><span class="line"><span class="comment">['div', &#123;id: 'test'&#125;, ['span', &#123;&#125; ,'hello world']]</span></span><br><span class="line"><span class="comment">4. 用虚拟DOM的结构生成真实的DOM,来显示</span></span><br><span class="line"><span class="comment">&lt;div id="test"&gt;&lt;span&gt;hello world&lt;/span&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="comment">5. state 发生变化</span></span><br><span class="line"><span class="comment">6. 数据 + 模板生成新的虚拟DOM</span></span><br><span class="line"><span class="comment">['div', &#123;id: 'test'&#125;, ['span', &#123;&#125; ,'hi react']]</span></span><br><span class="line"><span class="comment">7. 比较原始虚拟DOM和新的虚拟DOM区别, 找到区别是span中的内容变化</span></span><br><span class="line"><span class="comment">8. 直接操作DOM, 改变span中的内容</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></p><ul><li><p>ref的使用 获取DOM元素</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ref 是箭头函数   this.input 指向 input DOM对象</span></span><br><span class="line"><span class="comment">// setState是异步函数  在获取DOM对象会有问题</span></span><br><span class="line">&lt;input  ref = &#123;(input) =&gt; &#123;<span class="keyword">this</span>.input = input&#125;&#125; /&gt;</span><br><span class="line"><span class="keyword">this</span>.setState(&#123;</span><br><span class="line">  inputValue: <span class="keyword">this</span>.input.value</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>setState是异步函数  第二个参数解决 异步导致DOM获取问题已经数值更新后的操作</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.setState(<span class="function"><span class="params">prevState</span> =&gt;</span> (&#123;</span><br><span class="line">  list: [...this.state.list,<span class="keyword">this</span>.state.inputValue],</span><br><span class="line">  inputValue: <span class="string">''</span></span><br><span class="line">&#125;), () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.ul.querySelectorAll(<span class="string">'div'</span>).length)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>setState为何需要异步以及过程</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 可能会一次执行多次setState操作</span></span><br><span class="line"><span class="comment">// 2. 没必要每次setState都重新渲染,考虑性能</span></span><br><span class="line"><span class="comment">// 3. 无法规定 限制用户如何使用setState</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="React-生命周期函数"><a href="#React-生命周期函数" class="headerlink" title="React 生命周期函数"></a>React 生命周期函数</h2><p><img src="/image/react/React生命周期.png" alt="React 生命周期函数"><br><code>生命周期函数是指在某一时刻组件会自动调用执行的函数</code><br><strong>Mountting阶段</strong><br><code>componentWillMount</code>: 组件即将被挂载(render)到页面的时刻自动执行(第一次挂载执行)<br><code>componentDidMount</code>: 组件在被挂载(render)到页面之后自动执行render之后(第一次挂载执行)<br><strong>Updation阶段</strong><br><code>更新的三种情形： New props    setState()  fourceUpdate</code><br><code>shouldComponentUpdate</code>: 组件被更新之前自动执行,是否需要更新,必须返回布尔值<br><code>componentWillUpdate</code>: 组件在被更新之前自动执行,但它在<em>shouldComponentUpdate</em>之后执行,如果<em>shouldComponentUpdate</em>返回<em>true</em>它才会执行,如果返回<em>false</em>,它不会执行<br><code>componentDidUpdate</code>: 组件更新完成之后自动执行 (React更新DOM和refs会触发)<br><code>componentWillReceiveProps</code>: 组件接收参数之前自动执行,需要满足两个条件,子组件要从父组件接收参数,且子组件以前已经存在于父组件中,才会执行,不能是第一次存在<br><strong>Unmountting</strong><br><code>componentWillUnmount</code>: 当这个组件即将被从页面中剔除(卸载)的时候,自动执行<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当父组件的render函数被执行时, 它的子组件的render都将被重新执行</span></span><br><span class="line"><span class="comment">// shouldComponentUpdate 避免子组件无谓的render渲染</span></span><br><span class="line">shouldComponentUpdate (nextProps, nextState) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(nextProps)</span><br><span class="line">  <span class="keyword">if</span> (nextProps.list !== <span class="keyword">this</span>.props.list) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ul><li>PureComponent 定制了shouldComponentUpdate后的Component(浅比较)</li></ul><ul><li><p>react 性能优化</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. this的绑定放在constructor里面</span></span><br><span class="line"><span class="keyword">constructor</span> (props) &#123;</span><br><span class="line">  <span class="keyword">super</span>(props)</span><br><span class="line">  <span class="keyword">this</span>.handleButton = <span class="keyword">this</span>.handleButton.bind(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2. setState异步函数将多次数据改变结合成一次执行</span></span><br><span class="line"><span class="comment">// 3. 虚拟DOM同层匹配 diff算法</span></span><br><span class="line"><span class="comment">// 4. 使用shouldComponentUpdate避免子组件无谓的render渲染</span></span><br><span class="line"><span class="comment">// 5. ajax最好放在componentDidMount中</span></span><br></pre></td></tr></table></figure></li><li><p>安装React Developer Tools chrome调试工具 调试react应用</p></li></ul><h2 id="React-动画"><a href="#React-动画" class="headerlink" title="React 动画"></a>React 动画</h2><ul><li>使用react-transition-group实现动画 <code>npm i react-transition-group -S</code></li><li><p>使用CSSTransition实现单个元素过渡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; CSSTransition &#125; <span class="keyword">from</span> <span class="string">'react-transition-group'</span></span><br><span class="line"><span class="comment">// in 控制变量  timeout 时长   classNames 自定义class前缀 test-enter</span></span><br><span class="line"><span class="comment">// unmountOnExit 是否隐藏dom   appear 是否首次也应用过渡</span></span><br><span class="line"><span class="comment">// onEntered 过渡完成事件</span></span><br><span class="line">&lt;CSSTransition</span><br><span class="line">  <span class="keyword">in</span>=&#123;<span class="keyword">this</span>.state.status&#125;</span><br><span class="line">  timeout=&#123;<span class="number">1000</span>&#125;</span><br><span class="line">  classNames=<span class="string">"test"</span></span><br><span class="line">  unmountOnExit</span><br><span class="line">  appear=&#123;<span class="literal">true</span>&#125;</span><br><span class="line">  onEntered=&#123;(el)=&gt;&#123; el.style.color = <span class="string">"blue"</span>&#125;&#125;</span><br><span class="line">&gt;</span><br><span class="line">  &lt;p&gt;过渡&#123;<span class="keyword">this</span>.state.status?<span class="string">'显示'</span>:<span class="string">'隐藏'</span>&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>CSSTransition&gt;</span><br><span class="line"><span class="comment">// transition.css</span></span><br><span class="line">.test-enter, .test-appear&#123; <span class="attr">opacity</span>: <span class="number">0</span>; &#125;</span><br><span class="line">.test-enter-active,.test-appear-active&#123; <span class="attr">opacity</span>: <span class="number">1</span>;transition: opacity <span class="number">1</span>s ease-<span class="keyword">in</span>&#125;</span><br><span class="line">.test-enter-done&#123; <span class="attr">opacity</span>: <span class="number">1</span>;&#125;</span><br><span class="line">.test-exit&#123; <span class="attr">opacity</span>: <span class="number">1</span>; &#125;</span><br><span class="line">.test-exit-active&#123; <span class="attr">opacity</span>: <span class="number">0</span>;transition: opacity <span class="number">1</span>s ease-<span class="keyword">in</span> &#125;</span><br><span class="line">.test-exit-done&#123; <span class="attr">opacity</span>: <span class="number">0</span>; &#125;</span><br></pre></td></tr></table></figure></li><li><p>使用TransitionGroup + CSSTransition 实现一组或多个元素过渡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; CSSTransition, TransitionGroup &#125; <span class="keyword">from</span> <span class="string">'react-transition-group'</span></span><br><span class="line">&lt;TransitionGroup&gt;</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">this</span>.state.list.map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        &lt;CSSTransition</span><br><span class="line">          timeout=&#123;<span class="number">1000</span>&#125;</span><br><span class="line">          classNames=<span class="string">"test"</span></span><br><span class="line">          unmountOnExit</span><br><span class="line">          appear=&#123;<span class="literal">true</span>&#125;</span><br><span class="line">          key=&#123;index&#125;</span><br><span class="line">          onEntered=&#123;(el)=&gt;&#123; el.style.color = <span class="string">"blue"</span>&#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;li&gt;&#123;item&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>CSSTransition&gt;</span><br><span class="line">      )</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;<span class="regexp">/TransitionGroup&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="React和Vue有何异同"><a href="#React和Vue有何异同" class="headerlink" title="React和Vue有何异同"></a>React和Vue有何异同</h2><ul><li>本质区别   Vue是MVVM框架  React是前端组件化框架</li><li>模板的区别 Vue使用模板  React使用JSX</li><li>共同点 都支持组件化 都是以数据驱动视图</li></ul><h2 id="react-路由"><a href="#react-路由" class="headerlink" title="react 路由"></a>react 路由</h2><ul><li>安装 <code>npm i react-router-dom</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入</span></span><br><span class="line"><span class="keyword">import</span> &#123; BrowserRouter, Route &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></span><br><span class="line"><span class="comment">// 使用 exact path必须相等  Route必须用元素包裹</span></span><br><span class="line">&lt;BrowserRouter&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;Route path=<span class="string">"/"</span> exact component=&#123; Home &#125;&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line">    &lt;Route path=<span class="string">"/detail"</span> exact component=&#123; Detail &#125;&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>BrowserRouter&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="异步组件-react-loadable-withRouter"><a href="#异步组件-react-loadable-withRouter" class="headerlink" title="异步组件   react-loadable  withRouter"></a>异步组件   react-loadable  withRouter</h2><h2 id="模块热更新-react-hot-loader"><a href="#模块热更新-react-hot-loader" class="headerlink" title="模块热更新 react-hot-loader"></a>模块热更新 react-hot-loader</h2><h2 id="React-服务端渲染"><a href="#React-服务端渲染" class="headerlink" title="React 服务端渲染"></a>React 服务端渲染</h2>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>grid网格布局</title>
      <link href="/grid%E7%BD%91%E6%A0%BC%E5%B8%83%E5%B1%80/"/>
      <url>/grid%E7%BD%91%E6%A0%BC%E5%B8%83%E5%B1%80/</url>
      
        <content type="html"><![CDATA[<p><code>Grid</code>网格布局擅长于将一个页面划分为几个主要区域，以及定义这些区域的<code>大小、位置、层次</code>等关系（前提是<code>HTML</code>生成了这些区域）。像表格一样，网格布局让我们能够按行或列来对齐元素。 然而在布局上，网格比表格更可能做到或更简单。 例如，网格容器的子元素可以自己定位，以便它们像<code>CSS</code>定位的元素一样，真正的有重叠和层次。<br><a id="more"></a></p><h2 id="Grid-VS-Flexbox"><a href="#Grid-VS-Flexbox" class="headerlink" title="Grid VS Flexbox"></a>Grid VS Flexbox</h2><ul><li><code>Flexbox</code>是一维布局,只能在一条直线上放置内容区块,只能指定内容区块针对轴线的位置</li><li><code>Grid</code>是二维布局,将容器划分成<code>行</code>和<code>列</code>,产生单元格,根据设计需求将内容区块放置到单元格中</li></ul><h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><blockquote><p>网格容器: 元素应用<code>display：grid</code>; 它是其所有网格项的父元素<br>网格项：网格容器的子元素，下面的<code>item</code>元素就是网格项<br>网格线：组成网格项的分界线<br>网格单元：两个相邻的列网格线和两个相邻的行网格线组成网格单元<br>fr(单位): 剩余空间的分配数，表示比例关系</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span>4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.container</span>&#123;</span></span><br><span class="line"><span class="undefined">  display: grid;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="容器属性"><a href="#容器属性" class="headerlink" title="容器属性"></a>容器属性</h2><blockquote><p>容器属性: Grid布局定义在容器上面，称为容器属性</p></blockquote><ul><li><p><code>display</code>属性  <code>display:grid|inline-grid|subgrid</code><br><code>display:grid</code>   生成块级网格<br><code>display:inline-grid</code>  生成行内网格<br><code>注：当元素设置了网格布局，column，float，clear，vertical-align等设置失效</code></p></li><li><p><code>grid-template-columns/grid-template-rows</code>属性 使用空格分隔的值列表，用来定义网格的列和行<br><code>grid-template-columns:&lt;track-size&gt; ... | &lt;line-name&gt; &lt;track-size&gt; ...</code> 定义每一列的列宽<br><code>grid-template-rows:&lt;track-size&gt; ... | &lt;line-name&gt; &lt;track-size&gt; ...</code> 定义每一行的高度<br><code>&lt;track-size&gt;: 可以是长度值，百分比，fr单位或者关键字</code><br><code>&lt;line-name&gt;: 网格线名称</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h2 id="项目属性"><a href="#项目属性" class="headerlink" title="项目属性"></a>项目属性</h2><blockquote><p>项目属性: Grid布局定义在项目上面，称为项目属性</p></blockquote><h2 id="参考地址"><a href="#参考地址" class="headerlink" title="参考地址"></a>参考地址</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Grid_Layout" target="_blank" rel="noopener">网格布局 - CSS(层叠样式表)</a><br><a href="http://www.ruanyifeng.com/blog/2019/03/grid-layout-tutorial.html" target="_blank" rel="noopener">CSS Grid 网格布局教程</a><br><a href="https://www.imooc.com/learn/1111" target="_blank" rel="noopener">Grid布局基础</a></p>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> grid </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>javascript常用代码片段</title>
      <link href="/javascript%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"/>
      <url>/javascript%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/</url>
      
        <content type="html"><![CDATA[<p>为了避免重复性劳动,日常开发中总会有哪些你曾经使用的过或者从各网站博客中找到一些特别有用的代码片段, 亦或者是某些比较好的能简化代码的片段. 在工作中,或者查看别人的代码时,总能看到一些不一样的处理方式,或者某些大神或前辈对同样的问题有更简单实用的使用方式.<br><a id="more"></a></p><ul><li><p>JavaScript中!!操作符是什么<br><code>!!强制把右侧的值转化为布尔值</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(!!<span class="number">10</span>) <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(!!<span class="number">0</span>) <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(!!<span class="string">"abc"</span>) <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(!!<span class="string">""</span>) <span class="comment">//false</span></span><br></pre></td></tr></table></figure></li><li><p>JavaScript字符与ASCII码间的转换</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"abc"</span>.charCodeAt(<span class="number">0</span>)) <span class="comment">// 97</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCharCode(<span class="number">97</span>)) <span class="comment">// a</span></span><br></pre></td></tr></table></figure></li><li><p>判断一个对象是否为数组的最好方式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArray</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj) == <span class="string">"[object Array]"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 不能用instanceof 和 constructor来判断</span></span><br></pre></td></tr></table></figure></li><li><p>取数组中的最大值/最小值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">100</span>, <span class="number">50</span>, <span class="number">30</span>]</span><br><span class="line"><span class="keyword">var</span> min = <span class="built_in">Math</span>.min.apply(<span class="literal">null</span>, arr),</span><br><span class="line">  max = <span class="built_in">Math</span>.max.apply(<span class="literal">null</span>, arr);</span><br><span class="line"><span class="built_in">console</span>.log(min, max) <span class="comment">// 30 100</span></span><br></pre></td></tr></table></figure></li><li><p>统计一个字符串中某个字符出现的次数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> temp = <span class="string">"This is a string."</span></span><br><span class="line"><span class="keyword">var</span> count = temp.match(<span class="regexp">/is/g</span>).length <span class="comment">// 2</span></span><br></pre></td></tr></table></figure></li><li><p>把arguments/NodeList转换为Array</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">var</span> args = <span class="built_in">Array</span>.form(<span class="built_in">arguments</span>)</span><br></pre></td></tr></table></figure></li><li><p>检查是否包含子元素<br><code>const elementContains = (parent, child) =&gt; parent !== child &amp;&amp; parent.contains(child)</code></p></li><li><p>检测移动/PC设备</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> detectDeviceType = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="regexp">/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i</span>.test(navigator.userAgent) ? <span class="string">'Mobile'</span> : <span class="string">'Desktop'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>转义html(防XSS攻击)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> escapeHTML = <span class="function"><span class="params">str</span> =&gt;</span>&#123;</span><br><span class="line">  str.replace( <span class="regexp">/[&amp;&lt;&gt;'"]/g</span>, tag =&gt;(&#123;</span><br><span class="line">    <span class="string">'&amp;'</span>: <span class="string">'&amp;amp;'</span>, <span class="string">'&lt;'</span>: <span class="string">'&amp;lt;'</span>, <span class="string">'&gt;'</span>: <span class="string">'&amp;gt;'</span>, <span class="string">"'"</span>: <span class="string">'&amp;#39;'</span>, <span class="string">'"'</span>: <span class="string">'&amp;quot;'</span></span><br><span class="line">  &#125;[tag] || tag))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>判断js运行环境</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> inBrowser = <span class="keyword">typeof</span> <span class="built_in">window</span> !== <span class="string">'undefined'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> inWeex = <span class="keyword">typeof</span> WXEnvironment !== <span class="string">'undefined'</span> &amp;&amp; !!WXEnvironment.platform</span><br><span class="line"><span class="keyword">const</span> weexPlatform = inWeex &amp;&amp; WXEnvironment.platform.toLowerCase()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> UA = inBrowser &amp;&amp; <span class="built_in">window</span>.navigator.userAgent.toLowerCase()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isIE = UA &amp;&amp; <span class="regexp">/msie|trident/</span>.test(UA)</span><br><span class="line"><span class="keyword">const</span> isIE9 = UA &amp;&amp; UA.indexOf(<span class="string">'msie 9.0'</span>) &gt; <span class="number">0</span></span><br><span class="line"><span class="keyword">const</span> isEdge = UA &amp;&amp; UA.indexOf(<span class="string">'edge/'</span>) &gt; <span class="number">0</span></span><br><span class="line"><span class="keyword">const</span> isAndroid = (UA &amp;&amp; UA.indexOf(<span class="string">'android'</span>) &gt; <span class="number">0</span>) || (weexPlatform === <span class="string">'android'</span>)</span><br><span class="line"><span class="keyword">const</span> isIOS = (UA &amp;&amp; <span class="regexp">/iphone|ipad|ipod|ios/</span>.test(UA)) || (weexPlatform === <span class="string">'ios'</span>)</span><br><span class="line"><span class="keyword">const</span> isChrome = UA &amp;&amp; <span class="regexp">/chrome\/\d+/</span>.test(UA) &amp;&amp; !isEdge</span><br><span class="line"><span class="keyword">const</span> isPhantomJS = UA &amp;&amp; <span class="regexp">/phantomjs/</span>.test(UA)</span><br><span class="line"><span class="keyword">const</span> isFF = UA &amp;&amp; UA.match(<span class="regexp">/firefox\/(\d+)/</span>)</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js基础 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>mongodb和moogoose</title>
      <link href="/mongoose/"/>
      <url>/mongoose/</url>
      
        <content type="html"><![CDATA[<p><code>MongoDB</code>是一个基于分布式文件存储的数据库。MongoDB 是一个介于关系数据库和非关系数据库之间的产品。由C++语言编写。旨在为WEB应用提供可扩展的高性能数据存储解决方案。<code>MongoDB</code>支持丰富的查询语言，以支持读写操作（CRUD）,具有高可用性, 支持多种存储引擎。<br><a id="more"></a></p><h2 id="mongodb-安装"><a href="#mongodb-安装" class="headerlink" title="mongodb 安装"></a>mongodb 安装</h2><p><a href="https://www.runoob.com/mongodb/mongodb-tutorial.html" target="_blank" rel="noopener">mongodb 安装</a><br><a href="https://www.mongodb.com/try/download/community" target="_blank" rel="noopener">官网下载地址</a></p><h2 id="安装可视化管理工具"><a href="#安装可视化管理工具" class="headerlink" title="安装可视化管理工具"></a>安装可视化管理工具</h2><p><a href="https://robomongo.org/" target="_blank" rel="noopener">Studio 3T或Robo 3T</a></p><h2 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h2><p><code>在path变量中添加mongodb\bin所在路径</code></p><h2 id="mongodb-使用"><a href="#mongodb-使用" class="headerlink" title="mongodb 使用"></a>mongodb 使用</h2><ul><li><code>which mongod</code> 查看mongodb安装路径</li><li><code>mongod</code> 启动服务</li></ul><h2 id="验证是否成功"><a href="#验证是否成功" class="headerlink" title="验证是否成功"></a>验证是否成功</h2><ul><li>在浏览器地址栏输入 127.0.0.1:27017 ，出现以下界面则说明环境已配好。<br><code>It looks like you are trying to access MongoDB over HTTP on the native driver port.</code></li></ul><h2 id="使用mongoDB客户端"><a href="#使用mongoDB客户端" class="headerlink" title="使用mongoDB客户端"></a>使用mongoDB客户端</h2><p><code>进入安装目录执行 mongo.exe文件 打开命令行界面执行 mongoDB操作如 show dbs  查看所有数据库</code></p><h2 id="使用MongoDB可视化工具Studio-3T"><a href="#使用MongoDB可视化工具Studio-3T" class="headerlink" title="使用MongoDB可视化工具Studio 3T"></a>使用MongoDB可视化工具Studio 3T</h2><p><code>安装完成启动Studio 3T</code> 类似navigat</p><ol><li>点击<code>Connect</code>创建连接后, 就可以看到初始的三个数据库</li><li>在新建的<code>connect</code>上右键即可创建数据库(<code>Add Database</code>)、在数据库上右键创建数据表(<code>Add Collection</code>)等</li><li>点击 <code>Open intelliShell</code> 可以执行CRUD增删改差操作</li></ol><h2 id="mongoDB常用操作"><a href="#mongoDB常用操作" class="headerlink" title="mongoDB常用操作"></a>mongoDB常用操作</h2><ol><li>插入一条数据: <code>db.表名.insertOne({ name: &#39;tew&#39;, sex: 1})</code></li><li>插入多条数据: <code>db.表名.insertMany([{ name: &#39;tew&#39;, sex: 1}, { name: &#39;tew&#39;, sex: 1}])</code></li><li>查询所有: <code>db.表名.find()，相当于：SELECT * FROM table_name</code></li><li>按条件查询: <code>db.表名.find({ke:value})，相当于SELECT * FROM 表名 WHERE name  = ?</code></li><li>更新单个数据 <code>db.表名.updateOne()</code></li><li>删除所有数据 <code>db.表名.deleteMany()</code></li><li>删除与条件匹配的数据 <code>db.表名.deleteMany()</code></li></ol><h2 id="使用moogoose"><a href="#使用moogoose" class="headerlink" title="使用moogoose"></a>使用moogoose</h2><p><a href="http://www.mongoosejs.net/docs/index.html" target="_blank" rel="noopener">moogoose官网教程</a></p><ul><li>安装 <code>npm i mongoose</code></li><li>定义schema，Mongoose里，一切都始于Schema,每个schema都会映射到一个 MongoDB collection(表)<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>)</span><br><span class="line"><span class="comment">// 连接数据库</span></span><br><span class="line">mongoose.connect(<span class="string">'mongodb://localhost/dbs'</span>, &#123;<span class="attr">useNewUrlParser</span>:<span class="literal">true</span>, <span class="attr">useUnifiedTopology</span>: <span class="literal">true</span>&#125;)</span><br><span class="line"><span class="keyword">let</span> personSchema = <span class="keyword">new</span> mongoose.Schema(&#123; <span class="comment">// 表</span></span><br><span class="line">  name: <span class="built_in">String</span>, <span class="comment">// 字段</span></span><br><span class="line">  age: <span class="built_in">Number</span> <span class="comment">// 字段</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> Person = mongoose.model(<span class="string">'Person'</span>, personSchema) <span class="comment">// 创建模型</span></span><br><span class="line">app.use(<span class="string">'/addPerson'</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> person = <span class="keyword">new</span> Person(&#123; <span class="comment">// 实例化model模型</span></span><br><span class="line">    name: <span class="string">'tew'</span>,</span><br><span class="line">    age: <span class="number">29</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> person.save() <span class="comment">// 保存到数据库</span></span><br><span class="line">    code = <span class="number">0</span></span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    code = <span class="number">-1</span></span><br><span class="line">  &#125;</span><br><span class="line">  ctx.body = &#123;</span><br><span class="line">    code</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://www.cnblogs.com/chy18883701161/p/11100560.html" target="_blank" rel="noopener">Windows下MongoDB的下载安装、环境配置 - chenhongyong - 博客园</a><br><a href="https://blog.csdn.net/weixin_39999535/article/details/81383196" target="_blank" rel="noopener">MongoDB可视化工具Studio 3T的使用</a></p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mongodb </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>前端性能优化</title>
      <link href="/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
      <url>/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<p>移动端的开发由于设备的不统一会造成一些兼容性问题，经常会困扰许多<code>web</code>前端开发者，自从接触移动端以来也遇到过很多问题，低端机性能差容易卡顿，<code>h5</code>和<code>css3</code>新的<code>api</code>在低版本兼容性差等。<br><a id="more"></a></p><h2 id="资源的合并与压缩"><a href="#资源的合并与压缩" class="headerlink" title="资源的合并与压缩"></a>资源的合并与压缩</h2><ul><li>减少http请求数量</li><li>减少请求资源的大小<blockquote><p>html代码压缩就是压缩在这些文本文件中有意义,但是在HTML中<code>不显示</code>的字符,包括<code>空格</code>,<code>制表符</code>,<code>换行符</code>,<code>HTML注释</code>等.</p></blockquote></li></ul><blockquote><p>css压缩 删除无效代码 css语义合并</p></blockquote><blockquote><p>Js压缩与混乱 删除无效字符的删除  删除注释 代码语义缩减和优化</p><ol><li>使用在线网站进行压缩</li><li>使用构建工具进行压缩<code>fis3</code>,<code>gulp</code>,<code>webpack</code>,<code>grunt</code>等</li><li>使用<code>clean-css</code>对<code>css</code>进行压缩,<code>html-minifier</code>对<code>html</code>进行压缩,<code>uglifyjs2</code>对<code>js</code>进行压缩.<br>文件合并</li><li>使用在线网站进行文件合并</li><li>使用nodejs实现文件合并</li></ol></blockquote><h2 id="图片相关的优化"><a href="#图片相关的优化" class="headerlink" title="图片相关的优化"></a>图片相关的优化</h2><ul><li>采用<code>雪碧图</code> 将多个小图片整合到一张单独的图片中 <code>减少网站的http请求数量</code> 使用<code>Compass</code>生成雪碧图</li><li>使用<code>base64</code>字符</li><li>使用<code>svg</code>绘制矢量图</li><li>使用<code>iconfont</code>等字体图标</li><li>在<code>android</code>中使用<code>webp</code>格式<code>(ios webview中有兼容性问题)</code> 可以使用构建工具或在线网站将png转换成webp格式</li><li>对图片进行压缩常用 <a href="https://tinypng.com" target="_blank" rel="noopener">TinyPNG</a> 或 <a href="https://zhitu.isux.us/" target="_blank" rel="noopener">智图</a></li></ul><h2 id="懒加载和预加载"><a href="#懒加载和预加载" class="headerlink" title="懒加载和预加载"></a>懒加载和预加载</h2><blockquote><p>懒加载 &nbsp;&nbsp; <code>图片进入可视区域之后再请求图片资源</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 引入所需js --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"jquery.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"jquery.lazyload.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 将图片地址放在data-original属性上 给图片添加class(lazy) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"lazy"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">width</span>=<span class="string">"640"</span> <span class="attr">height</span>=<span class="string">"480"</span> <span class="attr">data-original</span>=<span class="string">"img/example.jpg"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">$(<span class="string">"img.lazy"</span>).lazyload(&#123;</span></span><br><span class="line"><span class="actionscript">  placeholder : <span class="string">"img/grey.gif"</span>, <span class="comment">//用默认图片提前占位</span></span></span><br><span class="line"><span class="actionscript">  effect: <span class="string">"fadeIn"</span>, <span class="comment">// 载入使用何种效果</span></span></span><br><span class="line"><span class="actionscript">  threshold: <span class="number">200</span>, <span class="comment">// 提前开始加载</span></span></span><br><span class="line"><span class="actionscript">  event: <span class="string">'click'</span>,  <span class="comment">// 事件触发时才加载</span></span></span><br><span class="line"><span class="javascript">  container: $(<span class="string">"#container"</span>),  <span class="comment">// 对某容器中的图片实现效果</span></span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>预加载 &nbsp;&nbsp; `图片等静态资源在使用之前的提前请求<br><a href="http://www.createjs.cc/preloadjs/docs/modules/PreloadJS.html" target="_blank" rel="noopener">preload.js</a></p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"xxx.jpg"</span>  <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">style</span>=<span class="string">'display:none'</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 或者使用preload.js --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../preload.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> queue = <span class="keyword">new</span> createjs.LoadQueue(<span class="literal">false</span>);</span></span><br><span class="line"><span class="actionscript">  queue.on(<span class="string">"complete"</span>, handleComplete, <span class="keyword">this</span>);</span></span><br><span class="line"><span class="undefined">  queue.loadManifest([</span></span><br><span class="line"><span class="actionscript">    &#123;id: <span class="string">"myImage"</span>, src:<span class="string">"path/to/myImage.jpg"</span>&#125;</span></span><br><span class="line"><span class="undefined">  ]);</span></span><br><span class="line"><span class="actionscript">  <span class="function"><span class="keyword">function</span> <span class="title">handleComplete</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> image = queue.getResult(<span class="string">"myImage"</span>);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.body.appendChild(image);</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="减少浏览器重绘与回流"><a href="#减少浏览器重绘与回流" class="headerlink" title="减少浏览器重绘与回流"></a>减少浏览器重绘与回流</h2><blockquote><p><code>回流或重排（Reflow）</code> 当render tree中的一部分或全部<code>因为元素的大小尺寸,布局,隐藏等改变而需要重新构建 当页面布局和几何属性改变时就需要回流</code> 位置发生变化 增加、修改、删除DOM节点等</p></blockquote><blockquote><p><code>重绘（Repaint）</code> 当render tree中的一些元素需要更新属性,而这些属性<code>只是影响元素的外观,风格,而不会影响布局</code>如(background-color)变化  位置不发生改变</p><blockquote><p><code>注:回流必将引起重绘,但重绘不一定能引起回流</code></p></blockquote></blockquote><p><code>回流何时发生: 页面布局和几何属性改变时,如: 添加或删除可见的DOM元素, 元素位置改变, 元素尺寸改变, 浏览器窗口尺寸改变</code></p><h6 id="减少重绘与回流的方式"><a href="#减少重绘与回流的方式" class="headerlink" title="减少重绘与回流的方式"></a>减少重绘与回流的方式</h6><ul><li>用<code>translate</code>替代<code>left,top等</code>位置的改变 <code>(不会触发layout)</code></li><li>用<code>opacity</code>替代<code>visibility</code></li><li>不要一条条地修改DOM样式,预先定义好class,然后修改DOM的className</li><li>把DOM离线后修改,比如: 先把DOM给display:none 修改后再显示出来</li><li>启用GPU硬件加速 <code>transform:translateZ(0)或translate3D(0,0,0)</code></li></ul><h2 id="浏览器存储"><a href="#浏览器存储" class="headerlink" title="浏览器存储"></a>浏览器存储</h2><ul><li><code>cookie</code> 作为浏览器存储 大小4kb左右  需要设置过期时间expire</li><li><code>localStorage</code> 专门用于浏览器本地缓存</li><li><code>sessionStorage</code> 会话级别的浏览器存储 可用于表单信息的维护</li><li><code>IndexedDB</code> 用于客户端存储大量结构化数据 为应用创建离线版本</li><li><code>PWA</code> (Progressive Web App) 渐进式的Web App<ol><li>在没有网络的环境中也能提供基本的页面访问 不会出现”未连接到互联网”的页面</li><li>针对网页渲染及网络数据访问有较好优化</li><li>应用可以被添加到手机桌面，和普通应用一样有全屏，推送等特性</li><li>性能检测及pwa检测<a href="https://www.cnblogs.com/rennaiqian/p/8439350.html" target="_blank" rel="noopener">lighthouse</a></li></ol></li><li><code>Service Workers</code> 是独立于当前页面的一段运行在浏览器后台进程里的脚本。具有拦截和处理网络请求的能力，包括以编程方式来管理被缓存的响应。<br>查看service-workers <code>chrome://inspect/#service-workers</code>或<code>chrome://serviceworker-internals</code></li></ul><h2 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h2><h4 id="客户端和浏览器协商缓存-http-header"><a href="#客户端和浏览器协商缓存-http-header" class="headerlink" title="客户端和浏览器协商缓存 http header"></a>客户端和浏览器协商缓存 http header</h4><h6 id="缓存-1"><a href="#缓存-1" class="headerlink" title="缓存"></a>缓存</h6><ul><li><code>浏览器通过请求头 Cache-Control 来控制是否使用缓存资源，通过 ETag 来验证缓存是否可用</code></li><li>对于不想缓存的资源，可以使用<code>no-store(不存储)</code>，<code>no-cache(不使用浏览器缓存)</code></li><li>对于想缓存的资源, 使用<code>max-age</code>来控制缓存的寿命(单位秒),只要缓存在有效期内, 那么浏览器就会使用缓存的资源, 返回的状态为 200 from disk或200 from memory 指定文件被缓存多久</li><li>如果缓存已过期, 客户端发起请求时, 会携带一个<code>If-None-Match</code>头给服务器, 服务器对资源的缓存进行一次检索, 如果文件没有改变, 那么就返回304, 这样就不用把响应体发送回来, 如果文件改动了, 那么就把新资源返回</li></ul><h6 id="强缓存"><a href="#强缓存" class="headerlink" title="强缓存"></a>强缓存</h6><ul><li><code>Cache-Control</code> 相对时间内 相对于客户端 http1.1引入Cache-Control<br>max-age(缓存最大有效时间) 指定文件被缓存多久<br>s-maxage(缓存最大有效时间， 只针对public(CDN)，读取CDN缓存) 优先级高于max-age<br>private(访问当前浏览器的用户可访问)<br>public(可以被很多用户访问例如CDN)<br>no-cache(不会从浏览器读缓存，发请求到服务器端去判断缓存有效期)<br>no-store(不使用任何缓存策略)</li><li><code>expires</code> 服务器返回的绝对时间 可能与本地客户端时间不一致<br>缓存过期时间，用来指定资源到期时间，是服务器端的具体的时间点，告诉浏览器在过期时间内浏览器可以直接从浏览器缓存,读取文件数据，而无需再次请求。当两者都存在时，<code>cache-control:max-age</code>优先级高于<code>expires</code>, 是http1.0特性, expires使用特定的服务器时间,要求服务器和客户端严格同步,如果服务器设置的时间到期需要重新设置<br><code>Expires 和Cache-Control max-age.如果两者同时出现，HTTP规范规定max-age指令将覆盖Expires头。以Cache-Control:max-age=xxx时间为准</code></li></ul><h6 id="协商缓存"><a href="#协商缓存" class="headerlink" title="协商缓存"></a>协商缓存</h6><ul><li><code>last-Modified/If-Modified-Since</code> 基于客户端和服务端协商的缓存机制 需要与cache-control共同使用<br><code>last-Modified</code>  存在于 <code>response header</code>中<br><code>If-Modified-Since</code> 存在于 <code>request header</code>中<br>服务端文件有更新时，服务器端在response header中返回新的<code>last-Modified</code>,告诉浏览器文件已更新</li><li><code>Etag/If-None-Match</code> 文件内容hash值 需要与cache-control共同使用<br><code>Etag</code>  存在于 <code>response header</code>中<br><code>If-None-Match</code> 存在于 <code>request header</code>中</li><li><code>Etag</code> 优先级高于 <code>last-Modified</code></li></ul><h4 id="Vue-SSR-服务端渲染"><a href="#Vue-SSR-服务端渲染" class="headerlink" title="Vue-SSR 服务端渲染"></a>Vue-SSR 服务端渲染</h4><p><code>SSR(Server Side Readering)</code></p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul><li>window.performance.timing  监控页面加载速度的api</li></ul><h4 id="服务器相关优化"><a href="#服务器相关优化" class="headerlink" title="服务器相关优化"></a>服务器相关优化</h4><ol><li><p>开启gzip压缩</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">gzip</span> <span class="literal">on</span>; <span class="comment"># 开启Gzip</span></span><br><span class="line"><span class="attribute">gzip_static</span> <span class="literal">on</span>; <span class="comment"># 开启静态文件压缩</span></span><br><span class="line"><span class="attribute">gzip_min_length</span>  <span class="number">1k</span>; <span class="comment"># 不压缩临界值，大于1K的才压缩</span></span><br><span class="line"><span class="attribute">gzip_buffers</span>     <span class="number">4</span> <span class="number">16k</span>;</span><br><span class="line"><span class="attribute">gzip_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line"><span class="attribute">gzip_comp_level</span> <span class="number">2</span>;</span><br><span class="line"><span class="attribute">gzip_types</span>     text/plain application/javascript application/x-javascript text/javascript text/css application/xml application/xml+rss; <span class="comment"># 进行压缩的文件类型</span></span><br><span class="line"><span class="attribute">gzip_vary</span> <span class="literal">on</span>;</span><br><span class="line"><span class="attribute">gzip_proxied</span>   expired <span class="literal">no</span>-cache <span class="literal">no</span>-store private auth;</span><br><span class="line"><span class="attribute">gzip_disable</span>   <span class="string">"MSIE [1-6]\."</span>;</span><br></pre></td></tr></table></figure></li><li><p>开启HTTP2—一个域只建立一次TCP连接，请求和响应的多路复用、头部压缩<br><code>使用http2需要配合https使用, 使用https需要ca证书 阿里云https证书购买 (有免费的ca证书)</code></p></li><li><p>开启缓存</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>跨域解决方案</title>
      <link href="/%E8%B7%A8%E5%9F%9F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
      <url>/%E8%B7%A8%E5%9F%9F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<p>出于浏览器的同源策略限制会阻止一个域的javascript脚本和另外一个域的内容进行交互。所谓同源（即指在同一个域）,在出现协议（protocol），主机（host）和端口号（port）有一种不一致时，就会出现跨域。在前后台交互中，<code>ajax</code>请求的url不是同一个服务器下面的URI，就会出现跨域请求问题。由于安全性的问题，浏览器<code>默认不支持跨域</code>调用.<br><a id="more"></a></p><h2 id="同源策略仅限于浏览器-跨域请求是可以发出去的但是响应response被浏览器堵塞了"><a href="#同源策略仅限于浏览器-跨域请求是可以发出去的但是响应response被浏览器堵塞了" class="headerlink" title="同源策略仅限于浏览器 跨域请求是可以发出去的但是响应response被浏览器堵塞了"></a>同源策略仅限于浏览器 跨域请求是可以发出去的但是响应response被浏览器堵塞了</h2><p>协议  域名  端口号 一致即是 同域<br>三者有一个不同就是跨域<br>http:// www. baidu.com :  8080 /  index.html<br>协议   子域名   主域名    端口号  请求资源地址<br>当协议,子域名,主域名,端口号,中任意一个不相同时,都算作不同域<br>不同域之间的相互请求资源,就算作跨域<br>Javascript 出于安全方面的考虑,不允许跨域调用其他页面的对象。跨域并不是请求发不出去，请求能发出去，服务端能收到请求并正常返回结果，只是结果被浏览器拦截了。之所以会跨域，是因为受到了同源策略的限制，同源策略要求源相同才能正常进行通信，即协议、域名、端口号都完全一致<br>例如<a href="http://www.example.com/" target="_blank" rel="noopener">http://www.example.com/</a></p><table><thead><tr><th><a href="http://api.example.com/detail.html" target="_blank" rel="noopener">http://api.example.com/detail.html</a></th><th>不同源</th><th>域名不同</th></tr></thead><tbody><tr><td>https//<a href="http://www.example.com/detail.html" target="_blank" rel="noopener">www.example.com/detail.html</a></td><td>不同源</td><td>协议不同</td></tr><tr><td><a href="http://www.example.com:8080/detail.html" target="_blank" rel="noopener">http://www.example.com:8080/detail.html</a></td><td>不同源</td><td>端口不同</td></tr><tr><td><a href="http://api.example.com:8080/detail.html" target="_blank" rel="noopener">http://api.example.com:8080/detail.html</a></td><td>不同源</td><td>域名、端口不同</td></tr><tr><td><a href="https://api.example.com/detail.html" target="_blank" rel="noopener">https://api.example.com/detail.html</a></td><td>不同源</td><td>协议、域名不同</td></tr><tr><td><a href="https://www.example.com:8080/detail.html" target="_blank" rel="noopener">https://www.example.com:8080/detail.html</a></td><td>不同源</td><td>端口、协议不同</td></tr><tr><td><a href="http://www.example.com/detail/index.html" target="_blank" rel="noopener">http://www.example.com/detail/index.html</a></td><td>同源</td><td>只是目录不同</td></tr></tbody></table><h2 id="为什么浏览器不支持跨域"><a href="#为什么浏览器不支持跨域" class="headerlink" title="为什么浏览器不支持跨域"></a>为什么浏览器不支持跨域</h2><p>cookie localStorage IndexedDB 同源策略不支持跨域<br>DOM元素也有同源策略 iframe<br>ajax也不支持跨域</p><h2 id="不存在跨域请求的限制"><a href="#不存在跨域请求的限制" class="headerlink" title="不存在跨域请求的限制"></a>不存在跨域请求的限制</h2><ul><li>script</li><li>img</li><li>link</li></ul><h2 id="实现跨域的方式"><a href="#实现跨域的方式" class="headerlink" title="实现跨域的方式"></a>实现跨域的方式</h2><ul><li>jsonp</li><li>cors</li><li>postMessage</li><li>doucment.domain</li><li>window.name</li><li>location.hash</li><li>http-proxy</li><li>nginx</li><li>websocket</li></ul><h2 id="实现跨域"><a href="#实现跨域" class="headerlink" title="实现跨域"></a>实现跨域</h2><h5 id="jsonp-只能处理get请求-不支持post-put-delete-不安全-xss攻击"><a href="#jsonp-只能处理get请求-不支持post-put-delete-不安全-xss攻击" class="headerlink" title="jsonp  只能处理get请求 不支持post put delete 不安全(xss攻击 )"></a>jsonp  只能处理get请求 不支持post put delete 不安全(xss攻击 )</h5><blockquote><p>前端通过script标签请求指定URL，服务器返回一个函数执行语句，函数名称由查询参callback的值决定，函数的参数为服务器返回的json数据，该函数在前端执行后即可获得数据  jsonp中cb每次都要不同</p></blockquote><p><code>JSONP原理是通过&lt;script&gt;标签的src来帮助我们请求不同域的数据.</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- index.html --&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">express</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">  jsonp(&#123;</span></span><br><span class="line"><span class="actionscript">    url: <span class="string">'http://localhost:3000/say'</span>,</span></span><br><span class="line"><span class="actionscript">    params: &#123;wd:<span class="string">'a'</span>,json:<span class="number">1</span>&#125;,</span></span><br><span class="line"><span class="actionscript">    cb:<span class="string">'show'</span></span></span><br><span class="line"><span class="javascript">  &#125;).then(<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(data)</span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">express()</span></span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">jsonp</span><span class="params">(&#123;url,params,cb&#125;)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>)</span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>[cb]=<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">      resolve(data)</span></span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.body.removeChild(script)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    params = &#123;...params,cb&#125;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> arrs = []</span></span><br><span class="line"><span class="javascript">    <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> params)&#123;</span></span><br><span class="line"><span class="javascript">      arrs.push(<span class="string">`<span class="subst">$&#123;key&#125;</span>=<span class="subst">$&#123;params[key]&#125;</span>`</span>)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="javascript">    script.src = <span class="string">`<span class="subst">$&#123;url&#125;</span>?<span class="subst">$&#123;arrs.join(<span class="string">'&amp;'</span>)&#125;</span>`</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.body.appendChild(script)</span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 服务端处理 --&gt;</span></span><br><span class="line">let express = require('express')</span><br><span class="line">let app  = express()</span><br><span class="line">app.get('/say',function(req,res)&#123;</span><br><span class="line">  let &#123;wd,cb&#125;=req.query</span><br><span class="line">  console.log(wd)</span><br><span class="line">  res.end(`$&#123;cb&#125;('44444')`)</span><br><span class="line">&#125;)</span><br><span class="line">app.listen(3000)</span><br></pre></td></tr></table></figure></p><h5 id="cors跨域资源共享"><a href="#cors跨域资源共享" class="headerlink" title="cors跨域资源共享"></a>cors跨域资源共享</h5><blockquote><p>CORS(Cross Origin Resoure Share)跨域资源共享，后端方案解决跨域，需要服务器对请求进行检查并设置对响应头做相应处理，从而允许跨域请求</p><ul><li>响应简单请求：method为’get/post/head’,没有自定义请求头，Content-Type是application/www-form/urlencoded,multipart/form-data或text/plain,通过添加响应头解决<br><code>res.setHeader(&#39;Access-Control-Allow-Origin&#39;,&#39;*&#39;)</code>或<code>res.setHeader(&#39;Access-Control-Allow-Origin&#39;,&#39;http://xxx:xx&#39;)</code> 允许任意网站请求数据或者允许指定的域名访问</li><li>响应preflight请求，需要响应浏览器发出的options请求(预检请求)，根据情况设置响应头<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 服务器 忽略options请求</span></span><br><span class="line"><span class="keyword">if</span>(req.method == <span class="string">'options'</span>) &#123;</span><br><span class="line">  res.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">    <span class="string">'Access-Control-Allow-Origin'</span>: <span class="string">'http://localhost:3000'</span>,</span><br><span class="line">    <span class="string">'Access-Control-Allow-Headers'</span>:<span class="string">'x-Token'</span>,</span><br><span class="line">    <span class="string">'Access-Control-Allow-Methods'</span>: <span class="string">'PUT'</span></span><br><span class="line">  &#125;)</span><br><span class="line">  res.end()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 客户端请求</span></span><br><span class="line">axios.get(<span class="string">'http://localhost:3000/user'</span>, &#123; <span class="attr">headers</span>: &#123;<span class="string">'x-token'</span>: <span class="string">'tew'</span>&#125; &#125;)</span><br></pre></td></tr></table></figure></li></ul></blockquote><ul><li>如果需要携带cookie信息，则请求变为credential请求<br><code>res.setHeader(&#39;Access-Control-Allow-Credentials&#39;,true) //允许携带cookie</code></li></ul><ol><li><p>客户端发送请求(ajax/fetch)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.html 请求接口</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest;</span><br><span class="line"><span class="built_in">document</span>.cookie = <span class="string">'name=tew'</span></span><br><span class="line">xhr.withCredentials = <span class="literal">true</span></span><br><span class="line"><span class="comment">//xhr.open('GET','http://localhost:4000/say',true);</span></span><br><span class="line">xhr.open(<span class="string">'DELETE'</span>,<span class="string">'http://localhost:4000/say'</span>,<span class="literal">true</span>);</span><br><span class="line">xhr.setRequestHeader(<span class="string">'name'</span>, <span class="string">'tew'</span>)</span><br><span class="line">xhr.onreadystatechange=<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(xhr.readyState==<span class="number">4</span>&amp;&amp;xhr.status==<span class="number">200</span>)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(xhr.response)</span><br><span class="line">    <span class="built_in">console</span>.log(xhr.getResponseHeader(<span class="string">'name'</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">xhr.send()</span><br></pre></td></tr></table></figure></li><li><p>服务端设置相关的头信息</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">let</span> app = express()</span><br><span class="line"><span class="keyword">let</span> whiteList = [<span class="string">'http://localhost:3000'</span>]</span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req,res,next</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> origin = req.headers.origin;</span><br><span class="line">  <span class="keyword">if</span>(whiteList.includes(origin)) &#123;</span><br><span class="line">    <span class="comment">// 设置哪个域名可以访问</span></span><br><span class="line">    res.setHeader(<span class="string">'Access-Control-Allow-Origin'</span>,origin)</span><br><span class="line">    <span class="comment">// 设置哪个请求头可以访问</span></span><br><span class="line">    res.setHeader(<span class="string">'Access-Control-Allow-Headers'</span>,<span class="string">'name'</span>)</span><br><span class="line">    <span class="comment">// 设置哪个请求方法可以访问</span></span><br><span class="line">    res.setHeader(<span class="string">'Access-Control-Allow-Methods'</span>,<span class="string">'DELETE'</span>)</span><br><span class="line">    <span class="comment">// 允许携带cookie</span></span><br><span class="line">    res.setHeader(<span class="string">'Access-Control-Allow-Credentials'</span>,<span class="literal">true</span>)</span><br><span class="line">    <span class="comment">// options存活的时间</span></span><br><span class="line">    res.setHeader(<span class="string">'Access-Control-Max-Age'</span>,<span class="number">6000</span>)</span><br><span class="line">    <span class="comment">// 允许前端获取的响应头</span></span><br><span class="line">    res.setHeader(<span class="string">'Access-Control-Expose-Headers'</span>,<span class="string">'name'</span>)</span><br><span class="line">    <span class="comment">// 忽略options请求</span></span><br><span class="line">    <span class="keyword">if</span>(req.method ==<span class="string">'options'</span>) &#123;</span><br><span class="line">      res.end()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  next()</span><br><span class="line">&#125;)</span><br><span class="line">app.delete(<span class="string">'/say'</span>,(req,res)=&gt;&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.headers)</span><br><span class="line">  <span class="built_in">console</span>.log(req.headers.name)</span><br><span class="line">  <span class="built_in">console</span>.log(req.headers.cookie)</span><br><span class="line">  res.setHeader(<span class="string">'name'</span>,<span class="string">'yn'</span>)</span><br><span class="line">  res.end(<span class="string">'66666'</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.get(<span class="string">'/say'</span>,(req,res)=&gt;&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.headers)</span><br><span class="line">  <span class="built_in">console</span>.log(req.headers.name)</span><br><span class="line">  res.end(<span class="string">'66666'</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.listen(<span class="number">4000</span>)</span><br></pre></td></tr></table></figure></li></ol><h5 id="http-proxy-代理-实现跨域请求"><a href="#http-proxy-代理-实现跨域请求" class="headerlink" title="http-proxy 代理 实现跨域请求"></a>http-proxy 代理 实现跨域请求</h5><blockquote><p>请求同源服务器，通过该服务器转发请求至目标服务器，得到结果再转发给前端，前端开发中测试服务器的代理功能(例如webpack的proxy)就是采用的该方案， 但是最终发布上线时入股web应用和接口服务器不在一个域仍会跨域<br><code>webpack-dev-server</code>中的<code>proxyTable</code></p></blockquote><h5 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h5><h5 id="postMessage实现跨域请求"><a href="#postMessage实现跨域请求" class="headerlink" title="postMessage实现跨域请求"></a>postMessage实现跨域请求</h5><h5 id="websocket"><a href="#websocket" class="headerlink" title="websocket"></a>websocket</h5><h5 id="document-domain"><a href="#document-domain" class="headerlink" title="document.domain"></a>document.domain</h5><h5 id="window-name"><a href="#window-name" class="headerlink" title="window.name"></a>window.name</h5><h5 id="location-hash"><a href="#location-hash" class="headerlink" title="location.hash"></a>location.hash</h5><h5 id="Ajax跨域请求携带COOKIE"><a href="#Ajax跨域请求携带COOKIE" class="headerlink" title="Ajax跨域请求携带COOKIE"></a>Ajax跨域请求携带COOKIE</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原生ajax xhr.withCredentials = true; //支持跨域发送cookies</span></span><br><span class="line"><span class="comment">// jquery</span></span><br><span class="line">$.ajax(&#123;</span><br><span class="line">  type:<span class="string">'post'</span>,</span><br><span class="line">  url:url,</span><br><span class="line">  <span class="comment">// 允许携带证书</span></span><br><span class="line">  xhrFields: &#123;<span class="attr">withCredentials</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">  <span class="comment">// 允许跨域</span></span><br><span class="line">  crossDomain: <span class="literal">true</span>,</span><br><span class="line">  success: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">  &#125;,</span><br><span class="line">  error: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//服务端设置</span></span><br><span class="line">header(<span class="string">"Access-Control-Allow-Credentials: true"</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>微信小程序入门</title>
      <link href="/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
      <url>/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<p>微信小程序是一种不需要下载安装即可使用的应用，它实现了应用“触手可及”的梦想，用户扫一扫或者搜一下即可打开应用。也体现了“用完即走”的理念，用户不用关心是否安装太多应用的问题。应用将无处不在，随时可用，但又无需安装卸载。对于开发者而言，微信小程序开发门槛相对较低，难度不及APP，能够满足简单的基础应用，适合生活服务类线下商铺以及非刚需低频应用的转换。微信小程序能够实现消息通知、线下扫码、公众号关联等七大功能。其中，通过公众号关联，用户可以实现公众号与微信小程序之间相互跳转。<br><a id="more"></a></p><h3 id="小程序-VS-HTML5"><a href="#小程序-VS-HTML5" class="headerlink" title="小程序 VS HTML5"></a>小程序 VS HTML5</h3><p>小程序并不是 HTML5 应用，而是更偏向于传统的 CS 架构，它是基于<strong>数据驱动</strong>的模式，一切皆组件（视图组件）。下面是小程序与普通 Web App 的对比。</p><ul><li>普通 HTML5 都是执行在浏览器的宿主环境，浏览器提供 <code>window</code>、<code>document</code> 等 BOM 对象，但小程序没有 <code>window</code>、<code>document</code>，它更像是一个类似 Node.js 的宿主环境；因此在小程序内不能使用 <code>document.querySelector</code> 这类 DOM 选择器，也不支持 <code>XMLHttpRequest</code>、<code>location</code>、<code>localStorage</code> 等这些浏览器提供的 API，只能使用小程序自己实现的 API</li><li>小程序并非是直接通过 URL 访问的，而是通过信道服务进行通信和会话管理，所以它不支持 Cookie 存储，同时访问资源使用 <code>wx.request</code> 则不存在跨域的问题</li><li>小程序在 JavaScript 的模块化上支持 CommonJS，通过 require 加载，跟 Node.js 类似</li><li>小程序的页面样式完全继承了 CSS 的语法，但是在选择器上面会少一些，布局支持 flex 布局</li><li>小程序的整体框架采用面向状态编程方式，状态管理从 API 来看采用类似 Redux 的设计方式；单向数据绑定方式，当 View 在 Action 操作后，只能通过 Action 的业务处理来更新 View</li></ul><p>页面组件模块上，WXML 提供了一整套的「自定义 UI 组件标签」，有些组件实际是 HTML5 实现的，有些组件为了解决权限、性能和适配等问题实际是 Native 实现的（如 map、input、canvas、video）。</p><h3 id="小程序目录结构"><a href="#小程序目录结构" class="headerlink" title="小程序目录结构"></a>小程序目录结构</h3><p>小程序项目由配置文件、页面文件、静态资源和其他相关（比如组件、小程序云函数等）内容组成，一般小程序会由四类文件组成：</p><ul><li><code>.json</code> 后缀的 JSON 配置文件</li><li><code>.wxml</code> 后缀的 WXML 模板文件</li><li><code>.wxss</code> 后缀的 WXSS 样式文件</li><li><code>.js</code> 后缀的 JS 脚本逻辑文件</li></ul><h3 id="小程序的配置"><a href="#小程序的配置" class="headerlink" title="小程序的配置"></a>小程序的配置</h3><p>小程序有三个重要的配置，分别放在三个 JSON 文件内：<code>project.config.json</code>（工具项目配置）、<code>app.json</code>（小程序配置）、<code>page.json</code>（单页面配置）</p><ul><li><code>project.config.json</code>：这个是配置项目工具相关的，比如开发者工具的编译设置（是否使用 ES6 语法等）、界面设置，以及云函数相关的 <code>cloudfunctionRoot</code>，详细可以参考<a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/projectconfig.html" target="_blank" rel="noopener">项目配置文件</a></li><li><code>app.json</code>：小程序的全局配置，包括了所有页面路径、界面表现、网络超时时间、底部 tab、插件等，常用的两个配置是 <code>window</code> 和 <code>pages</code>，详细配置参考<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html" target="_blank" rel="noopener">全局配置</a></li><li><code>page.json</code>：是相对于 <code>app.json</code> 更细粒度的单页面配置，详细参考<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener">页面配置</a></li></ul><h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><p>小程序内部定义了很多组件，可以对应 HTML5 的标签和基础能力来理解，小程序的组件根据实现不同，可以分为 Web 组件和 Native 组件，Web 组件是由 HTML5 原生 Web 组件封装的组件，比如 <code>view</code>、<code>image</code> 等；Native 组件是为了增强小程序的体验，用客户端技术实现的组件，包括一些交互复杂、原生 Web 组件性能不高的组件，例如 <code>input</code>、<code>map</code>、<code>canvas</code>、<code>video</code> 等。<br>小程序一共提供 8 大类 30 多个组件：</p><ul><li>视图容器：主要是实现页面布局的，对常见的布局形式进行了封装，比如滚动 sroll-view 等</li><li>基本内容：类似 HTML5 中内容相关的 p、em 等</li><li>表单相关：要比 HTML5 的 form 表单丰富一些</li><li>导航：类似 a 标签</li><li>媒体：类比 HTML5 中的 video、audio 和 img 等，但是提供更标准的界面和更丰富的 API 支持</li><li>画布：Native 实现的 Canvas</li><li>地图：结合腾讯地图数据 Native 实现的组件</li><li>开放能力：这部分组件偏通用和小程序业务</li></ul><h3 id="自定义组件"><a href="#自定义组件" class="headerlink" title="自定义组件"></a>自定义组件</h3><p>小程序本身支持很多组件，比如地图、按钮等，开发者也可以自己做项目内公共组件，比如我们后面实战部分会介绍做一个 icon 组件，放在 <code>components</code> 目录下面，这样此小程序的任何页面如果要使用这个 icon 公共组件，只需在自己的 <code>page.json</code> 中添加如下字段：<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"usingComponents"</span>: &#123;</span><br><span class="line">  <span class="string">"icon"</span>: <span class="string">"../../components/icon/index"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>添加完成之后，在页面代码中就可以直接使用 <code>&lt;icon&gt;</code> 的 tag 了。<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/" target="_blank" rel="noopener">官方文档</a>有更加详细的介绍。</p><h3 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h3><p>插件是对一组 JS 接口、自定义组件或页面的封装，用于提供给第三方小程序调用。简单来说，插件是组件的升级版本，组件只能在自己项目中使用，插件则更独立，是可以发布到全网，供其他开发者使用的。例如实战中，笔者使用了一款日历插件，则需要在 <code>app.json</code> 中增加 <code>plugins</code> 字段：<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"plugins"</span>: &#123;</span><br><span class="line">  <span class="string">"calendar"</span>: &#123;</span><br><span class="line">    <span class="string">"version"</span>: <span class="string">"1.1.3"</span>,</span><br><span class="line">    <span class="string">"provider"</span>: <span class="string">"wx92c68dae5a8bb046"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>如果想开发一个插件，则可以参考<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/plugin/development.html" target="_blank" rel="noopener">官方文档</a>。</p><h3 id="数据驱动"><a href="#数据驱动" class="headerlink" title="数据驱动"></a>数据驱动</h3><p>微信小程序是数据驱动模型，在 WXML 中可以对页面的数据进行绑定，小程序的 WXML 内使用的是 Mustache 语法，在 <code>{{}}</code> 内可以将变量名包裹起来。 例如：<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;&#123;&#123; message &#125;&#125;&lt;/view&gt;</span><br><span class="line"><span class="type">Page</span>(&#123;</span><br><span class="line">  <span class="class"><span class="keyword">data</span>: &#123;</span></span><br><span class="line"><span class="class">    <span class="title">message</span>: '<span class="type">Hello</span> <span class="type">MINA</span>!'</span></span><br><span class="line"><span class="class">  &#125;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>但是小程序不支持复杂的表达式，目前支持简单的三元、加减和逻辑判断，如果要使用形如 <code>{{parseInt(num)}}</code> 的函数调用语法，需要 <code>WXS</code> 支持：WXML 内容：<br><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">wxs</span> <span class="attr">src</span>=<span class="string">"./demo.wxs"</span> <span class="attr">module</span>=<span class="string">"tools"</span> /&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><span class="template-variable">&#123;&#123; tools.toNumber(num) &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><p>WXS 内容：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// demo.wxs</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toNumber</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">parseInt</span>(n)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports.toNumber = toNumber</span><br></pre></td></tr></table></figure></p><p>小程序内对页面的数据修改只能通过 <code>setData</code> 方法，不能使用直接赋值的方式 <code>this.data.key = value</code>：<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">Page</span>(&#123;</span><br><span class="line">  <span class="attribute">data</span>: &#123;</span><br><span class="line">    <span class="attribute">message</span>: <span class="string">'Hello MINA!'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="selector-tag">onLoad</span>()&#123;</span><br><span class="line">    <span class="selector-tag">this</span><span class="selector-class">.setData</span>(&#123;</span><br><span class="line">      <span class="attribute">message</span>: <span class="string">'hello world~'</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><blockquote><p>记住：修改页面数据，只能使用 this.setData 修改！</p></blockquote><h3 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h3><p>在小程序内，不能像 HTML5 中 a 标签那样，随便跳转，也不能像 <code>location</code> 对象中对应的属性那样随意跳转，小程序提供了对应 a 标签和 <code>location</code> 对象的方法：<a href="https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html" target="_blank" rel="noopener">navigator 组件</a>和 <a href="https://developers.weixin.qq.com/miniprogram/dev/api/ui-navigate.html" target="_blank" rel="noopener">wx 中的导航相关函数</a>。</p><p>在小程序中，路由是由路由栈来维护的，小程序的路由栈中最多维护 5 个页面，这样在 5 个页面内，小程序维护其渲染页面，可以实现快速的切换。</p><p>小程序中跳转页面可以通过下面两种方式：</p><ol><li><p>使用 navigator 组件：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">url</span>=<span class="string">"跳转页面URL"</span> &gt;</span>跳转到新页面<span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>使用 <code>wx</code> 中的导航相关函数：</p></li></ol><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">view</span> bindtap=<span class="string">"gotoUrl"</span>&gt;跳转页面&lt;/<span class="keyword">view</span>&gt;</span><br><span class="line">Page(&#123;</span><br><span class="line">  gotoUrl()&#123;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="string">'pages/another/url'</span></span><br><span class="line">    wx.navigateTo(&#123;</span><br><span class="line">      url</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="JavaScript-的限制和增强"><a href="#JavaScript-的限制和增强" class="headerlink" title="JavaScript 的限制和增强"></a>JavaScript 的限制和增强</h3><p>微信内的 JavaScript 相对于浏览器中的有限制也有增强，增强的部分是基于小程序 Native 端能力做的增强，比如增强的文件操作类（相册、录音等）；除了增强，跟 HTML5 浏览器环境最大的不同是限制部分。</p><p>小程序的执行环境是没有浏览器了，所以浏览器环境特有的 <code>window</code> 对象、BOM 和 DOM 等相关 API 都存在缺失（有对应的补充 API），小程序的执行环境是类似于 Node.js 的一种执行环境。因为没有浏览器环境，所以跟浏览器相关的操作如 cookie、Ajax 请求（<code>XMLHttpRequest</code>）、DOM 选择器、DOM 事件、路由 history、缓存、设备信息、位置等都不存在，与之相对应的是小程序的私有 API，比如我们在小程序中不能使用 <code>XMLHttpRequest</code>，但是可以使用功能更加强大的 <code>wx.request</code> 方法。</p><h3 id="小程序架构解密"><a href="#小程序架构解密" class="headerlink" title="小程序架构解密"></a>小程序架构解密</h3><p><img src="https://user-gold-cdn.xitu.io/2018/8/13/16531377b0ecbfc4?w=1024&amp;h=768&amp;f=jpeg&amp;s=270403" alt=""></p><p>小程序架构如上图所示，分为视图层和逻辑层，视图层是在 WebView 内渲染，逻辑层则有 JavaScriptCore 来渲染；其中视图层可以多个（考虑到整体性能，最多可以 5 个），逻辑层则全局只有一个（实际通过开启 X5 内核另起一个 JavascriptCore 线程）。</p><p>视图层是 WebView，逻辑层为 JavaScriptCore，证据如下：使用 Android 手机，开启 X5 内核 debug 之后，在 Chrome inspect 中可以看到下图所示的内容。</p><p><img src="https://user-gold-cdn.xitu.io/2018/8/13/1653137a557f6bbc?w=927&amp;h=439&amp;f=png&amp;s=87662" alt=""></p><p>在小程序内，视图层负责页面渲染，逻辑层负责逻辑处理、全局状态管理、请求和接口调用。逻辑层在小程序中称为 <code>APP Service</code>，视图层称为 <code>View</code>。</p><p>逻辑层和视图层通过微信的 <code>JSBridge</code> 来实现通信的，逻辑层数据变化通过 <code>JSBridge</code> 通知视图层，触发视图层更新；当视图层触发事件，则继续通过 <code>JSBridge</code> 将事件通知到逻辑层做处理，如此交互进行。</p><p><code>JSBridge</code> 在三个环境（开发者工具、iOS 和 Android）中实现机制不同，在调用 Native 能力时主要使用 <code>invokeHandler</code>：</p><ul><li>开发者工具：通过 <code>window.postMessage</code> 来封装</li><li>iOS：通过 WKWebview 的 <code>window.webkit.messageHandlers.invokeHandler.postMessage</code></li><li>Android：通过 <code>WeixinJSCore.invokeHandler</code></li></ul><p>在消息分发的时候，则使用 <code>publishHandler</code>：</p><ul><li>开发者工具：通过 <code>addEventListener(&#39;message&#39;)</code> 来监听消息，然后处理分发</li><li>iOS：使用 WKWebview 的 <code>window.webkit.messageHandlers.publishHandler.postMessage</code></li><li>Android：通过 <code>WeixinJSCore.publishHandler</code></li></ul><p>其中，Android 的 <code>WeixinJSCore</code> 是 X5 内核暴露出来的对象，其作为 <code>window</code> 对象的一个属性，提供一些供 JavaScript 调用的能力。</p><p>WeixinJSBridge 提供的方法有 <code>invoke</code>、<code>publish</code> 和 <code>subscribe</code> 等，<code>invoke</code> 就是关键的调用 Native 端能力的方法，<code>publish</code> 是消息分发的方法。</p><p>因为在一个小程序中可以打开多个视图层（webview），要保证发送的消息准确送到每个具体的 webview 中，需要通过每个 webview 唯一标识 webviewId 来实现。发送消息时，携带 webviewId，然后逻辑层处理完对应的逻辑，如果需要通知或者执行对应 webview 的代码，则可以通过 webviewId 找到对应的 webview，下发通知。</p><h3 id="理解小程序生命周期"><a href="#理解小程序生命周期" class="headerlink" title="理解小程序生命周期"></a>理解小程序生命周期</h3><p>小程序生命周期包括应用的生命周期（逻辑层 App Service）和页面的生命周期（视图层 View），两者支持的事件不同，详见官方文档中的这张配图。</p><p><img src="https://user-gold-cdn.xitu.io/2018/8/13/16531394a3c8fe1f?w=662&amp;h=1014&amp;f=png&amp;s=45267" alt=""></p><p>掌握了上面小程序实现原理的内容，再来看小程序的生命周期就很好理解了。</p><p>小程序启动时，会同时启动两个线程，一个负责页面渲染的 WebView（实际不止一个，后面讲解），一个负责逻辑的 JavaScriptCore。逻辑层初始化后会将初始化数据（app.js 中的 global data）通过 JSBridge 传递给渲染层进行渲染，渲染层 WebView 页面渲染完之后又会跟逻辑层通信。</p><h3 id="cover-view-cover-image"><a href="#cover-view-cover-image" class="headerlink" title="cover-view/cover-image"></a>cover-view/cover-image</h3><p>在微信小程序经常会用到一些原生组件，比如map、video、canvas、camera，这些原生组件想让其他元素覆盖在其上，必须使用cover-view或者cover-image组件.</p><ul><li><code>cover-view</code> 覆盖在原生组件之上的文本视图，可覆盖的原生组件包括<code>map、video、canvas、camera</code>，只支持嵌套<code>cover-view、cover-image</code>。<br>注意：只支持基本的定位、布局、文本样式、背景色。不支持设置单边的<code>border、background-image、shadow、overflow: visible</code>等。可用<code>cover-image</code>替换<code>background-image</code></li><li><code>cover-image</code> 覆盖在原生组件之上的图片视图，可覆盖的原生组件同<code>cover-view</code>，支持嵌套在<code>cover-view</code>里,image组件基本一样.</li></ul>]]></content>
      
      
      <categories>
          
          <category> 小程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 小程序 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>manifest离线缓存</title>
      <link href="/manifest%E7%A6%BB%E7%BA%BF%E7%BC%93%E5%AD%98/"/>
      <url>/manifest%E7%A6%BB%E7%BA%BF%E7%BC%93%E5%AD%98/</url>
      
        <content type="html"><![CDATA[<p><code>HTML5</code>提供一种应用程序缓存机制<code>manifest</code>，使得基于<code>web</code>的应用程序可以离线运行。开发者可以使用<code>Application Cache (AppCache)</code>接口设定浏览器应该缓存的资源并使得离线用户可用。 在处于离线状态时，应用也能正常加载与工作。用户可以在离线状态下浏览网站内容, 减轻服务器的负载, 浏览器只会下载在服务器上发生改变的资源。<br><a id="more"></a></p><h2 id="应用程序缓存的优点"><a href="#应用程序缓存的优点" class="headerlink" title="应用程序缓存的优点"></a>应用程序缓存的优点</h2><ul><li>离线浏览: 用户可以在离线状态下浏览网站内容。</li><li>更快的速度: 因为数据被存储在本地，所以速度会更快。</li><li>减轻服务器的负载: 浏览器只会下载在服务器上发生改变的资源<br><code>manifest只会缓存静态资源文件, 接口返回的数据还需要使用localstorage进行缓存, 通常将manifest与接口返回的数据进行本地存储才能达到离线访问</code></li></ul><h2 id="Application-Cache的特点"><a href="#Application-Cache的特点" class="headerlink" title="Application Cache的特点"></a>Application Cache的特点</h2><ul><li>Manifest文件有变化才更新</li><li>一次必须更新Manifest中的所有文件, 有一个失败则全抛弃</li><li>更新内容下一次访问才生效</li></ul><h2 id="manifest使用"><a href="#manifest使用" class="headerlink" title="manifest使用"></a>manifest使用</h2><ul><li><p>在页面头部引入<code>manifest</code>文件 当第一次打开该页面时，浏览器会解析该页面中mainfest文件，并缓存里面列举的资源</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">manifest</span>=<span class="string">"manifest/recharge.manifest"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>编写<code>manifest</code>缓存清单文件</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//manifest/clientHome.manifest</span></span><br><span class="line">CACHE MANIFEST</span><br><span class="line">#VERSION v6<span class="number">.0</span><span class="number">.1</span></span><br><span class="line">#DATE <span class="number">2020</span><span class="number">-3</span><span class="number">-2</span> <span class="number">14</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">CACHE:</span><br><span class="line">../../css/public/public.css</span><br><span class="line">../../css/public/swiper.min.css</span><br><span class="line"></span><br><span class="line">../../images/recharge/sprite.png</span><br><span class="line">../../images/recharge/icon-checked.png</span><br><span class="line"></span><br><span class="line">../../js/public/autoScale.js</span><br><span class="line">../../js/jquery/jquery.min.js</span><br><span class="line"></span><br><span class="line">NETWORK:</span><br><span class="line">*</span><br><span class="line"></span><br><span class="line">FALLBACK:</span><br><span class="line">*.html /offline.html</span><br></pre></td></tr></table></figure></li><li><p><code>manifest</code>文件组成</p><ol><li><code>CACHE MANIFEST</code> 固定格式 必须在首行</li><li><code>CACHE</code>: (必选)表示需要离线存储的资源列表，在首次加载后会被浏览器缓存到本地 可以是相对路径也可以是绝对路径</li><li><code>NETWORK</code>: (可选)在它下面列出来的资源只有在在线的情况下才能访问，他们不会被离线存储, 离线时不可用</li><li><code>FALLBACK</code>: (可选)表示如访问资源失败，就使用第二个资源来替换它</li><li>以#开头的是注释 可以是版本号或时间戳 一般用更改版本号或时间戳来告诉浏览器更新manifest</li></ol></li><li><code>manifest</code>文件需要配置正确的<code>MIME-type</code>即<code>text/cache-manifest</code>。必须在服务器上进行配置。</li></ul><h2 id="manifest加载过程"><a href="#manifest加载过程" class="headerlink" title="manifest加载过程"></a>manifest加载过程</h2><p><img src="/image/other/manifest.png" alt="manifest"></p><ul><li>浏览器后次加载页面发现html头部有manifest属性,会请求manifest文件,将manifest中的文件缓存到本地</li><li>浏览器在有缓存的情况下, 离线访问应用时, 会直接使用离线缓存的资源</li><li>如果已经访问过应用且资源已经离线存储过, 首次加载页面时,会先进行读取缓存, 如果有缓存返回cache中的资源先显示页面,再去server上检查manifest缓存文件是否有更新,无更新则不作任何操作,如果有更新,会下载更新的文件,然后更新app cache.等到用户第二次加载页面时, 才会看到更新后的内容.</li></ul><h2 id="manifest使用过程中注意问题"><a href="#manifest使用过程中注意问题" class="headerlink" title="manifest使用过程中注意问题"></a>manifest使用过程中注意问题</h2><ul><li>如果服务器对离线的资源进行了更新，那么必须更新manifest文件之后这些资源才能被浏览器重新下载，如果只是更新了资源而没有更新manifest文件的话，浏览器并不会重新下载资源，也就是说还是使用原来离线存储的资源。</li><li>对于manifest文件进行缓存的时候需要十分小心，因为可能出现一种情况就是你对manifest文件进行了更新，但是http的缓存规则告诉浏览器本地缓存的manifest文件还没过期，这个情况下浏览器还是使用原来的manifest文件，所以对于manifest文件最好不要设置缓存。</li><li>浏览器在下载manifest文件中的资源的时候，它会一次性下载所有资源，如果某个资源由于某种原因下载失败，那么这次的所有更新就算是失败的，浏览器还是会使用原来的资源。</li><li>在更新了资源之后，新的资源需要到下次再打开页面才会生效，如果需要资源马上就能生效，那么可以使用window.applicationCache.swapCache()方法来使之生效，出现这种现象的原因是浏览器会先使用离线资源加载页面，然后再去检查manifest是否有更新，所以需要到下次打开页面才能生效。</li></ul><h2 id="applicationCache缓存中的事件"><a href="#applicationCache缓存中的事件" class="headerlink" title="applicationCache缓存中的事件"></a>applicationCache缓存中的事件</h2><table><thead><tr><th>事件名称</th><th>解释</th></tr></thead><tbody><tr><td>oncached</td><td>当离线资源存储完成后触发</td></tr><tr><td>onchecking</td><td>当浏览器对离线存储资源进行检查的时候触发</td></tr><tr><td>ondownloading</td><td>当浏览器开始下载离线资源的时候触发</td></tr><tr><td>onerror</td><td>当缓存资源失败的时候触发</td></tr><tr><td>onnoupdate</td><td>浏览器检查manifest文件没有更新时触发</td></tr><tr><td>onobsolete</td><td>过时的</td></tr><tr><td>onprogress</td><td>当浏览器下载每一个资源的时候都会触发一次</td></tr><tr><td>onupdateready</td><td>浏览器更新离线资源完成的时候触发</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 离线资源存储完成之后触发</span></span><br><span class="line"><span class="built_in">window</span>.applicationCache.addEventListener(<span class="string">'cached'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'cached'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 离线存储资源进行更新检查的时候会触发 每次刷新页面都会被触发，包括第一次加载</span></span><br><span class="line"><span class="built_in">window</span>.applicationCache.addEventListener(<span class="string">'checking'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'checking'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开始下载离线资源的时候会触发</span></span><br><span class="line"><span class="built_in">window</span>.applicationCache.addEventListener(<span class="string">'downloading'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'downloading'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下载每一个资源的时候会触发</span></span><br><span class="line"><span class="built_in">window</span>.applicationCache.addEventListener(<span class="string">'progress'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'progress'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 离线资源更新完成之后</span></span><br><span class="line"><span class="built_in">window</span>.applicationCache.addEventListener(<span class="string">'updateready'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'updateready'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查更新之后发现没有资源更新的时候触发</span></span><br><span class="line"><span class="built_in">window</span>.applicationCache.addEventListener(<span class="string">'noupdate'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'noupdate'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// obsolete</span></span><br><span class="line"><span class="built_in">window</span>.applicationCache.addEventListener(<span class="string">'obsolete'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'obsolete'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// error</span></span><br><span class="line"><span class="built_in">window</span>.applicationCache.addEventListener(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'error'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="如何更新缓存"><a href="#如何更新缓存" class="headerlink" title="如何更新缓存"></a>如何更新缓存</h2><ul><li>用户清空浏览器缓存</li><li>manifest 文件被修改 <code>利用浏览器缓存机制在第二次访问manifest有更新的页面时更新页面内容</code></li><li>由程序来手动更新应用缓存<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.applicationCache.addEventListener(<span class="string">'updateready'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.applicationCache.status == <span class="built_in">window</span>.applicationCache.UPDATEREADY) &#123;</span><br><span class="line">    <span class="built_in">window</span>.applicationCache.swapCache()</span><br><span class="line">    <span class="built_in">window</span>.location.reload()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="literal">false</span>)</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>webpack入门</title>
      <link href="/webpack/"/>
      <url>/webpack/</url>
      
        <content type="html"><![CDATA[<p>Webpack是一个现代javascript应用程序的静态模块打包工具: 它做的事情是,分析你的项目结构,找到Javascript模块以及其它的一些浏览器不能直接运行的拓展语言(Scss,Typescript),并将其打包成浏览器识别的格式.<br><a id="more"></a></p><h2 id="webpack功能"><a href="#webpack功能" class="headerlink" title="webpack功能"></a>webpack功能</h2><ul><li>代码转换 Typescript编译成Javascript,Scss变异成css等</li><li>文件优化 压缩Javascript,CSS,HTML代码,压缩图片</li><li>代码分割 提取多个页面的公共代码,提取首屏不需要执行的代码让其异步加载</li><li>模块合并 构建功能将项目中的多个模块分类合并</li><li>自定刷新 监听本地源代码变化,自动重新构建,刷新浏览器</li><li>代码校验 代码提交之前校验代码是否符合规范,以及单元测试是否通过</li><li>自动发布 更新完代码,自动构建出线上代码并上传</li></ul><h2 id="webpack安装及初始化项目"><a href="#webpack安装及初始化项目" class="headerlink" title="webpack安装及初始化项目"></a>webpack安装及初始化项目</h2><ul><li>初始化项目 npm init -y 按照默认参数初始化package.json</li><li>本地安装(局部安装)  npm i webpack  webpack-cli -D<br><code>.\node_modules\.bin\webpack --version</code> windows需使用\路径<br><code>npx webpack --version</code> 低版本需要安装  npx<br><code>npx</code> 会自动查找node_modules对应的.bin下的webpack.cmd命令 不存在则会自动安装</li><li>全局安装 npm i webpack  webpack-cli -g 常在终端命令窗口使用<br><code>webpack --version</code></li></ul><h2 id="配置开发服务器-webpack-dev-server"><a href="#配置开发服务器-webpack-dev-server" class="headerlink" title="配置开发服务器  webpack-dev-server"></a>配置开发服务器  webpack-dev-server</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json中的script 添加 start: 'webpack-dev-server'</span></span><br><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"start"</span>: <span class="string">"webpack-dev-server"</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 然后配置webpack.config.js下 devServer配置</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    contentBase: <span class="string">'./build'</span>,</span><br><span class="line">    port:<span class="number">3000</span>,</span><br><span class="line">    compress: <span class="literal">true</span>, <span class="comment">// 服务期压缩</span></span><br><span class="line">    open: <span class="literal">true</span>, <span class="comment">// 自动打开浏览器</span></span><br><span class="line">  &#125; <span class="comment">// 开发服务器</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"dev"</span>:<span class="string">"webpack-dev-server --inline --hot --open --port 4009"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 参数说明： --inline 自动刷新  --hot  热加载   --open  自动在默认浏览器中打开</span></span><br><span class="line"><span class="comment">// --port 指定监听端口为 5200   --host 可以指定服务器的ip，不指定默认为127.0.0.1(localhost)</span></span><br></pre></td></tr></table></figure><h2 id="webpack基本配置"><a href="#webpack基本配置" class="headerlink" title="webpack基本配置"></a>webpack基本配置</h2><ol><li><p>配置入口和出口</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123; <span class="comment">// 入口 找到入口之后开始寻找依赖包和各种资源</span></span><br><span class="line">    index: <span class="string">'./src/index.js'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123; <span class="comment">// 出口 告诉webpack经过各种loader处理后的文件应该生成到哪个目录下</span></span><br><span class="line">    <span class="comment">// 输出文件名</span></span><br><span class="line">    filename: <span class="string">'build.js'</span>,</span><br><span class="line">    <span class="comment">// 这个路径必须是绝对路径</span></span><br><span class="line">    path: path.resolve(<span class="string">'./build'</span>),</span><br><span class="line">    <span class="comment">// path: path.join(__dirname, './build')</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>配置hash</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  output: &#123;</span><br><span class="line">    <span class="comment">// filename: 'build.js',</span></span><br><span class="line">    <span class="comment">// 输出目录加入hash 8位</span></span><br><span class="line">    filename: <span class="string">'build.[hash:8].js'</span>,</span><br><span class="line">    <span class="comment">// 这个路径必须是绝对路径</span></span><br><span class="line">    <span class="comment">// path: path.resolve('./build'),</span></span><br><span class="line">    path: path.join(__dirname, <span class="string">'./build'</span>)</span><br><span class="line">  &#125;, <span class="comment">// 出口</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      <span class="comment">// 要拷贝的模板文件路径</span></span><br><span class="line">      template: <span class="string">'./src/index.html'</span>,</span><br><span class="line">      <span class="comment">// 文件末尾加入hash</span></span><br><span class="line">      hash: <span class="literal">true</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// src="build.60df093c.js?60df093c83b96da06c39"</span></span><br></pre></td></tr></table></figure></li><li><p>多入口 多出口  多页应用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    index: <span class="string">'./src/index.js'</span>,</span><br><span class="line">    b: <span class="string">'./src/b.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'[name].[hash:8].js'</span>,</span><br><span class="line">    path: path.resolve(<span class="string">'./build'</span>)</span><br><span class="line">  &#125;, <span class="comment">// 出口</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      filename: <span class="string">'a.html'</span>,</span><br><span class="line">      template: <span class="string">'./src/index.html'</span>,</span><br><span class="line">      chunks: [<span class="string">'index'</span>]</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      filename: <span class="string">'b.html'</span>,</span><br><span class="line">      template: <span class="string">'./src/index.html'</span>,</span><br><span class="line">      chunks: [<span class="string">'b'</span>]</span><br><span class="line">    &#125;)</span><br><span class="line">  ], <span class="comment">// 插件的配置</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>开发环境</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: <span class="string">'development'</span>, <span class="comment">// 可以更改模式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="webpack-插件-plugin"><a href="#webpack-插件-plugin" class="headerlink" title="webpack 插件 plugin"></a>webpack 插件 plugin</h2><p><code>loader与plugin区别</code><br><code>loader用于转换某些类型的模块,是一个转换器</code><br><code>plugin是插件, 是对webpack本身的扩展,是一个扩展器，功能强大可以用来处理各种各样的的任务</code></p><ol><li><p>html-webpack-plugin 自动生成一个index.html文件(或者指定模板来生成)并自动引入打包后的js文件<br><code>npm install html-webpack-plugin --save-dev</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">  <span class="comment">// 要拷贝的模板文件路径</span></span><br><span class="line">  template: <span class="string">'./src/index.html'</span>,</span><br><span class="line">  <span class="comment">// 设置标题</span></span><br><span class="line">  title: <span class="string">'webpack练习'</span>,</span><br><span class="line">  <span class="comment">// 文件末尾加入hash</span></span><br><span class="line">  hash: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// 压缩文件</span></span><br><span class="line">  minify: &#123;</span><br><span class="line">    <span class="comment">// 去除属性双引号</span></span><br><span class="line">    removeAttributeQuotes: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 压缩成一行</span></span><br><span class="line">    <span class="comment">// collapseWhitespace: true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>clean-webpack-plugin 删除清空文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">new</span> CleanWebpackPlugin([<span class="string">'dist'</span>]),</span><br></pre></td></tr></table></figure></li><li><p>webpack 自带热更新</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    contentBase: <span class="string">'./build'</span>,</span><br><span class="line">    port:<span class="number">3000</span>,</span><br><span class="line">    compress: <span class="literal">true</span>, <span class="comment">// 服务期压缩</span></span><br><span class="line">    open: <span class="literal">true</span>, <span class="comment">// 自动打开浏览器</span></span><br><span class="line">    hot: <span class="literal">true</span>, <span class="comment">// 热更新</span></span><br><span class="line">    proxyTable: &#123;<span class="comment">//代理  webpack-dev-server提供</span></span><br><span class="line">      <span class="string">'/api'</span>:&#123;</span><br><span class="line">        target:<span class="string">'http://192.168.5.22:8787'</span>,<span class="comment">//请求转发到本地服务器</span></span><br><span class="line">        pathRewrite: &#123;<span class="comment">//替换路径</span></span><br><span class="line">          <span class="string">'^/api'</span>:<span class="string">'/public/json'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="comment">// 开发服务器</span></span><br><span class="line">  <span class="built_in">module</span>: &#123;&#125;, <span class="comment">// 模块配置</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> webpack.HotModuleReplacementPlugin() <span class="comment">// 热更新插件</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>抽离css样式 用于生产环境<br><code>npm i extract-text-webpack-plugin -D 或 mini-css-extract-plugin -D</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ExtractTextWebpackPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        use: ExtractTextWebpackPlugin.extract(&#123;</span><br><span class="line">          fallback: <span class="string">'style-loader'</span>,</span><br><span class="line">          use: [&#123; <span class="attr">loader</span>: <span class="string">'css-loader'</span>&#125; ]</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;, <span class="comment">// 模块配置</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> ExtractTextWebpackPlugin(&#123;</span><br><span class="line">      filename: <span class="string">'css/index.css'</span>,</span><br><span class="line">      <span class="comment">// 开发环境禁用  否则css无法热更新</span></span><br><span class="line">      disable: <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>剔除没用的css代码  purifycss-webpack</p></li><li>postcss-loader  后处理css 兼容性检查 自动加css前缀autoprefixer</li><li>copy-webpack-plugin拷贝文件</li><li><p>压缩js的plugin<br><code>npm install uglifyjs-webpack-plugin --save-dev</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> uglifyJsPlugin = <span class="built_in">require</span>(<span class="string">'uglifyjs-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">new</span> uglifyJsPlugin(),</span><br></pre></td></tr></table></figure></li><li><p>打包公共代码 webpack自带的CommonsChunkPlugin</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">      name: <span class="string">'common'</span>,</span><br><span class="line">      minChunks: <span class="number">2</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>处理第三方js库 直接在html引入线上地址或使用webpakc.ProvidePlugin()<br>注入<br><code>plugins: [new webpck.ProvidePlugin({ $: &#39;jquery&#39; })]</code></p></li><li>将共用代码载入到html中以style标签或script标签中<br><code>npm i html-webpack-inline-chunk-plugin -D</code></li></ol><h2 id="loader"><a href="#loader" class="headerlink" title="loader"></a>loader</h2><p><code>loader本身就是一个函数，对接收到的内容进行转换并返回转换后的结果。用于转换各种资源类型的模块</code><br><code>webpack在读取使用的loader的过程中，是按照从右向左的顺序读取的。loader实际上就是一个预处理器</code></p><ul><li><p>css处理相关的loader<br><code>npm install style-loader css-loader less less-loader stylus stylus-loader node-sass sass-loader -D</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>, <span class="attr">use</span>: [</span><br><span class="line">          &#123; <span class="attr">loader</span>: <span class="string">'style-loader'</span>&#125;, <span class="comment">// 将css样式嵌入到文档中</span></span><br><span class="line">          &#123; <span class="attr">loader</span>: <span class="string">'css-loader'</span>&#125; <span class="comment">// 负责加载css文件</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.less$/</span>, <span class="attr">use</span>: [</span><br><span class="line">          &#123; <span class="attr">loader</span>: <span class="string">'style-loader'</span>&#125;,</span><br><span class="line">          &#123; <span class="attr">loader</span>: <span class="string">'css-loader'</span>&#125;,</span><br><span class="line">          &#123; <span class="attr">loader</span>: <span class="string">'less-loader'</span>&#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>图片文件处理 url-loader file-loader img-loader postcss-sprites<br><code>npm install url-loader file-loader -D</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(png|jpg|jpeg|gif)$/</span>, <span class="attr">use</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">8192</span>, <span class="comment">// 小于8Kb对图片进行base64编码</span></span><br><span class="line">              <span class="comment">// 大于limit限制</span></span><br><span class="line">              <span class="comment">// images/ 文件要打包的到的文件夹</span></span><br><span class="line">              <span class="comment">// [name]  图片原来的名称</span></span><br><span class="line">              <span class="comment">// [hash:8]为了防止图片名称冲突，依然使用hash只保留8位</span></span><br><span class="line">              <span class="comment">// [ext] 使用图片原来的的扩展名</span></span><br><span class="line">              name: <span class="string">'images/[name].[hash:8].[ext]'</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            loader:<span class="string">'img-loader'</span>,</span><br><span class="line">            options: [</span><br><span class="line">              pngquant: &#123; <span class="attr">quality</span>: <span class="number">80</span> &#125;</span><br><span class="line">            ],</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      test: <span class="regexp">/\.css$/</span>, <span class="attr">use</span>: [</span><br><span class="line">        &#123; <span class="attr">loader</span>: <span class="string">'style-loader'</span>&#125;, <span class="comment">// 将css样式嵌入到文档中</span></span><br><span class="line">        &#123; <span class="attr">loader</span>: <span class="string">'css-loader'</span>&#125; <span class="comment">// 负责加载css文件</span></span><br><span class="line">        &#123;</span><br><span class="line">          loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">          options: &#123;</span><br><span class="line">            ident: <span class="string">'postcss'</span>,</span><br><span class="line">            plugins: [ <span class="built_in">require</span>(<span class="string">'postcss-sprites'</span>)(&#123;</span><br><span class="line">              spritePath: <span class="string">'dist/assets/imgs/sprites'</span></span><br><span class="line">            &#125;)]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="comment">// 负责加载css文件</span></span><br><span class="line">      ]</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="es6语法处理-babal-loader"><a href="#es6语法处理-babal-loader" class="headerlink" title="es6语法处理 babal-loader"></a>es6语法处理 babal-loader</h2><p><code>npm install --save-dev babel-loader@7 babel-core babel-preset-es2015或babel-preset-env -D</code><br><code>babel polyfill</code> 对低版本浏览器不支持的 generator set map promise等做兼容性处理 全局使用 开发应用使用<br><code>npm i babael-polyfill -save</code> <code>import babel-polyfill</code><br><code>babel runtime transform</code> 局部使用  开发框架使用<br><code>npm i babel-runtime babel-plugin-transform-runtime -D</code> 在.babelrc中添加<code>&quot;plugins&quot;:[&quot;transform-runtime&quot;]</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        exclude: <span class="regexp">/(node_modules|dist)/</span> <span class="comment">// 不需要转化的js文件</span></span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              <span class="comment">// presets: ['es2015']</span></span><br><span class="line">              presets: [<span class="string">'env'</span>], &#123;</span><br><span class="line">                targets: &#123;</span><br><span class="line">                  browsers: [<span class="string">'&gt; 1%'</span>, <span class="string">'last 2 versions'</span>]</span><br><span class="line">                &#125;</span><br><span class="line">              &#125; <span class="comment">// 包含es2015 es2016 es2017</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="编译typescript"><a href="#编译typescript" class="headerlink" title="编译typescript"></a>编译typescript</h2><h2 id="代码分割与懒加载"><a href="#代码分割与懒加载" class="headerlink" title="代码分割与懒加载"></a>代码分割与懒加载</h2><p><code>require.include()</code> 引入共用代码<br><code>require.ensure([], function(){ var _ = require(&#39;lodash&#39;) })</code></p><h2 id="开发环境与生产环境异同"><a href="#开发环境与生产环境异同" class="headerlink" title="开发环境与生产环境异同"></a>开发环境与生产环境异同</h2><p><code>开发环境与生产环境的相同点</code></p><ul><li>同样的入口</li><li>同样的代码处理</li><li>同样的解析配置<br><code>开发环境与生产环境的不同点</code><h5 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h5></li><li>提取公用代码</li><li>压缩混淆</li><li>文件压缩 或是 base64编码</li><li>去除无用的代码<h5 id="开发环境-1"><a href="#开发环境-1" class="headerlink" title="开发环境"></a>开发环境</h5></li><li>模块热更新</li><li>sourceMap</li><li>接口代理</li><li>代码规范检查</li></ul><h2 id="打包结果分析"><a href="#打包结果分析" class="headerlink" title="打包结果分析"></a>打包结果分析</h2><p><code>npm i webpack-bundle-analyzer -D</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> BundleAnalyzerPlugin = <span class="built_in">require</span>(<span class="string">'webpack-bundle-analyzer'</span>).BundleAnalyzerPlugin</span><br><span class="line"><span class="built_in">module</span>.export = &#123;</span><br><span class="line">  plugins: [ <span class="keyword">new</span> BundleAnalyzerPlugin() ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="优化打包速速"><a href="#优化打包速速" class="headerlink" title="优化打包速速"></a>优化打包速速</h2><p><code>方法一</code><br><code>webpack.dll.conf.js</code></p><ul><li>分vendeor和app  分离第三方代码和业务代码(src)</li><li>DllPlugin</li><li>DllReferencePlugin<br><code>方法二</code></li><li>uglifyJsPlugin 并行处理<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> UglifyJsPlugin = <span class="built_in">require</span>(<span class="string">'uglifyjs-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">new</span> UglifyJsPlugin(&#123;</span><br><span class="line">  uglifyOptions: &#123;</span><br><span class="line">    compress: &#123;</span><br><span class="line">      warnings: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  sourceMap: <span class="literal">false</span>, <span class="comment">// 去除sourcemap</span></span><br><span class="line">  parallel: <span class="literal">true</span>, <span class="comment">// 除主线程外所有线程</span></span><br><span class="line">  cache: <span class="literal">true</span> <span class="comment">// 缓存</span></span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure></li></ul><p><code>方法三</code></p><ul><li>HappyPack</li><li>HappyPack.ThreadPool</li></ul><p><code>方法四</code></p><ul><li>babel-loader 设置 options.cacheDirectory include exclude<br><code>babel-loader  只处理src下js文件</code><br><code>其他</code></li><li>减少resolve</li><li>Devtool 去除 sourcemap</li><li>cache-loader</li><li>升级node及webpack版本</li></ul><h2 id="webpack多页面应用配置"><a href="#webpack多页面应用配置" class="headerlink" title="webpack多页面应用配置"></a>webpack多页面应用配置</h2><ul><li>parallel-webpack</li></ul><h2 id="webpack配置代码"><a href="#webpack配置代码" class="headerlink" title="webpack配置代码"></a>webpack配置代码</h2><p><code>vendor提取工程中所使用的的库、框架等第三方模块</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//path是Nodejs中的基本包,用来处理路径</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="comment">//引入html-webpack-plugin</span></span><br><span class="line"><span class="keyword">const</span> HTMLPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="comment">//引入webpack</span></span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">"webpack"</span>)</span><br><span class="line"><span class="comment">//将css代码抽离出来打包成单独文件</span></span><br><span class="line"><span class="keyword">const</span> ExtractPlugin = <span class="built_in">require</span>(<span class="string">"extract-text-webpack-plugin"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断是否为测试环境,在启动脚本时设置的环境变量都是存在于process.env这个对象里面的</span></span><br><span class="line"><span class="keyword">const</span> isDev = process.env.NODE_ENV === <span class="string">"development"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">  <span class="comment">//设置webpack的编译目标是web平台</span></span><br><span class="line">  target: <span class="string">"web"</span>,</span><br><span class="line">  <span class="comment">//声明js文件入口,__dirname就是我们文件的根目录,用join拼接</span></span><br><span class="line">  entry: path.join(__dirname, <span class="string">'src/index.js'</span>),</span><br><span class="line">  <span class="comment">//声明出口文件</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    <span class="comment">//将挂载的App全部打包成一个bundle.js,在浏览器中可以直接运行的代码</span></span><br><span class="line">    filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">    <span class="comment">//bundle.js保存的位置</span></span><br><span class="line">    path: path.join(__dirname, <span class="string">'dist'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//因为webpack只能处理js文件,且只识别ES5的语法</span></span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    <span class="comment">//所以针对不同类型的文件,我们定义不同的识别规则,最终目的都是打包成js文件</span></span><br><span class="line">    rules: [</span><br><span class="line">      <span class="comment">//处理.vue文件</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.vue$/</span>,</span><br><span class="line">        loader: <span class="string">'vue-loader'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//处理jsx文件</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.jsx$/</span>,</span><br><span class="line">        loader: <span class="string">'babel-loader'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// &#123;</span></span><br><span class="line">      <span class="comment">//     test: /\.css$/,</span></span><br><span class="line">      <span class="comment">//     use: [</span></span><br><span class="line">      <span class="comment">//         'style-loader',  //将css的样式写入到html里面去</span></span><br><span class="line">      <span class="comment">//         'css-loader' //处理css文件</span></span><br><span class="line">      <span class="comment">//     ]</span></span><br><span class="line">      <span class="comment">// &#125;,</span></span><br><span class="line">      <span class="comment">//处理图片</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(gif|jpg|jpeg|png|svg)$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="comment">//url-loader实际上依赖于file-loader,file-loader处理完文件可以保存为一个文件供处理</span></span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            <span class="comment">//loader是可以配置选项的,如下options</span></span><br><span class="line">            options: &#123;</span><br><span class="line">              <span class="comment">//url-loader的好处是可以加一个限制的大小,对于小图片,在范围内可直接将图片转换成base64码直接存放在js中,以减少http请求.</span></span><br><span class="line">              limit: <span class="number">1024</span>,</span><br><span class="line">              <span class="comment">//输出文件的名字,[name] 文件原名,[ext]文件扩展名.</span></span><br><span class="line">              name: <span class="string">'[name].[ext]'</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="comment">//主要作用是在此处可以根据isdev配置process.env,一是可以在js代码中可以获取到process.env,</span></span><br><span class="line">    <span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">      <span class="comment">//二是webpack或则vue等根据process.env如果是development,会给一些特殊的错误提醒等,而这些特殊项在正式环境是不需要的</span></span><br><span class="line">      <span class="string">'process.env'</span>: &#123;</span><br><span class="line">        NODE_ENV: isDev ? <span class="string">'"development"'</span> : <span class="string">'"production"'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">//引入HTMLPlugin</span></span><br><span class="line">    <span class="keyword">new</span> HTMLPlugin()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//如果是测试环境下的一些配置</span></span><br><span class="line"><span class="keyword">if</span> (isDev) &#123;</span><br><span class="line">  config.module.rules.push(&#123;</span><br><span class="line">    test: <span class="regexp">/\.styl/</span>,</span><br><span class="line">    use: [</span><br><span class="line">      <span class="string">'style-loader'</span>, <span class="comment">//将css写入到html中去</span></span><br><span class="line">      <span class="string">'css-loader'</span>, <span class="comment">//css-loader处理css</span></span><br><span class="line">      &#123;</span><br><span class="line">        loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">          <span class="comment">//stylus-loader和postcss-loader自己都会生成sourceMap,如果前面stylus-loader已生成了sourceMap</span></span><br><span class="line">          <span class="comment">//那么postcss-loader可以直接引用前面的sourceMap</span></span><br><span class="line">          sourceMap: <span class="literal">true</span>,</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//处理stylus的css预处理器的问题件,转换成css后,抛给上一层的css-loader</span></span><br><span class="line">      <span class="string">'stylus-loader'</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">//官方推荐使用这个配置,作用是在浏览器中调试时,显示的代码和我们的项目中的代码会基本相似,</span></span><br><span class="line">  <span class="comment">//而不会显示编译后的代码,以致于我们调试连自己都看不懂</span></span><br><span class="line">  config.devtool = <span class="string">'#cheap-module-eval-source-map'</span></span><br><span class="line">  <span class="comment">//这个devServer的配置是在webpack2.x以后引入的,1.x是没有的</span></span><br><span class="line">  config.devServer = &#123;</span><br><span class="line">    port: <span class="number">8000</span>,  <span class="comment">//访问的端口号</span></span><br><span class="line">    host: <span class="string">'127.0.0.1'</span>, <span class="comment">//可以设置0.0.0.0 ,这样设置你可以通过127.0.0.1或则localhost去访问</span></span><br><span class="line">    overlay: &#123;</span><br><span class="line">      errors: <span class="literal">true</span>, <span class="comment">//编译中遇到的错误都会显示到网页中去</span></span><br><span class="line">    &#125;,</span><br><span class="line">    open: <span class="literal">true</span>, <span class="comment">//项目启动时,会默认帮你打开浏览器</span></span><br><span class="line">    hot: <span class="literal">true</span> <span class="comment">//在单页面应用开发中,我们修改了代码后是整个页面都刷新,开启hot后,将只刷新对应的组件</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//添加两个插件用于hot:true的配置</span></span><br><span class="line">  config.plugins.push(</span><br><span class="line">    <span class="keyword">new</span> webpack.HotModuleReplacementPlugin(),</span><br><span class="line">    <span class="keyword">new</span> webpack.NoEmitOnErrorsPlugin()</span><br><span class="line">  )</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  config.entry = &#123;</span><br><span class="line">    app: path.join(__dirname, <span class="string">'src/index.js'</span>),</span><br><span class="line">    vendor: [<span class="string">'vue'</span>]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//此处一定是chunkhash,因为用hash时app和vendor的hash码是一样的了,这样每次业务代码更新,vendor也会更新,也就没有了意义.</span></span><br><span class="line">  config.output.filename = <span class="string">'[name].[chunkhash:8].js'</span></span><br><span class="line">  config.module.rules.push(&#123;</span><br><span class="line">    test: <span class="regexp">/\.styl/</span>,</span><br><span class="line">    use: ExtractPlugin.extract(&#123;</span><br><span class="line">      fallback: <span class="string">'style-loader'</span>,</span><br><span class="line">      use: [</span><br><span class="line">        <span class="string">'css-loader'</span>, <span class="comment">//css-loader处理css</span></span><br><span class="line">        &#123;</span><br><span class="line">          loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">          options: &#123;</span><br><span class="line">            <span class="comment">//stylus-loader和postcss-loader自己都会生成sourceMap,如果前面stylus-loader已生成了sourceMap</span></span><br><span class="line">            <span class="comment">//那么postcss-loader可以直接引用前面的sourceMap</span></span><br><span class="line">            sourceMap: <span class="literal">true</span>,</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//处理stylus的css预处理器的问题件,转换成css后,抛给上一层的css-loader</span></span><br><span class="line">        <span class="string">'stylus-loader'</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;),</span><br><span class="line">  config.plugins.push(</span><br><span class="line">    <span class="comment">//定义打包分离出的css文件名</span></span><br><span class="line">    <span class="keyword">new</span> ExtractPlugin(<span class="string">'styles.[contentHash:8].css'</span>),</span><br><span class="line">    <span class="comment">//定义静态文件, 库文件, 插件打包</span></span><br><span class="line">    <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">      name: <span class="string">'vendor'</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">//将app.js文件中一些关于webpack文件的配置单独打包出为一个文件,用于解决部分浏览器长缓存问题</span></span><br><span class="line">    <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">      name: <span class="string">'runtime'</span></span><br><span class="line">    &#125;)</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//声明一个config的配置,用于对外暴露</span></span><br><span class="line"><span class="built_in">module</span>.exports = config</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>javascript对象与面向对象</title>
      <link href="/javascript%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"/>
      <url>/javascript%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/</url>
      
        <content type="html"><![CDATA[<p>对象是<code>javascript</code>的复合数据类型。对象可看做是属性的无序集合，每个属性都是一个名/值对，属性名是任意字符串，但对象中不能存在两个同名的属性，值可以是任意类型。面向过程思维方式: 把解决问题的关注点放在每一个步骤上。面向对象思维方式: 把解决问题的关键点放在解决问题需要的一系列对象上。<br><a id="more"></a></p><h2 id="对象的特点"><a href="#对象的特点" class="headerlink" title="对象的特点"></a>对象的特点</h2><ul><li>属性的值（value）</li><li>可写（writable） 表明是否可以设置该属性的值</li><li>可枚举（enumerable） 表明是否可以通过for/in或for/of遍历该属性</li><li>可配置（configurable） 表明是否可以删除或修改该属性</li><li>对象的原型（prototype） 指向另外一个对象，本对象的属性继承自它的原型对象</li><li>对象的类（class） 是一个标识对象类型的字符串</li></ul><h2 id="创建对象"><a href="#创建对象" class="headerlink" title="创建对象"></a>创建对象</h2><ol><li><p>对象直接量（对象字面量）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> point = &#123;<span class="attr">x</span>:<span class="number">0</span>, <span class="attr">y</span>:<span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">var</span> book = &#123;</span><br><span class="line">    <span class="string">'title'</span>: <span class="string">'Javascript'</span>,</span><br><span class="line">    <span class="string">'sub-title'</span>: <span class="string">'js'</span>,</span><br><span class="line">    <span class="string">'author'</span>: &#123;</span><br><span class="line">        firstname: <span class="string">'Bob'</span>,</span><br><span class="line">        surname: <span class="string">'David'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>通过new 构造函数()</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>(&#123;x：<span class="number">1</span>&#125;) <span class="comment">// 创建一个对象 同 &#123;x：1&#125;</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>,<span class="number">2</span>)  <span class="comment">// 创建一个数组 同 [1, 2]</span></span><br><span class="line"><span class="keyword">var</span> d   = <span class="keyword">new</span> <span class="built_in">Date</span>()   <span class="comment">// 创建一个表示当前时间的date对象</span></span><br></pre></td></tr></table></figure></li><li><p>Object.create() 创建原型对象<br><code>Object.create()</code>是一个静态函数，第一个参数是这个对象的原型，第二个参数为可选参数，用以对对象的属性进行进一步的描述</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> P = &#123;<span class="attr">name</span>: <span class="string">'tew'</span>&#125;</span><br><span class="line"><span class="keyword">var</span> o3 = <span class="built_in">Object</span>.create(P)</span><br></pre></td></tr></table></figure></li></ol><h2 id="new-构造函数-经历四个步骤"><a href="#new-构造函数-经历四个步骤" class="headerlink" title="new 构造函数() 经历四个步骤"></a>new 构造函数() 经历四个步骤</h2><ul><li>创建一个新对象</li><li>将构造函数的作用域赋值给新对象（this指向新对象）</li><li>执行构造函数中的代码（为新对象this添加属性）</li><li>返回新对象（默认是 return this）</li></ul><h2 id="获取和设置对象的属性"><a href="#获取和设置对象的属性" class="headerlink" title="获取和设置对象的属性"></a>获取和设置对象的属性</h2><blockquote><p>可以通过点（.）和方括号（[]）运算符来获取属性的值</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> book = &#123;</span><br><span class="line">    <span class="string">'title'</span>: <span class="string">'Javascript'</span>,</span><br><span class="line">    <span class="string">'sub-title'</span>: <span class="string">'js'</span>,</span><br><span class="line">    <span class="string">'author'</span>: &#123;</span><br><span class="line">        firstname: <span class="string">'Bob'</span>,</span><br><span class="line">        surname: <span class="string">'David'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(book.title) <span class="comment">// 得到book的title属性</span></span><br><span class="line"><span class="built_in">console</span>.log(book[<span class="string">'sub-title'</span>]) <span class="comment">// 得到book的sub-title属性</span></span><br><span class="line">book.title = <span class="string">'jquery'</span> <span class="comment">// 设置或修改book的title属性</span></span><br></pre></td></tr></table></figure><h2 id="对象的方法"><a href="#对象的方法" class="headerlink" title="对象的方法"></a>对象的方法</h2><ul><li><p>toString()方法 将对象转换为字符串</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s = &#123;<span class="attr">x</span>:<span class="number">1</span>, <span class="attr">y</span>:<span class="number">2</span>&#125;.toString();</span><br><span class="line"><span class="built_in">console</span>.log(s)   <span class="comment">// "[object Object]"</span></span><br></pre></td></tr></table></figure></li><li><p>toLocalString()方法  返回对象的本地化字符串</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> local = <span class="keyword">new</span> <span class="built_in">Date</span>().toLocaleString()</span><br><span class="line"><span class="built_in">console</span>.log(local)  <span class="comment">// "2017/12/26 上午14:30:14"</span></span><br><span class="line"><span class="keyword">var</span> date  = <span class="keyword">new</span> <span class="built_in">Date</span>().toLocaleDateString()</span><br><span class="line"><span class="built_in">console</span>.log(date)  <span class="comment">// "2017/12/26"</span></span><br><span class="line"><span class="keyword">var</span> time  = <span class="keyword">new</span> <span class="built_in">Date</span>().toLocaleTimeString()</span><br><span class="line"><span class="built_in">console</span>.log(time)  <span class="comment">// "上午14:30:14"</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h2><ul><li>面向对象概念:  用对象的思想去写代码,就是面向对象编程</li><li>面向对象特点:<ol><li>抽象:抓住核心问题</li><li>封装:只能通过对象来访问方法 将一些属性和方法封装起来</li><li>继承:从已有对象上继承出新的对象</li><li>多态:多对象的不同形态,父类的成员可以共享给所有子类,子类可以给父类添加属性</li></ol></li><li>对象:带有属性和方法的特殊数据类型<ul><li>对象下面的变量 叫做对象的属性            状态,静态的</li><li>对象下面的函数 叫做对象的方法(行为,操作)  过程,动态的</li></ul></li></ul><h2 id="创建对象-1"><a href="#创建对象-1" class="headerlink" title="创建对象"></a>创建对象</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line"><span class="comment">// 为对象添加属性和方法</span></span><br><span class="line">obj.name = <span class="string">"tew"</span></span><br><span class="line">obj.showName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line">obj.showName() <span class="comment">//tew</span></span><br><span class="line"><span class="comment">// 工厂方式:  封装函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//原料  空对象</span></span><br><span class="line">  <span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">  <span class="comment">//加工</span></span><br><span class="line">  obj.name = name</span><br><span class="line">  obj.showName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//出厂</span></span><br><span class="line">  <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p1 = Person(<span class="string">'tew'</span>)</span><br><span class="line">p1.showName() <span class="comment">// tew</span></span><br><span class="line"><span class="keyword">var</span> p2 = Person(<span class="string">'cj'</span>) <span class="comment">//cj</span></span><br><span class="line">p2.showName()</span><br><span class="line"><span class="comment">// 当new去调用一个函数: 这个时候函数中的this就是创建出来的对象,而且函数的返回值就是this对象(隐式返回)</span></span><br><span class="line"><span class="comment">// 构造函数  new 后面调用的函数 (构造函数名第一个字母大写)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.showName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">'tew'</span>)</span><br><span class="line">p1.showName() <span class="comment">// tew</span></span><br><span class="line"><span class="comment">// 对象的引用</span></span><br><span class="line"><span class="comment">// 基本类型: 赋值的时候只是值得复制  在内存中重新开辟空间</span></span><br><span class="line"><span class="comment">// 对象类型: 赋值不仅是值得复制,而且是引用的传递</span></span><br><span class="line">  <span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]  <span class="comment">//两者地址绑在一起</span></span><br><span class="line"><span class="keyword">var</span> b = a</span><br><span class="line">b.push(<span class="number">4</span>)</span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">//1,2,3,4  对象进行比较的时候,值和引用都要相同</span></span><br><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">var</span> b = a</span><br><span class="line">b = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>] <span class="comment">//重新复制地址改变</span></span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">//1,2,3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 原型:去改写对象下面公用的方法或属性,让公用的方法或者属性在内存中存在一份(提高性能)</span></span><br><span class="line"><span class="comment">// 原则: 相同的属性和方法可以加载到原型上   自己和原型中都有的属性或方法,优先用自己的</span></span><br><span class="line"><span class="comment">// 原型方法或属性  相当于css中的class 多个公用</span></span><br><span class="line"><span class="comment">// 普通方法或属性  相当于css中的style</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">arr.sum = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> res = <span class="number">0</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="keyword">this</span>.length;i++)&#123;</span><br><span class="line">    res+=<span class="keyword">this</span>[i]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(arr.sum()) <span class="comment">//15</span></span><br><span class="line"><span class="comment">//arr2.sum();//arr2.sum is not a function</span></span><br><span class="line">arr2.sum = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> res = <span class="number">0</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="keyword">this</span>.length;i++)&#123;</span><br><span class="line">    res+=<span class="keyword">this</span>[i]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(arr2.sum()) <span class="comment">//10</span></span><br><span class="line"><span class="comment">//原型写法prototype  要写在构造函数下面 只有构造函数才能有原型</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.sum = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> res = <span class="number">0</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="keyword">this</span>.length;i++)&#123;</span><br><span class="line">    res+=<span class="keyword">this</span>[i]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(arr.sum()) <span class="comment">//15</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2.sum()) <span class="comment">//10</span></span><br></pre></td></tr></table></figure><h2 id="更改this指向"><a href="#更改this指向" class="headerlink" title="更改this指向"></a>更改this指向</h2><ol><li>将this用全局变量存起来</li><li>使用call方法改变this指向  fn.call(参数1,参数2,参数3) 参数1  可以改变函数执行过程中的this指向 参数2以后就是执行函数的参数</li><li>使用apply方法改变this指向 fn.apply(this(要修改的那个对象),[参数1,参数2])<br><code>注: 使用call和apply传入的第一个参数可以是null,表示为函数调用模式,this指向window当第一个参数为值类型的时候,会将值类型转换为对应的对象</code></li></ol><h2 id="包装对象"><a href="#包装对象" class="headerlink" title="包装对象"></a>包装对象</h2><p>系统对象也是基于原型的程序    尽量不要去修改或者添加系统对象下面的方法和属性<br>所有的基本类型都有自己的包装对象: <code>Number String Boolean</code><br>基础类型在执行方法或者属性的时候,会找到对应的包装对象<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'abc'</span>)   <span class="comment">//console.log(typeof a)</span></span><br><span class="line"><span class="comment">// 通过包装对象去执行方法或者属性</span></span><br><span class="line">a.charAt(<span class="number">0</span>)</span><br><span class="line"><span class="comment">// 基本类型的包装对象 只存在于一行代码的执行瞬间 执行完后,包装对象立即被销毁</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'abc'</span></span><br><span class="line">str.num = <span class="number">10</span></span><br><span class="line"><span class="built_in">console</span>.log(str.num)  <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure></p><h2 id="原型和原型链-实例对象和原型之间的链接-proto"><a href="#原型和原型链-实例对象和原型之间的链接-proto" class="headerlink" title="原型和原型链:   实例对象和原型之间的链接  proto"></a>原型和原型链:   实例对象和原型之间的链接  <strong>proto</strong></h2><p>原型里面默认的属性和方法  <code>不能for in打印</code><br>原型链的最外层是 <code>Object.prototype</code></p><ul><li><code>instanceof</code><br>  对象  <code>instanceof</code>  函数<br>  判断函数是不是这个对象原型链上的构造函数</li><li><code>hasOwnProperty()</code><br>  对象.<code>hasOwnPeroperty</code>(‘属性’) 最外层<code>Object</code>的属性</li><li><code>Object.prototype.hasOwnPeroperty</code><br>  对象中是否有某属性,返回布尔值<br>  原型如果改成json写法  会影响这个属性</li><li><code>constructor</code><br>  对象.<code>constructor</code>  查看对象的构造函数<br>  构造函数:原型里面默认的属性<br>  每一个函数都会有的,都是自动生成的  <code>Aaa.prototype.constructor = Aaa;</code><br>  原型如果改成<code>json</code>写法  会影响这个属性</li><li><p>原型查找原则<br>1.当访问一个对象的成员的时候,先在自身找有没有,如果有,直接使用<br>2.如果没有找到,则去当前对象的原型对象中去找,如果有,直接使用<br>3.如果没有找到,则去原型对象的原型对象中去找,如果有,直接使用<br>4.直到<code>Object</code>,如果还是没有,则返回<code>null</code></p></li><li><p>构造函数显式原型prototype上的constructor属性等于构造函数本身<br><code>Person.prototype.constructor===Person) //true</code></p></li><li>实例对象的隐式原型等于它构造函数的显示原型<br><code>person.__proto__===Person.prototype //true</code><br><img src="/image/other/proto.png" alt="原型链"></li><li>es6中操纵原型的内置函数</li></ul><ol><li>Object.create 根据指定的原型创建新对象, 原型课时是null</li><li>Obejct.getPrototypeOf() 获取一个对象的原型</li><li>Object.setPrototypeOf() 设置一个对象的原型</li></ol><ul><li>构造函数模式用于定义实例属性，而原型模式用于定义共用方法和共享的属性。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.age  = age</span><br><span class="line">  <span class="comment">//return this  //默认有着一行</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f  = <span class="keyword">new</span> Foo(<span class="string">'wangwu'</span>,<span class="number">20</span>);</span><br><span class="line"><span class="comment">//构造函数--扩展</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  var a = &#123;&#125; 其实就是 var a = new Object()的语法糖</span></span><br><span class="line"><span class="comment">  var a = [] 其实就是 var a = new Array()的语法糖</span></span><br><span class="line"><span class="comment">  function Foo()&#123;&#125; 其实就是 var Foo = new Function()</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//5条原型规则  原型规则是学习原型链的基础</span></span><br><span class="line"><span class="comment">//a. 所有的引用类型(数组 对象 函数) 都具有对象特性 即可自由扩展属性(null除外)</span></span><br><span class="line"><span class="comment">//b. 所有的引用类型(数组 对象 函数) 都有一个__proto__属性, 属性值是一个普通对象(null除外)(隐式原型)</span></span><br><span class="line"><span class="comment">//c. 所有的函数,都有一个prototype属性,属性值也是一个普通的对象(显示原型)</span></span><br><span class="line"><span class="comment">//d. 所有的引用类型(数组 对象 函数),__proto__属性值指向它的构造函数'prototype'属性值</span></span><br><span class="line"><span class="comment">//e. 当试图得到一个对象(引用类型)的某个属性时,如果这个对象(引用类型) 本身没有这个属性,那么会去它的__proto__(即它的构造函数的prototype)中寻找</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">//1. 都有可自由扩展属性</span></span><br><span class="line">  <span class="keyword">var</span> obj = &#123;&#125;; obj.a = <span class="number">100</span>;</span><br><span class="line">  <span class="keyword">var</span> arr = []; arr.a = <span class="number">100</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;&#125;; fn.a = <span class="number">100</span>;</span><br><span class="line">  <span class="comment">//2. 所有的引用对象都有 __ptoto__属性 隐式原型属性 指向其构造函数</span></span><br><span class="line">  <span class="built_in">console</span>.log(obj.__proto__); <span class="comment">// &#123;constructor: f...&#125; Object</span></span><br><span class="line">  <span class="built_in">console</span>.log(arr.__proto__); <span class="comment">// [constructor: ƒ...] Object</span></span><br><span class="line">  <span class="built_in">console</span>.log(fn.__proto__); <span class="comment">// ƒ () &#123; [native code] &#125;</span></span><br><span class="line">  <span class="comment">//3. 有的函数都有一个prototype属性  显示原型属性</span></span><br><span class="line">  <span class="built_in">console</span>.log(fn.prototype); <span class="comment">// &#123;constructor: ƒ&#125;</span></span><br><span class="line">  <span class="comment">//4. 所有的引用类型的__proto__ 属性值都指向它的构造函数'prototype'属性值</span></span><br><span class="line">  <span class="built_in">console</span>.log(obj.__proto__===<span class="built_in">Object</span>.prototype); <span class="comment">// true</span></span><br><span class="line">  <span class="comment">//构造函数</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//原型扩展</span></span><br><span class="line">  Foo.prototype.alertName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//创建实例</span></span><br><span class="line">  <span class="keyword">var</span> f = <span class="keyword">new</span> Foo(<span class="string">'zhangsan'</span>);</span><br><span class="line">  f.printName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//测试</span></span><br><span class="line">  f.printName(); <span class="comment">//zhangsan   f 本身的属性方法</span></span><br><span class="line">  f.alertName(); <span class="comment">//zhangsan   f 的显示原型去找 prototype中去找</span></span><br><span class="line">  f.__proto__ <span class="comment">// &#123;alertName: ƒ, constructor: ƒ&#125;</span></span><br><span class="line">  f.__proto__.__proto__ <span class="comment">// &#123; constructor: ƒ... &#125; Object</span></span><br><span class="line">  f.toString();  <span class="comment">//"[object Object]"  要去 f.__proto__.__proto__去找</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 调用构造函数时会为实例添加一个指向最初原型的prototype指针</span></span><br><span class="line"><span class="comment">// 如果重写整个原型对象(即将原型修改为另一个对象) 就等于切断了构造函数与最初原型之间的联系</span></span><br><span class="line"><span class="comment">// 实例中的指针仅指向原型 而不指向构造函数 实例仍然引用的是最初的原型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Person.prototype.name = 'tew'</span></span><br><span class="line"><span class="comment">// Person.prototype.sayName = function () &#123;</span></span><br><span class="line"><span class="comment">//    console.log(this.name)</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// person.name // 'tew'</span></span><br><span class="line"><span class="comment">// person.sayName() // tew</span></span><br><span class="line"></span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">  <span class="keyword">constructor</span>: Person,</span><br><span class="line">  name: 'tew',</span><br><span class="line">  sayName: function () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// person.name // undefined</span></span><br><span class="line"><span class="comment">// person.sayName() // Uncaught TypeError: person.sayName is not a function</span></span><br></pre></td></tr></table></figure><h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><blockquote><p>一个对象没有一些方法和属性,而把另一个对象的属性和方法,拿过来自己用就是继承</p></blockquote><ul><li>子对象可以继承父对象<br>子对象拥有父对象有的东西<br>子对象可以扩展<br>子对象的扩展不会影响到父对象</li><li><p>继承的方式<br>(1) 混入式继承<br>(2) 原型继承<br>(3) 经典继承<br>(4) 原型链继承</p></li><li><p>js对象的默认继承是原型继承</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Phone</span></span>&#123;&#125;</span><br><span class="line">Phone.prototype = <span class="keyword">new</span> <span class="built_in">Object</span>() <span class="comment">// 默认就会有这一步</span></span><br><span class="line">Phone.prototype.__proto__ === <span class="built_in">Object</span>.prototype</span><br></pre></td></tr></table></figure></li><li><p>继承的方式 <code>原型链继承 借用构造函数继承 原型+构造函数继承 寄生式继承</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 原型链继承</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.age = <span class="number">20</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">'jack'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat()</span><br><span class="line"><span class="built_in">console</span>.log(cat.name); <span class="comment">// jaack</span></span><br><span class="line"><span class="built_in">console</span>.log(cat.age); <span class="comment">// undefined</span></span><br><span class="line"><span class="comment">// 让Cat对象拥有了Animal对象的属性和方法</span></span><br><span class="line">Cat.prototype = <span class="keyword">new</span> Animal()</span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat()</span><br><span class="line"><span class="built_in">console</span>.log(cat.name); <span class="comment">// jaack</span></span><br><span class="line"><span class="built_in">console</span>.log(cat.age); <span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 借用构造函数继承 在子类构造函数内部调用父类构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.age = <span class="number">20</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Cat的所有对象借用了Animal对象的构造函数 借用构造函数可以传参</span></span><br><span class="line">  <span class="comment">// Animal.call(this, '30')</span></span><br><span class="line">  Animal.call(<span class="keyword">this</span>)</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">'jack'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat()</span><br><span class="line"><span class="built_in">console</span>.log(cat.name); <span class="comment">// jaack</span></span><br><span class="line"><span class="built_in">console</span>.log(cat.age); <span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 组合继承 原型链 + 借用构造函数继承</span></span><br><span class="line"><span class="comment">// 使用原型链实现对原型属性和方法的继承，而通过借用构造函数来实现对实例属性的继承</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.colors = [<span class="string">'blue'</span>, <span class="string">'green'</span>]</span><br><span class="line">&#125;</span><br><span class="line">SuperType.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// 继承属性</span></span><br><span class="line">  SuperType.call(<span class="keyword">this</span>, name)</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 继承方法</span></span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType()</span><br><span class="line">SubType.prototype.sayAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sub = <span class="keyword">new</span> SubType(<span class="string">'tew'</span>, <span class="number">28</span>)</span><br><span class="line">sub.colors.push(<span class="string">'red'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(sub.colors) <span class="comment">// ["blue", "green", "red"]</span></span><br><span class="line">sub.sayName() <span class="comment">// tew</span></span><br><span class="line">sub.sayAge() <span class="comment">// 28</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sub2 = <span class="keyword">new</span> SubType(<span class="string">'bob'</span>, <span class="number">26</span>)</span><br><span class="line"><span class="built_in">console</span>.log(sub2.colors) <span class="comment">// ["blue", "green"]</span></span><br><span class="line">sub2.sayName() <span class="comment">// bob</span></span><br><span class="line">sub2.sayAge() <span class="comment">// 26</span></span><br><span class="line"><span class="comment">// 4. 寄生式继承</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">createPerson</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> obj = &#123;&#125;</span><br><span class="line">  Person.call(obj, name, age)</span><br><span class="line">  <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = createPerson(<span class="string">'tew'</span>, <span class="number">28</span>)</span><br><span class="line"><span class="built_in">console</span>.log(person) <span class="comment">// &#123;name: "tew", age: 28&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(person.constructor) <span class="comment">// ƒ Object() &#123; [native code] &#125;</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js基础 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>mysql进阶使用</title>
      <link href="/mysql%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8/"/>
      <url>/mysql%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p><code>MySQL</code>是最流行的关系型数据库管理系统之一。有很多的高级用法包括：<code>视图view</code>,<code>索引操作</code>,<code>数据库的备份和恢复</code>,<code>数据控制语言(DCL)</code>,<code>数据事务语言(DTL)</code>,<code>存储函数</code>, <code>存储过程(procedure)</code>,<code>触发器(trigger)</code>等<br><a id="more"></a></p><h2 id="mysql高级操作"><a href="#mysql高级操作" class="headerlink" title="mysql高级操作"></a>mysql高级操作</h2><ul><li><p>视图 view</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">view是由sql的查询结果形成的一张虚拟表</span><br><span class="line">创建视图  <span class="keyword">create</span> <span class="keyword">view</span> 视图名 <span class="keyword">as</span> <span class="keyword">select</span> 语句</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> vgoods <span class="keyword">as</span> <span class="keyword">select</span> goods_id,goods_name,shop_price <span class="keyword">from</span> goods</span><br><span class="line">使用视图  基本上当成一张表用即可</span><br><span class="line">删除视图 <span class="keyword">drop</span> <span class="keyword">view</span> 视图名</span><br><span class="line"><span class="number">1.</span>权限控制时使用 通过视图开放其中的一列或几列起到权限控制的作用</span><br><span class="line"><span class="number">2.</span>简化复杂的查询</span><br><span class="line"><span class="number">3.</span>如果视图的每一行是与物理表一一对应的则可以修改,如果<span class="keyword">view</span>的行是有物理表的</span><br><span class="line">  多行经过计算得到的结果<span class="keyword">view</span>是不可以更新的</span><br><span class="line">视图的algorithm</span><br><span class="line"><span class="keyword">merge</span> 把查询视图的语句与创建时的语句<span class="keyword">where</span>子句等合并</span><br><span class="line">temptable是根据创建语句瞬间创建一张临时表</span><br></pre></td></tr></table></figure></li><li><p>存储引擎</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">engine=myisam或InnoDB(默认)</span><br><span class="line">myisam 插入速度快 支持全文索引  不支持事务 表锁</span><br><span class="line">InnoDB 支持事务安全 行锁  支持外键</span><br><span class="line">myisam 方式存储的数据表 会比InnoDB 多出<span class="number">2</span>个文件 在mysql/data/</span><br><span class="line">MyISAM 对应三个文件 *.frm表信息 *<span class="selector-class">.MYD</span> 存储数据 *<span class="selector-class">.MYI</span> 存储索引信息)</span><br></pre></td></tr></table></figure></li><li><p>索引操作</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">主键索引 primary key</span><br><span class="line">一张表只能有一个主键只能有一列为auto_increment 主键不能为空</span><br><span class="line">唯一索引 unique       防止创建重复的值</span><br><span class="line">索引是数据的目录,能快速定位行数据的位置 不好的是降低了增删改的速度</span><br><span class="line">对大数据的范围内查找时,查找速度特别快 有索引和无索引查找速度区别很大</span><br><span class="line">创建原则 1.不要过度索引 2.在where条件最频繁的列上加 3.尽量索引散列值</span><br><span class="line">key 普通索引     unique 唯一索引   primary key 主键索引 fulltext全文索引</span><br><span class="line">查看索引 <span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> 表名</span><br><span class="line">增加索引 <span class="keyword">alter</span> <span class="keyword">table</span> stu_mess <span class="keyword">add</span> 索引名(列名)</span><br><span class="line">删除索引 <span class="keyword">drop</span> <span class="keyword">index</span> 索引名 <span class="keyword">on</span> 表名或<span class="keyword">alter</span> <span class="keyword">from</span> 表名 <span class="keyword">drop</span> <span class="keyword">index</span> 索引名</span><br><span class="line">增加主键 <span class="keyword">alter</span> <span class="keyword">table</span> stu_mess <span class="keyword">add</span> primary <span class="keyword">key</span>(<span class="keyword">id</span>)</span><br><span class="line">删除主键 <span class="keyword">alter</span> <span class="keyword">table</span> stu_mess <span class="keyword">drop</span> primary <span class="keyword">key</span></span><br><span class="line">删除外键 <span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> <span class="keyword">foreign</span> <span class="keyword">key</span>(外建名)</span><br><span class="line">    添加外键时自命名的名字  或 在表结构中 查看系统命名的外建名</span><br></pre></td></tr></table></figure></li><li><p>数据库的备份和恢复</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span>.备份  将一个数据库,完整的转换为一个可以 携带和传送的文件</span><br><span class="line">mysqldump -h 服务器地址 -u 用户名 -<span class="selector-tag">p</span> 数据库名 &gt; 文件名(绝对路径)</span><br><span class="line">用于数据库的迁移 将数据库从一个服务器搬迁到另一个服务器</span><br><span class="line">用于数据的安全备份 防止数据库系统崩溃</span><br><span class="line"><span class="selector-tag">b</span>.恢复  将一个备份的的数据库文件,完整的还原为一个可以使用的数据库</span><br><span class="line">mysql -h 服务器地址 -u 用户名 -<span class="selector-tag">p</span> 数据库名 &lt; 文件名(绝对路径)</span><br><span class="line">登陆后 mysql &gt; source <span class="string">"备份数据库文件的完整路径"</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="数据控制语言-DCL"><a href="#数据控制语言-DCL" class="headerlink" title="数据控制语言(DCL)"></a>数据控制语言(DCL)</h2><ul><li><p>用户管理</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql中的所有用户,都存储在系统数据库mysql中的user表中</span><br><span class="line">a.创建用户  <span class="keyword">create</span> <span class="keyword">user</span> <span class="string">'用户名'</span>@允许登录的地址/服务器 <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'密码'</span></span><br><span class="line">          允许登录的地址:指允许用户登录到mysql服务器的客户端的地址,本机localhost</span><br><span class="line">          也可是某服务器名,或某IP地址</span><br><span class="line">b.删除用户  <span class="keyword">drop</span> <span class="keyword">user</span> <span class="string">'用户名'</span>@<span class="string">'允许登录的地址'</span></span><br><span class="line">c.修改用户密码</span><br><span class="line">    修改自己的密码  <span class="keyword">set</span> <span class="keyword">password</span>=<span class="keyword">password</span>(<span class="string">'密码'</span>);</span><br><span class="line">    修改其他用户的密码(前提是有权限)</span><br><span class="line">    <span class="keyword">set</span> <span class="keyword">password</span> <span class="keyword">for</span> <span class="string">'用户名'</span>@<span class="string">'允许登录的地址'</span>=<span class="keyword">password</span>(<span class="string">'密码'</span>)</span><br></pre></td></tr></table></figure></li><li><p>权限管理</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">A. 授予用户权限(增加权限)</span><br><span class="line"><span class="keyword">grant</span> 权限列表 <span class="keyword">on</span> 某库.某个对象 <span class="keyword">to</span> <span class="string">"用户名"</span>@<span class="string">'允许登录的地址'</span>[<span class="keyword">identified</span> <span class="keyword">by</span><span class="string">'密码'</span>]</span><br><span class="line">a. 权限列表 各个权限之间用逗号隔开</span><br><span class="line">b. 某库 . 某对象 给指定的某个数据库中的某个下级单位</span><br><span class="line">  下级单位有 表名 视图名 存储过程名 存储函数名</span><br><span class="line">  * . *  所有数据库中的所有下级单位     某库 . *  代表指定库的所有下级单位</span><br><span class="line">c. [<span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'密码'</span>] 不写表示不修改密码 写上表示授权的同时修改密码</span><br><span class="line">B. 取消用户权限(减少权限)</span><br><span class="line"><span class="keyword">revoke</span> 权限列表 <span class="keyword">on</span> 某库.某对象 <span class="keyword">from</span> <span class="string">"用户名"</span>@<span class="string">'允许登录的地址'</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="数据事务语言-DTL-汇款"><a href="#数据事务语言-DTL-汇款" class="headerlink" title="数据事务语言(DTL)  (汇款)"></a>数据事务语言(DTL)  (汇款)</h2><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">事务只针对与<span class="string">"增删改"</span>语句而言</span><br><span class="line">事务就是用来保证多条<span class="string">"增删改"</span>语句执行的<span class="string">"一致性"</span>,要么都执行完成,要么都没有执行</span><br><span class="line">事务只能使用engine=InnoDB存储引擎</span><br><span class="line">事务特性:</span><br><span class="line">原子性   指一个事务中的操作要么都执行要么都不执行</span><br><span class="line">隔离性   在所有的操作没有执行完毕之前其他会话不能够看到中间改变的过程</span><br><span class="line">一致性   事务发生前和发生后数据的总额依然匹配(数据保持逻辑上的合理性)</span><br><span class="line">持久性   事务产生的影响不能够撤销 如果发生错误只能通过补偿性事务</span><br><span class="line">事务模式</span><br><span class="line">查看事务模式 show <span class="keyword">variables</span> like <span class="comment">"%autocommit%"</span></span><br><span class="line">默认情况下,事务模式是开启的,称为自动提交模式</span><br><span class="line">开启 <span class="keyword">set</span> <span class="comment">autocommit=1</span>或<span class="comment">on</span>  每条增删改语句 都会立即生效</span><br><span class="line">可以手动关闭,非自动提交模式,则需要人为提交</span><br><span class="line">关闭<span class="keyword">set</span> <span class="comment">autocommit=0</span>或<span class="comment">off</span></span><br><span class="line">所有增删改语句 都必须使用commit之后 才能生效</span><br><span class="line">事务执行的基本流程</span><br><span class="line">1.开启一个事务</span><br><span class="line">start <span class="comment">transaction</span> //也可以写成<span class="comment">: begin</span></span><br><span class="line">2.执行多条增删改语句 <span class="comment">//相当于希望这多条语句要作为一个不可分割的整体去执行</span></span><br><span class="line">3.判断这些语句执行的结果情况</span><br><span class="line">if(没有出错)&#123;</span><br><span class="line">  commit;  <span class="comment">//提交事务,此时一次性完成</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  rollback;<span class="comment">//事务回滚,此时就是都没有做</span></span><br><span class="line">&#125;</span><br><span class="line">a.在cmd中  开启事务之后 直接看多条<span class="string">'增删改'</span>是否query ok 都ok则执行 commit;  有一条失败则rollback;</span><br><span class="line">b.在php中</span><br><span class="line">mysql_query(<span class="string">"start transaction"</span>) <span class="comment">//开启事务</span></span><br><span class="line">msyql_query(多条sql语句)</span><br><span class="line"><span class="keyword">if</span>(<span class="symbol">$</span>res1 &amp;&amp; <span class="symbol">$</span>res2 &amp;&amp;....)&#123;</span><br><span class="line">  mysql_query(<span class="string">"commit"</span>);</span><br><span class="line">  echo <span class="string">"事务执行成功!所有任务都已完成"</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  mysql_query(<span class="string">"rollback"</span>);</span><br><span class="line">  echo <span class="string">"事务执行失败!数据没有被修改"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Mysql编程"><a href="#Mysql编程" class="headerlink" title="Mysql编程"></a>Mysql编程</h2><ul><li><p>语句块包含符   //相当于js或php中的大括号写法</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[标识符]</span><span class="selector-pseudo">:begin</span></span><br><span class="line">    <span class="comment">//语句.....</span></span><br><span class="line"><span class="selector-tag">end</span> <span class="selector-attr">[标识符]</span>;</span><br></pre></td></tr></table></figure></li><li><p>变量形式</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">A:普通变量</span><br><span class="line">  定义  declare  变量名 类型名 [default 默认值]</span><br><span class="line">  赋值  <span class="keyword">set</span> 变量名 = 值      取值  直接使用变量名</span><br><span class="line">  使用场所 a. 定义函数的内部</span><br><span class="line">            b. 定义存储过程的内部</span><br><span class="line">            c.定义触发器的内部</span><br><span class="line">B:会话变量</span><br><span class="line">  <span class="keyword">set</span> <span class="comment">@</span>变量名<span class="comment"> =</span> 值   //和<span class="comment">php</span>一样 无需定义 直接赋值</span><br><span class="line">  使用场所  基本上任何环境都可以用</span><br><span class="line">C:变量赋值</span><br><span class="line">  a. <span class="keyword">set</span> 变量名<span class="comment"> =</span> 表达式  //针对普通变量 必须先<span class="comment">declare</span>声明</span><br><span class="line">  b. <span class="keyword">set</span> <span class="comment">@</span>变量名<span class="comment"> =</span> 表达式</span><br><span class="line">  c. <span class="keyword">set</span> <span class="comment">@</span>变量名<span class="comment"> :=</span> 表达式</span><br><span class="line">  d. <span class="keyword">set</span> 表达式<span class="comment"> into @</span>变量名</span><br></pre></td></tr></table></figure></li><li><p>存储函数</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">相当于php或js中有返回值的函数 它必须在完成计算后返回单个具体数据值或变量数据</span><br><span class="line">a.  <span class="keyword">create</span> <span class="keyword">function</span> 函数名(形参<span class="number">1</span>,形参<span class="number">2</span>)</span><br><span class="line"><span class="keyword">returns</span> 返回类型</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="comment">#这里写完整的函数语句</span></span><br><span class="line">    <span class="keyword">return</span> XX值;</span><br><span class="line"><span class="keyword">end</span>      <span class="comment">#必须有return语句 返回类型必须和设定的类型一致</span></span><br><span class="line">b.调用函数</span><br><span class="line">可用于<span class="keyword">select</span>语句中  <span class="keyword">select</span> <span class="keyword">now</span>(),函数名(实参<span class="number">1</span>,实参<span class="number">2.</span>.)</span><br><span class="line"><span class="keyword">set</span> @v1 = <span class="keyword">now</span>();       <span class="keyword">set</span> @v2 = 函数名(实参<span class="number">1</span>,实参<span class="number">2.</span>..)</span><br><span class="line">c.删除函数</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">function</span> [<span class="keyword">if</span> <span class="keyword">exists</span>] 函数名;</span><br><span class="line">注: 在函数内部,可以有各种变量和流程控制的使用,也可以有各种增删改的语句</span><br><span class="line">    但不可以有<span class="keyword">select</span>或其他返回结果集的查询类语句,因为函数只返回单个数据</span><br></pre></td></tr></table></figure></li><li><p>存储过程(procedure)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">相当于php或js中没有返回值的函数它只执行不返回单个数据但可以得到(<span class="keyword">select</span>结果集)</span><br><span class="line">a  形式 <span class="keyword">create</span> <span class="keyword">procedure</span> 存储过程名(<span class="keyword">in</span>|<span class="keyword">out</span>|inout 形参<span class="number">1</span> 类型,...)</span><br><span class="line">    delimiter //</span><br><span class="line">    <span class="keyword">create</span> <span class="keyword">procedure</span> insert_get(p1 <span class="built_in">varchar</span>(<span class="number">20</span>),p2 <span class="built_in">varchar</span>(<span class="number">20</span>),p3 tinyint)</span><br><span class="line">    <span class="keyword">begin</span>                   //类型必须和表中的字段一致</span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">result</span> <span class="keyword">value</span>(p1,p2,p3);</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">result</span> <span class="keyword">order</span> <span class="keyword">by</span> score <span class="keyword">desc</span> <span class="keyword">limit</span> <span class="number">0</span>,<span class="number">3</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    //</span><br><span class="line">    注: <span class="keyword">in</span> 用于设定该变量是用来<span class="string">"接受实参数据"</span>的 即传入 默认是<span class="keyword">in</span></span><br><span class="line">        <span class="keyword">out</span> 用于设定该变量是用来存储存储过程中的数据的,即传出 函数必须对它赋值</span><br><span class="line">        inout 是<span class="keyword">in</span>和<span class="keyword">out</span>的结合 具有双向作用</span><br><span class="line">        对于<span class="keyword">out</span>和inout设定,对应的参数 就必须是一个变量,要用于接受传出数据</span><br><span class="line">    <span class="keyword">create</span> <span class="keyword">procedure</span> insert_get1(<span class="keyword">in</span> p1 <span class="built_in">varchar</span>(<span class="number">20</span>),<span class="keyword">out</span> p2 <span class="built_in">varchar</span>(<span class="number">20</span>),inout p3 tinyint)</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">set</span> p2=<span class="keyword">concat</span>(<span class="string">"建"</span>,p1);</span><br><span class="line">    <span class="keyword">set</span> p3=p3+<span class="number">5</span>;</span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">result</span> <span class="keyword">values</span>(p1,p2,p3);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">set</span> @s3=<span class="number">80</span>    //设定变量并赋值</span><br><span class="line">    <span class="keyword">call</span> insert_get1(<span class="string">'筑'</span>,@s2,@s3);  //调用存储过程 out和inout对应的必须是变量</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">result</span>;  //查看插入结果</span><br><span class="line">b 调用存储过程  有<span class="keyword">select</span>则返回结果集</span><br><span class="line">  <span class="keyword">call</span> insert_get(<span class="string">"周七"</span>,<span class="string">"高数"</span>,<span class="number">91</span>)</span><br><span class="line">c 删除存储过程</span><br><span class="line">  <span class="keyword">drop</span> <span class="keyword">procedure</span> 存储名</span><br><span class="line">在php中使用存储函数或存储过程</span><br><span class="line">调用存储函数</span><br><span class="line">$<span class="keyword">sql</span>=<span class="string">"insert into tab1 values(null,now(),func1($v1,$v2))"</span></span><br><span class="line">调用存储过程</span><br><span class="line">$<span class="keyword">sql</span>=<span class="string">"call insert_user($v1,$v2,$v3)"</span></span><br><span class="line">调用又返回结果集的存储过程</span><br><span class="line">$<span class="keyword">sql</span>=<span class="string">"call get_user_info($id)"</span></span><br></pre></td></tr></table></figure></li><li><p>触发器(trigger)  在数据库 对应表下可以看到</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">也是一段预先定义好的编程代码,不能调用,而是在某个表发生(增删改)</span><br><span class="line">事件的时候,会自动触发</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> 触发器名 触发时机 触发事件 <span class="keyword">on</span> 表名 <span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    //触发器的内部语句</span><br><span class="line"><span class="keyword">end</span>    //在执行之前先要用delimiter更改语句结束符</span><br><span class="line">说明: <span class="number">1.</span>触发时机 在某个事件发生之前还是之后触发   <span class="keyword">before</span>  <span class="keyword">after</span></span><br><span class="line">      <span class="number">2.</span>触发事件 表上的什么事件发生的时候  <span class="keyword">insert</span> <span class="keyword">update</span> <span class="keyword">delete</span></span><br><span class="line">      <span class="number">3.</span>特殊的关键字</span><br><span class="line">        <span class="keyword">old</span>  代表当前正要执行<span class="keyword">delete</span>的<span class="string">"旧行数据"</span></span><br><span class="line">              old.id  //获得这一旧行数据的任意字段的值</span><br><span class="line">        <span class="keyword">new</span>  代表当前正要执行<span class="keyword">insert</span>或<span class="keyword">update</span>的<span class="string">"新行数据"</span></span><br><span class="line">              new.id  //获得该新插入或更改行的<span class="keyword">id</span>字段的值</span><br><span class="line">触发器的含义 在某个表上进行<span class="keyword">insert</span>/<span class="keyword">update</span>/<span class="keyword">delete</span>之前或之后,会去执行</span><br><span class="line">              其中写好的语句,每个表只有<span class="number">6</span>个情形可能调用该触发器,通常</span><br><span class="line">              用于在对某个表进行增删改操作的时候,需要同时去做另外一</span><br><span class="line">              件事的时候</span><br><span class="line">ex  <span class="keyword">create</span> <span class="keyword">trigger</span> <span class="keyword">max</span> <span class="keyword">after</span> <span class="keyword">insert</span> <span class="keyword">on</span> <span class="keyword">result</span> <span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span></span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">delete</span> <span class="keyword">from</span> maxscore;  <span class="comment">#先删除max表中的数据</span></span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">max</span>(score) <span class="keyword">into</span> @mc <span class="keyword">from</span> <span class="keyword">result</span>;</span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">into</span> maxscore <span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">result</span> <span class="keyword">where</span> score=@mc;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">删除触发器</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">trigger</span> [<span class="keyword">if</span> <span class="keyword">exists</span>] 触发器名</span><br></pre></td></tr></table></figure></li></ul><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul><li><p>Mysql  常用函数</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">1</span><span class="selector-class">.concat</span>(<span class="string">'a'</span>,<span class="string">'b'</span>..)  连接多个字符串</span><br><span class="line"><span class="selector-tag">2</span><span class="selector-class">.now</span>()              获取当前时间</span><br></pre></td></tr></table></figure></li><li><p>如何备份某个数据库的所有表<br><code>mysqldump -u 用户名 -p 数据库名 &gt; e:\\文件名.sql</code></p></li><li>如何备份库的表<br><code>mysqldump –u 用户名 –p密码 数据库 表1 表2 表3.. &gt; d:\\文件名.sql</code></li><li><p>如何备份数据库,会多 CREATE DATABASE 语句.<br><code>mysqldump –u 用户名 –p密码 –B 数据库1 数据库2 .. &gt; d:\\文件名.sql</code></p></li><li><p>恢复数据库[以库为单位] <code>Source 文件名.sql</code></p></li><li>恢复数据库[以表为单位] <code>use 某个库 Source 文件名.sql</code></li></ul>]]></content>
      
      
      <categories>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>mysql基本用法</title>
      <link href="/mysql%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/"/>
      <url>/mysql%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p><code>MySQL</code>是一个关系型数据库管理系统,属于<code>Oracle</code>旗下产品。<code>MySQL</code> 是最流行的关系型数据库管理系统之一.<code>MySQL</code>所使用的<code>SQL</code>语言是用于访问数据库的最常用标准化语言.<code>MySQL</code>特点: 体积小、速度快、成本低，开源免费.<br><a id="more"></a></p><h2 id="mysql安装"><a href="#mysql安装" class="headerlink" title="mysql安装"></a>mysql安装</h2><ul><li><a href="http://www.mysql.com" target="_blank" rel="noopener">下载MySQL</a></li><li><a href="https://blog.csdn.net/bobo553443/article/details/81383194" target="_blank" rel="noopener">安装参考链接</a></li><li>配置环境变量 <code>path路径添加D:\PHP\mysql\bin</code></li></ul><h2 id="常用数据库"><a href="#常用数据库" class="headerlink" title="常用数据库"></a>常用数据库</h2><ul><li><code>DB2、Oracle、SQL Server、Mysql、Access、MangoDB</code>等</li><li>常用图形化管理工具 <code>phpmyadmin navicat SQLyog</code>等</li></ul><h2 id="结构化查询语句"><a href="#结构化查询语句" class="headerlink" title="结构化查询语句"></a>结构化查询语句</h2><ul><li><code>数据定义语言(DDL)</code> 用于定义数据对象,包括数据库,数据表 create drop alter</li><li><code>数据操作语言(DML)</code> 用于操作数据库对象中所包含的数据 insert update delete</li><li><code>数据查询语言(DQL)</code> 用于查询数据,进行单表,连接,嵌套查询 并将数据返回 select</li><li><code>数据控制语言(DCL)</code> 用来管理数据库,包含管理权限及数据更改 grant remove rollback</li><li><code>数据事务语言(DTL)</code> 用来保证多条”增删改”语句执行的”一致性” start transaction</li></ul><h2 id="启动-停止mysql服务"><a href="#启动-停止mysql服务" class="headerlink" title="启动/停止mysql服务"></a>启动/停止mysql服务</h2><ul><li>命令行模式 <code>net start/stop nysql</code></li><li>控制面板-&gt;管理工具-&gt;服务-&gt;mysql-&gt;启动/停止</li></ul><h2 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h2><ul><li>连接数据库      <code>mysql -h 服务器主机地址 -u 用户名 -p 回车后输入密码 -P3306</code></li><li>退出数据库      <code>exit或quit</code></li><li>查看所有数据库  <code>show databases</code></li><li>创建数据库      <code>create database [if not exists] stu charset utf8 [collate 排序规则]</code></li><li>删除数据库      <code>drop  database [if exists] stu(必须指定删除那个数据库)</code></li><li>显示数据库的创建语句 <code>show create database test;</code></li><li>修改数据库 修改字符编码 修改排序规则 <code>alter database 数据库名 charset 新的编码名 collate 新的排序规则</code></li><li>选择数据库      <code>use stu</code></li></ul><h2 id="表的操作"><a href="#表的操作" class="headerlink" title="表的操作"></a>表的操作</h2><p><code>操作表时, 首先得先选择要操作的数据 即 use xxx数据库名</code></p><ul><li>创建一张表      <code>create table stu_mess(id int,name char(20))</code></li><li>查看库下所有表  <code>show tables</code></li><li>查看表结构      <code>desc stu_mess</code></li><li>插入数据        <code>insert into</code></li><li>查询数据        <code>select * from stu_mess</code></li><li>更新数据        <code>update stu_mess set name=&#39;lisi&#39;,age=&#39;19&#39; where id=5</code></li><li>删除数据        <code>delete from stu_mess where id=2</code><br><code>注:使用update更新数据或使用delete删除数据时,必须加条件限制(where),否则会更改或删除所有列</code></li><li>重命名表        <code>rename table 表名1 to 表名2 同 alter table 表名 rename to 新表名</code></li><li>清空表数据      <code>truncate books 同 delete form books (谨慎使用)</code></li><li>删除表          <code>drop table [if exists] 表名</code></li><li>显示数据表的创建语句  <code>show create table 表名</code></li><li>创建表时 对该表的整体设定<ul><li>charset=要使用的字符编码</li><li>engine=要使用的存储引擎(也叫表类型) 指表中的数据以何种方式存放在文件或内存中</li><li>auto_increment=10001 自增字段的初始值</li><li>comment=”对该表的说明文字”</li></ul></li></ul><h2 id="表中插入数据"><a href="#表中插入数据" class="headerlink" title="表中插入数据"></a>表中插入数据</h2><ul><li>插入单行数据<ul><li>方式一  <code>insert into book values(所有字段必须有值)</code></li><li>方式二  <code>insert into book(列1,列2) values(&quot;值一&quot;,&quot;值二&quot;)</code></li><li>方式三  <code>insert into book select * from 其他表 (两表的字段必须对应)</code></li></ul></li><li>插入多行数据<ul><li>方式四  <code>insert into book values(101,&#39;mysql&#39;,55),(102,&#39;php&#39;,33)</code></li><li>方式五  <code>insert into book select &#39;103&#39;,&#39;css&#39;,&#39;77&#39; union select &#39;104&#39;,&#39;html&#39;,&#39;88&#39;</code><br><code>注:方式二可以只给需要赋值的字段插入数据,还可以按自定义字段顺序赋值 (列与值必须严格对应)  数字可以不加引号,但字符和时间必须加单引号 方式五 最后一行不加union 每个select 之间不能写逗号  插入数据时可以使用md5()对密码进行加密后 不可逆</code></li></ul></li></ul><h2 id="修改表字段"><a href="#修改表字段" class="headerlink" title="修改表字段"></a>修改表字段</h2><ul><li>添加字段        <code>alter table 表名 add 新字段名 字段类型</code></li><li>修改字段并改名  <code>alter table 表名 change 旧字段名 新字段名 新字段类型</code></li><li>修改字段属性    <code>alter table 表名 modify 字段名 新字段类型</code></li><li>删除字段        <code>alter table 表名 drop 字段名</code></li><li>添加字段默认值  <code>alter table 表名 alter 字段名 set default 默认值</code></li><li>删除字段默认值  <code>alter table 表名 alter 字段名 drop default</code></li><li>修改表选项      <code>alter table 表名 选项1=值1,选项2=值2.....</code></li><li>从已有表复制表结构 <code>create table if not exists 新表名 like 旧表名</code></li></ul><h2 id="表的数据类型"><a href="#表的数据类型" class="headerlink" title="表的数据类型"></a>表的数据类型</h2><ol><li><p>数值型</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">在整型数据列后面加上unsigned  禁止负数 声明时可以指定显示长度</span><br><span class="line">整型      tinyint   smallint mediuint  int  bigint</span><br><span class="line">          <span class="number">1</span>字节      <span class="number">2</span>字节    <span class="number">3</span>字节  <span class="number">4</span>字节  <span class="number">8</span>字节</span><br><span class="line">默认是有符号 tinyint <span class="number">-128</span>~<span class="number">127</span> smallint <span class="number">-32768</span>~<span class="number">32768</span></span><br><span class="line">            int <span class="number">-2147483648</span>~<span class="number">2147483647</span> <span class="number">1</span>字节=<span class="number">2</span>^<span class="number">8</span>(<span class="number">8</span>位)</span><br><span class="line">浮点型</span><br><span class="line"><span class="type">float</span>(M,D) <span class="number">10</span>^<span class="number">38</span> M&lt;=<span class="number">24</span> <span class="number">4</span>字节 否则占<span class="number">8</span>字节 有精度损失 精度只有<span class="number">6</span>位左右</span><br><span class="line">double(M,D)  使用<span class="number">8</span>字节存储 精度更高</span><br><span class="line">m一共几位(总位数),d小数点后保留几位</span><br><span class="line">decimal(M,D) 变长字节  也可写成 numeric fixed dec</span><br><span class="line">把整数部分和小数部分,分开存储的 比<span class="type">float</span>精度更高</span><br><span class="line">适合存储货币等要求精确的数字</span><br></pre></td></tr></table></figure></li><li><p>字符型</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">char</span><span class="params">(m)</span></span>    定长字符串 长度不够右侧空格填充  (自助餐)</span><br><span class="line">          取出数据时,再把后面的空格去掉,如果后面有空格 将会丢失</span><br><span class="line">          char长度范围是<span class="number">0</span>~<span class="number">255</span> 默认为<span class="number">1</span></span><br><span class="line"><span class="function"><span class="title">varchar</span><span class="params">(m)</span></span> 可变长度 长度取决于实际存放在列中的值(内容)的长度</span><br><span class="line">          如果存储中文gbk 则最多存<span class="number">65533</span>/<span class="number">2</span>个字符</span><br><span class="line">          如果存储中文utf8 则最多存<span class="number">65533</span>/<span class="number">3</span>个字符</span><br><span class="line">          长度范围是<span class="number">0</span>~<span class="number">65535</span> char比varchar更快</span><br><span class="line">text 存大段文本    区分大小写</span><br><span class="line">bolb 存大段二进制  不区分大小写 常用来存储图像,音频等二进制信息</span><br><span class="line"><span class="function"><span class="title">enum</span><span class="params">(<span class="string">'val1'</span>,<span class="string">'val2'</span>)</span></span>   枚举类型 只能选择其中的一个(最多<span class="number">65535</span>个)</span><br><span class="line">注:插值时可以直接写值,也可以用集合中的索引 <span class="number">0</span> 代表 <span class="string">''</span> <span class="number">1</span> <span class="string">'男'</span> <span class="number">2</span> <span class="string">'女'</span></span><br><span class="line"><span class="function"><span class="title">set</span><span class="params">(<span class="string">'val1'</span>,<span class="string">'val2'</span>,..)</span></span> 集合类型 可以选择多个(最多<span class="number">64</span>个)</span><br><span class="line">注:插值时也可用索引但索引是从<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">16</span>,....<span class="number">64</span>最多(可用多个选项的索引和)</span><br></pre></td></tr></table></figure></li><li><p>日期型</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Year 年 <span class="number">1990</span></span><br><span class="line">date YYYY-MM-DD 表示日期 可用分隔符多种</span><br><span class="line"><span class="selector-tag">time</span> (H:<span class="selector-tag">i</span>:s)  表示时分秒</span><br><span class="line"><span class="function"><span class="title">datetime</span><span class="params">(<span class="number">1990</span>-<span class="number">12</span>-<span class="number">10</span> H:i:s)</span></span></span><br><span class="line">timestamp  YYMMDDhhmmss 格式的时间戳 插入或更新时自动获取当前时间时间戳</span><br><span class="line"><span class="function"><span class="title">now</span><span class="params">()</span></span> 获取当前时间</span><br><span class="line">注:在时间日期类型中 在自己给定的情况下 需使用单引号或用now()函数</span><br></pre></td></tr></table></figure></li><li><p>null</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">null</span>意味着没有值或未知值 可以插入表中 但是查询时 不能用=判断 必须用</span><br><span class="line"><span class="keyword">is</span> <span class="literal">null</span> 或 <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span> 来判断 也不能对<span class="literal">null</span>进行算术运算</span><br><span class="line">对<span class="literal">null</span>值进行运算 其结果都为<span class="literal">null</span> 在mysql中 <span class="number">0</span>和<span class="literal">null</span> 被看作假其他为真</span><br></pre></td></tr></table></figure></li><li><p>数据字段属性</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.unsigned无符号 只能用在数值型中 且unsigned必须放在数值型后面</span><br><span class="line"><span class="number">2</span><span class="selector-class">.zerofill</span> 该数字不足参数M位时,数值前面自动补<span class="number">0</span> 补够M位 只能用在数值型中</span><br><span class="line">  XXXint(M) 如果没有zerofill属性 单独的参数M 没有任何意义</span><br><span class="line">  如果设置某列为zerofill 则该列自动应用unsigned 无符号类型</span><br><span class="line"><span class="number">3</span><span class="selector-class">.auto_increment</span> 只能用于整数数据每增加一条会自动增加<span class="number">1</span>不允许重复</span><br><span class="line">                  自动增长为以前出现过的加<span class="number">1</span></span><br><span class="line"><span class="number">4</span>.null和not null 默认是否为空  查询不便,索引效果不高</span><br><span class="line"><span class="number">5</span>.default()      默认值</span><br><span class="line"><span class="number">6</span><span class="selector-class">.comment</span> <span class="string">'字段说明文字'</span> 备注 不会在表中显示</span><br><span class="line">  注:表数据的优化 定长与变长分离 常用与不常用分离</span><br></pre></td></tr></table></figure></li></ol><h2 id="索引与约束"><a href="#索引与约束" class="headerlink" title="索引与约束"></a>索引与约束</h2><ul><li><p>索引列表</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">索引时系统内部自动维护的隐藏的数据表 作用是极大的加快的查找速度</span><br><span class="line">建立索引其实是指定一个表的某个或某些字段的作为索引数据字段</span><br><span class="line">索引类型(要建立的索引的字段名)  共同作用(加快查找速度)</span><br><span class="line"><span class="number">1.</span>普通索引 <span class="type">key</span>(字段名)</span><br><span class="line">            <span class="section">email</span> varchar(<span class="number">20</span>) ,<span class="type">key</span>(<span class="section">email</span>)</span><br><span class="line"><span class="number">2.</span>唯一索引 unique <span class="type">key</span>(字段名)  设定其字段的值不能重复(唯一性)</span><br><span class="line">            username varcahr(<span class="number">20</span>),unique <span class="type">key</span>(username)</span><br><span class="line"><span class="number">3.</span>主键索引 primary <span class="type">key</span>(字段名) 区分表中的任何一行数据</span><br><span class="line">            id int not null auto_increment,primary <span class="type">key</span>(id)</span><br><span class="line"><span class="number">4.</span>全文索引 fulltext(字段名)</span><br><span class="line"><span class="number">5.</span>外键索引 foreign [constrian 外建名] <span class="type">key</span>(字段名) references 其他表(对应字段名)</span><br><span class="line">外键就是指设定表student的字段classId的值必须在另一个表class中的某个classId中存在(主键),在student插入</span><br><span class="line">数据时, classId字段的值,就不可以随便插入,必须在class表classId字段已存在值才可以添加,否则会报错</span><br></pre></td></tr></table></figure></li><li><p>约束</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">约束  就是要求数据需要满足什么条件的规定</span><br><span class="line"><span class="number">1.</span>主键约束 primary <span class="type">key</span>(字段名)</span><br><span class="line"><span class="number">2.</span>唯一约束 unique <span class="type">key</span>(字段名)</span><br><span class="line"><span class="number">3.</span>外键约束 foreign <span class="type">key</span>(字段名) references 其他表(对应字段名)</span><br><span class="line"><span class="number">4.</span>非空约束 not null 设定not null属性</span><br><span class="line"><span class="number">5.</span>检查约束 check(age&gt;=<span class="number">0</span> and age&lt;=<span class="number">100</span>) 在mysql目前不支持</span><br><span class="line">主键约束,唯一约束,外键约束同时也被称为主键索引,唯一索引,外键索引只是同一件</span><br><span class="line">事情按不同的角度的两种说法 <span class="number">1.</span>查找角度 有了索引查找快 <span class="number">2.</span>数据要求,满足规定</span><br></pre></td></tr></table></figure></li></ul><h2 id="mysql查询语句"><a href="#mysql查询语句" class="headerlink" title="mysql查询语句"></a>mysql查询语句</h2><ul><li><p>基本查询</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> [<span class="keyword">all</span>(默认) <span class="keyword">distinct</span>] 字段或表达式或函数 [<span class="keyword">from</span> 表] [<span class="keyword">where</span>子句] [<span class="keyword">group</span> <span class="keyword">by</span>子句]</span><br><span class="line">        [<span class="keyword">having</span>子句] [<span class="keyword">order</span> <span class="keyword">by</span>子句] [<span class="keyword">limit</span>子句]</span><br><span class="line">a.列出要查询的字段,可以用<span class="keyword">as</span>为字段起别名(关键字,多表查询)</span><br><span class="line">b.使用<span class="keyword">distinct</span>取消重复的数据,返回没有重复所有数据 <span class="keyword">all</span>不取消重复行(默认)</span><br><span class="line">①条件 <span class="keyword">where</span> 表达式 <span class="literal">true</span>或<span class="literal">false</span> <span class="literal">false</span>取不出来结果 针对磁盘的数据(固有数据)</span><br><span class="line">        比较运算符 &lt; &lt;= = !=或&lt;&gt; &gt;= &gt;</span><br><span class="line">        逻辑运算符 <span class="keyword">not</span>或!  <span class="keyword">or</span>或||  <span class="keyword">and</span>或&amp;&amp; (符号的不推荐)</span><br><span class="line">        布尔值和<span class="literal">null</span>  XX <span class="keyword">is</span> <span class="literal">true</span> XX <span class="keyword">is</span> <span class="literal">false</span> XX <span class="keyword">is</span> <span class="literal">null</span>  XX <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line">        <span class="keyword">in</span>(n,m)在某集合内 (常用散列值)       <span class="keyword">not</span> <span class="keyword">in</span>不在某集合内</span><br><span class="line">        <span class="keyword">between</span>  <span class="keyword">and</span>  在某个范围内   <span class="keyword">not</span> <span class="keyword">between</span> <span class="keyword">and</span>  不在某个范围之内</span><br><span class="line">        <span class="keyword">like</span> <span class="string">""</span>  模糊匹配  (%匹配任意字符,_匹配单个字符) 对于含% 或 _的  需要转义\</span><br><span class="line">②分组 <span class="keyword">group</span> <span class="keyword">by</span>分组使用 一般要配合聚合函数(<span class="built_in">avg</span>()<span class="built_in">sum</span>()<span class="built_in">max</span>()<span class="built_in">min</span>()<span class="built_in">count</span>(*)行数)</span><br><span class="line">                        把行按某列(字段)进行分组</span><br><span class="line">        <span class="built_in">count</span>(*) 每一组的数量的信息 哪怕都为<span class="literal">null</span> 也计算在内</span><br><span class="line">        <span class="keyword">select</span> <span class="built_in">count</span>(列名) <span class="keyword">from</span> 表名 查询该列不为<span class="literal">null</span>的所有行的行数</span><br><span class="line">③筛选 <span class="keyword">having</span> 对分组之后的数据结果集进行筛选  一般与<span class="keyword">as</span>一起使用(主要用于结果集中)</span><br><span class="line">        <span class="keyword">where</span>  对原始数据进行筛选</span><br><span class="line">④排序 <span class="keyword">order</span> <span class="keyword">by</span> 将前面取得的数据以设定的字段排序     默认升序(<span class="keyword">asc</span>) 降序<span class="keyword">desc</span></span><br><span class="line">                把行按某列(字段)进行排序  多列排序 <span class="keyword">order</span> <span class="keyword">by</span> 字段<span class="number">1</span> <span class="keyword">asc</span>,字段<span class="number">2</span> <span class="keyword">desc</span></span><br><span class="line">⑤限制 <span class="keyword">limit</span> <span class="keyword">order</span> <span class="keyword">by</span> price <span class="keyword">limit</span> len 一般和<span class="keyword">order</span> <span class="keyword">by</span>一起配合使用</span><br><span class="line">        或<span class="keyword">limit</span> n,m 从n开始取m个(注意n从<span class="number">0</span>开始) 跳过n个</span><br><span class="line">  注: 顺序 <span class="keyword">where</span>,<span class="keyword">group</span> <span class="keyword">by</span>,<span class="keyword">having</span>,<span class="keyword">order</span> <span class="keyword">by</span>,<span class="keyword">limit</span> 顺序不能颠倒</span><br></pre></td></tr></table></figure></li><li><p>子查询</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">① where子查询  内层的查询结果作为外层的查询条件</span><br><span class="line">    <span class="keyword">select</span> goods_id,cat_id,goods_nmae <span class="keyword">from</span> goods <span class="keyword">where</span> goods_id <span class="keyword">in</span></span><br><span class="line">    (<span class="keyword">select</span> <span class="built_in">max</span>(goods_id) <span class="keyword">from</span> goods <span class="keyword">group</span> <span class="keyword">by</span> cat_id)</span><br><span class="line">    使用 <span class="keyword">in</span>(列子查询)  在某个范围内  使用 &gt; = &lt; 等运算符</span><br><span class="line">    使用 <span class="keyword">any</span>(列子查询)(<span class="keyword">some</span>) 当某字段对于子查询中任意一个值满足比较运算 则就算满足条件</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> tab1 <span class="keyword">where</span> id &gt; <span class="keyword">any</span>(<span class="keyword">select</span> f1 <span class="keyword">from</span> tab2)</span><br><span class="line">    使用 <span class="keyword">all</span>(列子查询) 当某字段对于子查询中所有值满足比较运算 才能算满足条件</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> tab2 <span class="keyword">where</span> f1 &gt; <span class="keyword">all</span>(<span class="keyword">select</span> id <span class="keyword">from</span> tab1)</span><br><span class="line">② <span class="keyword">from</span>子查询   将内层的查询结果当成一张新表</span><br><span class="line">    <span class="keyword">select</span> goods_id,cat_id,goods_name <span class="keyword">from</span>(</span><br><span class="line">          <span class="keyword">select</span> * <span class="keyword">from</span> goods <span class="keyword">order</span> <span class="keyword">by</span> cat_id,goods_id <span class="keyword">desc</span>) <span class="keyword">group</span> <span class="keyword">by</span> cat_id</span><br><span class="line">③ exist子查询</span><br><span class="line">    <span class="keyword">where</span> <span class="keyword">exists</span>(子查询) 子查询如果有数据 则<span class="keyword">exists</span>结果为<span class="literal">true</span>,否则为<span class="literal">false</span></span><br><span class="line">    要么全部取出,要么都不取出</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> catgory <span class="keyword">where</span> exist(</span><br><span class="line">          <span class="keyword">select</span> * <span class="keyword">from</span> goods <span class="keyword">where</span> goods.cat_id=catgroy.cat_id)</span><br></pre></td></tr></table></figure></li><li><p>连接查询</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">将两个或两个以上的表,连接起来 当作一个数据源,并从中取得所需要的字段</span><br><span class="line">①交叉连接 (笛卡尔积)</span><br><span class="line">  没有条件只是将所有数据行连接起来的结果</span><br><span class="line">  表1(n1个字段,n2行)  表2(m1个字段,m2行)  交叉连接结果 有n1+m1列 有n2+m2行</span><br><span class="line">  <span class="keyword">select</span> * <span class="keyword">from</span> 表一,表二   <span class="keyword">select</span> * <span class="keyword">from</span> 表一 <span class="keyword">join</span> 表二</span><br><span class="line">②内连接查询 两表都有的相关数据则取出 交集</span><br><span class="line">  将在两表交叉连接之后的结果集中取得满足给定的连接条件的数据行,此连接条件通常是</span><br><span class="line">  表与表之间的外键关系.</span><br><span class="line"><span class="keyword">select</span> xx <span class="keyword">from</span> table1 <span class="keyword">inner</span> jion table2 <span class="keyword">on</span> table1.xx=table2.xx</span><br><span class="line">  <span class="keyword">select</span> xx <span class="keyword">from</span> table1,table2 <span class="keyword">where</span>  table1.xx=table2.xx</span><br><span class="line">③左连接查询 以左表数据为准 查询右边的相关数据,查不到的补<span class="literal">null</span></span><br><span class="line">  <span class="keyword">select</span> xx <span class="keyword">from</span> table1 <span class="keyword">left</span> jion table2 <span class="keyword">on</span> table1.xx=table2.xx</span><br><span class="line">④右连接查询 以右表数据为准 查询左边的相关数据,查不到的补<span class="literal">null</span></span><br><span class="line">  <span class="keyword">select</span> xx <span class="keyword">from</span> table1 <span class="keyword">right</span> jion table2 <span class="keyword">on</span> table1.xx=table2.xx</span><br></pre></td></tr></table></figure></li><li><p>联合查询union</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">就是把<span class="number">2</span>条或多条sql的查询结果合并成一个结果集</span><br><span class="line">满足条件 每条语句取出的列数(字段)必须相同</span><br><span class="line"><span class="number">1</span>.完全相等的行将会被合并</span><br><span class="line"><span class="number">2</span>.列名称未必要一致 列名称会使用第一条sql的列名称为准</span><br><span class="line"><span class="number">3</span>.合并比较耗时 所以一般用 <span class="class"><span class="keyword">union</span> <span class="title">all</span> 可以避免合并</span></span><br><span class="line"><span class="number">4</span>.<span class="keyword">union</span>子句 写order by完全没意义 合并后的结果可以用order by</span><br><span class="line"><span class="number">5</span>.如果第一个<span class="keyword">select</span>语句中有别名,则order by子句中就必须使用该别名</span><br><span class="line"><span class="keyword">select</span> 语句<span class="number">1</span> <span class="class"><span class="keyword">union</span> [<span class="title">all</span>|<span class="title">distinct</span>(默认)] <span class="title">select</span> 语句2</span></span><br><span class="line">注:一个查询需求,可以使用连接查询,也可以使用子查询得到,通常用连接查询,效率更高</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>nvm、nrm和yarn的安装与使用</title>
      <link href="/nvm%E4%B8%8Enrm%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
      <url>/nvm%E4%B8%8Enrm%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>当我们同时在进行多个项目，而多个不同的项目所使用的<code>node</code>版本又是不一样的，或者是要用更新的<code>node</code>版本进行试验和学习。这种情况下，对于维护多个版本的<code>node</code>将会是一件非常麻烦的事情，而<code>nvm</code>就是为解决这个问题而产生的，他可以方便的在同一台设备上进行<code>多个node版本之间切换</code>，而这个正是<code>nvm</code>的价值所在。<br><a id="more"></a></p><h3 id="nvm下载"><a href="#nvm下载" class="headerlink" title="nvm下载"></a>nvm下载</h3><p>github上下载最新版本<a href="https://github.com/coreybutler/nvm-windows/releases" target="_blank" rel="noopener">nvm</a></p><ul><li>nvm-noinstall.zip： 这个是绿色免安装版本，但是使用之前需要配置</li><li>nvm-setup.zip：这是一个安装包，下载之后点击安装，无需配置就可以使用，方便。</li><li>Source code(zip)：zip压缩的源码</li><li>Sourc code(tar.gz)：tar.gz的源码，一般用于*nix系统</li></ul><h3 id="nvm安装"><a href="#nvm安装" class="headerlink" title="nvm安装"></a>nvm安装</h3><p>安装方式特别简单,一路next就行. 安装完成命令行输入<code>nvm</code> 查看,如果出现nvm版本号和一系列帮助指令，则说明nvm安装成功(需要先配置)</p><h3 id="nvm修改配置"><a href="#nvm修改配置" class="headerlink" title="nvm修改配置"></a>nvm修改配置</h3><p>在安装目录下找到settings.txt文件,打开后加上以下两句,将npm镜像改为淘宝的镜像，可以提高下载速度。<br>node_mirror: <a href="https://npm.taobao.org/mirrors/node/" target="_blank" rel="noopener">https://npm.taobao.org/mirrors/node/</a><br>npm_mirror: <a href="https://npm.taobao.org/mirrors/npm/" target="_blank" rel="noopener">https://npm.taobao.org/mirrors/npm/</a><br><img src="/image/nvm/nvm.png" alt="nvm"></p><h3 id="nvm使用"><a href="#nvm使用" class="headerlink" title="nvm使用"></a>nvm使用</h3><ul><li><code>nvm version</code>或<code>nvm v</code> 显示当前运行的nvm本版本</li><li><code>nvm list</code>或<code>nvm ls</code> 显示所有已安装的node.js版本.</li><li><code>nvm use &lt;version&gt;</code> 切换到指定的node.js版本</li></ul><p><img src="/image/nvm/nvm1.png" alt="nvm"></p><ul><li><code>nvm install &lt;version&gt;</code> 安装需要的node.js版本.</li><li><code>nvm uninstall &lt;version&gt;</code>  卸载指定的node.js</li><li><code>nvm list available</code> 显示可下载node.js版本的部分列表</li></ul><p><img src="/image/nvm/nvmlist.png" alt="nvm"></p><h3 id="nrm是npm镜像源地址切换工具"><a href="#nrm是npm镜像源地址切换工具" class="headerlink" title="nrm是npm镜像源地址切换工具"></a>nrm是npm镜像源地址切换工具</h3><ol><li>全局安装 <code>npm install -g nrm</code></li><li><p>查看当前可选的镜像源 <code>nrm ls</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">npm</span> <span class="bullet">----</span> <span class="attr">https://registry.npmjs.org/</span></span><br><span class="line"><span class="string">cnpm</span> <span class="meta">---</span> <span class="attr">http://r.cnpmjs.org/</span></span><br><span class="line"><span class="string">taobao</span> <span class="bullet">-</span> <span class="attr">https://registry.npm.taobao.org/</span></span><br><span class="line"><span class="string">nj</span> <span class="bullet">-----</span> <span class="attr">https://registry.nodejitsu.com/</span></span><br><span class="line"><span class="string">npmMirror</span>  <span class="attr">https://skimdb.npmjs.com/registry/</span></span><br><span class="line"><span class="string">edunpm</span> <span class="bullet">-</span> <span class="attr">http://registry.enpmjs.org/</span></span><br></pre></td></tr></table></figure></li><li><p>切换镜像源 <code>nrm use taobao</code> 可在.npmrc查看到</p></li><li><code>nrm test</code> 测试各个源的链接时间</li><li><code>npm uninstall nrm -g</code>  卸载nrm</li></ol><h3 id="yarn的使用"><a href="#yarn的使用" class="headerlink" title="yarn的使用"></a>yarn的使用</h3><ul><li>安装 <code>npm i -g yarn</code></li><li>初始化 <code>yarn init 或 yarn init -y</code></li><li>安装项目依赖 <code>yarn add axios 或 yarn add axios -S 或 yarn add axios --save</code></li><li>安装开发依赖 <code>yarn add less --dev 或 yarn add less -D</code></li><li>卸载依赖 <code>yarn remove less</code></li><li>安装全部依赖 <code>yarn 或 yarn install</code></li></ul>]]></content>
      
      
      <categories>
          
          <category> node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nvm </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>koa2简单使用</title>
      <link href="/koa2/"/>
      <url>/koa2/</url>
      
        <content type="html"><![CDATA[<p><code>Koa</code>是一个新的web框架，由<code>Express</code>幕后的原班人马打造，致力于成为<code>web</code>应用和<code>API</code>开发领域中的一个更小、更富有表现力、更健壮的基石。通过利用<code>async</code>函数，<code>Koa</code>帮你丢弃回调函数，并有力地增强错误处理。<code>Koa</code>并没有捆绑任何中间件，而是提供了一套优雅的方法，帮助您快速而愉快地编写服务端应用程序。<br><a id="more"></a></p><h2 id="kao1与koa2区别"><a href="#kao1与koa2区别" class="headerlink" title="kao1与koa2区别"></a>kao1与koa2区别</h2><ul><li>koa1 依赖于 generator生成器函数</li><li>koa2 基于 async和await<h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2></li><li>安装 <code>npm i koa</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 体验koa helloworld</span></span><br><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">'koa'</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa() <span class="comment">// 生成服务器实例</span></span><br><span class="line"><span class="comment">// ctx 是 koa的应用上下文  next 就是串联中间件的钩子函数</span></span><br><span class="line">app.use(<span class="keyword">async</span> (ctx,next) =&gt; &#123;</span><br><span class="line">  ctx.body = <span class="string">'hello world'</span></span><br><span class="line">&#125;)</span><br><span class="line">app.listen(<span class="number">3000</span>)</span><br><span class="line"><span class="comment">// 浏览器访问 localhost:3000 页面输出 hello world</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="koa核心对象"><a href="#koa核心对象" class="headerlink" title="koa核心对象"></a>koa核心对象</h2><ul><li><code>application</code> <code>web服务类</code></li><li><code>context</code>     <code>http上下文</code></li><li><code>request</code>     <code>http请求对象</code></li><li><code>response</code>    <code>http响应对象</code></li></ul><h2 id="koa中间件"><a href="#koa中间件" class="headerlink" title="koa中间件"></a>koa中间件</h2><ul><li>在koa一切的流程都是中间件</li><li>http请求都会流经预先配置好middleware中</li><li>在中间件的执行策略中使用compose将中间件组合在一起依次执行，通过next将控制权向下传递</li><li>每个中间件都会拿到http请求的上下文context<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./middleware/path.js 定义中间件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">path</span>(<span class="params">ctx</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(ctx.path, <span class="string">'path'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">    path(ctx)</span><br><span class="line">    <span class="keyword">await</span> next() <span class="comment">// 必须要有 next()</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// app.js 引入并使用中间件</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'./middleware/path'</span>)</span><br><span class="line">app.use(path())</span><br></pre></td></tr></table></figure></li></ul><h2 id="koa-views-与-pug模板结合使用"><a href="#koa-views-与-pug模板结合使用" class="headerlink" title="koa-views 与 pug模板结合使用"></a>koa-views 与 pug模板结合使用</h2><ul><li>npm i pug -S</li><li>npm i koa-views -S<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">'koa'</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa()</span><br><span class="line"><span class="keyword">const</span> views = <span class="built_in">require</span>(<span class="string">'koa-views'</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; resolve &#125; = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line">app.use(views(resolve(__dirname, <span class="string">'./views'</span>),&#123;</span><br><span class="line">  extension: <span class="string">'pug'</span></span><br><span class="line">&#125;))</span><br><span class="line">app.use(<span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">  <span class="keyword">await</span> ctx.render(<span class="string">'index'</span>, &#123;</span><br><span class="line">    you: <span class="string">'Luke'</span>,</span><br><span class="line">    me: <span class="string">'Scott'</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">app.listen(<span class="number">3333</span>)</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// views/index.pug</span></span><br><span class="line">html(lang=<span class="string">"en"</span>)</span><br><span class="line">  head</span><br><span class="line">    meta(charset=<span class="string">"UTF-8"</span>)</span><br><span class="line">    meta(name=<span class="string">"viewport"</span>, content=<span class="string">"width=device-width, initial-scale=1.0"</span>)</span><br><span class="line">    meta(http-equiv=<span class="string">"X-UA-Compatible"</span>, content=<span class="string">"ie=edge"</span>)</span><br><span class="line">    title Document</span><br><span class="line">    link(rel=<span class="string">"stylesheet"</span>, href=<span class="string">"https://cdn.bootcss.com/twitter-bootstrap/4.1.0/css/bootstrap.min.css"</span>)</span><br><span class="line">  body</span><br><span class="line">    .container</span><br><span class="line">      .row</span><br><span class="line">        .col-md<span class="number">-8</span></span><br><span class="line">          h1 Hi #&#123;you&#125;</span><br><span class="line">          p This is #&#123;me&#125;</span><br><span class="line">        .col-md<span class="number">-4</span></span><br><span class="line">          p 测试动态 Pug 模板</span><br></pre></td></tr></table></figure><h2 id="puppeteer爬虫"><a href="#puppeteer爬虫" class="headerlink" title="puppeteer爬虫"></a>puppeteer爬虫</h2><ul><li>npm i puppeteer -S<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> url = <span class="string">`https://movie.douban.com/tag/#/?sort=U&amp;range=7,10&amp;tags=`</span></span><br><span class="line"><span class="keyword">const</span> puppeteer = <span class="built_in">require</span>(<span class="string">'puppeteer'</span>)</span><br><span class="line"><span class="keyword">const</span> sleep = <span class="function"><span class="params">time</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">  setTimeout(resolve, time)</span><br><span class="line">&#125;)</span><br><span class="line">!<span class="function">(<span class="params"><span class="keyword">async</span> (</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'target page'</span>)</span><br><span class="line">  <span class="keyword">const</span> browser = <span class="keyword">await</span> puppeteer.launch(&#123;</span><br><span class="line">    args: [<span class="string">'--no-sandbox'</span>],</span><br><span class="line">    dumpio: <span class="literal">false</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> page = <span class="keyword">await</span> browser.newPage()</span><br><span class="line">  <span class="keyword">await</span> page.goto(url, &#123;</span><br><span class="line">    waitUntil: <span class="string">'networkidle2'</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> sleep(<span class="number">3000</span>)</span><br><span class="line">  <span class="keyword">await</span> page.waitForSelector(<span class="string">'.more'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">await</span> sleep(<span class="number">3000</span>)</span><br><span class="line">    <span class="keyword">await</span> page.click(<span class="string">'.more'</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> page.evaluate(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> items = $(<span class="string">'.list-wp a'</span>)</span><br><span class="line">    <span class="keyword">var</span> links = []</span><br><span class="line">    <span class="keyword">if</span> (items.length &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">      items.each(<span class="function">(<span class="params">index, item</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> doubanId = $(item).find(<span class="string">'div'</span>).data(<span class="string">'id'</span>)</span><br><span class="line">        <span class="keyword">let</span> title = $(item).find(<span class="string">'.title'</span>).text()</span><br><span class="line">        <span class="keyword">let</span> rate = <span class="built_in">Number</span>($(item).find(<span class="string">'.rate'</span>).text())</span><br><span class="line">        <span class="keyword">let</span> poster = $(item).find(<span class="string">'img'</span>).attr(<span class="string">'src'</span>).replace(<span class="string">'s_ratio'</span>, <span class="string">'l_ratio'</span>)</span><br><span class="line">        links.push(&#123; doubanId, title, rate, poster &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> links</span><br><span class="line">  &#125;)</span><br><span class="line">  browser.close()</span><br><span class="line">  <span class="built_in">console</span>.log(result)</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure></li></ul><h2 id="koa-router-路由"><a href="#koa-router-路由" class="headerlink" title="koa-router 路由"></a>koa-router 路由</h2><ul><li>npm i koa-router 安装路由<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 项目目录新建router/index.js</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">'koa-router'</span>) <span class="comment">// 引入 koa-router</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> router() <span class="comment">// 初始化 router</span></span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>) <span class="comment">// 引入mongoose</span></span><br><span class="line">app.get(<span class="string">'/movies/all'</span>, <span class="keyword">async</span> (ctx, next) =&gt; &#123; <span class="comment">// 定义路由</span></span><br><span class="line">  <span class="keyword">const</span> Movie = mongoose.model(<span class="string">'Movie'</span>) <span class="comment">// 得到电影模型实例</span></span><br><span class="line">  <span class="keyword">const</span> movies = <span class="keyword">await</span> Movie.find(&#123;&#125;).sort(&#123; <span class="comment">//查询所有movie并排序</span></span><br><span class="line">    <span class="string">'meta.createdAt'</span>: <span class="number">-1</span></span><br><span class="line">  &#125;)</span><br><span class="line">  ctx.body = &#123; movies &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 2. 入口文件 index.index 使用router中间件</span></span><br><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">'koa'</span>)</span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">'./router'</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa()</span><br><span class="line"><span class="comment">// 引入路由</span></span><br><span class="line">app.use(router.routes()).use(router.allowedMethods())</span><br><span class="line"><span class="comment">// 3. 浏览器测试路由 localhost:3000/movies/all</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="koa-generator"><a href="#koa-generator" class="headerlink" title="koa-generator"></a>koa-generator</h2><ul><li>安装 <code>npm i -g koa-generator</code></li><li>创建项目  <code>koa2 project</code></li><li>启动项目 <code>npm run dev|npm start</code></li></ul><h2 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h2><ul><li>设置cookie <code>ctx.cookies.set(&#39;timer&#39;, new Date().getTime())</code></li><li>获取cookie <code>ctx.cookies.get(&#39;timer&#39;)</code><h2 id="session"><a href="#session" class="headerlink" title="session"></a>session</h2></li></ul>]]></content>
      
      
      <categories>
          
          <category> node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> koa2 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>移动端混合开发</title>
      <link href="/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/"/>
      <url>/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<p>目前市场上主流的APP分为三种：原生APP、Web APP（即HTML5）和混合APP三种，相对应的定制开发就是原生开发、H5开发和混合开发。原生开发（Native App开发），是在Android、IOS等移动平台上利用提供的开发语言、开发类库、开发工具进行App软件开发。HTML5应用开发，是利用Web技术进行的App开发。Web技术本身需要浏览器的支持才能进行展示和用户交互，因此主要用到的技术是HTML5、Javascript、CSS等。混合开发（Hybrid App开发），是指在开发一款App产品的时候，为了提高效率、节省成本而利用原生与H5的开发技术的混合应用。<br><a id="more"></a></p><h3 id="主流应用程序大体分为三类"><a href="#主流应用程序大体分为三类" class="headerlink" title="主流应用程序大体分为三类"></a>主流应用程序大体分为三类</h3><ul><li><code>Web App</code> 采用<code>Html5</code>语言写出的<code>web App</code>，不需要下载安装,存在浏览器中的应用,开发成本低，<br>，更新快，不需要手动升级。 但无法获取使用系统功能，设计受限制诸多，体验较差。</li><li><code>Hybrid App</code> 半原生半<code>Web</code>的混合类<code>App</code>, 使用<code>webview</code>作为容器,来承载一个<code>web</code>页面。 可以快速进行迭代更新，无需审核，体验流畅。</li><li><code>Native App</code> 原生程序，一般依托于操作系统，有很强的交互，是一个完整的App，可拓展性强。需要用户下载安装使用，性能稳定，操作速度快，用户体验好。 但维护和开发成本高，更新缓慢，上线流程较复杂。<blockquote><p>混合开发: 混合了Native(原生)技术和web技术进行开发移动应用的开发模式.</p></blockquote><h3 id="常见混发开发框架"><a href="#常见混发开发框架" class="headerlink" title="常见混发开发框架"></a>常见混发开发框架</h3><code>ReactNative，Weex，Flutter，小程序开发，移动应用混合开发框架，PWA</code><br>使用Vue配合Android、IOS的跨语言通讯原理</li></ul><h3 id="流行的混发开发方案"><a href="#流行的混发开发方案" class="headerlink" title="流行的混发开发方案"></a>流行的混发开发方案</h3><ul><li>基于JS + WebView渲染(JSBridge)<br>通过webview渲染UI,JSBridge给webview提供常用原生功能如: 摄像头、GPS、通信录等</li><li>基于JS + Native UI(ReactNative、Weex)<br>开发技术仍然使用 JS 等 Web 元素，但 UI 渲染、动画、网络等都通过原生实现。JS 到原生的调用通过 JS 桥接器实现。</li><li>小程序方案(微信、支付宝小程序)</li><li>快应用</li></ul><h3 id="Hybrid-App-适用场景"><a href="#Hybrid-App-适用场景" class="headerlink" title="Hybrid App 适用场景"></a>Hybrid App 适用场景</h3><ul><li>使用Native: 体验要求到极致,变化不频繁(如APP首页)</li><li>使用Hybrid: 体验要求高, 变化迭代频繁(如详情页)</li></ul><h3 id="Hybrid-App"><a href="#Hybrid-App" class="headerlink" title="Hybrid App"></a>Hybrid App</h3><blockquote><p><code>Hybrid</code>本质是在原生<code>(Native)App</code>中,使用<code>webview</code>作为容器,来承载一个<code>web</code>页面<br><code>Hybrid</code>核心是原生<code>(Native)</code>和<code>web</code>端的双向通讯层(跨语言解决方案)<code>JSBridge</code><br><code>JSBridge</code>:用<code>javascript</code>链接<code>web</code>和<code>Native</code>的桥,目的是让Native可以调用web的javascript代码,让web可以调用Native的原生代码</p></blockquote><p><code>原生端调用web方法,web方法必须是挂载到web端window对象下面的方法</code><br><code>构建JSBridge对象, JSBridge字符串会被挂载到网页的window对象下面</code></p><ul><li><code>webview</code>是app的一个组件, 用于加载h5页面, 是一个小型的浏览器内核</li><li><code>file</code>协议就是打开本地文件,加载快</li><li>Hybrid 具体实现<ol><li>前端将做好的静态页面文件交给客户端</li><li>客户端将静态页面文件,以本地文件形式存储在app中</li><li>客户端在一个webview中使用file协议加载静态页面</li></ol></li><li>Hybrid 更新流程<ol><li>前端将更新的静态文件上传到服务端server</li><li>客户端去服务端server下载最新静态文件</li><li>前端只需要维护server上的静态文件</li></ol></li></ul><h3 id="JS和客户端通信"><a href="#JS和客户端通信" class="headerlink" title="JS和客户端通信"></a>JS和客户端通信</h3><ul><li>JS和客户端通讯的基本方式<br><code>JS 访问客户端能力, 传递参数和回调函数</code><br><code>户端通过回调函数返回内容</code></li><li>schema协议使用和封装<br><code>schema协议--前端和客户端通讯的约定</code></li></ul><h3 id="其他Hybird-App"><a href="#其他Hybird-App" class="headerlink" title="其他Hybird App"></a>其他Hybird App</h3><p>`PhoneGap，APPcan，DCloud(mui)，wex5，APIcloud(aui)</p>]]></content>
      
      
      <categories>
          
          <category> 移动端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 移动端 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>node服务端开发</title>
      <link href="/node%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
      <url>/node%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<p><code>Node.js</code>在server服务端开发常用模块，<code>HTTP模块</code>处理客户端的网络请求，<code>URL模块</code>用于处理与解析请求的URL， <code>Query Strings模块</code>处理客户端通过<code>get/post</code>请求传递过来的参数，<code>Path模块</code>文件路径处理服务，<code>stream</code>处理body提交数据，<code>HTTPS模块</code> 是基于TLS/SSL的HTTP协议，<code>File System模块</code>服务端操作文件或图片资源等，<code>Net模块</code>用于创建基于流的TCP或IPC的服务器。<br><a id="more"></a></p><h2 id="nodejs的真正用途"><a href="#nodejs的真正用途" class="headerlink" title="nodejs的真正用途"></a>nodejs的真正用途</h2><ul><li>运行在服务器, 作为web server</li><li>运行在本地 作为打包 构建工具</li></ul><h2 id="npm-i-g-nodemon-监视文件改动，自动重启-nodemon-xx-js"><a href="#npm-i-g-nodemon-监视文件改动，自动重启-nodemon-xx-js" class="headerlink" title="npm i -g nodemon 监视文件改动，自动重启   nodemon xx.js"></a>npm i -g nodemon 监视文件改动，自动重启   nodemon xx.js</h2><h2 id="创建http服务器"><a href="#创建http服务器" class="headerlink" title="创建http服务器"></a>创建http服务器</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入核心对象http</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"><span class="comment">// 创建服务</span></span><br><span class="line"><span class="keyword">const</span> server = http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// req IncomingMessage类的实例的对象，提供当前请求的客户端信息</span></span><br><span class="line">  <span class="comment">// res ServerResponse类的实例对象，提供响应的相关方法</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// console.log( req.httpVersion ); // 查看http版本</span></span><br><span class="line">  <span class="comment">// console.log( req.method ); // 请求方法</span></span><br><span class="line">  <span class="comment">// console.log( req.headers ); // 请求头</span></span><br><span class="line">  <span class="comment">// console.log( req.url ); // 请求地址</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 设置并写入头信息</span></span><br><span class="line">  <span class="comment">// res.writeHead(状态码, 状态码描述, 头信息)</span></span><br><span class="line">  res.writeHead(<span class="number">200</span>, http.STATUS_CODES[<span class="number">200</span>], &#123;</span><br><span class="line">    <span class="string">'Content-Type'</span>: <span class="string">'text/html;charset=utf-8'</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 设置头信息</span></span><br><span class="line">  <span class="comment">// res.setHeader(头信息名称, 值);</span></span><br><span class="line">  <span class="comment">// res.getHeader(头信息名称);  // 获取某个请求头</span></span><br><span class="line">  <span class="comment">// res.removeHeader(头信息名称); // 删除某个请求头</span></span><br><span class="line">  <span class="comment">// 头信息的写入与设置必须在res的write、end之前</span></span><br><span class="line">  res.setHeader(<span class="string">'Content-Type'</span>, <span class="string">'text/html;charset=utf-8'</span>)</span><br><span class="line">  res.end()</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 监听端口及主机</span></span><br><span class="line">server.listen(<span class="number">4004</span>, () =&gt; &#123; <span class="built_in">console</span>.log(<span class="string">'listening on port 4004'</span>) &#125;)</span><br></pre></td></tr></table></figure><h2 id="server端开发注意事项"><a href="#server端开发注意事项" class="headerlink" title="server端开发注意事项"></a>server端开发注意事项</h2><ul><li>服务稳定性 <code>避免恶意攻击和误操作 服务端不能随便挂掉</code> PM2进城守候</li><li>考虑内存和CPU(优化,扩展) <code>服务端承载很多请求 CPU和内存都是稀缺资源</code> stream写日志 使用redis存session</li><li>日志记录 <code>服务端记录日志 存储日志 分析日志</code></li><li>安全 <code>服务端要防止xss攻击和sql注入</code></li><li>集群和服务拆分 <code>服务拆分来承载大流量</code></li></ul><p>##</p>]]></content>
      
      
      <categories>
          
          <category> node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>node基础(二)</title>
      <link href="/node%E5%9F%BA%E7%A1%80(%E4%BA%8C)/"/>
      <url>/node%E5%9F%BA%E7%A1%80(%E4%BA%8C)/</url>
      
        <content type="html"><![CDATA[<p><code>Node.js</code> 开发方向,<code>GUI</code>(图形用户界面 ), <code>CLI</code>(命令行界面), <code>server</code>(提供服务), CLI常用第三方工具: <code>commander</code>(命令行开发工具), <code>chalk</code>(命令行样式风格控制器),<code>inquirer</code>(交互式命令行工具). GUI开发桌面级应用第三方工具: <code>NW.JS</code>, <code>Electron</code><br><a id="more"></a></p><h2 id="开发方向"><a href="#开发方向" class="headerlink" title="开发方向"></a>开发方向</h2><ul><li><code>GUI-Graphical User Interface</code>：图形用户界面<br><code>office、vscode、浏览器、播放器……</code></li><li><code>CLI-Command-Line Interface</code>：命令行界面，也称为 CUI，字符用界面<br><code>虽然没有GUI操作直观，但是CLI更加节省计算机资源（所以一般用于服务器环境）babel、tsc / webpack / vue-cli</code></li><li><code>Server</code> - 服务提供（Web Server、IM……）<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">command：命令，比如 vue</span><br><span class="line"><span class="string">[subCommand]</span>：子命令，比如 vue create</span><br><span class="line"><span class="string">[options]</span>：选项，配置，同一个命令不同选项会有不一样的操作结果，比如 vue -h，vue -v, 选项一般会有全拼与简写形式 全拼：以 -- 开头 / 简写：以 - 开头</span><br><span class="line"><span class="string">[arguments]</span>：参数，某些命令需要使用的值，比如 vue create myApp</span><br><span class="line">选项与参数的区别：选项是命令内置实现，用户进行选择，参数一般是用户决定传入的值</span><br></pre></td></tr></table></figure></li></ul><h2 id="CLI常用第三方框架"><a href="#CLI常用第三方框架" class="headerlink" title="CLI常用第三方框架"></a>CLI常用第三方框架</h2><h5 id="commander-命令行开发工具"><a href="#commander-命令行开发工具" class="headerlink" title="commander 命令行开发工具"></a>commander 命令行开发工具</h5><ul><li><code>commander.parse(argv: string[])</code><br>  解析执行传入的 argv 命令字符串，通常改命令字符串来自用户在命令行的输入，process.argv， commander 同时会默认创建一个 -h, –help 的选项</li><li><code>commander.version(str, flags?)</code><br>  设置版本信息，该方法会自动为命令注册一个 -V,  –version 的 option， str：版本号，flags：指定的 option，默认为：”-V, –version”</li><li><code>commander.option(flags, description?, fn?, defaultValue?)</code><br>  设置命令选项，flags 中的格式可以接收参数，[] 可选 &lt;&gt; 必填</li><li><code>commander.action(fn)</code><br>指定命令要执行的动作行为，该函数执行过程会接收到至少一个参数<br>  如果命令中带有参数，则是对应的参数列表，参数的最后一个永远都是 commander 实例</li><li><code>commander.description(str)</code> 命令描述</li><li><code>commander.alias(str)</code> 设置命令别名</li><li><code>commander.usage(str)</code> 设置或获取当前命令的使用说明</li></ul><h5 id="chalk-命令行样式风格控制器"><a href="#chalk-命令行样式风格控制器" class="headerlink" title="chalk 命令行样式风格控制器"></a>chalk 命令行样式风格控制器</h5><ul><li>安装 <code>npm i chalk / yarn add chalk</code></li><li>引入 <code>const chalk = require(&#39;chalk&#39;)</code></li><li>使用 <code>console.log(chalk.blue(&#39;Hello world!&#39;))</code></li><li><code>chalk.hex(&#39;#DEADED&#39;), chalk.keyword(&#39;orange&#39;) ,chalk.rgb(15, 100, 204)</code></li></ul><h5 id="inquirer-交互式命令行工具"><a href="#inquirer-交互式命令行工具" class="headerlink" title="inquirer 交互式命令行工具"></a>inquirer 交互式命令行工具</h5><ul><li>安装 <code>npm i inquirer</code></li><li>使用 <code>require(&#39;inquirer&#39;)  inquirer.prompt(questions).then(answers=&gt;{})</code></li><li><code>questions(type, name, message, default, choices, validate, filter)</code></li><li><code>type: 提问类型，input, confirm, list, rawlist, expand, checkbox, password, editor</code></li></ul><h2 id="GUI-图形用户界面-桌面应用"><a href="#GUI-图形用户界面-桌面应用" class="headerlink" title="GUI 图形用户界面(桌面应用)"></a>GUI 图形用户界面(桌面应用)</h2><blockquote><p>GUI 图形用户界面(桌面应用),使用<code>JavaScript</code>, <code>HTML</code>和<code>CSS</code>构建跨平台的桌面应用</p></blockquote><p>基于Node.js的GUI框架  <a href="https://nwjs.org.cn/" target="_blank" rel="noopener">NW.JS</a> 或 <a href="https://electronjs.org/" target="_blank" rel="noopener">Electron</a></p>]]></content>
      
      
      <categories>
          
          <category> node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>移动端常见问题(二)</title>
      <link href="/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98(%E4%BA%8C)/"/>
      <url>/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98(%E4%BA%8C)/</url>
      
        <content type="html"><![CDATA[<p>WEB前端开发中，除了对PC端浏览器进行各浏览器兼容，移动端页面中<code>android</code>端和<code>ios</code>端的页面兼容也是有很多问题，特此整理一下遇到过的或者可能遇到的常见问题。<br><a id="more"></a></p><h2 id="1-解决页面使用overflow-scroll在iOS上滑动卡顿的问题"><a href="#1-解决页面使用overflow-scroll在iOS上滑动卡顿的问题" class="headerlink" title="1. 解决页面使用overflow: scroll在iOS上滑动卡顿的问题"></a>1. 解决页面使用overflow: scroll在iOS上滑动卡顿的问题</h2><p><code>在滚动的容器中增加:  -webkit-overflow-scrolling: touch</code></p><h2 id="2-input输入框ios的光标问题"><a href="#2-input输入框ios的光标问题" class="headerlink" title="2. input输入框ios的光标问题"></a>2. input输入框ios的光标问题</h2><p>在ios上有时候看到光标和输入的文字错位比较明显  是因为设置了<code>line-height</code>导致的<br><code>解决办法: 使用padding去撑开需要的高度,不使用line-height</code></p><h2 id="3-移动端click事件300ms的延迟"><a href="#3-移动端click事件300ms的延迟" class="headerlink" title="3. 移动端click事件300ms的延迟"></a>3. 移动端click事件300ms的延迟</h2><p>移动设备上的web网页是有300ms延迟的，往往会造成按钮点击延迟甚至是点击失效<br><code>解决方案:</code></p><ul><li><code>fastclick</code>插件可以解决在手机上点击事件的300ms延迟</li><li>使用<code>zepto</code>的tap事件也是为了解决在click的延迟问题</li><li>通过绑定<code>ontouchstart事件,touchstart --&gt; touchmove --&gt; touchend --&gt; click</code></li></ul><h2 id="4-在ios和andriod中-audio元素和video元素在无法自动播放"><a href="#4-在ios和andriod中-audio元素和video元素在无法自动播放" class="headerlink" title="4. 在ios和andriod中,audio元素和video元素在无法自动播放"></a>4. 在ios和andriod中,audio元素和video元素在无法自动播放</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'html'</span>).one(<span class="string">'touchstart'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    audio.play()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="5-如何在手机上实现弹出框弹出时，弹出框内可以上下滚动，背后的页面锁定不能滚动？"><a href="#5-如何在手机上实现弹出框弹出时，弹出框内可以上下滚动，背后的页面锁定不能滚动？" class="headerlink" title="5. 如何在手机上实现弹出框弹出时，弹出框内可以上下滚动，背后的页面锁定不能滚动？"></a>5. 如何在手机上实现弹出框弹出时，弹出框内可以上下滚动，背后的页面锁定不能滚动？</h2><p><code>弹出模态框 html,body{ height:100%; overflow:hidden }</code><br><code>关闭模态框 html,body{ overflow: visble }</code></p><h2 id="6-flex：固定宽度-flex：1-之后单行或多行省略不生效-在父级加-min-width：0"><a href="#6-flex：固定宽度-flex：1-之后单行或多行省略不生效-在父级加-min-width：0" class="headerlink" title="6. flex：固定宽度+flex：1 之后单行或多行省略不生效  在父级加 min-width：0"></a>6. flex：固定宽度+flex：1 之后单行或多行省略不生效  在父级加 min-width：0</h2><h2 id="7-ios的input设置disabled属性后默认样式问题"><a href="#7-ios的input设置disabled属性后默认样式问题" class="headerlink" title="7. ios的input设置disabled属性后默认样式问题"></a>7. ios的input设置disabled属性后默认样式问题</h2><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span>:disabled, <span class="selector-tag">input</span><span class="selector-attr">[disabled]</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span> : <span class="number">#fff</span>;   <span class="comment">//修改默认灰色样式</span></span><br><span class="line">  <span class="attribute">filter</span>: alpha(opacity=<span class="number">100</span>);</span><br><span class="line">  -webkit-text-fill-<span class="attribute">color</span>:<span class="number">#bbb</span>; <span class="comment">//字体颜色安卓与IOS适配</span></span><br><span class="line">  -webkit-<span class="attribute">opacity</span>:<span class="number">1</span>;   <span class="comment">// 不透明级别安卓与IOS适配</span></span><br><span class="line">  <span class="attribute">opacity</span>:<span class="number">1</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#bbb</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="8-ios-input自动填充后出现黄色背景问题"><a href="#8-ios-input自动填充后出现黄色背景问题" class="headerlink" title="8. ios input自动填充后出现黄色背景问题"></a>8. ios input自动填充后出现黄色背景问题</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解决ios浏览器中 input自动填充黄色背景问题</span></span><br><span class="line"><span class="selector-tag">input</span>:-webkit-autofill,<span class="selector-tag">input</span>:-webkit-autofill:focus&#123;</span><br><span class="line">  <span class="comment">// -webkit-text-fill-color: #fff !important;</span></span><br><span class="line">  <span class="attribute">transition</span>: background-color <span class="number">55000s</span> ease-in-out <span class="number">0s</span>;<span class="comment">//设置5000s后改变填充密码框的背景色，使背景透明</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="9-flex-多列布局中-将最后一列居右显示"><a href="#9-flex-多列布局中-将最后一列居右显示" class="headerlink" title="9. flex 多列布局中 将最后一列居右显示"></a>9. flex 多列布局中 将最后一列居右显示</h2><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// flex 垂直方向 单独设置某一列对象方式时 可以使用 align-self:flex-<span class="keyword">end</span></span><br><span class="line">// 但水平方向是没有这样的属性  但可以使用 margin-<span class="built_in">left</span>: <span class="built_in">auto</span> 来达到单独居右的效果</span><br><span class="line">.btn &#123; margin-<span class="built_in">left</span>: <span class="built_in">auto</span>; &#125;</span><br></pre></td></tr></table></figure><h2 id="10-鉴于clip裁切隐藏是最佳可访问隐藏"><a href="#10-鉴于clip裁切隐藏是最佳可访问隐藏" class="headerlink" title="10. 鉴于clip裁切隐藏是最佳可访问隐藏"></a>10. 鉴于clip裁切隐藏是最佳可访问隐藏</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clip</span>&#123;</span><br><span class="line">   <span class="attribute">position</span>:absolute;</span><br><span class="line">   <span class="attribute">clip</span>:<span class="built_in">rect</span>(0,0,0,0)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="11-ios机型margin属性无效问题？"><a href="#11-ios机型margin属性无效问题？" class="headerlink" title="11. ios机型margin属性无效问题？"></a>11. ios机型margin属性无效问题？</h2><p><code>margin-bottom在safari里失效,直接padding代替margin</code></p><h2 id="12-ios绑定点击事件不执行？-ios手机-事件委托失效"><a href="#12-ios绑定点击事件不执行？-ios手机-事件委托失效" class="headerlink" title="12. ios绑定点击事件不执行？ ios手机,事件委托失效"></a>12. ios绑定点击事件不执行？ ios手机,事件委托失效</h2><p><code>添加样式cursor:pointer 消除背景的css -webkit-tap-highlight-color:transparent</code><br><code>$(&#39;body&#39;).on(&#39;click&#39;,selector,function(){})</code> 点击无效时,只需要css设置 <code>selector { cursor: pointer; }</code>即可</p><h2 id="13-h5底部输入框被键盘遮挡问题"><a href="#13-h5底部输入框被键盘遮挡问题" class="headerlink" title="13. h5底部输入框被键盘遮挡问题"></a>13. h5底部输入框被键盘遮挡问题</h2><ul><li>让dom元素出现在可见视图的顶部或底部<br><code>document.querySelector(&#39;#inputId&#39;).scrollIntoView();</code></li></ul><h2 id="14-ios页面橡皮弹回效果遮挡页面选项卡？"><a href="#14-ios页面橡皮弹回效果遮挡页面选项卡？" class="headerlink" title="14 .ios页面橡皮弹回效果遮挡页面选项卡？"></a>14 .ios页面橡皮弹回效果遮挡页面选项卡？</h2><p>(1) 有时body和html的height: 100%去除掉问题可能就没有了。<br>(2) 到达临界值的时候在阻止事件默认行为<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> startY,endY;</span><br><span class="line"><span class="comment">//记录手指触摸的起点坐标</span></span><br><span class="line">$(<span class="string">'body'</span>).on(<span class="string">'touchstart'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  startY = e.touches[<span class="number">0</span>].pageY;</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">'body'</span>).on(<span class="string">'touchmove'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  endY = e.touches[<span class="number">0</span>].pageY;  <span class="comment">//记录手指触摸的移动中的坐标</span></span><br><span class="line">  <span class="comment">//手指下滑，页面到达顶端不能继续下滑</span></span><br><span class="line">  <span class="keyword">if</span>(endY&gt;startY&amp;&amp; $(<span class="built_in">window</span>).scrollTop()&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//手指上滑，页面到达底部能继续上滑</span></span><br><span class="line">  <span class="keyword">if</span>(endY&lt;startY&amp;&amp; $(<span class="built_in">window</span>).scrollTop()+</span><br><span class="line">    $(<span class="built_in">window</span>).height()&gt;=$(<span class="string">'body'</span>)[<span class="number">0</span>].scrollHeight)&#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h2 id="15-Chrome-中文界面下默认会将小于-12px-的文本强制按照-12px-显示"><a href="#15-Chrome-中文界面下默认会将小于-12px-的文本强制按照-12px-显示" class="headerlink" title="15. Chrome 中文界面下默认会将小于 12px 的文本强制按照 12px 显示"></a>15. Chrome 中文界面下默认会将小于 12px 的文本强制按照 12px 显示</h2><p><code>可通过加入 CSS 属性 -webkit-text-size-adjust: none; 解决</code></p><h2 id="16-屏蔽手机系统自带软键盘-用于自定义键盘"><a href="#16-屏蔽手机系统自带软键盘-用于自定义键盘" class="headerlink" title="16. 屏蔽手机系统自带软键盘(用于自定义键盘)"></a>16. 屏蔽手机系统自带软键盘(用于自定义键盘)</h2><p><code>&lt;input type=&quot;text&quot; autocomplete=&quot;off&quot; unselectable=&quot;on&quot; onpaste=&quot;return false&quot; onfoucs=&quot;this.blur()&quot; /&gt;</code></p>]]></content>
      
      
      <categories>
          
          <category> 移动端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 移动端 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>移动端常见问题(一)</title>
      <link href="/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98(%E4%B8%80)/"/>
      <url>/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98(%E4%B8%80)/</url>
      
        <content type="html"><![CDATA[<p>移动端的开发由于设备的不统一会造成一些兼容性问题，经常会困扰许多<code>web</code>前端开发者，自从接触移动端以来也遇到过很多问题，低端机性能差容易卡顿，<code>h5</code>和<code>css3</code>新的<code>api</code>在低版本兼容性差等。<br><a id="more"></a></p><h2 id="移动端常见的meta标签"><a href="#移动端常见的meta标签" class="headerlink" title="移动端常见的meta标签"></a>移动端常见的meta标签</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 自适应屏幕大小 页面的宽度与设备的宽度保持一致，最大和最小缩放比例是1，且不允许用户点击屏幕放大 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 优先使用最新版本 IE 和 Chrome --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge,chrome=1"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 启用双核浏览器的极速模式(webkit) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"renderer"</span> <span class="attr">content</span>=<span class="string">"webkit"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 禁止手机号码和邮箱自动识别 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"format-detection"</span> <span class="attr">content</span>=<span class="string">"telephone=no, email=no"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 启用 WebApp 全屏模式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-mobile-web-app-capable"</span> <span class="attr">content</span>=<span class="string">"yes"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-touch-fullscreen"</span> <span class="attr">content</span>=<span class="string">"yes"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 不使用缓存 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Cache-Control"</span> <span class="attr">content</span>=<span class="string">"no-cache"</span> /&gt;</span></span><br></pre></td></tr></table></figure><h2 id="移动端常用的css技巧"><a href="#移动端常用的css技巧" class="headerlink" title="移动端常用的css技巧"></a>移动端常用的css技巧</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 去除元素被触摸时产生的半透明灰色遮罩的高亮效果 */</span></span><br><span class="line">*&#123;</span><br><span class="line">  <span class="attribute">-webkit-tap-highlight-color</span>: <span class="built_in">rgba</span>(0,0,0,0)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 禁止文字缩放 */</span></span><br><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">-webkit-text-size-adjust</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 清除输入框内阴影 清除按钮圆角  */</span></span><br><span class="line"><span class="selector-tag">input</span>,<span class="selector-tag">textarea</span>,<span class="selector-tag">select</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">-webkit-appearance</span>: none;</span><br><span class="line">  <span class="attribute">border-radius</span>:<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 移动端禁止选中内容 */</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">-webkit-user-select</span>: none;  <span class="comment">/* Chrome all */</span></span><br><span class="line">  <span class="attribute">-moz-user-select</span>: none;     <span class="comment">/* Firefox all */</span></span><br><span class="line">  <span class="attribute">-ms-user-select</span>: none;      <span class="comment">/* IE 10+ */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 自定义placeholder的颜色 */</span></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">::-moz-placeholder</span>,<span class="selector-tag">textarea</span><span class="selector-pseudo">::-moz-placeholder</span>&#123;<span class="attribute">color</span>:<span class="number">#ccc</span>;&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:-ms-input-placeholder</span>,<span class="selector-tag">textarea</span><span class="selector-pseudo">:-ms-input-placeholder</span>&#123;<span class="attribute">color</span>:<span class="number">#ccc</span>;&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">::-webkit-input-placeholder</span>,<span class="selector-tag">textarea</span><span class="selector-pseudo">::-webkit-input-placeholder</span>&#123;<span class="attribute">color</span>:<span class="number">#ccc</span>;&#125;</span><br><span class="line"><span class="comment">/* 清除浮动 */</span></span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:before</span>,<span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span>&#123;<span class="attribute">content</span>:<span class="string">""</span>;<span class="attribute">display</span>:table;<span class="attribute">clear</span>:both;&#125;</span><br><span class="line"><span class="comment">/* 单行文本省略 */</span></span><br><span class="line"><span class="selector-class">.ellipsis</span>&#123;</span><br><span class="line"><span class="attribute">text-overflow</span>:ellipsis;</span><br><span class="line"><span class="attribute">overflow</span>:hidden;</span><br><span class="line"><span class="attribute">white-space</span>:nowrap;</span><br><span class="line"><span class="attribute">-webkit-text-overflow</span>:ellipsis</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 多行文本省略 */</span></span><br><span class="line"><span class="selector-class">.elli-two</span>&#123;</span><br><span class="line"><span class="attribute">text-overflow</span>: -o-ellipsis-lastline;</span><br><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line"><span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line"><span class="attribute">display</span>: -webkit-box;</span><br><span class="line"><span class="attribute">-webkit-line-clamp</span>: <span class="number">2</span>;</span><br><span class="line"><span class="attribute">-webkit-box-orient</span>: vertical;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*1px边框*/</span></span><br><span class="line"><span class="selector-class">.onepx</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.onepx</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200%</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">pointer-events</span>:none; <span class="comment">/* 屏蔽鼠标事件 */</span></span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(0.5);</span><br><span class="line">  <span class="attribute">-webkit-transform</span>: <span class="built_in">scale</span>(0.5);</span><br><span class="line">  <span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">-webkit-transform-origin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 上下拉动滚动条时卡顿、慢 */</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">-webkit-overflow-scrolling</span>:touch;</span><br><span class="line">  <span class="attribute">overflow-scrolling</span>: touch;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* iphone及ipad下输入框默认内阴影 */</span></span><br><span class="line"><span class="selector-tag">input</span>, <span class="selector-tag">select</span> &#123; <span class="attribute">-webkit-appearance</span>:none; &#125;</span><br><span class="line"><span class="comment">/*  */</span></span><br></pre></td></tr></table></figure><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul><li>拨打电话 <code>&lt;a href=&quot;tel:15509271855&quot;&gt; 请拨打电话1550971855&lt;/a&gt;</code></li><li>发送邮件 <code>&lt;a href=&quot;mailto:tew@163.com&quot;&gt; 请拨打电话1550971855&lt;/a&gt;</code></li><li>长按在移动端执行顺序 <code>touchstart touchmove touchend mousemove mousedown mouseup click</code></li></ul>]]></content>
      
      
      <categories>
          
          <category> 移动端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 移动端 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>node基础(一)</title>
      <link href="/node%E5%9F%BA%E7%A1%80(%E4%B8%80)/"/>
      <url>/node%E5%9F%BA%E7%A1%80(%E4%B8%80)/</url>
      
        <content type="html"><![CDATA[<p><code>Node.js</code> 是一个基于事件驱动、非阻塞I/O的Web服务器,采用<code>Chrome V8</code> 引擎, <code>node.js</code>具有异步I/O处理, 事件与回调函数, 单线程, 跨平台等特点. 优点: 高并发, 适合I/O密集型应用, 缺点: 不适合CPU密集型应用.<br><a id="more"></a></p><h2 id="node安装"><a href="#node安装" class="headerlink" title="node安装"></a>node安装</h2><p><a href="https://nodejs.org" target="_blank" rel="noopener">nodejs下载</a>  <code>注:windows  下载后缀为 .msi  mac 下载后缀为 .pkg</code></p><h2 id="命令行运行node-js文件-node-文件路径"><a href="#命令行运行node-js文件-node-文件路径" class="headerlink" title="命令行运行node.js文件 node 文件路径"></a>命令行运行node.js文件 node 文件路径</h2><h2 id="node特点"><a href="#node特点" class="headerlink" title="node特点"></a>node特点</h2><ul><li>主线程是单线程(异步)<code>callback</code>,将后续的逻辑写成函数,传入当前执行的函数中,当执行的函数<br>得到结果后,执行传入的函数(回调函数)</li><li><code>web</code>中的异步 <code>setTimeout</code> <code>callback</code> <code>onclick</code> <code>ajax</code></li><li><code>i/o操作</code> 读写操作, 异步读写</li><li><code>event-driven</code>  事件驱动(发布订阅)</li></ul><h2 id="nodejs基础篇"><a href="#nodejs基础篇" class="headerlink" title="nodejs基础篇"></a>nodejs基础篇</h2><ul><li>全局对象 <code>global</code> 类似浏览器全局对象<code>window</code>,但<code>node</code>环境中<code>没有window</code></li><li>console对象  <code>console.log()</code>,<code>console.error()</code>,<code>console.warn()</code>等</li><li>__dirname  当前文件(模块)所在目录</li><li>__filename 当前文件(模块)的文件名称(包含文件绝对路径)</li></ul><h2 id="全局变量-可以不声明直接使用"><a href="#全局变量-可以不声明直接使用" class="headerlink" title="全局变量 可以不声明直接使用"></a>全局变量 可以不声明直接使用</h2><ul><li>console</li><li>process 进程 设置环境变量  process.env  process.nextTick()异步</li><li>Buffer 缓冲区</li></ul><h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><blockquote><p>模块化 用来模块化用来分割，组织和打包软件。每个模块完成一个特定的子功能，所有的模块按某种方法组装起来，成为一个整体，完成整个系统所要求的功能</p></blockquote><p>模块化系统  1. 定义模块    2. 模块导入(依赖)   3.模块导出</p><ul><li>一个文件就是一个独立的模块</li><li>模块加载采用同步模式</li><li>通过require函数导入, exports对象导出</li></ul><h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><ul><li>在node中,文件和模块都是一一对应的的,也就是一个文件就是一个模块,每个模块都有自己的作用域<br>,我们通过var声明的变量并非全局而是该模块作用域下的, 外部不能直接访问</li><li>模块的加载和使用 require(‘模块’) 模块的路径可以是绝对路径(/a.js)也可以是相对路径(./a.js)<br><code>模块路径如果没有以/或者./开头,那么这个模块要么是核心模块 要么是node_modules文件夹下</code></li><li>模块加载机制  <code>文件名称 -&gt; .js -&gt; .json -&gt; .node</code><ol><li>首先按照加载的模块的文件名称进行查找</li><li>如果没有找到,则会在文件名称后加上.js的后缀,进行查找</li><li>如果还没有找到,则会在文件名称后加上.json后缀,进行查找</li><li>如果还没有,则会在文件名称后加上.node的后缀,进行查找</li><li>最后还是没找到则会报错     Cannot find module ‘./est’`</li></ol></li><li>如果我们想一个模块能够访问另外一个模块定义的变量,可以用以下方法<ol><li>把变量作为global对象的一个属性值,但是这样的做法不推荐(污染全局变量)</li><li>使用模块对象module下的exports对象将模块中的局部变量对外提供访问</li><li>module.exports === exports 但不要为他们重新赋值</li></ol></li><li>导出 module.exports = xxx</li><li>导入 require(‘xxx’)<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tew/a.js tew/b.js</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">'b.js'</span>)  <span class="comment">// a.js 引入文件 b.js</span></span><br><span class="line"><span class="comment">// tew/index.js</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">'./tew'</span>) <span class="comment">// 引入文件夹时可简写 等同于 require('./tew/index.js')</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="Event-事件"><a href="#Event-事件" class="headerlink" title="Event(事件)"></a>Event(事件)</h2><blockquote><p>事件是整个 Node.js 的核心，Node.js中大部分模块都使用或继承了该模块（类似 WebAPI 中的EventTarget） 使用: require(‘event’)</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">EventEmitter 类</span><br><span class="line">  .emit(eventName[, ...args])</span><br><span class="line">  .addListener(eventName, listener)</span><br><span class="line">  .on(eventName, listener)</span><br><span class="line">  .off(eventName, listener)</span><br><span class="line">  .removeListener(eventName, listener)</span><br></pre></td></tr></table></figure><h2 id="Process-进程"><a href="#Process-进程" class="headerlink" title="Process(进程)"></a>Process(进程)</h2><blockquote><p>process 对象是一个全局变量，它提供当前 Node.js 进程的有关信息，以及控制当前 Node.js 进程, 作为一个全局变量, 无需使用 require()</p></blockquote><ul><li><p>process.argv  属性返回一个数组，其中包含当启动 Node.js 进程时传入的命令行参数。 第一个元素是 process.execPath。 第二个元素将是正在执行的 JavaScript 文件的路径。 其余元素将是任何其他命令行参数。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(process.argv)</span><br><span class="line"><span class="comment">// node process app -i</span></span><br><span class="line">[</span><br><span class="line">  <span class="string">'C:\\Program Files\\nodejs\\node.exe'</span>, <span class="comment">// 执行路劲</span></span><br><span class="line">  <span class="string">'C:\\Users\\Administrator\\Desktop\\tew\\process'</span>, <span class="comment">// 文件路径</span></span><br><span class="line">  <span class="string">'app'</span>, <span class="comment">// 命令行参数</span></span><br><span class="line">  <span class="string">'-i'</span>  <span class="comment">// 命令行参数</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></li><li><p>process.env 属性返回包含用户环境的对象, 如获取或设置node运行的环境变量</p></li><li>process.exit() 可以用来立即退出进程。即使当前有操作没执行完</li><li>process.cwd() 当前的工作目录</li><li>process.stdin或process.stdout 进程的标准输入、标准输出<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">process.stdout.write(<span class="string">'请输入你要创建的项目名称:'</span>)</span><br><span class="line">process.stdin.on(<span class="string">'data'</span>, (e) =&gt; &#123;</span><br><span class="line">  fs.mkdirSync(e.toString().replace(<span class="string">'\r\n'</span>, <span class="string">''</span>))</span><br><span class="line">  process.stdout.write(<span class="string">'项目创建成功'</span>)</span><br><span class="line">  process.exit()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h2 id="Buffer"><a href="#Buffer" class="headerlink" title="Buffer"></a>Buffer</h2><blockquote><p>用于操作二进制数据的类  类似数组 长度固定  只能操作二进制数据<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建</span></span><br><span class="line"><span class="keyword">const</span> buf1 = Buffer.alloc(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">const</span> buf2 = Buffer.from(<span class="string">'buffer'</span>)</span><br><span class="line"><span class="keyword">const</span> buf3 = Buffer.from([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="comment">// 写入</span></span><br><span class="line">buf1.write(<span class="string">'hello'</span>)</span><br><span class="line"><span class="comment">// 读取</span></span><br><span class="line"><span class="built_in">console</span>.log(buf1.toSring())</span><br><span class="line"><span class="comment">// 合并</span></span><br><span class="line">Buffer.concat([buf1, buf3])</span><br></pre></td></tr></table></figure></p></blockquote><ul><li><p>通过长度定义</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> buffer = Buffer.alloc(<span class="number">6</span>)</span><br><span class="line"><span class="built_in">console</span>.log(buffer) <span class="comment">// &lt;Buffer 00 00 00 00 00 00&gt;</span></span><br><span class="line"><span class="keyword">var</span> buffer = Buffer.allocUnsafe(<span class="number">6</span>)</span><br><span class="line"><span class="built_in">console</span>.log(buffer) <span class="comment">// &lt;Buffer 00 00 00 00 4f 00&gt;</span></span><br><span class="line"><span class="built_in">console</span>.log(buffer.length) <span class="comment">// 6</span></span><br></pre></td></tr></table></figure></li><li><p>通过数组定义</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> buffer = Buffer.from(<span class="string">'阿萨达'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(buffer) <span class="comment">// &lt;Buffer e9 98 bf e8 90 a8 e8 be be&gt;</span></span><br><span class="line"><span class="built_in">console</span>.log(buffer.length) <span class="comment">// 9</span></span><br></pre></td></tr></table></figure></li><li><p>字符串创建</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> buffer = Buffer.from([<span class="number">1</span>, <span class="string">'a'</span>, <span class="string">'阿'</span>])</span><br><span class="line"><span class="built_in">console</span>.log(buffer) <span class="comment">// &lt;Buffer 01 00 00&gt;</span></span><br><span class="line"><span class="built_in">console</span>.log(buffer.length) <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></li><li><p>常用buffer方法</p></li><li>buffer.fill()   填充buffer中的内容</li><li>buffer.toString()  将buffer转化为字符串</li><li>buffer.slice()  截取想要的buffer</li><li>buffer.copy()  拷贝buffer</li><li>buffer.concat() 拼接buffer</li><li>buffer.isBuffer() 判断是否是buffer类型</li></ul><h2 id="FileSysterm"><a href="#FileSysterm" class="headerlink" title="FileSysterm"></a>FileSysterm</h2><blockquote><p>fs模块提供了一些与文件系统进行交互的 API,使用需要引入require(‘fs’),fs中的方法都是由同步和异步组成</p></blockquote><ul><li>写入数据到文件 fs.writeFileSync(file, data[, options], callback)</li><li>文件追加内容  fs.appendFileSync(‘./1.txt’, ‘ 我是追加的内容’)</li><li>读取文件内容  content = fs.readFileSync(‘./1.txt’)</li><li>获取文件其他信息  info = fs.statSync(‘./1.txt’)<br><code>常用: info.size 文件大小   info.isFile() 是否是文件  info.isDirectory() 是否是目录</code></li><li>删除文件 fs.unlinkSync(‘1.txt’)</li><li>判断文件、目录是否存在 fs.existsSync(‘./yn’)</li><li>创建目录 不会进行递归创建 fs.mkdirSync(‘./yn’)</li><li>删除目录 fs.rmdirSync(‘./yn’);</li><li><p>读取目录 files = fs.readdirSync(‘../node’)<br><code>文件操作时最好将路径使用path.resovle或path.join转化  且路径中不能有中文否则会报错</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 递归删除文件及目录</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rmAll</span>(<span class="params">dirPath</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (fs.existsSync(dirPath)) &#123; <span class="comment">// 路径或文件是否存在</span></span><br><span class="line">    <span class="keyword">let</span> state = fs.statSync(dirPath) <span class="comment">//读取路径或文件属性</span></span><br><span class="line">    <span class="keyword">if</span> (state.isDirectory()) &#123; <span class="comment">// 是目录</span></span><br><span class="line">      <span class="keyword">let</span> files = fs.readdirSync(dirPath) <span class="comment">//路径信息</span></span><br><span class="line">      files.forEach( <span class="function"><span class="params">child</span> =&gt;</span> &#123;</span><br><span class="line">        rmAll(path.join(dirPath, child))</span><br><span class="line">      &#125;)</span><br><span class="line">      fs.rmdirSync(dirPath) <span class="comment">// 删除文件夹</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(state.isFile())&#123; <span class="comment">// 是文件</span></span><br><span class="line">      fs.unlinkSync(dirPath)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'该文件或文件夹不存在'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">rmAll(<span class="string">'./yn'</span>)</span><br><span class="line"><span class="comment">// 遍历文件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readFile</span>(<span class="params">dirPath</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (fs.existsSync(dirPath)) &#123; <span class="comment">// 路径或文件是否存在</span></span><br><span class="line">    <span class="keyword">let</span> state = fs.statSync(dirPath) <span class="comment">//读取路径或文件属性</span></span><br><span class="line">    <span class="keyword">if</span> (state.isDirectory()) &#123; <span class="comment">// 是目录</span></span><br><span class="line">      <span class="keyword">let</span> files = fs.readdirSync(dirPath) <span class="comment">//路径信息</span></span><br><span class="line">      files.forEach(<span class="function"><span class="params">child</span>=&gt;</span> &#123;</span><br><span class="line">        readFile(path.join(dirPath, child))</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(state.isFile())&#123; <span class="comment">// 是文件</span></span><br><span class="line">      <span class="built_in">console</span>.log(dirPath)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'该文件或文件夹不存在'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">readFile(<span class="string">'../'</span>)</span><br></pre></td></tr></table></figure></li><li><p>更多node文件操作请查看 <a href="http://nodejs.cn/api/fs.html" target="_blank" rel="noopener">Node.js 中文网</a></p></li></ul><h2 id="核心对象path"><a href="#核心对象path" class="headerlink" title="核心对象path"></a>核心对象path</h2><ul><li>引入path <code>const path = require(&#39;path&#39;)</code></li><li>拼接路径 <code>path.join(__dirname,&#39;a&#39;,&#39;b&#39;)</code> c:tew/a/b</li><li>相对路径转绝对路径 <code>path.resovle(&#39;./xxx&#39;)</code></li><li>接收一个合法的路径字符串，转换成一个对象 <code>let pathObj = path.parse(mypath)</code></li><li>接收一个路径对象，转换成一个字符串路径 <code>let str = path.format(pathObj)</code></li><li>取文件后缀名 <code>path.extname(&#39;1.js&#39;)</code></li></ul><h2 id="stream流"><a href="#stream流" class="headerlink" title="stream流"></a>stream流</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rs = fs.createReadStream(<span class="string">'./conf.js'</span>)</span><br><span class="line"><span class="keyword">const</span> ws = fs.createWriteStream(<span class="string">'./conf2.js'</span>)</span><br><span class="line">rs.pipe(ws)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>element初次使用</title>
      <link href="/element%E5%88%9D%E6%AC%A1%E4%BD%BF%E7%94%A8/"/>
      <url>/element%E5%88%9D%E6%AC%A1%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>Element，一套为开发者、设计师和产品经理准备的基于 Vue 2.0 的桌面端组件库，提供了配套设计资源，帮助你的网站快速成型，由饿了么公司前端团队开源。多用于开发PC网站及后台管理系统。<br><a id="more"></a></p><h2 id="Element-UI-入门"><a href="#Element-UI-入门" class="headerlink" title="Element-UI 入门"></a>Element-UI 入门</h2><p>官网地址: <a href="https://element.eleme.cn/#/zh-CN/component/installation" target="_blank" rel="noopener">Element-UI</a></p><h2 id="基本用法-全局引入"><a href="#基本用法-全局引入" class="headerlink" title="基本用法-全局引入"></a>基本用法-全局引入</h2><ul><li>初始化项目 <code>vue create element-test</code></li><li>安装 <code>npm i element-ui -S</code></li><li><p>或在已有项目中全局引入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 项目入口 main.js中引入</span></span><br><span class="line"><span class="keyword">import</span> ElementUI <span class="keyword">from</span> <span class="string">'element-ui'</span></span><br><span class="line">Vue.use(ElementUI) <span class="comment">// 作为插件使用</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'element-ui/lib/theme-chalk/index.css'</span> <span class="comment">// 引入样式</span></span><br></pre></td></tr></table></figure></li><li><p>在组件中使用</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"success"</span> @<span class="attr">click</span>=<span class="string">"show"</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">'app'</span>,</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="undefined">    show() &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.$message.success(<span class="string">'Toast from element-ui'</span>)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p><code>全量引入npm run build打包后vendors体积较大</code></p><h2 id="按需加载"><a href="#按需加载" class="headerlink" title="按需加载"></a>按需加载</h2><ul><li>安装babel-plugin-component <code>npm install babel-plugin-component -D</code></li><li><p>修改 babel.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"presets"</span>: [[<span class="string">"es2015"</span>, &#123; <span class="string">"modules"</span>: <span class="literal">false</span> &#125;]],</span><br><span class="line">  <span class="string">"plugins"</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">"component"</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">"libraryName"</span>: <span class="string">"element-ui"</span>,</span><br><span class="line">        <span class="string">"styleLibraryName"</span>: <span class="string">"theme-chalk"</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在组件中按需引入</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"success"</span> @<span class="attr">click</span>=<span class="string">"show"</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; Button, Message &#125; <span class="keyword">from</span> <span class="string">'element-ui'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">'app'</span>,</span></span><br><span class="line"><span class="undefined">  components: &#123; Button &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="undefined">    show() &#123;</span></span><br><span class="line"><span class="actionscript">      Message.success(<span class="string">'Toast from element-ui'</span>)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="在vue-cli-3-x以上作为插件引用"><a href="#在vue-cli-3-x以上作为插件引用" class="headerlink" title="在vue-cli@3.x以上作为插件引用"></a>在<a href="mailto:vue-cli@3.x" target="_blank" rel="noopener">vue-cli@3.x</a>以上作为插件引用</h2><ul><li>在vue-clie3项目中使用 <code>vue add element</code> 可以看见它在安装 <code>vue-cli-plugin-element</code></li><li>选择引入方式 <code>Fully import 全量引入</code> <code>Import on demand 按需引入</code><br><img src="../image/vue/element1.png" alt="element1"></li><li>安装完成<br><img src="../image/vue/element2.png" alt="element2"></li><li>和自行按需引入一样 引入组件只需要在<code>src/plugins/element.js</code> 中添加你使用到的组件即可<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> &#123; Button, Form, FormItem, Input &#125; <span class="keyword">from</span> <span class="string">'element-ui'</span></span><br><span class="line">Vue.use(Button)</span><br><span class="line">Vue.use(Form)</span><br><span class="line">Vue.use(FormItem)</span><br><span class="line">Vue.use(Input)</span><br></pre></td></tr></table></figure></li></ul><h2 id="表单基本用法"><a href="#表单基本用法" class="headerlink" title="表单基本用法"></a>表单基本用法</h2><ul><li>el-form容器， 通过model绑定数据</li><li>el-form 容器，通过 model 绑定数据</li><li>表单组件通过 v-model 绑定 model 中的数据<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">inline</span> <span class="attr">:model</span>=<span class="string">"data"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"审批人"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"data.user"</span> <span class="attr">placeholder</span>=<span class="string">"审批人"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">'app'</span>,</span></span><br><span class="line"><span class="undefined">  data() &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">      data: &#123; user: <span class="string">'sam'</span>, region: <span class="string">'区域二'</span> &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="表单校验基本用法"><a href="#表单校验基本用法" class="headerlink" title="表单校验基本用法"></a>表单校验基本用法</h2><p><code>定义校验规则，可以绑定到 el-form 或 el-form-item, 只需要通过 rules 属性传入约定的验证规则,并指定 el-form-item 的 prop 属性为需校验的字段名即可</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">inline</span> <span class="attr">:model</span>=<span class="string">"data"</span> <span class="attr">:rules</span>=<span class="string">"rules"</span> <span class="attr">hide-required-asterisk</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"审批人"</span> <span class="attr">prop</span>=<span class="string">"user"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"data.user"</span> <span class="attr">placeholder</span>=<span class="string">"审批人"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"submitForm('ruleForm')"</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"resetForm('ruleForm')"</span>&gt;</span>清空<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">'app'</span>,</span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">      data: &#123; user: <span class="string">'sam'</span>, region: <span class="string">'区域二'</span> &#125;,</span></span><br><span class="line"><span class="undefined">      rules: &#123;</span></span><br><span class="line"><span class="undefined">        user: [</span></span><br><span class="line"><span class="actionscript">          &#123; required: <span class="literal">true</span>, trigger: <span class="string">'change'</span>, message: <span class="string">'用户名必须输入'</span> &#125;,</span></span><br><span class="line"><span class="undefined">          &#123;</span></span><br><span class="line"><span class="javascript">            validator: <span class="function">(<span class="params">rule, value, callback</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">              <span class="keyword">if</span> (value.length &gt; <span class="number">3</span>) &#123; callback() &#125;</span></span><br><span class="line"><span class="javascript">              <span class="keyword">else</span> &#123; callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'用户名长度必须大于3'</span>)) &#125;</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="actionscript">            trigger: <span class="string">'change'</span></span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="undefined">        ]</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 对整个表单进行校验的方法</span></span></span><br><span class="line"><span class="actionscript">    submitForm (formName) &#123; <span class="comment">// 提交验证</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$refs[formName].validate(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span> (valid) &#123;</span></span><br><span class="line"><span class="actionscript">          alert(<span class="string">'submit!'</span>)</span></span><br><span class="line"><span class="actionscript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">'error submit!!'</span>)</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> <span class="literal">false</span></span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 对该表单项进行重置，将其值重置为初始值并移除校验结果</span></span></span><br><span class="line"><span class="actionscript">    resetForm (formName) &#123; <span class="comment">// 清空表单</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.$refs[formName].resetFields()</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="表单相关属性或方法"><a href="#表单相关属性或方法" class="headerlink" title="表单相关属性或方法"></a>表单相关属性或方法</h2><ul><li>label-position：标签位置，枚举值，left right和 top</li><li>label-width：标签宽度</li><li>inline：行内表单</li><li>disabled: 设置整个 form 中的表单组件全部 disabled，优先级低于表单组件自身的 disabled</li><li>hide-required-asterisk：隐藏必须输入红色星号标识`</li><li>inline-message：验证消息是否在一行显示`</li><li>size：设置表单组件尺寸 取值为medium/small/mini</li><li>status-icon：属性为输入框添加了表示校验结果的反馈图标。</li><li>validate(callback): 对整个表单进行校验的方法，参数为一个回调函数</li><li>resetFields(): 对整个表单进行重置，将所有字段值重置为初始值并移除校验结果</li></ul>]]></content>
      
      
      <categories>
          
          <category> element </category>
          
      </categories>
      
      
        <tags>
            
            <tag> element </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>vuex与vue-router</title>
      <link href="/vuex%E4%B8%8Evue-router/"/>
      <url>/vuex%E4%B8%8Evue-router/</url>
      
        <content type="html"><![CDATA[<p><code>vuex</code>和<code>vue-router</code>是<code>vue</code>生态系统中的很重要的两个工具。<code>vuex</code> 是<code>vue</code>用来管理数据状态的一种机制，将Vue中所有的状态（数据）抽离出来进行统一管理。<code>Vue Router</code> 是 <code>Vue.js</code> 官方的路由管理器。它和<code>Vue.js</code>的核心深度集成，让构建单页面应用变得易如反掌，是SPA（单页应用）的路径管理器。<br><a id="more"></a></p><h2 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h2><blockquote><p>Vuex是一个专门为vue.js应用程序开发的状态(数据)管理模式.它采用集中式存储应用的所有组件的状态,并以相应的规则保证状态以一种可预测的方式发生变化.</p></blockquote><p><img src="/image/vue/vuex.png" alt="插值语法"><br>Vuex使用场景：多个视图依赖于同一状态或相同数据， 来自不同视图的行为需要</p><h5 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h5><ul><li><code>npm install vuex -S</code> 安装vuex模块</li><li><code>import Vuex from &#39;vuex&#39;</code> 引入vuex模块</li><li><code>Vue.use(Vuex)</code> 作为插件使用</li><li><code>new Vuex.Store()</code> 定义store容器</li><li><code>new Vue({store})</code> 注入到根实例中<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/store/index.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line">Vue.use(Vuex) <span class="comment">// 将vuex作为插件使用</span></span><br><span class="line"><span class="keyword">let</span> store = <span class="keyword">new</span> Vuex.store(&#123;&#125;) <span class="comment">// 定义store容器</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store <span class="comment">// 将store导出</span></span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store'</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">"#app"</span>,</span><br><span class="line">  store, <span class="comment">// 将store注入到根实例中</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h5 id="Vuex核心概念"><a href="#Vuex核心概念" class="headerlink" title="Vuex核心概念"></a>Vuex核心概念</h5><ul><li>Store 类似容器 包含应用的大部分状态 不建议直接修改state中的状态 使用提交mutations显式修改</li><li><p>State 包含所有应用级别状态的对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义store容器</span></span><br><span class="line"><span class="keyword">let</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123; <span class="attr">conut</span>: <span class="number">10</span> &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 组件内取出状态（数据） hello.vue</span></span><br><span class="line"><span class="keyword">this</span>.$store.state.count</span><br><span class="line"><span class="comment">//</span></span><br></pre></td></tr></table></figure></li><li><p>Getters 对state数据进行处理 在组件内部获取store中的状态函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    shopList: [&#123;</span><br><span class="line">      id: <span class="number">123</span>, <span class="attr">count</span>: <span class="number">20</span></span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      id: <span class="number">124</span>, <span class="attr">count</span>: <span class="number">30</span></span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123; <span class="comment">// gettres可以定义为一个函数</span></span><br><span class="line">    total(state)&#123;</span><br><span class="line">      <span class="keyword">return</span> state.shopList.reduce(<span class="function">(<span class="params">prev, item</span>) =&gt;</span> prev + item.count, <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//xx.vue 中使用</span></span><br><span class="line"><span class="keyword">this</span>.$store.getters.total</span><br></pre></td></tr></table></figure></li><li><p>Mutation vuex的state状态更新的唯一方式提交mutations<br><code>Mutation主要包含两部分 type 字符串的事件类型 handle该回调函数的第一个参数就是state</code><br><code>mutation必须是同步更新状态，不要在mutation中进行异步的操作</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mutations: &#123;</span><br><span class="line">  <span class="comment">// 第一个默认参数是state 第二个参数 payload是commit传递过来的值 可以是对象</span></span><br><span class="line">  updateCount(state, payload)&#123;</span><br><span class="line">    state.count += payload.add</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">methods: &#123;</span><br><span class="line">  <span class="comment">// 修改store中state的数据  提交一个mutations</span></span><br><span class="line">  <span class="comment">// 如果不包含异步操作 可以直接在组建中 使用commit提交mutations</span></span><br><span class="line">  changeState()&#123;</span><br><span class="line">    <span class="keyword">this</span>.$store.commit(<span class="string">'updateCount'</span>, &#123;<span class="attr">add</span>: <span class="number">5</span>&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Action 包含异步操作都放在action里面 提交mutations改变状态<br>context是和store对象具有相同方法和属性的对象，在action中可以通过context进行commit一个mutations操作，也可以获取context.state等。在vue组件中调用 this.$store.dispatch(‘action’)去触发action。可以将异步操作放在一个Promise中，并且成功或者失败后，调用对应的resolve或reject</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// action 中返回一个promise</span></span><br><span class="line">actions: &#123;</span><br><span class="line">  increment(context) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123; <span class="comment">// 异步操作</span></span><br><span class="line">        context.commit(<span class="string">'incrementMutation'</span>)</span><br><span class="line">        resolve()</span><br><span class="line">      &#125;, <span class="number">2000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">methods: &#123;</span><br><span class="line">  incrementHandle()&#123;</span><br><span class="line">    <span class="comment">// 派发action操作</span></span><br><span class="line">    <span class="keyword">this</span>.$store.dispatch(<span class="string">'increment'</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'完成更新操作'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Module 模块<br><code>Vuex允许我们将store分割成模块(Module), 而每个模块拥有自己的state、mutation、action、getters等</code><br><code>module下的局部状态通过state获取， 根节点(全局)的状态则通过rootState获取</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取全局的state</span></span><br><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  action: &#123;</span><br><span class="line">    test(&#123;state, commit, rootState&#125;)&#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    test(state, getters, rootState)&#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>使用<code>vuex-persistedstate</code>实现vuex持久化<br><code>vuex 是 vue 的状态管理器，存储的数据是响应式的。但是并不会保存起来，刷新之后就回到了初始状态, 使用此插件可以将state存储到localstorage或sessionstorage中</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> createPersistedState <span class="keyword">from</span> <span class="string">"vuex-persistedstate"</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  plugins: [createPersistedState(&#123;</span><br><span class="line">    storage: <span class="built_in">window</span>.sessionStorage</span><br><span class="line">  &#125;)]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h5 id="Vuex的工具函数-语法糖-钩子函数"><a href="#Vuex的工具函数-语法糖-钩子函数" class="headerlink" title="Vuex的工具函数/语法糖/钩子函数"></a>Vuex的工具函数/语法糖/钩子函数</h5><ul><li><code>...mapState([&#39;count&#39;])</code> 取state中的数据</li><li><code>...mapGetters([&#39;total&#39;])</code> 对state数据的处理</li><li><code>...mapMutations([&#39;updateCount&#39;])</code> 调用mutations执行同步操作</li><li><code>...mapActions([&#39;updateCountSync&#39;])</code> 调用action提交mutations执行异步操作<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.vue</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState,mapGetters,mapMutations,mapActions &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  computed()&#123; <span class="comment">// mapState 和 mapGetters 需要放在computed中</span></span><br><span class="line">    ...mapState([<span class="string">'count'</span>]), <span class="comment">// 后面还有内容时 需要加上 逗号，state数据放在字符串数组中</span></span><br><span class="line">    ...mapState(<span class="string">'goods'</span>, [<span class="string">'count'</span>]), <span class="comment">// 有modules</span></span><br><span class="line">    ...mapGetters([<span class="string">'total'</span>]),</span><br><span class="line">    ...mapGetters(<span class="string">'goods'</span>, [<span class="string">'total'</span>]), <span class="comment">// 有modules</span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123; <span class="comment">// mapMutations 和 mapActions 需要放在 methods中</span></span><br><span class="line">    ...mapMutations([<span class="string">'updateCount'</span>]), <span class="comment">// 后面还有内容时 需要加上 逗号，方法放在字符串数组中</span></span><br><span class="line">    ...mapMutations(<span class="string">'goods'</span>, [<span class="string">'updateCount'</span>]), <span class="comment">// 有modules</span></span><br><span class="line">    ...mapActions([<span class="string">'updateCountSync'</span>]),</span><br><span class="line">    ...mapActions(<span class="string">'goods'</span>, [<span class="string">'updateCountSync'</span>]), <span class="comment">// 如果是某个modules下action需要加namespaced命名空间</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h2 id="Vue-Router"><a href="#Vue-Router" class="headerlink" title="Vue Router"></a>Vue Router</h2><h5 id="vue-router实现原理"><a href="#vue-router实现原理" class="headerlink" title="vue-router实现原理"></a>vue-router实现原理</h5><ul><li>SPA(single page application) 单页面应用程序  页面url改变, 但页面不进行整体的刷新</li><li><p>Hash模式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue-router 默认 hash 模式 hash模式会在url中自带#</span></span><br><span class="line"><span class="comment">// Hash模式通过锚点值的改变，根据不同的值，渲染指定DOM位置的不同数据。hash 模式的原理是 onhashchange 事件(监测hash值变化)</span></span><br></pre></td></tr></table></figure></li><li><p>History模式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用路由的 history 模式，只需要在配置路由规则时，加入"mode: 'history'",这种模式充分利用了html5 history interface 中新增的 pushState() 和 replaceState() 方法。</span></span><br><span class="line"><span class="comment">// 对历史记录修改的功能。只是当它们执行修改时，虽然改变了当前的 URL ，但浏览器不会立即向后端发送请求</span></span><br><span class="line"><span class="comment">// 需要后台配置支持 后台没有正确的配置 就会返回 404 如nginx配置</span></span><br><span class="line"><span class="comment">/* location / &#123;</span></span><br><span class="line"><span class="comment">  try_files $uri $uri/ /index.html;</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br><span class="line"><span class="comment">// &#123;path: "*", redirect: "/"&#125;] 前端路由设置 如果URL输入错误 路由不存在 自动跳到到首页 或设置404页面</span></span><br></pre></td></tr></table></figure></li></ul><h5 id="基础配置"><a href="#基础配置" class="headerlink" title="基础配置"></a>基础配置</h5><ul><li>安装  <code>npm install vue-router --save</code></li><li><p>配置路由文件 <code>router/index.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// router/index.js</span></span><br><span class="line"><span class="comment">// 引入vue-router插件</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="comment">// 安装路由插件router</span></span><br><span class="line">Vue.use(Router)</span><br><span class="line"><span class="comment">// 生成路由实例</span></span><br><span class="line"><span class="comment">// Router 常用参数</span></span><br><span class="line"><span class="comment">// routes: []  路由信息  mode: 'hash' 路由模式  linkActiveClass: 'highlight' 路由高亮</span></span><br><span class="line"><span class="comment">// scrollBehavior(to,from,savedPosition) 滚动行为  fallback:true 对于不支持history路由时, 自动跳转到hash模式下</span></span><br><span class="line"><span class="keyword">let</span> router = <span class="keyword">new</span> Router(&#123; <span class="comment">// 配置组件和路由的映射关系</span></span><br><span class="line">  <span class="comment">// 定义路由模式 默认为 hash</span></span><br><span class="line">  mode: <span class="string">'history'</span>, <span class="comment">// 需要后端配合</span></span><br><span class="line">  <span class="comment">// 设置当前路由高亮样式</span></span><br><span class="line">  linkActiveClass: <span class="string">'is-active'</span>,</span><br><span class="line">  <span class="comment">// 配置组件和路径的映射关系 routes 常见参数</span></span><br><span class="line">  <span class="comment">// path: '/home'  redirect: '/app' 重定向  name: 路由名称  component: 'todo' 路由组件</span></span><br><span class="line">  <span class="comment">// meta:  元信息  设置meta信息 children: [&#123;&#125;]  子路由  嵌套路由</span></span><br><span class="line">  routes: [&#123;</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    redirect: <span class="string">'/index'</span> <span class="comment">// 将根路径重定向到首页</span></span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    path: <span class="string">'/index'</span>,</span><br><span class="line">    name: Home,</span><br><span class="line">    component: Home</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    path: <span class="string">'/Management'</span>,</span><br><span class="line">    name: <span class="string">'Management'</span>,</span><br><span class="line">    component: Layout,</span><br><span class="line">    children:[&#123;</span><br><span class="line">      path: <span class="string">'/project'</span>,</span><br><span class="line">      name: <span class="string">'Project'</span>,</span><br><span class="line">      component: Project,</span><br><span class="line">      meta: &#123;</span><br><span class="line">        login: <span class="literal">true</span>,</span><br><span class="line">        title: <span class="string">'标题'</span>,</span><br><span class="line">        auth: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  router, <span class="comment">// 将路由挂载到Vue实例中</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// app.vue 中</span></span><br><span class="line">&lt;router-view&gt;路由对应组件显示的位置&lt;<span class="regexp">/router-view&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>通过<code>&lt;router-link&gt;</code>和<code>&lt;router-view&gt;</code>使用声明式路由<br><code>&lt;router-view /&gt;</code> 组件显示的位置<br><code>&lt;router-link to=&quot;/index&quot; tag=&quot;li&quot;&gt;主页&lt;/router-link&gt;</code> 跳转链接<br><code>tag可以指定&lt;router-link&gt;之后渲染成什么标签,默认是a</code></p></li></ul><h5 id="编程式导航跳转"><a href="#编程式导航跳转" class="headerlink" title="编程式导航跳转"></a>编程式导航跳转</h5><p><code>this.$router.push()</code> 会向history栈添加一个新的记录并导航到改URL下</p><ul><li><code>this.$router.push(&#39;index&#39;)</code> 字符串</li><li><code>this.$router.push({ name: &#39;user&#39;, params: { userId: &#39;123&#39; }})</code> 命名的路由 <code>使用的是name和params</code> 如果使用path则params无效</li><li><code>this.$router.push({ path: &#39;register&#39;, query: { plan: &#39;private&#39; }})</code> 带查询参数 <code>使用的是path和query</code><br><code>this.$router.replace()</code> 它不会向 history 添加新记录, 替换掉当前的 history 记录。<br><code>this.$router.go(n)</code> 在 history 记录中向前或者后退多少步</li><li><code>this.$router.go(1)</code> 在 history 记录中前进一步，等同于 history.forward()</li><li><code>this.$router.go(-1)</code> 在 history 后退一步记录，等同于 history.back()</li></ul><h5 id="router与-route"><a href="#router与-route" class="headerlink" title="$router与$route"></a>$router与$route</h5><ul><li>$router 路由实例对象 使用new VueRouter创建的实例，包括了路由的跳转方法，钩子函数等。常用于编程式导航</li><li><p>$route 当前路由信息对象 在组件内部可以通过 this.$route 的方式进行调用。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. $route.fullPath 为当前路由的全路径</span></span><br><span class="line"><span class="comment">// 2. $route.path 为当前路由的绝对路径</span></span><br><span class="line"><span class="comment">// 3. $route.params 包含路由中动态片段和全匹配片段的键值对</span></span><br><span class="line"><span class="comment">// 4. $route.query 包含路由中查询参数的键值对</span></span><br><span class="line"><span class="comment">// 5. $route.name 当前路由设置的name属性。</span></span><br><span class="line"><span class="comment">// 6. $route.meta 当前路由元信息</span></span><br></pre></td></tr></table></figure></li><li><p>$route与$router的区别<br><code>$router为VueRouter实例，想要导航到不同URL，则使用$router.push方法</code><br><code>$route为当前路由对象，里面可以获取name、path、query、params等</code></p></li></ul><h5 id="滚动行为"><a href="#滚动行为" class="headerlink" title="滚动行为"></a>滚动行为</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//点击浏览器的前进后退或切换导航时触发</span></span><br><span class="line">scrollBehavior(to,<span class="keyword">from</span>,savePosition)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(to) <span class="comment">//要进入的目标路由对象 要到哪里去</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">from</span>) <span class="comment">//离开的路由对象 从哪里离开</span></span><br><span class="line">  <span class="built_in">console</span>.log(savaPosition) <span class="comment">//记录滚动条的坐标 点击前进后退的时候记录值</span></span><br><span class="line">  <span class="keyword">if</span>(savePosition)&#123;</span><br><span class="line">    <span class="keyword">return</span> savePosition <span class="comment">// 滚动到记录的位置</span></span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">x</span>:<span class="number">0</span>, <span class="attr">y</span>:<span class="number">0</span>&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(to.hash)&#123; <span class="comment">// 滚动到某锚点</span></span><br><span class="line">    <span class="keyword">return</span>  &#123;</span><br><span class="line">      selector:to.hash</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="路由传参"><a href="#路由传参" class="headerlink" title="路由传参"></a>路由传参</h5><p><code>传递参数方式一: &lt;router-link&gt;</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link</span><br><span class="line">  :to=<span class="string">"&#123;</span></span><br><span class="line"><span class="string">    path: '/detial/:id' // params形式</span></span><br><span class="line"><span class="string">    query: &#123; name: 'tew', age: '28' &#125; // query模式</span></span><br><span class="line"><span class="string">  &#125;"</span></span><br><span class="line">&gt;简介&lt;<span class="regexp">/router-link&gt;</span></span><br></pre></td></tr></table></figure></p><p><code>传递参数方式二: JavaScript代码</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$router.push(&#123;</span><br><span class="line">  path: <span class="string">'/detial/:id'</span>,</span><br><span class="line">  query: &#123; <span class="attr">name</span>: <span class="string">'tew'</span>, <span class="attr">age</span>: <span class="string">'28'</span> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>传递参数主要有两种类型: params和query<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">params的类型:</span></span><br><span class="line"><span class="comment">  配置路由格式: /router/:id</span></span><br><span class="line"><span class="comment">  传递的方式: 在path后面跟上对应的值</span></span><br><span class="line"><span class="comment">  传递后形成的路径: /router/123, /router/abc</span></span><br><span class="line"><span class="comment">  通过this.$route.params 获取params方式参数</span></span><br><span class="line"><span class="comment">query的类型:</span></span><br><span class="line"><span class="comment">  配置路由格式: /router, 也就是普通配置</span></span><br><span class="line"><span class="comment">  传递的方式: 对象中使用query的key作为传递方式</span></span><br><span class="line"><span class="comment">  传递后形成的路径: /router?id=123, /router?id=abc</span></span><br><span class="line"><span class="comment">  通过this.$route.query 获取query方式参数</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></p><h5 id="路由导航守卫"><a href="#路由导航守卫" class="headerlink" title="路由导航守卫"></a>路由导航守卫</h5><p><code>全局路由导航守卫</code></p><ul><li>router.beforeEach(to, from, next) 全局前置守卫 常用beforeEach来完成页面标题的修改.</li><li>router.beforeResolve(to, from, next) 全局解析守卫</li><li>router.afterEach(to, from, next) 全局后置守卫</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 每个守卫方法接收三个参数</span></span><br><span class="line"><span class="comment">// to: 即将要进入的目标 路由对象</span></span><br><span class="line"><span class="comment">// from: 当前导航正要离开的路由</span></span><br><span class="line"><span class="comment">// next: 同意跳转 进行下一步执行 resolve</span></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 路由跳转前的特定的业务逻辑 修改路由跳转、设置title等</span></span><br><span class="line">  NProgress.start() <span class="comment">// start progress bar</span></span><br><span class="line">  <span class="built_in">document</span>.title = to.meta.title  <span class="comment">// 设置页面标题</span></span><br><span class="line">&#125;)</span><br><span class="line">router.afterEach(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  NProgress.done() <span class="comment">// finish progress bar</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>路由独享的守卫</code><br>在路由配置上直接定义 <code>beforeEnter</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [&#123;</span><br><span class="line">    path: <span class="string">'/foo'</span>,</span><br><span class="line">    component: Foo,</span><br><span class="line">    beforeEnter: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;&#125;</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><code>组件内的守卫</code></p><ul><li>beforeRouteEnter</li><li>beforeRouteUpdate 路由参数更新时触发 详情页面id变化 mounted里的函数只执行一次的问题  可以代替watch</li><li>beforeRouteLeave</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Foo = &#123;</span><br><span class="line">  template: <span class="string">`...`</span>,</span><br><span class="line">  beforeRouteEnter (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// 在渲染该组件的对应路由被 confirm 前调用</span></span><br><span class="line">    <span class="comment">// 不！能！获取组件实例 `this`  因为当守卫执行前，组件实例还没被创建</span></span><br><span class="line">    <span class="comment">// 但可以使用 通过 `vm` 访问组件实例 next(vm =&gt; &#123;&#125;)</span></span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteUpdate (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// 在当前路由改变，但是该组件被复用时调用</span></span><br><span class="line">    <span class="comment">// 举例来说，对于一个带有动态参数的路径 /foo/:id，在 /foo/1 和 /foo/2 之间跳转的时候，</span></span><br><span class="line">    <span class="comment">// 由于会渲染同样的 Foo 组件，因此组件实例会被复用。而这个钩子就会在这个情况下被调用。</span></span><br><span class="line">    <span class="comment">// 可以访问组件实例 `this`</span></span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteLeave (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// 导航离开该组件的对应路由时调用</span></span><br><span class="line">    <span class="comment">// 可以访问组件实例 `this`</span></span><br><span class="line">    <span class="comment">// 生命周期 beforeDestroy/destroyed 在beforeRouteLeave 之后</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="使用router-addRoutes动态添加路由"><a href="#使用router-addRoutes动态添加路由" class="headerlink" title="使用router.addRoutes动态添加路由"></a>使用router.addRoutes动态添加路由</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$router.addRoutes([&#123;</span><br><span class="line">  path: <span class="string">'/test'</span>, <span class="attr">component</span>: Test, <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">'test'</span>&#125;</span><br><span class="line">&#125;])</span><br></pre></td></tr></table></figure><h5 id="路由守卫触发过程"><a href="#路由守卫触发过程" class="headerlink" title="路由守卫触发过程"></a>路由守卫触发过程</h5><ol><li>导航被触发</li><li>调用全局的beforeEach前置守卫</li><li>在重用的组件里调用beforeRouterUpdate守卫</li><li>在路由配置里面调用路由独享守卫</li><li>调用被激活组件的beforeRouterEnter守卫</li><li>调用全局的beforeResolve守卫</li><li>调用全局的afterEach后置守卫</li><li>触发DOM更新</li></ol><h5 id="keep-alive与-vue-router"><a href="#keep-alive与-vue-router" class="headerlink" title="keep-alive与 vue-router"></a>keep-alive与 vue-router</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// keep-alive 是 Vue 内置的组件，可以使被包含的组件保留状态，或避免重新渲染。</span></span><br><span class="line"><span class="comment">// 它们有两个非常重要的属性:</span></span><br><span class="line"><span class="comment">//    include - 字符串或正则表达，只有匹配的组件会被缓存</span></span><br><span class="line"><span class="comment">//    exclude - 字符串或正则表达式，任何匹配的组件都不会被缓存</span></span><br><span class="line"><span class="comment">// router-view 也是一个组件，如果直接被包在 keep-alive 里面，所有路径匹配到的视图组件都会被缓存：</span></span><br><span class="line"><span class="comment">// 组件使用keep-alive专有 生命周期</span></span><br><span class="line"><span class="comment">// activated: function()&#123; console.log('activated') &#125;</span></span><br><span class="line"><span class="comment">// deactivated: function()&#123; console.log('deactivated') &#125;</span></span><br><span class="line"><span class="comment">//  Detail,City 不被缓存组件name</span></span><br><span class="line">&lt;keep-alive exclude=<span class="string">"Detail, City"</span>&gt;</span><br><span class="line">  &lt;router-view/&gt;</span><br><span class="line">&lt;<span class="regexp">/keep-alive&gt;</span></span><br></pre></td></tr></table></figure><h5 id="vue项目实现按需加载或懒加载的3种方式"><a href="#vue项目实现按需加载或懒加载的3种方式" class="headerlink" title="vue项目实现按需加载或懒加载的3种方式"></a>vue项目实现按需加载或懒加载的3种方式</h5><ul><li>路由懒加载的主要作用就是将每个路由对应的组件打包到单独的js中.只有在这个路由被访问到的时候, 才加载对应的组件</li><li><p>vue异步组件 AMD</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue-router配置路由 , 使用vue的异步组件技术 , 可以实现按需加载 .</span></span><br><span class="line"><span class="comment">// 但是,这种情况下一个组件生成一个js文件</span></span><br><span class="line"><span class="comment">/* vue异步组件技术 */</span></span><br><span class="line">&#123;</span><br><span class="line">  path: <span class="string">'/home'</span>,</span><br><span class="line">  name: <span class="string">'home'</span>,</span><br><span class="line">  component: <span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">require</span>([<span class="string">'@/components/home'</span>],resolve)</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  path: <span class="string">'/index'</span>,</span><br><span class="line">  name: <span class="string">'Index'</span>,</span><br><span class="line">  component: <span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">require</span>([<span class="string">'@/components/index'</span>],resolve)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>路由懒加载(使用import)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 没有指定webpackChunkName，每个组件打包成一个js文件。</span></span><br><span class="line"><span class="comment">/* const Home = () =&gt; import('@/components/home')</span></span><br><span class="line"><span class="comment">const Index = () =&gt; import('@/components/index')</span></span><br><span class="line"><span class="comment">// 指定了相同的webpackChunkName，会合并打包成一个js文件。 把组件按组分块*/</span></span><br><span class="line"><span class="keyword">const</span> Home =  <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: 'ImportFuncDemo' */</span> <span class="string">'@/components/home'</span>)</span><br><span class="line"><span class="keyword">const</span> Index = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: 'ImportFuncDemo' */</span> <span class="string">'@/components/index'</span>)</span><br></pre></td></tr></table></figure></li><li><p>webpack的require.ensure()</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用webpack的require.ensure, 多个路由指定相同的chunkName，会合并打包成一个js文件。</span></span><br><span class="line">&#123;</span><br><span class="line">  path: <span class="string">'/home'</span>,</span><br><span class="line">  name: <span class="string">'home'</span>,</span><br><span class="line">  component: <span class="function"><span class="params">r</span> =&gt;</span> <span class="built_in">require</span>.ensure([], () =&gt; r(<span class="built_in">require</span>(<span class="string">'@/components/home'</span>)), <span class="string">'demo'</span>)</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  path: <span class="string">'/index'</span>,</span><br><span class="line">  name: <span class="string">'Index'</span>,</span><br><span class="line">  component: <span class="function"><span class="params">r</span> =&gt;</span> <span class="built_in">require</span>.ensure([], () =&gt; r(<span class="built_in">require</span>(<span class="string">'@/components/index'</span>)), <span class="string">'demo'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>vue组件通信的多种方式</title>
      <link href="/vue%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1/"/>
      <url>/vue%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1/</url>
      
        <content type="html"><![CDATA[<p>组件是<code>vue.js</code>最强大的功能之一，而组件实例的作用域是相互独立的，这就意味着不同组件之间的数据无法相互引用。而组件间的通信成为必须解决的话题。vue中组件通信的方式有很多：<code>props/$emit、vuex、eventBus（总线）、provide/inject、$parent/$children/ref、$attrs/$listeners</code>等<br><a id="more"></a></p><h2 id="props-emit-适合父子组件通信"><a href="#props-emit-适合父子组件通信" class="headerlink" title="props/$emit 适合父子组件通信"></a>props/$emit 适合父子组件通信</h2><ul><li><p>子组件获取父组件data<br><code>可以在父组件上使用自定义属性绑定（传递）数据(动态的数据需使用 :m=&#39;msg&#39;,静态的不需要加),在子组件中需要显式的用props声明自定义属性名（接收数据）</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &lt;father :msg="动态数据" /&gt; 传递的是变量</span></span><br><span class="line"><span class="comment">// &lt;father msg="静态数据" /&gt; 传递的是字符串</span></span><br><span class="line"><span class="comment">// 父组件  list: [1,2]</span></span><br><span class="line">&lt;child :msg=<span class="string">"list"</span> test=<span class="string">"list"</span> /&gt;</span><br><span class="line"><span class="comment">// 子组件接收</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  props: [<span class="string">'msg'</span>, <span class="string">'test'</span>],</span><br><span class="line">  mounted () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.msg) <span class="comment">// [1, 2]</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.test) <span class="comment">// list</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>父组件获取子组件数据/子组件向父组件传值<br><code>需要用到自定义事件,父组件用$on监听自定义事件,子组件使用$emit触发父组件关联的自定义事件</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;child @childMsg=<span class="string">"getChildData"</span> /&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">new Vue(&#123;</span></span><br><span class="line"><span class="regexp">  el: '#app',</span></span><br><span class="line"><span class="regexp">  components: &#123;</span></span><br><span class="line"><span class="regexp">    "child": &#123;</span></span><br><span class="line"><span class="regexp">      data() &#123;</span></span><br><span class="line"><span class="regexp">        return &#123; msg: '子组件数据'&#125;</span></span><br><span class="line"><span class="regexp">      &#125;,</span></span><br><span class="line"><span class="regexp">      template:`&lt;button @click="send" &gt;发送&lt;/</span>button&gt;<span class="string">`,</span></span><br><span class="line"><span class="string">      methods: &#123;</span></span><br><span class="line"><span class="string">        send () &#123;</span></span><br><span class="line"><span class="string">          this.$emit('childMsg', this.msg)</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;,</span></span><br><span class="line"><span class="string">  methods: &#123;</span></span><br><span class="line"><span class="string">    getChildData(arg)&#123;</span></span><br><span class="line"><span class="string">      console.log(arg) // 子组件数据</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;)</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="eventBus-总线-发布订阅模式-观察者模式-vue本身支持的自定义事件-on和-emit"><a href="#eventBus-总线-发布订阅模式-观察者模式-vue本身支持的自定义事件-on和-emit" class="headerlink" title="eventBus(总线/发布订阅模式/观察者模式) vue本身支持的自定义事件 $on和$emit"></a>eventBus(总线/发布订阅模式/观察者模式) vue本身支持的自定义事件 $on和$emit</h2><p><code>通过一个空的Vue实例作为中央事件总线（事件中心），用它来触发事件和监听事件,轻量地实现了任何组件间的通信，包括父子、兄弟、跨级</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 子组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"addTitle"</span>&gt;</span>add<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> eventBus <span class="keyword">from</span> <span class="string">'./eventBus'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  data() &#123; <span class="keyword">return</span> &#123; title: <span class="string">'tew'</span> &#125; &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="undefined">    addTitle() &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 调用自定义事件</span></span></span><br><span class="line"><span class="actionscript">      eventBus.$emit(<span class="string">'onAddTitle'</span>, <span class="keyword">this</span>.title)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- eventBus --&gt;</span></span><br><span class="line">import Vue from 'vue'</span><br><span class="line">export default new Vue()</span><br><span class="line"><span class="comment">&lt;!-- 其他组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> eventBus <span class="keyword">from</span> <span class="string">'./eventBus'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="undefined">    addTitleHandler(title) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'on add title'</span>, title)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  mounted() &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 绑定自定义事件</span></span></span><br><span class="line"><span class="actionscript">    eventBus.$on(<span class="string">'onAddTitle'</span>, <span class="keyword">this</span>.addTitleHandler)</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  beforeDestroy() &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 及时销毁，否则可能造成内存泄露</span></span></span><br><span class="line"><span class="actionscript">    eventBus.$off(<span class="string">'onAddTitle'</span>)</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h2><p><code>vuex是vue用来管理数据状态的一种机制，将Vue中所有的状态（数据）抽离出来进行统一管理。</code></p><p>更多vuex用法参考：<a href="https://vuex.vuejs.org/zh/" target="_blank" rel="noopener">Vuex官网地址</a></p><h2 id="provide-inject"><a href="#provide-inject" class="headerlink" title="provide/inject"></a>provide/inject</h2><p><code>provide/inject是Vue2.2.0后新增的API</code> 只要一个组件使用了provide向下提供数据，那其下所有的子组件都可以通过 inject 来注入，不管中间隔了多少代，而且可以注入多个来自不同父级提供的数据。主要解决了子组件跨级获取上级组件的状态，建立主动提供与依赖注入的关系<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 父组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">childCom</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> childCom <span class="keyword">from</span> <span class="string">'./childCom'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  provide: &#123; name: <span class="string">'tew'</span> &#125;, <span class="comment">// 将name值提供给子孙组件</span></span></span><br><span class="line"><span class="undefined">  components: &#123; childCom &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 子组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>子组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  inject: [<span class="string">'name'</span>], <span class="comment">// 注入父组件或祖先组件的name</span></span></span><br><span class="line"><span class="undefined">  mounted () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);  <span class="comment">// tew</span></span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="parent-children或-refs"><a href="#parent-children或-refs" class="headerlink" title="$parent/$children或#refs"></a>$parent/$children或#refs</h2><p><code>通过$parent/$children或#refs获取到的是组件实例，使用组件实例可以直接调用组件的方法或数据</code></p><ul><li><p>父组件访问子组件：使用$children或$refs<br><code>通过$children访问子组件时，是一个数组类型，访问其中的子组件必须通过索引值。但是当子组件过多，我们需要拿到其中一个时，往往不能确定它的索引值，甚至还可能会发生变化。</code><br><code>想明确获取其中一个特定的组件，可以使用$refs,通过ref给子组件绑定一个特定的ID，通过this.$refs.ID就可以访问到该组件了</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">childCom</span> <span class="attr">ref</span>=<span class="string">"child"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">  data()&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123; msg: <span class="string">'父组件数据'</span> &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  components: &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="string">"childCom"</span>: &#123;</span></span><br><span class="line"><span class="handlebars"><span class="xml">      template: '<span class="tag">&lt;<span class="name">grandsonCom</span> <span class="attr">ref</span>=<span class="string">"grandson"</span> /&gt;</span>',</span></span></span><br><span class="line"><span class="undefined">      data () &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> &#123; msg: <span class="string">'子组件数据'</span> &#125;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  mounted ()&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.$refs.child.msg) <span class="comment">// 子组件数据</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.$refs.child.$refs.grandson.msg) <span class="comment">// 孙组件数据</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.$children[<span class="number">0</span>].msg) <span class="comment">// 子组件数据</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.$children[<span class="number">0</span>].$children[<span class="number">0</span>].msg) <span class="comment">// 孙组件数据</span></span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="actionscript">Vue.component(<span class="string">'grandsonCom'</span>, &#123;</span></span><br><span class="line"><span class="handlebars"><span class="xml">  template: '<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><span class="template-variable">&#123;&#123;msg&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span>',</span></span></span><br><span class="line"><span class="actionscript">  data()&#123; <span class="keyword">return</span> &#123; msg: <span class="string">'孙组件数据'</span>&#125; &#125;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>子组件访问父组件：使用$parent<br><code>我们允许通过$parent来访问父组件，但是在真实开发中尽量不要这样做。避免直接访问父组件的数据，因为这样耦合度太高,父 组件中的状态将变得难以维护</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">parentCom</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">  data() &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123; msg: <span class="string">'grandpa组件数据'</span> &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  components: &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="string">"parentCom"</span>: &#123;</span></span><br><span class="line"><span class="actionscript">      template: <span class="string">'&lt;child-com /&gt;'</span>,</span></span><br><span class="line"><span class="undefined">      data () &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> &#123; msg: <span class="string">'parent组件数据'</span> &#125;</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      methods: &#123;</span></span><br><span class="line"><span class="javascript">        handle()&#123; <span class="built_in">console</span>.log(<span class="string">'父组件方法'</span>) &#125;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="javascript">    handle()&#123; <span class="built_in">console</span>.log(<span class="string">'祖先组件方法'</span>) &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="actionscript">Vue.component(<span class="string">'child-com'</span>, &#123;</span></span><br><span class="line"><span class="handlebars"><span class="xml">  template: '<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"showParent"</span>&gt;</span>显示父元素信息<span class="tag">&lt;/<span class="name">button</span>&gt;</span>',</span></span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="undefined">    showParent () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.$parent.msg) <span class="comment">// parent组件数据</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.$parent.handle() <span class="comment">// 父组件方法</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.$parent.$parent.msg) <span class="comment">// grandpa组件数据</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.$parent.$parent.handle() <span class="comment">// 祖先组件方法</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="dispatch-boardcast"><a href="#dispatch-boardcast" class="headerlink" title="dispatch/boardcast"></a>dispatch/boardcast</h2><p><code>vue1中有$dispatch和$boardcast两个方法，但vue2中被删除，可自己模拟，原理是通过$parent和$children来获取父组件和子组件，然后递归即可</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// dispatch 递归获取$parent</span></span><br><span class="line">Vue.prototype.$dispatch = <span class="function"><span class="keyword">function</span> (<span class="params">eventName, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> parent = <span class="keyword">this</span>.$parent <span class="comment">// 查找父元素</span></span><br><span class="line">  <span class="keyword">while</span>(parent)&#123;</span><br><span class="line">    <span class="keyword">if</span> (parent) &#123;</span><br><span class="line">      parent.$emit(eventName, data) <span class="comment">// 父元素用$emit触发</span></span><br><span class="line">      parent = parent.$parent <span class="comment">// 递归查找父元素</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// boardcast</span></span><br><span class="line">Vue.prototype.$boardcast = <span class="function"><span class="keyword">function</span>(<span class="params">eventName, data</span>)</span>&#123;</span><br><span class="line">  boardcast.call(<span class="keyword">this</span>, eventName, data)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">boardcast</span>(<span class="params">eventName, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.$children.forEach(<span class="function"><span class="params">child</span> =&gt;</span> &#123;</span><br><span class="line">    child.$emit(eventName, data)</span><br><span class="line">    <span class="keyword">if</span> (child.$children.length) &#123;</span><br><span class="line">      <span class="comment">// 递归调用 通过call修改this指向 child</span></span><br><span class="line">      boardcast.call(child, eventName, data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="attrs-listeners"><a href="#attrs-listeners" class="headerlink" title="$attrs/$listeners"></a>$attrs/$listeners</h2><ul><li><code>$attrs</code>：包含了父作用域中没有被<code>props</code>接受的特性绑定<code>(class和style除外)</code>。当一个组件没有声明任何<code>prop</code>时，这里会包含所有父作用域的绑定<code>(class和style除外)</code>，并且可以通过<code>v-bind=&quot;$attrs&quot;</code>传入内部组件。通常配合<code>interitAttrs</code>选项一起使用。</li><li><code>$listeners</code>：包含了父作用域中的(不含.native 修饰器的)<code>v-on事件监听器</code>。它可以通过 <code>v-on=&quot;$listeners&quot;</code>传入内部组件</li></ul>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>常用正则表达式</title>
      <link href="/%E5%B8%B8%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
      <url>/%E5%B8%B8%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>前段日常开发中常用的正则表达式收集，<code>js正则表达式，js中的象形文字</code>。正则表达式（英语：Regular Expression，在代码中常简写为regex、regexp或RE）使用单个字符串来描述、匹配一系列符合某个句法规则的字符串搜索模式，可用于文本搜索和文本替换。<br><a id="more"></a></p><h2 id="校验数字的表达式"><a href="#校验数字的表达式" class="headerlink" title="校验数字的表达式"></a>校验数字的表达式</h2><ul><li>数字：^[0-9]*$</li><li>n位的数字：^\d{n}$</li><li>至少n位的数字：^\d{n,}$</li><li>m-n位的数字：^\d{m,n}$</li><li>零和非零开头的数字：^(0|[1-9][0-9]*)$</li><li>非零开头的最多带两位小数的数字：^([1-9][0-9]*)+(.[0-9]{1,2})?$</li><li>带1-2位小数的正数或负数：^(-)?\d+(.\d{1,2})$</li><li>正数、负数、和小数：^(-|+)?\d+(.\d+)?$</li><li>有两位小数的正实数：^[0-9]+(.[0-9]{2})?$</li><li>有1~3位小数的正实数：^[0-9]+(.[0-9]{1,3})?$</li><li>非零的正整数：^[1-9]\d<em>$ 或 ^([1-9][0-9]</em>){1,3}$ 或 ^+?[1-9][0-9]*$</li><li>非零的负整数：^-[1-9][]0-9”<em>$ 或 ^-[1-9]\d</em>$</li><li>非负整数：^\d+$ 或 ^[1-9]\d*|0$</li><li>非正整数：^-[1-9]\d*|0$ 或 ^((-\d+)|(0+))$</li><li>非负浮点数：^\d+(.\d+)?$ 或 ^[1-9]\d<em>.\d</em>|0.\d<em>[1-9]\d</em>|0?.0+|0$</li><li>非正浮点数：^((-\d+(.\d+)?)|(0+(.0+)?))$ 或 ^(-([1-9]\d<em>.\d</em>|0.\d<em>[1-9]\d</em>))|0?.0+|0$</li><li>正浮点数：^[1-9]\d<em>.\d</em>|0.\d<em>[1-9]\d</em>$ 或 ^(([0-9]+.[0-9]<em>[1-9][0-9]</em>)|([0-9]<em>[1-9][0-9]</em>.[0-9]+)|([0-9]<em>[1-9][0-9]</em>))$</li><li>负浮点数：^-([1-9]\d<em>.\d</em>|0.\d<em>[1-9]\d</em>)$ 或 ^(-(([0-9]+.[0-9]<em>[1-9][0-9]</em>)|([0-9]<em>[1-9][0-9]</em>.[0-9]+)|([0-9]<em>[1-9][0-9]</em>)))$</li><li>浮点数：^(-?\d+)(.\d+)?$ 或 ^-?([1-9]\d<em>.\d</em>|0.\d<em>[1-9]\d</em>|0?.0+|0)$</li></ul><h2 id="校验字符的表达式"><a href="#校验字符的表达式" class="headerlink" title="校验字符的表达式"></a>校验字符的表达式</h2><ul><li>汉字：^[\u4e00-\u9fa5]{0,}$</li><li>英文和数字：^[A-Za-z0-9]+$ 或 ^[A-Za-z0-9]{4,40}$</li><li>长度为3-20的所有字符：^.{3,20}$</li><li>由26个英文字母组成的字符串：^[A-Za-z]+$</li><li>由26个大写英文字母组成的字符串：^[A-Z]+$</li><li>由26个小写英文字母组成的字符串：^[a-z]+$</li><li>由数字和26个英文字母组成的字符串：^[A-Za-z0-9]+$</li><li>由数字、26个英文字母或者下划线组成的字符串：^\w+$ 或 ^\w{3,20}$</li><li>中文、英文、数字包括下划线：^[\u4E00-\u9FA5A-Za-z0-9_]+$</li><li>中文、英文、数字但不包括下划线等符号：^[\u4E00-\u9FA5A-Za-z0-9]+$ 或 ^[\u4E00-\u9FA5A-Za-z0-9]{2,20}$</li><li>可以输入含有^%&amp;’,;=?$\”等字符：[^%&amp;’,;=?$\x22]+</li><li>禁止输入含有~的字符：[^~\x22]+</li></ul><h2 id="特殊需求表达式"><a href="#特殊需求表达式" class="headerlink" title="特殊需求表达式"></a>特殊需求表达式</h2><ul><li>Email地址：^\w+([-+.]\w+)<em>@\w+([-.]\w+)</em>.\w+([-.]\w+)*$</li><li>域名：[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(/.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+/.?</li><li>InternetURL：[a-zA-z]+://[^\s]<em> 或 ^http://([\w-]+.)+[\w-]+(/[\w-./?%&amp;=]</em>)?$</li><li>手机号码：^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$</li><li>电话号码(“XXX-XXXXXXX”、”XXXX-XXXXXXXX”、”XXX-XXXXXXX”、”XXX-XXXXXXXX”、”XXXXXXX”和”XXXXXXXX)：^((\d{3,4}-)|\d{3.4}-)?\d{7,8}$</li><li>国内电话号码(0511-4405222、021-87888822)：\d{3}-\d{8}|\d{4}-\d{7}</li><li>电话号码正则表达式（支持手机号码，3-4位区号，7-8位直播号码，1－4位分机号）: ((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)</li><li>身份证号(15位、18位数字)，最后一位是校验位，可能为数字或字符X：(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)</li><li>帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]{4,15}$</li><li>密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)：^[a-zA-Z]\w{5,17}$</li><li>强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在 8-10 之间)：^(?=.<em>\d)(?=.</em>[a-z])(?=.*[A-Z])[a-zA-Z0-9]{8,10}$</li><li>强密码(必须包含大小写字母和数字的组合，可以使用特殊字符，长度在8-10之间)：^(?=.<em>\d)(?=.</em>[a-z])(?=.*[A-Z]).{8,10}$</li><li>日期格式：^\d{4}-\d{1,2}-\d{1,2}</li><li>一年的12个月(01～09和1～12)：^(0?[1-9]|1[0-2])$</li><li>一个月的31天(01～09和1～31)：^((0?[1-9])|((1|2)[0-9])|30|31)$</li><li>xml文件：^([a-zA-Z]+-?)+[a-zA-Z0-9]+\.[x|X][m|M][l|L]$</li><li>中文字符的正则表达式：[\u4e00-\u9fa5]</li><li>双字节字符：[^\x00-\xff] (包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计2，ASCII字符计1))</li><li>空白行的正则表达式：\n\s*\r (可以用来删除空白行)</li><li>HTML标记的正则表达式：&lt;(\S<em>?)[^&gt;]</em>&gt;.<em>?|&lt;.</em>? /&gt; ( 首尾空白字符的正则表达式：^\s<em>|\s</em>$或(^\s<em>)|(\s</em>$) (可以用来删除行* 首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)</li><li>腾讯QQ号：[1-9][0-9]{4,} (腾讯QQ号从10000开始)</li><li>中国邮政编码：[1-9]\d{5}(?!\d) (中国邮政编码为6位数字)</li><li>IP地址：((?:(?:25[0-5]|2[0-4]\d|[01]?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d?\d))</li></ul>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 正则表达式 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>axios使用及封装</title>
      <link href="/axios%E4%BD%BF%E7%94%A8%E5%8F%8A%E5%B0%81%E8%A3%85/"/>
      <url>/axios%E4%BD%BF%E7%94%A8%E5%8F%8A%E5%B0%81%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<p><code>axios</code> 是基于Promise用于浏览器和nodejs的与服务器端通信库，支持跨平台xhrhttp请求。功能特点：支持Promise API、跨平台可在浏览器和node.js中使用、拦截请求和响应、转换请求和响应数据、取消请求、自动转换JSON数据等。<br><a id="more"></a></p><h2 id="axios-安装使用"><a href="#axios-安装使用" class="headerlink" title="axios 安装使用"></a>axios 安装使用</h2><ul><li>安装 <code>npm i axios -S</code></li><li>引入 <code>import axios from axios</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.vue</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> axios</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  created () &#123;</span><br><span class="line">    axios.get(<span class="string">'http://192.168.5.16:8888/category'</span>)</span><br><span class="line">      .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123; <span class="built_in">console</span>.log(res) &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123; <span class="built_in">console</span>.log(err) &#125;)</span><br><span class="line">    axios.post(<span class="string">'http://192.168.5.16:8888/category'</span>, &#123;</span><br><span class="line">      &#123; <span class="attr">type</span>: <span class="string">'sell'</span>, <span class="attr">page</span>:<span class="number">1</span> &#125;</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123; <span class="built_in">console</span>.log(res) &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123; <span class="built_in">console</span>.log(err) &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="axios-多种请求方式-返回值为promise"><a href="#axios-多种请求方式-返回值为promise" class="headerlink" title="axios 多种请求方式  返回值为promise"></a>axios 多种请求方式  返回值为promise</h2><ul><li><code>axios(config)</code></li><li><code>axios[method]()</code></li><li><code>axios.get(url,[config])</code></li><li><code>axios.post(url,[data,[config]])</code></li><li><code>axios.delete(url,[config])</code></li><li><code>axios.head(url,[config])</code></li><li><code>axios.options(url,[config])</code></li><li><code>axios.put(url,[config])</code></li><li><code>axios.patch(url,[config])</code></li></ul><h2 id="axios-发送并发请求"><a href="#axios-发送并发请求" class="headerlink" title="axios 发送并发请求"></a>axios 发送并发请求</h2><p><code>使用axios.all([])发送多个请求，返回结果是一个数组。使用axios.spread()将返回数组展开</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  created () &#123;</span><br><span class="line">    axios.all([axios.get(<span class="string">'ulr1'</span>), axios.post(<span class="string">'url2'</span>)])</span><br><span class="line">      .then(axios.spread(<span class="function">(<span class="params">res1, res2</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res1)</span><br><span class="line">        <span class="built_in">console</span>.log(res2)</span><br><span class="line">      &#125;))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="axios-全局配置"><a href="#axios-全局配置" class="headerlink" title="axios 全局配置"></a>axios 全局配置</h2><ul><li><code>axios.default.baseUrl = &#39;http://123.123.23.8:8888&#39;</code> 设置axios的默认请求前缀地址</li><li><code>axios.default.timeout = &#39;30000&#39;</code>  设置默认的请求超时时间</li><li><code>axios.default.headers.post[&#39;Content-type&#39;] = &#39;application/x-www-form-urlencode;charset=UTF-8&#39;</code> 设置post默认请求头</li></ul><h2 id="axios-常见配置选项"><a href="#axios-常见配置选项" class="headerlink" title="axios 常见配置选项"></a>axios 常见配置选项</h2><ul><li>请求地址 <code>url: &#39;/user&#39;</code></li><li>请求类型 <code>method: &#39;get&#39;</code></li><li>请求根路径 <code>baseURL: &#39;http://www.mt.com/api&#39;</code></li><li>请求前的数据处理 <code>transformRequest:[function(data){}]</code></li><li>请求后的数据处理 <code>transformResponse: [function(data){}]</code></li><li>自定义的请求头 <code>headers:{&#39;x-Requested-With&#39;:&#39;XMLHttpRequest&#39;}</code></li><li>URL查询对象 <code>params:{ id: 12 }</code></li><li>查询对象序列化函数 <code>paramsSerializer: function(params){ }</code></li><li>request body <code>data: { key: &#39;aa&#39;}</code></li><li>超时设置s <code>timeout: 5000</code></li><li>跨域是否带Token <code>withCredentials: false</code></li><li>自定义请求处理 <code>adapter: function(resolve, reject, config){}</code></li><li>身份验证信息 <code>auth: { uname: &#39;&#39;, pwd: &#39;12&#39;}</code></li><li>响应的数据格式 <code>responseType: &#39;json&#39;</code></li></ul><h2 id="axios-拦截器与取消请求"><a href="#axios-拦截器与取消请求" class="headerlink" title="axios 拦截器与取消请求"></a>axios 拦截器与取消请求</h2><ul><li>请求拦截器 <code>axios.interceptors.rquest.use(config =&gt; {})</code></li><li>响应拦截器 <code>axios.interceptors.response.use(response =&gt; {})</code><br>*</li></ul><h2 id="axios-简单封装"><a href="#axios-简单封装" class="headerlink" title="axios 简单封装"></a>axios 简单封装</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">config</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 1.创建axios的实例</span></span><br><span class="line">  <span class="keyword">const</span> instance = axios.create(&#123;</span><br><span class="line">    baseURL: <span class="string">'http://123.207.32.32:8000'</span>,</span><br><span class="line">    timeout: <span class="number">5000</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 2.axios的拦截器</span></span><br><span class="line">  <span class="comment">// 2.1.请求拦截的作用</span></span><br><span class="line">  instance.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 1. 发送网络请求时 添加loading动画</span></span><br><span class="line">    <span class="comment">// 2. 对请求参数进行序列化或加密</span></span><br><span class="line">    <span class="comment">// 3. 某些请求要求用户登录 判断是否有token 无totken跳转login页面</span></span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;, err =&gt; &#123;</span><br><span class="line">    <span class="comment">// console.log(err);</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2.2.响应拦截</span></span><br><span class="line">  instance.interceptors.response.use(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 1. 对响应数据进行过滤</span></span><br><span class="line">    <span class="comment">// 2. 对加密的响应数据解密</span></span><br><span class="line">    <span class="keyword">return</span> res.data</span><br><span class="line">  &#125;, err =&gt; &#123;</span><br><span class="line">    <span class="comment">// 3. 利用不同的错误码进行不同的提示</span></span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3.发送真正的网络请求</span></span><br><span class="line">  <span class="keyword">return</span> instance(config)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> axios </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Sticky footers效果</title>
      <link href="/stickyFooter/"/>
      <url>/stickyFooter/</url>
      
        <content type="html"><![CDATA[<p>在前端日常开发中，<code>Sticky footers</code>设计是最常见的效果之一，大多数人都遇到过这样的需求,如果页面内容<code>content</code>内容比较少时的时候，页脚块不挨着内容区域而是始终显示在视窗底部；如果内容足够长时，页脚块会随着文档流撑开始终挨着内容区域显示在页面最下方.<br><a id="more"></a></p><h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p><img src="/image/css/stickyfooter.png" alt="Sticky footers"></p><h2 id="方法一-使用min-height加calc计算高度"><a href="#方法一-使用min-height加calc计算高度" class="headerlink" title="方法一 使用min-height加calc计算高度"></a>方法一 使用min-height加calc计算高度</h2><p><code>为内容区域添加最小的高度,用vh(viewpoint height)来计算整体视窗的高度(1vh等于视窗高度的1%),然后减去底部footer的高度，从而求得内容区域的最小高度</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">  *&#123;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">padding</span>: <span class="number">0</span>;&#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.footer</span>&#123;</span></span><br><span class="line"><span class="undefined">    height: 100px;</span></span><br><span class="line"><span class="undefined">    background: black;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line"><span class="undefined">    font-size: 24px;</span></span><br><span class="line"><span class="undefined">    line-height: 100px;</span></span><br><span class="line"><span class="undefined">    text-align: center;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.content</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">min-height</span><span class="selector-pseudo">:calc(100vh</span> <span class="selector-tag">-</span> 100<span class="selector-tag">px</span>);</span></span><br><span class="line"><span class="css">    <span class="selector-tag">box-sizing</span><span class="selector-pseudo">:border-box</span>;</span></span><br><span class="line"><span class="undefined">    padding: 10px 20px;</span></span><br><span class="line"><span class="undefined">    font-size: 18px;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span>如果页面内容不够长的时候，页脚块粘贴在视窗底部；<span class="tag">&lt;<span class="name">br</span> /&gt;</span>如果内容足够长时，页脚块会被内容向下推送<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"footer"</span>&gt;</span>sticky footer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="方法二-使用flex布局"><a href="#方法二-使用flex布局" class="headerlink" title="方法二 使用flex布局"></a>方法二 使用flex布局</h2><p><code>对footer和content父元素盒子(如body)使用flex布局, 利用flex布局对视窗高度进行分割。footer设为固定高度，content的flex设为1，这样content会充满除去footer的其他部分</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">  *&#123;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">padding</span>: <span class="number">0</span>;&#125;</span></span><br><span class="line"><span class="undefined">  body&#123;</span></span><br><span class="line"><span class="undefined">    display: flex;</span></span><br><span class="line"><span class="undefined">    flex-direction: column;</span></span><br><span class="line"><span class="undefined">    min-height: 100vh;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.footer</span>&#123;</span></span><br><span class="line"><span class="undefined">    height: 100px;</span></span><br><span class="line"><span class="undefined">    background: black;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line"><span class="undefined">    font-size: 24px;</span></span><br><span class="line"><span class="undefined">    line-height: 100px;</span></span><br><span class="line"><span class="undefined">    text-align: center;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.content</span>&#123;</span></span><br><span class="line"><span class="undefined">    padding: 10px 20px;</span></span><br><span class="line"><span class="undefined">    font-size: 18px;</span></span><br><span class="line"><span class="undefined">    flex: 1;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span>如果页面内容不够长的时候，页脚块粘贴在视窗底部；<span class="tag">&lt;<span class="name">br</span> /&gt;</span>如果内容足够长时，页脚块会被内容向下推送<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"footer"</span>&gt;</span>sticky footer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="方法三-利用绝对定位和padding完美兼容"><a href="#方法三-利用绝对定位和padding完美兼容" class="headerlink" title="方法三 利用绝对定位和padding完美兼容"></a>方法三 利用绝对定位和padding完美兼容</h2><p><code>为外部容器body设置min-height为100vh, 使其内容较少时也能撑开,主体内容设置padding-bottom值为底部footer的高度,避免被遮挡一般会设置比底部高度稍微大一点,留一部分空白间距,footer使用绝对定位,固定高度</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">  *&#123;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">padding</span>: <span class="number">0</span>;&#125;</span></span><br><span class="line"><span class="undefined">  body &#123;</span></span><br><span class="line"><span class="undefined">    position: relative;</span></span><br><span class="line"><span class="undefined">    min-height: 100vh;</span></span><br><span class="line"><span class="undefined">    height: auto !important;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.content</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">box-sizing</span><span class="selector-pseudo">:border-box</span>;</span></span><br><span class="line"><span class="undefined">    padding: 10px 20px 100px;</span></span><br><span class="line"><span class="undefined">    font-size: 18px;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.footer</span> &#123;</span></span><br><span class="line"><span class="undefined">    position: absolute;</span></span><br><span class="line"><span class="undefined">    width: 100%;</span></span><br><span class="line"><span class="undefined">    line-height: 100px;</span></span><br><span class="line"><span class="undefined">    text-align: center;</span></span><br><span class="line"><span class="undefined">    bottom: 0px;</span></span><br><span class="line"><span class="undefined">    background: black;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line"><span class="undefined">    font-size: 24px;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span>如果页面内容不够长的时候，页脚块粘贴在视窗底部；<span class="tag">&lt;<span class="name">br</span> /&gt;</span>如果内容足够长时，页脚块会被内容向下推送<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"footer"</span>&gt;</span>sticky footer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="方法四-使用Grid网格布局"><a href="#方法四-使用Grid网格布局" class="headerlink" title="方法四 使用Grid网格布局"></a>方法四 使用Grid网格布局</h2><p><code>外部容器设为grid网格布局并设置min-height:100vh, grid-template-rows: 1fr auto设置一个网格行, footer中grid-row-start和grid-row-end属性设置单元格开始和结束的行线</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">  *&#123;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">padding</span>: <span class="number">0</span>;&#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.content</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">box-sizing</span><span class="selector-pseudo">:border-box</span>;</span></span><br><span class="line"><span class="undefined">    padding: 10px 20px;</span></span><br><span class="line"><span class="undefined">    font-size: 18px;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">  body &#123;</span></span><br><span class="line"><span class="undefined">    min-height: 100vh;</span></span><br><span class="line"><span class="undefined">    display: grid;</span></span><br><span class="line"><span class="undefined">    grid-template-rows: 1fr auto;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.footer</span> &#123;</span></span><br><span class="line"><span class="undefined">    grid-row-start: 2;</span></span><br><span class="line"><span class="undefined">    grid-row-end: 3;</span></span><br><span class="line"><span class="undefined">    background: black;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line"><span class="undefined">    font-size: 24px;</span></span><br><span class="line"><span class="undefined">    line-height: 100px;</span></span><br><span class="line"><span class="undefined">    text-align: center;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span>如果页面内容不够长的时候，页脚块粘贴在视窗底部；<span class="tag">&lt;<span class="name">br</span> /&gt;</span>如果内容足够长时，页脚块会被内容向下推送<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"footer"</span>&gt;</span>sticky footer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> css3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css3 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>认识前端模块化</title>
      <link href="/%E6%A8%A1%E5%9D%97%E5%8C%96/"/>
      <url>/%E6%A8%A1%E5%9D%97%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<p>常见模块化规范有<code>CommonJS</code>,<code>AMD</code>,<code>CMD</code>,<code>ES6模块化</code>。<code>CommonJS</code>核心思想是通过<code>require</code>方法来同步加载依赖的其他模块,通过module.exports导出需要暴露的接口，通过require引入模块，同步执行。<code>AMD</code>规范主要是为了解决针对浏览器环境的模块化问题,最具代表性的实现是requireJS.<br><a id="more"></a></p><h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><p>模块化是指把一复杂的系统分解到多个模块中</p><h3 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h3><p>CommonJS 是一种使用广泛的<code>javascript</code>模块化规范,核心思想是通过<code>require</code>方法来同步加载依赖的其他模块,通过module.exports导出需要暴露的接口，通过require引入模块，同步执行 主要用在node中</p><ul><li><p>用法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 采用CommonJS来进行导入导出</span></span><br><span class="line"><span class="comment">// 用require方法导入</span></span><br><span class="line"><span class="keyword">const</span> moduleA = <span class="built_in">require</span>(<span class="string">'./b.js'</span>);</span><br><span class="line"><span class="comment">// 用module.exports导出</span></span><br><span class="line"><span class="built_in">module</span>.exports = someFunc;</span><br></pre></td></tr></table></figure></li><li><p>原理</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">let</span> path = reqiure(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">let</span> b = req(<span class="string">'./b.js'</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">req</span>(<span class="params">mod</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> filename = path.join(__dirname,mod);</span><br><span class="line">  <span class="keyword">let</span> content = fs.readFileSync(filename, <span class="string">'utf-8'</span>);</span><br><span class="line">  <span class="keyword">let</span> fn = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'exports'</span>, <span class="string">'require'</span>, <span class="string">'module'</span>, <span class="string">'__dirname'</span>, <span class="string">'__filename'</span>, content + <span class="string">'\n return module.exports;'</span>)</span><br><span class="line">  <span class="keyword">let</span> <span class="built_in">module</span> = &#123;</span><br><span class="line">    exports: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> fn(<span class="built_in">module</span>.exports, req, <span class="built_in">module</span>, __dirname, __filename)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h3><p>AMD 也是一种Javascript 模块化规范, 与CommonJS 最大的不同在于它采用异步的方式去加载依赖的模块. AMD规范主要是为了解决针对浏览器环境的模块化问题,最具代表性的实现是requireJS.<br>AMD的优点</p><ul><li>可在不转换代码的情况下直接在浏览器中运行</li><li>可加载多个依赖</li><li>代码可运行在浏览器环境和Node.js 环境下<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个模块</span></span><br><span class="line">define(<span class="string">'a'</span>, [], <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'a'</span>;</span><br><span class="line">&#125;)</span><br><span class="line">define(<span class="string">'b'</span>, [<span class="string">'a'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + <span class="string">'b'</span>;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 导入和使用</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">'b'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">b</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(b)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h3 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h3><p>一个文件最为一个模块，使用define来定义模块，modules.exports对外导出模块， 使用require来加载一个模块，代表是SeaJS, 尽可能懒执行<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过 define 来定义模块</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, exports, module</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// 通过 require 引入模块</span></span><br><span class="line">  <span class="keyword">var</span> $ = <span class="built_in">require</span>(<span class="string">'jquery'</span>)</span><br><span class="line">  <span class="comment">// 通过 exports 对外提供接口</span></span><br><span class="line">  exports.doSomething = ...</span><br><span class="line">  <span class="comment">// 通过 module.exports 提供整个接口</span></span><br><span class="line">  <span class="built_in">module</span>.exports = ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h3 id="ES6模块化-ES-Module"><a href="#ES6模块化-ES-Module" class="headerlink" title="ES6模块化(ES Module)"></a>ES6模块化(ES Module)</h3><p>ES6 模块化是<code>ECMA</code>提出的<code>javascript</code>模块化规范,它在语言的层面上实现了模块化.浏览器厂商和<code>Node.js</code>都宣布要原生支持该规范,它将逐渐取代<code>CommonJS</code>和<code>AMD</code>规范,成为浏览器和服务器通用的模块化解决方案.<br>ES6模块目前还无法直接运行在javascript环境下,必须通过工具转换成ES5后才能正产运行<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用export导出</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> name = <span class="string">'asd'</span></span><br><span class="line"><span class="comment">//  使用import导入</span></span><br><span class="line"><span class="keyword">import</span> &#123;name&#125; = <span class="keyword">from</span> <span class="string">'xxx.js'</span></span><br></pre></td></tr></table></figure></p><h3 id="ConmmonJS与ES6-Module的区别"><a href="#ConmmonJS与ES6-Module的区别" class="headerlink" title="ConmmonJS与ES6 Module的区别"></a>ConmmonJS与ES6 Module的区别</h3><ul><li>ConmmonJS的require的模块路径可以根据if判断条件动态指定加载那个文件。ES6 Module导入和导出的路径不支持表达式，导入导出的语句必须位于顶层作用域，不能放在if等判断语句中</li><li>在导入模块时CommonJS获取的是一份值拷贝，对导出的值修改，不会影响源文件的值。而ES6 Module则是值的动态映射，对导出的值进行修改，会影响源文件的值<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ES6 Module */</span></span><br><span class="line"><span class="comment">// add-content.js</span></span><br><span class="line"><span class="keyword">var</span> count = <span class="number">0</span></span><br><span class="line"><span class="keyword">const</span> add = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  count += <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> &#123; count, add &#125;</span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; count, add &#125; <span class="keyword">from</span> <span class="string">'./add-content.js'</span></span><br><span class="line"><span class="built_in">console</span>.log(count)</span><br><span class="line">add()</span><br><span class="line"><span class="built_in">console</span>.log(count)</span><br><span class="line">count += <span class="number">1</span> <span class="comment">// 直接修改会报错</span></span><br><span class="line"><span class="comment">// connot set property count of #&lt;Object&gt; which has only e getter</span></span><br><span class="line"><span class="comment">/* ConmmonJS */</span></span><br><span class="line"><span class="comment">// add-content.js</span></span><br><span class="line"><span class="keyword">var</span> count = <span class="number">0</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  count: count,</span><br><span class="line">  add: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    count += <span class="number">1</span></span><br><span class="line">  &#125;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">var</span> count = <span class="built_in">require</span>(<span class="string">'./add-content.js'</span>).count</span><br><span class="line"><span class="keyword">var</span> add = <span class="built_in">require</span>(<span class="string">'./add-content.js'</span>).add</span><br><span class="line"><span class="built_in">console</span>.log(count) <span class="comment">// 0</span></span><br><span class="line">add()</span><br><span class="line"><span class="built_in">console</span>.log(count) <span class="comment">// 0</span></span><br><span class="line">count += <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(count) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="自动化构建"><a href="#自动化构建" class="headerlink" title="自动化构建"></a>自动化构建</h3><p>把源代码转换成在线上可执行的 Javascript、CSS、HTML代码。包括如下内容</p><ul><li>代码转换: Ecmascript6 变异成 Ecmascript5, less编译成css等</li><li>文件优化: 压缩Javascript、CSS、HTML代码，图片压缩与合并。</li><li>代码分割: 提取多个页面的公共代码、提取首屏不需要执行部分的代码让其异步加载</li><li>模块合并：使用构建工具将多个模块与文件合并成一个文件。</li><li>自动刷新：监听本地源代码的变化，自动重新构建、刷新浏览器。</li><li>代码校验：检验代码是否符合规范，以及单元测试是否通过。</li><li>自动发布：更新完代码后，自动打包代码并发布到服务器上。</li></ul><h3 id="前端工程化"><a href="#前端工程化" class="headerlink" title="前端工程化"></a>前端工程化</h3><blockquote><p>前端工程化 是指将前端开发的流程规范化,标准化,包括开发流程,技术选型,代码规范,构建发布等</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>vue组件、动画、生命周期</title>
      <link href="/vue%E7%BB%84%E4%BB%B6%E3%80%81%E5%8A%A8%E7%94%BB%E3%80%81%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"/>
      <url>/vue%E7%BB%84%E4%BB%B6%E3%80%81%E5%8A%A8%E7%94%BB%E3%80%81%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
      
        <content type="html"><![CDATA[<p><code>Vue.js</code>是一个构建数据驱动的web界面的库,是一套用于构建用户界面的渐进式框架. 目标是通过尽可能简单的API实现响应的数据绑定和组合的视图组件。核心是一个响应的数据绑定系统，它让数据与DOM保持同步非常简单。<br><a id="more"></a></p><h2 id="vue组件"><a href="#vue组件" class="headerlink" title="vue组件"></a>vue组件</h2><p><code>vue中组件是组件是一组可被复用的具有一定功能,独立的完整的代码片段,这个代码片段可以渲染一个完整的视图结构,每一个组件都是一个vue实例对象,都会包含vue实例的所有属性和方法</code></p><p>vue组件分类：</p><ul><li>vue-router对应的每一个.vue页面组件</li><li>不包含业务的、独立的基础功能组件如UI组件，具有通用性可以在不同项目中使用</li><li>只包含某个功能的业务组件、只在当前项目中使用不具有通用性</li></ul><p>vue组件的三个API： prop、event、slot</p><p><code>一个再复杂的组件，都是由三部分组成的：prop、event、slot，它们构成了 Vue.js 组件的 API</code></p><ul><li>属性<code>props</code>定义了有哪些可配置的属性，写通用组件时，props最好用对象的写法，便于设置每个属性的类型、默认值和校验属性的值<br>*</li></ul><p>组件使用步骤 1. 引入组件 2. 注册组件 3. 使用组件<br><img src="/image/vue/vue3.png" alt="组件"></p><ul><li><p>全局组件 可以在任何模板中使用,使用之前需要先注册</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注册 Vue.component(‘组件名’,选项对象)</span></span><br><span class="line"><span class="comment">// Vue.component(‘my-component’,&#123;&#125;)</span></span><br><span class="line"><span class="comment">// 使用 &lt;my-component&gt;&lt;/my-component&gt;</span></span><br><span class="line">&lt;div id=<span class="string">'app'</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">Counter</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">Vue.component(<span class="string">'Counter'</span>, &#123;</span><br><span class="line">  template: <span class="string">'&lt;span&gt;&#123;&#123;text&#125;&#125;&lt;/span&gt;'</span>,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      text: <span class="string">'全局组件'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>局部组件 在组件实例中通过选项对象注册,只在所注册的作用域中使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注册 components:&#123; 组件名:选项对象 &#125;</span></span><br><span class="line"><span class="comment">// 子组件中的data必须是函数</span></span><br><span class="line"><span class="comment">// 每个组件都是相互独立的,如果共用一个对象,产生引用关系,在更改一个的时候,会影响其他组件.</span></span><br><span class="line"><span class="comment">// 但如果是函数,每个组件都有自己独立的作用域,不会互相影响</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  components: &#123;</span><br><span class="line">    <span class="string">'Counter'</span>: &#123;</span><br><span class="line">      template: <span class="string">'&lt;span&gt;&#123;&#123;text&#125;&#125;&lt;/span&gt;'</span>,</span><br><span class="line">      data () &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          text: <span class="string">'全局组件'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>组件可多次使用<br><img src="/image/vue/vue4.png" alt="组件多次使用"></p></li><li>不希望Vue重复利用的问题，可以给对应的组件添加不同的key，key的作用主要是为了高效的更新虚拟DOM。</li></ul><h2 id="动态组件"><a href="#动态组件" class="headerlink" title="动态组件"></a>动态组件</h2><p>多个组件可以使用同一个挂载点,动态地在他们之间切换,使用保留的<code>&lt;component&gt;</code>元素,使用<code>is</code>特性进行动态绑定<br>可以使用keep-active把切出去的组件保留在内存中,这样还可以保留它的状态及样式,避免重新渲染或者使用  v-once<br><code>&lt;component :is=&quot;组件名称&quot;&gt;&lt;/component&gt;</code><br><img src="/image/vue/vue5.png" alt="组件多次使用"></p><h2 id="vue-单向数据流"><a href="#vue-单向数据流" class="headerlink" title="vue 单向数据流"></a>vue 单向数据流</h2><p><code>数据从父组件流向(传递)给子组件.只能单向绑定,在子组件内部不应该修改父组件传递过来的数据 会报错</code><br>解决办法：</p><ul><li>props作为子组件data中局部数据的初始值使用  克隆一份数据改变自己的<br><img src="/image/vue/vue6.png" alt="组件多次使用"></li><li>作为子组件中的computed属性<br><img src="/image/vue/vue7.png" alt="组件多次使用"></li></ul><h2 id="slot插槽"><a href="#slot插槽" class="headerlink" title="slot插槽"></a>slot插槽</h2><p><code>使用一种方式混合父组件的内容与子组件自己的模板,这个过程被称为内容分发</code><br>在子组件中使用<solt>元素作为内容测插槽,这样会使组件的可扩展性更强</solt></p><ul><li><p>单个slot</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 在子组件模板中有slot标签,被视为备用内容,在父组件不提供内容的情况下使用`</span></span><br><span class="line">&lt;div id=<span class="string">'app'</span>&gt;</span><br><span class="line">  &lt;h2&gt;自定义组件&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">  &lt;myslot&gt;&lt;/my</span>slot&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">Vue.component('myslot', &#123;</span></span><br><span class="line"><span class="regexp">  template: `</span></span><br><span class="line"><span class="regexp">    &lt;div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;slot&gt;我是默认的slot&lt;/</span>slot&gt;</span><br><span class="line">      &lt;p&gt;这是一个提醒&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;<span class="string">`</span></span><br><span class="line"><span class="string">&#125;)</span></span><br><span class="line"><span class="string">/*</span></span><br><span class="line"><span class="string">自定义组件</span></span><br><span class="line"><span class="string">我是默认的slot</span></span><br><span class="line"><span class="string">这是一个提醒</span></span><br><span class="line"><span class="string">*/</span></span><br><span class="line"><span class="string">// 2. 如果父组件提供内容,则把整个内容插入到slot所在的位置,并替换掉slot本身</span></span><br><span class="line"><span class="string">&lt;div id='app'&gt;</span></span><br><span class="line"><span class="string">  &lt;h2&gt;自定义组件&lt;/h2&gt;</span></span><br><span class="line"><span class="string">  &lt;myslot&gt;</span></span><br><span class="line"><span class="string">    &lt;div&gt;我是父组件的内容&lt;/div&gt;</span></span><br><span class="line"><span class="string">  &lt;/myslot&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">Vue.component('myslot', &#123;</span></span><br><span class="line"><span class="string">  template: `</span></span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;slot&gt;我是默认的slot&lt;<span class="regexp">/slot&gt;</span></span><br><span class="line"><span class="regexp">      &lt;p&gt;这是一个提醒&lt;/</span>p&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;`</span></span><br><span class="line"><span class="regexp">&#125;)</span></span><br><span class="line"><span class="regexp">/</span>*</span><br><span class="line">自定义组件</span><br><span class="line">我是父组件的内容</span><br><span class="line">这是一个提醒</span><br><span class="line">*<span class="regexp">/</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 3. 子组件模板中没有solt标签,父组件提供的内容会被抛弃</span></span><br><span class="line"><span class="regexp">&lt;div id='app'&gt;</span></span><br><span class="line"><span class="regexp">  &lt;h2&gt;自定义组件&lt;/</span>h2&gt;</span><br><span class="line">  &lt;myslot&gt;</span><br><span class="line">    &lt;div&gt;我是父组件的内容&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/my</span>slot&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">Vue.component('myslot', &#123;</span></span><br><span class="line"><span class="regexp">  template: `</span></span><br><span class="line"><span class="regexp">    &lt;div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;p&gt;这是一个提醒&lt;/</span>p&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;`</span></span><br><span class="line"><span class="regexp">&#125;)</span></span><br><span class="line"><span class="regexp">/</span>*</span><br><span class="line">自定义组件</span><br><span class="line">这是一个提醒</span><br><span class="line">*<span class="regexp">/</span></span><br></pre></td></tr></table></figure></li><li><p>具名slot插槽<br><code>&lt;slot&gt;元素可以用一个特殊的属性name来配置如何发布内容.可以使用匿名的的slot,处理那些没有对应的slot的内容</code><br><img src="/image/vue/vue8.png" alt="具名slot插槽"></p></li><li><p>slot-scope作用域插槽<br><code>父组件替换插槽的标签，父组件决定怎么展示，但是内容由子组件来提供。</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 子组件中包括一组数据，比如：pLanguages: ['JavaScript', 'Python', 'Swift', 'Go', 'C++']</span></span><br><span class="line">Vue.component(<span class="string">'MySlot'</span>,&#123;</span><br><span class="line">  template: <span class="string">`&lt;div :data="pLanguages"&gt;&lt;/div&gt;`</span>,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      pLanguages: [<span class="string">'JavaScript'</span>, <span class="string">'Python'</span>, <span class="string">'Swift'</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 需要在多个界面进行展示：某些界面是以水平方向展示的，某些界面是以列表形式展示的</span></span><br><span class="line"><span class="comment">// 内容在子组件，希望父组件告诉我们如何展示</span></span><br><span class="line"><span class="comment">// 在父组件使用我们的子组件时，从子组件中拿到数据：</span></span><br><span class="line"><span class="comment">// 我们通过&lt;template slot-scope="slotProps"&gt;获取到slotProps属性</span></span><br><span class="line"><span class="comment">// 在通过slotProps.data就可以获取到刚才我们传入的data了</span></span><br><span class="line"><span class="comment">// 父组件</span></span><br><span class="line">&lt;div id=<span class="string">"app"</span>&gt;</span><br><span class="line">  &lt;!-- 列表展示 --&gt;</span><br><span class="line">  &lt;MySlot&gt;</span><br><span class="line">    &lt;template slot-scope=<span class="string">"slotProps"</span>&gt;</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &lt;li v-<span class="keyword">for</span>=<span class="string">"(item,index) of slotProps.data"</span>&gt;&#123;&#123;item&#125;&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/u</span>l&gt;</span><br><span class="line">    &lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>MySlot&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">/</span>*</span><br><span class="line">. JavaScript</span><br><span class="line">. Python</span><br><span class="line">. Swift</span><br><span class="line">*<span class="regexp">/</span></span><br><span class="line"><span class="regexp">&lt;div id="app"&gt;</span></span><br><span class="line"><span class="regexp">  &lt;!-- 水平展示 --&gt;</span></span><br><span class="line"><span class="regexp">  &lt;MySlot&gt;</span></span><br><span class="line"><span class="regexp">    &lt;template slot-scope="slotProps"&gt;</span></span><br><span class="line"><span class="regexp">        &lt;span v-for="(item,index) of slotProps.data"&gt;&#123;&#123;item&#125;&#125; &lt;/</span>span&gt;</span><br><span class="line">    &lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>MySlot&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">/</span>*</span><br><span class="line">JavaScript Python Swift</span><br><span class="line">*<span class="regexp">/</span></span><br></pre></td></tr></table></figure></li><li><p>编译作用域<br><code>父组件的模板的内容在父组件作用域内编译</code><br><code>子组件的模板的内容在子组件作用域内编译</code><br><img src="/image/vue/vue9.png" alt="具名slot插槽"></p></li></ul><h2 id="Vue动画"><a href="#Vue动画" class="headerlink" title="Vue动画"></a>Vue动画</h2><ul><li><p>单元素/组件的过渡</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- appear 初始渲染的过渡  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">"fade"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">"show"</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">/* 过渡类名</span></span><br><span class="line"><span class="undefined">  name="fade"  过渡类名的前缀可自定义 默认前缀 v-</span></span><br><span class="line"><span class="undefined">  v-enter：定义进入过渡的开始状态。在元素被插入之前生效，在元素被插入之后的下一帧移除</span></span><br><span class="line"><span class="undefined">  v-enter-active：定义进入过渡生效时的状态。在整个进入过渡的阶段中应用，在元素被插入之前生效，</span></span><br><span class="line"><span class="undefined">    在过渡/动画完成之后移除。这个类可以被用来定义进入过渡的过程时间，延迟和曲线函数</span></span><br><span class="line"><span class="undefined">  v-leave-active：定义离开过渡生效时的状态。在整个离开过渡的阶段中应用，在离开过渡被触发时立刻生效，</span></span><br><span class="line"><span class="undefined">    在过渡/动画完成之后移除。这个类可以被用来定义离开过渡的过程时间，延迟和曲线函数。</span></span><br><span class="line"><span class="undefined">  v-leave：定义离开过渡的开始状态。在离开过渡被触发时立刻生效，下一帧被移除。</span></span><br><span class="line"><span class="undefined">*/</span></span><br><span class="line"><span class="css"><span class="selector-class">.fade-enter-active</span>, <span class="selector-class">.fade-leave-active</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">transition</span>: <span class="selector-tag">opacity</span> <span class="selector-class">.5s</span>;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.fade-enter</span>, <span class="selector-class">.fade-leave-to</span> &#123;</span></span><br><span class="line"><span class="undefined">  opacity: 0;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">/* 动画过渡钩子函数</span></span><br><span class="line"><span class="actionscript">  v-on:before-enter=<span class="string">"beforeEnter"</span> 动画执行之前</span></span><br><span class="line"><span class="actionscript">  v-on:enter=<span class="string">"enter"</span> 动画执行过程中</span></span><br><span class="line"><span class="actionscript">  v-on:after-enter=<span class="string">"afterEnter"</span> 动画执行之后</span></span><br><span class="line"><span class="actionscript">  v-on:before-leave=<span class="string">"beforeLeave"</span> 动画执行完成之前</span></span><br><span class="line"><span class="actionscript">  v-on:leave=<span class="string">"leave"</span> 动画执行完成过程中</span></span><br><span class="line"><span class="actionscript">  v-on:after-leave=<span class="string">"afterLeave"</span> 动画执行完成之后</span></span><br><span class="line"><span class="actionscript">  <span class="comment">// 回调函数 done 是可选的</span></span></span><br><span class="line"><span class="actionscript">  enter: <span class="function"><span class="keyword">function</span> <span class="params">(el, done)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// ...</span></span></span><br><span class="line"><span class="undefined">    done()</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="actionscript">  <span class="comment">// 回调函数 done 是可选的</span></span></span><br><span class="line"><span class="actionscript">  leave: <span class="function"><span class="keyword">function</span> <span class="params">(el, done)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// ...</span></span></span><br><span class="line"><span class="undefined">    done()</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">*/</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>多个元素/组件的过渡</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- tag 默认为span 渲染成真实DOM元素 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">transition-group</span> <span class="attr">tag</span>=<span class="string">"ul"</span> <span class="attr">name</span>=<span class="string">"slide"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"item in items"</span> <span class="attr">:key</span>=<span class="string">"item.id"</span>&gt;</span></span><br><span class="line">    &#123;&#123; item.text &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition-group</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><a href="https://cn.vuejs.org/v2/guide/transitions.html" target="_blank" rel="noopener">Vue动画详情</a></p></li></ul><h2 id="Vue生命周期函数"><a href="#Vue生命周期函数" class="headerlink" title="Vue生命周期函数"></a>Vue生命周期函数</h2><p><code>生命周期函数就是vue实例在某一个时间点会自动执行的函数</code><br><code>挂载阶段  更新阶段  销毁阶段</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//vue实例部分初始化的时候 组件实例刚刚被创建 属性都没有</span></span><br><span class="line">beforeCreate:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'beforeCreate'</span>)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//vue实例初始化完成  属性已经绑定</span></span><br><span class="line">created:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'created'</span>)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//页面渲染之前 模板编译之前 dom还未显示</span></span><br><span class="line">beforeMount:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'beforeMount'</span>)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//页面渲染完毕  (才有$el对象) dom显示完成</span></span><br><span class="line">mounted:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'mounted'</span>);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//vue实例被销毁之前 组件销毁前  操作: 解除绑定 销毁子组件及事件监听器</span></span><br><span class="line">beforeDestroy:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'beforeDestroy'</span>)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//vue实例被销毁 组件销毁后</span></span><br><span class="line">destroyed:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'destroyed'</span>)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//数据发生改变未渲染之前</span></span><br><span class="line">beforeUpdate:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'beforeUpdate'</span>)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//数据发生改变渲染完毕</span></span><br><span class="line">updated:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'updated'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 组件使用keep-alive专有</span></span><br><span class="line">activated: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'activated'</span>)</span><br><span class="line">&#125;</span><br><span class="line">deactivated: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'deactivated'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="Runtime-Compiler和Runtime-only的区别"><a href="#Runtime-Compiler和Runtime-only的区别" class="headerlink" title="Runtime-Compiler和Runtime-only的区别"></a>Runtime-Compiler和Runtime-only的区别</h2><p>vue有两种形式的代码 compiler（模板）模式和runtime模式（运行时）<br>如果在之后的开发中，你依然使用template，就需要选择Runtime-Compiler<br>如果你之后的开发中，使用的是.vue文件夹开发，那么可以选择Runtime-only<br>Runtime-only  性能更好  体积更小<br>vue模块的package.json的main字段默认为runtime模式， 指向了”vue/dist/vue.runtime.common.js”位置。<br>如要使用template修改vue指向 vue/dist/vue.esm.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Runtime-Compiler</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  component: &#123; App &#125;,</span><br><span class="line">  template: <span class="string">'&lt;App /&gt;'</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// Runtime-Only</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>gulp简单实用</title>
      <link href="/gulp/"/>
      <url>/gulp/</url>
      
        <content type="html"><![CDATA[<p><code>gulp</code>是基于<code>node</code>实现<code>Web前端自动化开发的工具</code>，利用它能够极大的提高开发效率。 在<code>Web</code>前端开发工作中有很多’重复工作’，比如压缩CSS/JS文件。编写 <code>gulp</code>配置代码,让<code>gulp</code>自动执行这些’重复工作’。<code>gulp</code>主要是基于任务流(stream)的自动化构建工具<br><a id="more"></a></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ul><li><code>npm install gulp -g</code></li><li>使用<code>gulp -v</code> 查看安装好的全局<code>gulp</code>版本</li><li><code>npm init -y</code> 创建package.json文件</li><li>新建<code>gulp</code>配置文件<code>gulpfile.js</code>(固定写法)</li><li>要运行<code>gulp</code>任务,只要在命令行切换到当前目录执行<code>gulp</code>命令即可,默认会执行任务名为<code>default</code>的任务</li></ul><h2 id="gulp使用流程"><a href="#gulp使用流程" class="headerlink" title="gulp使用流程"></a>gulp使用流程</h2><p><code>首先通过gulp.src()方法获取到我们想要处理的文件流，然后把文件流通过pipe方法导入到gulp的插件中，最后把经过插件处理后的流再通过pipe方法导入到gulp.dest()中，gulp.dest()方法则把流中的内容写入到文件中, 文件流可以继续使用,执行后续操作</code></p><h2 id="gulp的常用API"><a href="#gulp的常用API" class="headerlink" title="gulp的常用API"></a>gulp的常用API</h2><ul><li><p><code>gulp.task()</code>  用来定义任务</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 语法 gulp.task(name[, deps], fn)</span></span><br><span class="line"><span class="comment">name 为任务名</span></span><br><span class="line"><span class="comment">deps 是当前定义的任务需要依赖的其他任务，为一个数组。当前定义的任务会在所有依赖的任务执行完毕后才开始执行。如果没有依赖，则可省略这个参数</span></span><br><span class="line"><span class="comment">fn 为任务函数，我们把任务要执行的代码都写在里面。该参数也是可选的。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">gulp.task(<span class="string">'mytask'</span>, [<span class="string">'array'</span>, <span class="string">'of'</span>, <span class="string">'task'</span>, <span class="string">'names'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//定义一个有依赖的任务</span></span><br><span class="line">  <span class="comment">// Do something</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p><code>gulp.src()</code> 用来获取虚拟文件流的</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* gulp.src(globs[, options])</span></span><br><span class="line"><span class="comment">globs参数是文件匹配模式(类似正则表达式)，用来匹配文件路径(包括文件名)，当然这里也可以直接指定某个具体的文件路径。当有多个匹配模式时，该参数可以为一个数组。</span></span><br><span class="line"><span class="comment">options为可选参数。通常情况下我们不需要用到。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//使用数组的方式来匹配多种文件</span></span><br><span class="line">gulp.src([<span class="string">'js/*.js'</span>,<span class="string">'!bob*.js'</span>,<span class="string">'css/*.css'</span>,<span class="string">'*.html'</span>])</span><br><span class="line"><span class="comment">//匹配所有js文件，但排除掉以b开头的js文件</span></span><br><span class="line">gulp.src([*.js,<span class="string">'!b*.js'</span>])</span><br></pre></td></tr></table></figure></li><li><p><code>gulp.dest()</code> 方法是用来写文件的</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* gulp.dest(path[,options])</span></span><br><span class="line"><span class="comment">path为写入文件的路径 用来指定要生成的文件的目录，而不能指定生成文件的文件名 修改名称可以用gulp-rename</span></span><br><span class="line"><span class="comment">options为一个可选的参数对象，通常我们不需要用到</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> gulp = reruire(<span class="string">'gulp'</span>);</span><br><span class="line">gulp.src(<span class="string">'script/jquery.js'</span>).pipe(gulp.dest(<span class="string">'dist/foo.js'</span>));</span><br><span class="line"><span class="comment">//最终生成的文件路径为 dist/foo.js/jquery.js,而不是dist/foo.js</span></span><br><span class="line"><span class="comment">//有通配符开始出现的那部分路径为 **/*.js</span></span><br><span class="line">gulp.src(<span class="string">'script/**/*.js'</span>).pipe(gulp.dest(<span class="string">'dist'</span>)); <span class="comment">//最后生成的文件路径为 dist/**/*.js</span></span><br><span class="line"><span class="comment">//如果 **/*.js 匹配到的文件为 jquery/jquery.js ,则生成的文件路径为 dist/jquery/jquery.js</span></span><br></pre></td></tr></table></figure></li><li><p><code>gulp.watch()</code> 用来监视文件的变化，当文件发生变化后，可以用它来执行相应的任务，例如scss编译等</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* gulp.watch(glob[, opts], tasks)</span></span><br><span class="line"><span class="comment">glob 为要监视的文件匹配模式，规则和用法与gulp.src()方法中的glob相同。</span></span><br><span class="line"><span class="comment">opts 为一个可选的配置对象，通常不需要用到</span></span><br><span class="line"><span class="comment">tasks 为文件变化后要执行的任务，为一个数组</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">gulp.task(<span class="string">'sass'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;)</span><br><span class="line">gulp.watch(<span class="string">'v2.0/src/sass/*.scss'</span>, [<span class="string">'sass'</span>])</span><br></pre></td></tr></table></figure></li></ul><h2 id="常用gulp插件"><a href="#常用gulp插件" class="headerlink" title="常用gulp插件"></a>常用gulp插件</h2><ul><li><code>gulp-rename</code> 重命名 <code>npm install --save-dev gulp-rename</code></li><li><code>gulp-uglify</code> js文件压缩 <code>npm install --save-dev gulp-uglify</code></li><li><code>gulp-minify-css</code> css文件压缩 <code>npm install --save-dev gulp-minify-css</code></li><li><code>gulp-minify-html</code> html文件压缩 <code>npm install --save-dev gulp-minify-html</code></li><li><code>gulp-concat</code> 文件合并 <code>npm install --save-dev gulp-concat</code></li><li><code>gulp-less</code> less和sass的编译 <code>npm install --save-dev gulp-less</code></li><li><code>gulp-sass</code> less和sass的编译 <code>npm install --save-dev gulp-sass</code></li><li><code>gulp-imagemin</code> 图片压缩 <code>npm install --save-dev gulp-imagemin</code></li><li><code>gulp-zip</code> 将文件压缩成zip <code>npm install --save-dev gulp-zip</code></li><li><code>gulp-sftp</code> 将文件上传至ftp <code>npm install --save-dev gulp-sftp</code></li><li><code>browser-sync</code> 自动刷新 <code>npm install --save-dev browser-sync</code></li><li><code>gulp-autoprefixer</code> 为css文件添加浏览器前缀 <code>npm install gulp-clean-css --save-dev</code></li><li><code>gulp-if</code> 条件判断及环境变量设置 <code>npm install gulp-if —save-dev</code></li><li><code>gulp-babel</code> gulp中配置babel编译es6 需安装babel相关插件并配置.babelrc文件 还需要在项目中引入<code>babel-polyfill</code>编译es6新增api <code>npm install gulp-babel —save-dev</code></li><li><p><code>gulp-load-plugins</code> 自动加载插件 <code>npm install -D gulp-load-plugins</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 能自动帮你加载package.json文件里的gulp插件 无需将每一个插件都require进来 但前提是插件要以gulp-开头 已经安装过这些插件 */</span></span><br><span class="line"><span class="comment">/* package.json 中的gulp插件</span></span><br><span class="line"><span class="comment">"devDependencies": &#123;</span></span><br><span class="line"><span class="comment">  "gulp": "~3.6.0",</span></span><br><span class="line"><span class="comment">  "gulp-rename": "~1.2.0",</span></span><br><span class="line"><span class="comment">  "gulp-concat": "~0.4.3",</span></span><br><span class="line"><span class="comment">  "gulp-load-plugins": "~0.5.1"</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"><span class="comment">//加载gulp-load-plugins插件，并马上运行它</span></span><br><span class="line"><span class="keyword">var</span> plugins = <span class="built_in">require</span>(<span class="string">'gulp-load-plugins'</span>)();</span><br><span class="line">gulp.task(<span class="string">'rename'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  gulp.src(<span class="string">'js/jquery.js'</span>).pipe(plugins.rename())  <span class="comment">//压缩</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>添加<code>error</code>事件监听</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> babel = <span class="built_in">require</span>(<span class="string">"gulp-babel"</span>);</span><br><span class="line"> gulp.task(<span class="string">"babel"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src(srcJs)</span><br><span class="line">    .pipe(babel()) </span><br><span class="line">    .on(<span class="string">'error'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err)</span><br><span class="line">    &#125;)</span><br><span class="line">    .pipe(gulp.dest(distJs))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>由于<code>Gulp 4</code>并不向后兼容<code>Gulp 3</code>使用最新版时, 需要修改<code>gulpfile.js</code><br>参考链接: <a href="https://mp.weixin.qq.com/s?__biz=MzIyMjE0ODQ0OQ==&amp;mid=504069055&amp;idx=1&amp;sn=cc57dd70d720ef17013dde4d2cb272b6" target="_blank" rel="noopener">Gulp 4 入门指南</a> <a href="https://segmentfault.com/a/1190000005357048" target="_blank" rel="noopener">相对完整的Gulp4升级指南</a>  <a href="https://www.gulpjs.com.cn/" target="_blank" rel="noopener">gulp最新文档</a></p></li></ul><h2 id="gulpfile-js代码"><a href="#gulpfile-js代码" class="headerlink" title="gulpfile.js代码"></a>gulpfile.js代码</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp   = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</span><br><span class="line">  concat   = <span class="built_in">require</span>(<span class="string">'gulp-concat'</span>),<span class="comment">//多个文件合并为一个</span></span><br><span class="line">  cleanCss = <span class="built_in">require</span>(<span class="string">'gulp-clean-css'</span>),<span class="comment">// 压缩css为一行</span></span><br><span class="line">  ugLify   = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>),<span class="comment">//压缩js</span></span><br><span class="line">  imageMin = <span class="built_in">require</span>(<span class="string">'gulp-imagemin'</span>),<span class="comment">//压缩图片</span></span><br><span class="line">  pngquant = <span class="built_in">require</span>(<span class="string">'imagemin-pngquant'</span>),<span class="comment">//深度压缩</span></span><br><span class="line">  htmlMin  = <span class="built_in">require</span>(<span class="string">'gulp-htmlmin'</span>),<span class="comment">//压缩html</span></span><br><span class="line">  changed  = <span class="built_in">require</span>(<span class="string">'gulp-changed'</span>),<span class="comment">//检查改变状态</span></span><br><span class="line">  less     = <span class="built_in">require</span>(<span class="string">'gulp-less'</span>),<span class="comment">//压缩合并less</span></span><br><span class="line">  del      = <span class="built_in">require</span>(<span class="string">'del'</span>),</span><br><span class="line">  browserSync = <span class="built_in">require</span>(<span class="string">'browser-sync'</span>).create();<span class="comment">//浏览器实时刷新</span></span><br><span class="line"><span class="comment">//删除dist下的所有文件</span></span><br><span class="line">gulp.task(<span class="string">'delete'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">cb</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> del([<span class="string">'dist/*'</span>,<span class="string">'!dist/images'</span>],cb)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//压缩html</span></span><br><span class="line">gulp.task(<span class="string">'html'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> options = &#123;</span><br><span class="line">    removeComments:<span class="literal">true</span>,<span class="comment">//清除HTML注释</span></span><br><span class="line">    collapseWhitespace:<span class="literal">true</span>,<span class="comment">//压缩HTML</span></span><br><span class="line">    removeScriptTypeAttributes:<span class="literal">true</span>,<span class="comment">//删除script的type='text/script'</span></span><br><span class="line">    removeStyleLinkTypeAttributes:<span class="literal">true</span>,<span class="comment">//删除style和link的type='text/css'</span></span><br><span class="line">    minifyJS:<span class="literal">true</span>,<span class="comment">//压缩页面JS</span></span><br><span class="line">    minifyCSS:<span class="literal">true</span><span class="comment">//压缩页面CSS</span></span><br><span class="line">  &#125;;</span><br><span class="line">  gulp.src(<span class="string">'src/index.html'</span>)</span><br><span class="line">    .pipe(changed(<span class="string">'dist'</span>,&#123;<span class="attr">hasChanged</span>:changed.compareSha1Digest&#125;))</span><br><span class="line">    .pipe(htmlMin(options))</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist'</span>))</span><br><span class="line">    .pipe(browserSync.reload(&#123;<span class="attr">stream</span>:<span class="literal">true</span>&#125;))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//实时编译less</span></span><br><span class="line">gulp.task(<span class="string">'less'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  gulp.src([<span class="string">'./src/less/*.less'</span>]) <span class="comment">//多个文件以数组形式传入</span></span><br><span class="line">    .pipe(changed(<span class="string">'dist/css'</span>,&#123;<span class="attr">hasChanged</span>:changed.compareSha1Digest&#125;))</span><br><span class="line">    .pipe(less()) <span class="comment">//调用less模块编译less</span></span><br><span class="line">    .pipe(concat(<span class="string">'main.css'</span>)) <span class="comment">//合并之后生成main.css</span></span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist/css'</span>)) <span class="comment">//输出到指定目录下</span></span><br><span class="line">    .pipe(browserSync.reload(&#123;<span class="attr">stream</span>:<span class="literal">true</span>&#125;));</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//压缩js</span></span><br><span class="line">gulp.task(<span class="string">'script'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  gulp.src([<span class="string">'src/js/api.js'</span>,<span class="string">'src/js/index.js'</span>])</span><br><span class="line">    .pipe(changed(<span class="string">'dist/css'</span>,&#123;<span class="attr">hasChanged</span>:changed.compareSha1Digest&#125;))</span><br><span class="line">    .pipe(concat(<span class="string">'index.js'</span>))</span><br><span class="line">    .pipe(ugLify())</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist/js'</span>))</span><br><span class="line">    .pipe(browserSync.reload(&#123;<span class="attr">stream</span>:<span class="literal">true</span>&#125;))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//压缩图片</span></span><br><span class="line">gulp.task(<span class="string">'image'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  gulp.src(<span class="string">'./src/images/*.*'</span>)</span><br><span class="line">    .pipe(imageMin(&#123;</span><br><span class="line">      progressive:<span class="literal">true</span>,<span class="comment">//无损压缩JPG图片</span></span><br><span class="line">      svgoPlugins:[&#123;<span class="attr">removeViewBox</span>:<span class="literal">false</span>&#125;],<span class="comment">//不移除svg的viewbox属性</span></span><br><span class="line">      use:[pngquant()] <span class="comment">//使用pngquant插件进行深度压缩</span></span><br><span class="line">    &#125;))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将文件压缩成zip</span></span><br><span class="line">gulp.task(<span class="string">'zip'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'【build】/**/*'</span>, &#123;</span><br><span class="line">    base: <span class="string">'【build】'</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .pipe(zip(dateFormat(now, <span class="string">'yyyymmddHHMM'</span>) + folderName + <span class="string">'.zip'</span>))</span><br><span class="line">  .pipe(gulp.dest(<span class="string">'【build】'</span>))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//上传项目文件到ftp</span></span><br><span class="line">gulp.task(<span class="string">'up'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'【build】/*'</span> + folderName + <span class="string">'.zip'</span>, &#123;</span><br><span class="line">    base: <span class="string">'【build】'</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .pipe(sftp(&#123;</span><br><span class="line">    host: <span class="string">'xx'</span>,</span><br><span class="line">    user: <span class="string">'xx'</span>,</span><br><span class="line">    pass: <span class="string">'xx'</span>,</span><br><span class="line">    remotePath: <span class="string">'xx'</span>,</span><br><span class="line">    timeout: <span class="number">100000</span></span><br><span class="line">  &#125;))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//启动热更新</span></span><br><span class="line">gulp.task(<span class="string">'serve'</span>,[<span class="string">'delete'</span>],<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  gulp.start(<span class="string">'script'</span>,<span class="string">'less'</span>,<span class="string">'html'</span>);</span><br><span class="line">  browserSync.init(&#123;</span><br><span class="line">    port:<span class="number">2017</span>,</span><br><span class="line">    server:&#123;</span><br><span class="line">      baseDir:[<span class="string">'dist'</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  gulp.watch(<span class="string">'src/js/*.js'</span>,[<span class="string">'script'</span>]);  <span class="comment">//监控文件变化 自动更新</span></span><br><span class="line">  gulp.watch(<span class="string">'src/less/*.less'</span>,[<span class="string">'less'</span>]);</span><br><span class="line">  gulp.watch(<span class="string">'src/*.html'</span>,[<span class="string">'html'</span>]);</span><br><span class="line">  gulp.watch(<span class="string">'src/images/*.*'</span>,[<span class="string">'images'</span>]);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//执行任务</span></span><br><span class="line">gulp.task(<span class="string">'default'</span>,[<span class="string">'serve'</span>]);</span><br></pre></td></tr></table></figure><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://www.cnblogs.com/2050/p/4198792.html" target="_blank" rel="noopener">前端构建工具gulpjs的使用介绍及技巧</a><br><a href="https://v3.gulpjs.com.cn/" target="_blank" rel="noopener">gulp.js 中文网</a><br><a href="https://blog.csdn.net/guang_s/article/details/84775233" target="_blank" rel="noopener">gulp构建项目系列教程</a></p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> gulp </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>vue基础语法</title>
      <link href="/vue%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/"/>
      <url>/vue%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p><code>Vue.js</code>是一个构建数据驱动的web界面的库。核心概念：插值语法、插值表达式、v-model双向绑定、监听器 $watch、计算属性computed、动态绑定class、动态绑定内联样式、指令、过滤器等<br><a id="more"></a></p><h2 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h2><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MVVM模式可以极大的简化我们开发的工作量</span><br><span class="line"><span class="symbol">M:</span> Model 模型 前端中的数据    例如数组 对象等</span><br><span class="line"><span class="symbol">V:</span> View 视图、模板 前端中的dom对象 例如下拉框,弹层等</span><br><span class="line"><span class="symbol">VM:</span> ViewModel 视图模型  双向绑定  连接Model和View 将模型中的数据与视图中的数据绑定在一起 事件监听和数据绑定</span><br></pre></td></tr></table></figure><h2 id="插值语法"><a href="#插值语法" class="headerlink" title="插值语法"></a>插值语法</h2><ul><li>语法<code>{{}}</code>实现将模型中的数据渲染到视图中</li><li><code>v-text=&#39;js环境&#39;</code> 渲染数据</li><li><code>v-html=&#39;js环境&#39;</code> 可以将标签和数据渲染出来 注意: 写在里面的不需要<code>{{}}</code><br><img src="/image/vue/vue1.png" alt="插值语法"></li></ul><h2 id="插值表达式"><a href="#插值表达式" class="headerlink" title="插值表达式"></a>插值表达式</h2><p><code>插值的语法的本质上是提供了一个js环境,在js环境中我们可以使用js表达式(变量,运算符,方法等)</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;&#123;&#123;msg.toUpperCase()&#125;&#125; &#123;&#123;width*height&#125;&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">nue Vue(&#123;</span></span><br><span class="line"><span class="regexp">  data () &#123;</span></span><br><span class="line"><span class="regexp">    return &#123; msg: 'tew', width: 20, height: 30&#125;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ &lt;div&gt;TEW 40&lt;/</span>div&gt;</span><br></pre></td></tr></table></figure></p><h2 id="v-model双向绑定"><a href="#v-model双向绑定" class="headerlink" title="v-model双向绑定"></a>v-model双向绑定</h2><p><code>通过data属性实现数据模型到vue实例化对象的绑定(通过属性的特性实现)</code><br><code>通过v-model指令,实现视图到vue实例化对象的绑定(通过事件实现)</code><br><code>v-model的属性值是一个js作用域(一般用于表单元素中)</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// v-model 修饰符</span></span><br><span class="line"><span class="comment">// v-model.number='' 输入内容转化为数值类型</span></span><br><span class="line"><span class="comment">// v-model.trim = '' 去除首尾空格</span></span><br><span class="line"><span class="comment">// v-mode.lazy='' 等同于change事件</span></span><br></pre></td></tr></table></figure></p><h2 id="监听器-watch"><a href="#监听器-watch" class="headerlink" title="监听器 $watch"></a>监听器 $watch</h2><p><code>$watch 用于观察Vue实例上的数据变动 回调函数得到的参数为新值和旧值</code><br><code>watch 一个对象，键是需要观察的表达式，值是对应回调函数。值也可以是方法名，或者包含选项的对象。</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// $watch 或 watch 值变化时才执行  加上 immediate:true 绑定之后立即执行handle</span></span><br><span class="line"><span class="comment">// deep:true 会遍历监听对象下所有属性开销较大时, 可以写成字符串监听对象具体的属性</span></span><br><span class="line"><span class="comment">// $watch</span></span><br><span class="line">vm.$watch(</span><br><span class="line">  <span class="string">'a'</span>, <span class="comment">// 监听的值 或 函数的计算结果</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">newval, oldVal</span>)</span>&#123; <span class="comment">// 回调函数</span></span><br><span class="line">    <span class="built_in">console</span>.log(newVal+<span class="string">'--'</span>+oldVal)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    deep: <span class="literal">true</span>, <span class="comment">// 深度监听对象内部值的变化</span></span><br><span class="line">    immediate: <span class="literal">true</span> <span class="comment">// 立即执行回调函数</span></span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"><span class="comment">// watch</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  watch: &#123;</span><br><span class="line">    a: &#123;</span><br><span class="line">      handle () &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(newVal+<span class="string">'--'</span>+oldVal)</span><br><span class="line">      &#125;,</span><br><span class="line">      deep: <span class="literal">true</span>, <span class="comment">//任何被侦听的对象的 property 改变时被调用，不论其被嵌套多深</span></span><br><span class="line">      immediate: <span class="literal">true</span> <span class="comment">// 侦听开始之后被立即调用</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h2 id="计算属性-computed"><a href="#计算属性-computed" class="headerlink" title="计算属性 computed"></a>计算属性 computed</h2><p><code>在插值前对数据进行处理,vue提供了动态插值语法,允许在插值前调用一个函数来处理数据,动态函数要定义在computed属性中,属性值是一个对象,返回值就是插入视图中的数据</code><br>计算属性与methods普通方法好处: 计算属性中的计算结果会被缓存，多次使用时，计算属性只会调用一次。减少模板的复杂度,节省性能<br>计算属性依赖data数据只要有一个发生改变就会重新计算  计算的结果会被缓存  计算属性会挂载所在的实例上私有属性上 值是函数的返回值<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &lt;li v-fot="(item, index) in limtList" :key="item"&gt;&#123;&#123;item&#125;&#125;&lt;/item&gt;</span></span><br><span class="line">nue Vue(&#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">list</span>: [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>] &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  computed: &#123;</span><br><span class="line">    limtList () &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.list.filter(<span class="function"><span class="params">item</span> =&gt;</span> item &gt; <span class="number">7</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&lt;li&gt;8&lt;/li&gt;</span></span><br><span class="line"><span class="comment">&lt;li&gt;9&lt;/li&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></p><h2 id="class绑定HTML-Class类"><a href="#class绑定HTML-Class类" class="headerlink" title=":class绑定HTML Class类"></a>:class绑定HTML Class类</h2><p><code>v-bind:class 简写 (:class) 动态的渲染元素上的类  只需要计算出表达式的最终的字符串 可以与普通的class特性共存</code></p><ul><li><p>对象方式绑定类</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对象中的每个属性名称代表一个类的名称 属性值只能是布尔值</span></span><br><span class="line"><span class="comment">// true 表示保留这个属性类名   false 表示删除这个类名</span></span><br><span class="line"><span class="comment">// 属性中出现特殊字符 需要加上引号,</span></span><br><span class="line">&lt;div v-bind:<span class="class"><span class="keyword">class</span></span>=<span class="string">"&#123;acitve: isActive, 'has-bg':hasBg&#125;"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p>数组方式绑定类</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数组每个成员是变量,一旦加上引号就将变量转化成字符串  每个成员只能代表一个类</span></span><br><span class="line">&lt;div v-bind:<span class="class"><span class="keyword">class</span></span>=<span class="string">"[activeClass, errorClass]"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;div v-bind:<span class="class"><span class="keyword">class</span></span>=<span class="string">"[isActive ? activeClass : '', errorClass]"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="comment">// 数组语法中也可以使用对象语法：</span></span><br><span class="line">&lt;div v-bind:<span class="class"><span class="keyword">class</span></span>=<span class="string">"[&#123; active: isActive &#125;, errorClass]"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li></ul><h2 id="style绑定内联样式"><a href="#style绑定内联样式" class="headerlink" title=":style绑定内联样式"></a>:style绑定内联样式</h2><ul><li><p>对象语法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CSS 属性名可以用驼峰式 (camelCase) 或短横线分隔 (kebab-case，记得用引号括起来) 来命名：</span></span><br><span class="line"><span class="comment">// 对象的属性名称 表示css的属性名称</span></span><br><span class="line"><span class="comment">// 对象的属性值 表示css的样式属性值</span></span><br><span class="line">&lt;div v-bind:style=<span class="string">"&#123; color: textColor, 'font-size': fontSize + 'px' &#125;"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p>数组语法<br><code>&lt;div v-bind:style=&quot;[baseStyles, overridingStyles]&quot;&gt;&lt;/div&gt;</code></p></li></ul><h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><p><code>指令(Directives)是特殊的带有前缀v-的特性.指令就是扩展html标签功能和属性的</code></p><ul><li><code>v-once</code> 只绑定一次 只渲染一次 保留在内存中</li><li><code>v-text 插值</code><br><code>&lt;span v-text=&quot;msg&quot;&gt;&lt;/span&gt; 等同于 &lt;span&gt;{{msg}}&lt;/span&gt;</code></li><li><code>v-html 避免html元素被编译</code><br><code>&lt;div v-html=&quot;html&quot;&gt;&lt;/div&gt;</code></li><li><p><code>v-bind</code> 动态地绑定一个或多个 attribute，或一个组件 prop 到表达式 可简写成 <code>:</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;img v-bind:src=<span class="string">"imageSrc"</span>&gt;</span><br><span class="line">&lt;img :src=<span class="string">"imageSrc"</span>&gt; <span class="xml"><span class="comment">&lt;!-- 缩写 --&gt;</span></span></span><br><span class="line">&lt;my-component :prop="someThing"&gt;&lt;/my-component&gt;</span><br></pre></td></tr></table></figure></li><li><p><code>v-model</code> 在表单控件或者组件上创建双向绑定</p></li><li><code>v-pre</code> 跳过这个元素和它的子元素的编译过程</li><li><p><code>v-cloak</code> 可以隐藏未编译的 Mustache 标签直到实例准备完毕。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">'app'</span> v-cloak&gt;<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;text&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;style&gt;[v-cloak] &#123; <span class="attr">display</span>: none &#125;&lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>v-show</code> 切换元素的 display CSS 属性。<br><code>v-show是简单的切换元素的CSS display属性, 有v-show的元素会始终渲染到并保持在dom中,只是隐藏了而已,不支持template, 也不支持v-else</code><br><code>&lt;h1 v-show=&quot;isShow&quot;&gt;Hello!&lt;/h1&gt;</code></p></li><li><p><code>v-if</code> 动态渲染一个元素</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// v-if的属性值是true  会将这个元素渲染到页面中</span></span><br><span class="line"><span class="comment">// v-if的属性自是false  会将这个元素从页面中删除</span></span><br><span class="line"><span class="comment">// 切换多个元素,可以把多个元素放入template中,为其添加v-if指令,而最终的渲染结果并不会包含它</span></span><br><span class="line">&lt;div id=<span class="string">'app'</span>&gt;</span><br><span class="line">  &lt;template v-<span class="keyword">if</span>=<span class="string">"isShowDetail"</span>&gt;</span><br><span class="line">    &lt;sapn&gt;姓名: tew&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">    &lt;sapn&gt;性别: 男&lt;/</span>sapn&gt;</span><br><span class="line">  &lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>div&gt;</span><br></pre></td></tr></table></figure></li><li><p><code>v-else</code> 为 v-if 或者 v-else-if 添加“else 块”。<br><code>v-else元素必须紧跟v-if或v-show元素的后面  否则它不能被识别</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-<span class="keyword">if</span>=<span class="string">"Math.random() &gt; 0.5"</span>&gt;</span><br><span class="line">  Now you see me</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;div v-else&gt;</span></span><br><span class="line"><span class="regexp">  Now you don't</span></span><br><span class="line"><span class="regexp">&lt;/</span>div&gt;</span><br></pre></td></tr></table></figure></li><li><p><code>v-else-if</code><br><img src="/image/vue/vue2.png" alt="v-else-if"><br><code>注:  v-if是真实的条件渲染,它会在切换当中销毁与重建条件块内的事件监听器和子组件,有更高的切换消耗. v-show只是简单的基于css切换,有更高的初始渲染消耗,如果需要频繁的切换  使用v-show更好,如果条件不大可能改变则用v-if</code></p></li><li><p><code>v-on</code> 绑定事件监听器, 事件类型由参数指定 简写<code>@</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;button v-on:click=<span class="string">"doThis"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="comment">// &lt;!-- 内联语句 --&gt;</span></span><br><span class="line">&lt;button v-on:click=<span class="string">"doThat('hello', $event)"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="comment">// &lt;!-- 缩写 --&gt;</span></span><br><span class="line">&lt;button @click=<span class="string">"doThis"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="comment">// &lt;!-- 停止冒泡 --&gt;</span></span><br><span class="line">&lt;button @click.stop=<span class="string">"doThis"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="comment">// &lt;!-- 阻止默认行为 --&gt;</span></span><br><span class="line">&lt;button @click.prevent=<span class="string">"doThis"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="comment">// &lt;!-- 阻止默认行为，没有表达式 --&gt;</span></span><br><span class="line">&lt;form @submit.prevent&gt;<span class="xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line"><span class="comment">// &lt;!--  串联修饰符 --&gt;</span></span><br><span class="line">&lt;button @click.stop.prevent=<span class="string">"doThis"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="comment">// &lt;!-- 键修饰符，键别名 --&gt;</span></span><br><span class="line">&lt;input @keyup.enter=<span class="string">"onEnter"</span>&gt;</span><br><span class="line"><span class="comment">// &lt;!-- 键修饰符，键代码 --&gt;</span></span><br><span class="line">&lt;input @keyup<span class="number">.13</span>=<span class="string">"onEnter"</span>&gt;</span><br><span class="line"><span class="comment">// &lt;!-- 阻止单击事件冒泡 --&gt;</span></span><br><span class="line">&lt;a v-on:click.stop=<span class="string">"doThis"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="comment">// &lt;!-- 提交事件不再重载页面 --&gt;</span></span><br><span class="line">&lt;form v-on:submit.prevent=<span class="string">"onSubmit"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line"><span class="comment">// &lt;!-- 修饰符可以串联  --&gt;</span></span><br><span class="line">&lt;a v-on:click.stop.prevent=<span class="string">"doThat"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="comment">// &lt;!-- 只有修饰符 --&gt;</span></span><br><span class="line">&lt;form v-on:submit.prevent&gt;<span class="xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line"><span class="comment">// &lt;!-- 添加事件侦听器时使用事件捕获模式 --&gt;</span></span><br><span class="line">&lt;div v-on:click.capture=<span class="string">"doThis"</span>&gt;...&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ &lt;!-- 只当事件在该元素本身（而不是子元素）触发时触发回调 --&gt;</span></span><br><span class="line"><span class="regexp">&lt;div v-on:click.self="doThat"&gt;...&lt;/</span>div&gt;</span><br><span class="line"><span class="comment">// &lt;!--只触发一次--&gt;</span></span><br><span class="line">&lt;a v-on:click.once=<span class="string">"doThis"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="comment">// passive 会告诉浏览器你不想阻止事件的默认行为, 不用执行是否有preventDefault事件查询了</span></span><br><span class="line">&lt;div v-on:scroll.passive=<span class="string">"onScroll"</span>&gt;...&lt;<span class="regexp">/div</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 全部的按键别名：</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ @keyup.enter="" .tab .delete .esc .space .up .down .left .right .ctrl .alt .shift .meta</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 给组件绑定事件  需要事件加修饰符  @click.native=’handleClick’</span></span><br><span class="line"><span class="regexp">&lt;Child @click.native='test'/</span>&gt;</span><br></pre></td></tr></table></figure></li><li><p>获取事件对象的两种方式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式一 带括号 固定参数 $event</span></span><br><span class="line"><span class="comment">// 如果带括号而不传$event参数 则获取不到事件对象event</span></span><br><span class="line">&lt;button @click=<span class="string">"btnClick(1, $event)"</span>&gt;事件对象<span class="number">1</span>&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">btnClick(a, ev) &#123;</span></span><br><span class="line"><span class="regexp">  console.log(a)</span></span><br><span class="line"><span class="regexp">  console.log(ev)</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 方式二 不带括号</span></span><br><span class="line"><span class="regexp">&lt;button @click="btnClick"&gt;事件对象1&lt;/</span>button&gt;</span><br><span class="line">btnClick(ev) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(ev)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>多个事件处理程序</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 方式一 使用逗号分隔多个事件处理程序 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"one($event), two($event)"</span>&gt;</span></span><br><span class="line">  触发多个事件</span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 方式二 使用@xxx 和 v-on:xxx --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"one"</span> <span class="attr">v-on:click</span>=<span class="string">"two"</span>&gt;</span></span><br><span class="line">  触发多个事件</span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">methods: &#123;</span></span><br><span class="line"><span class="undefined">  one(event) &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">'one'</span>)</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  two(event) &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">'two'</span>)</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>v-for</code> 指令基于一个数组会对象来渲染一个列表。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// v-for 也可以接受一个整数,此时他将重复数次</span></span><br><span class="line">&lt;div&gt;</span><br><span class="line">  &lt;span v-<span class="keyword">for</span>=<span class="string">"n in 3"</span>&gt;&#123;&#123; n &#125;&#125; &lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>div&gt;</span><br><span class="line"><span class="comment">// &lt;span&gt;1&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;</span></span><br><span class="line"><span class="comment">// items 是源数据数组 item 迭代元素的别名 index 当前迭代元素的索引</span></span><br><span class="line"><span class="comment">// 可以使用 of 替代 in 如 v-for="(item, index) of items"</span></span><br><span class="line"><span class="comment">// :key 提升循环显示的性能 表示唯一key属性 可以避免重用或重排 2.2.0+以后key是必须的</span></span><br><span class="line"><span class="comment">// 当v-for与v-if处于同一节点，v-for 的优先级比 v-if 更高，v-if // 将分别重复运行于每个 v-for 循环中,可实现渲染部分项节点</span></span><br><span class="line">&lt;ul id=<span class="string">"example-1"</span>&gt;</span><br><span class="line">  &lt;li v-<span class="keyword">for</span>=<span class="string">"(item, index) in items"</span> :key=<span class="string">"item.message"</span>&gt;</span><br><span class="line">    &#123;&#123; item.message &#125;&#125;</span><br><span class="line">  &lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">&lt;/u</span>l&gt;</span><br><span class="line">&lt;div v-<span class="keyword">for</span>=<span class="string">"(val, key) of object"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;div v-<span class="keyword">for</span>=<span class="string">"(val, name, index) of object"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li></ul><h2 id="表单元素"><a href="#表单元素" class="headerlink" title="表单元素"></a>表单元素</h2><ul><li>多选 <code>type=&#39;checkbox&#39;</code> 对多选实现双向绑定,通过添加v-model指令绑定一个变量<br><code>变量的值是布尔值 true表示选中 false表示未选中,对于变量的值vue会进行类型的转化</code></li><li>单选 <code>type=&#39;radio&#39;</code> 对单选框实现双向绑定,通过给每个radio项添加v-model指令<br><code>v-model绑定的变量是谁,就会选中谁 单选框的v-model要设置同一个变量</code></li><li>下拉框 <code>select</code> 通过添加v-model属性实现下拉框双向绑定</li></ul><h2 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h2><p><code>过滤器可以用在两个地方：双花括号插值和v-bind表达式</code><br><code> 在双花括号中</code><br><code>&lt;div v-bind:id=&quot;rawId | formatId&quot;&gt;&lt;/div&gt; 在v-bind中</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &#123;&#123; message | capitalize &#125;&#125;</span></span><br><span class="line"><span class="comment">// 全局过滤器</span></span><br><span class="line">Vue.filter(<span class="string">'capitalize'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!value) <span class="keyword">return</span> <span class="string">''</span></span><br><span class="line">  value = value.toString()</span><br><span class="line">  <span class="keyword">return</span> value.charAt(<span class="number">0</span>).toUpperCase() + value.slice(<span class="number">1</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 局部过滤器</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  filters: &#123;</span><br><span class="line">    capitalize: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (!value) <span class="keyword">return</span> <span class="string">''</span></span><br><span class="line">      value = value.toString()</span><br><span class="line">      <span class="keyword">return</span> value.charAt(<span class="number">0</span>).toUpperCase() + value.slice(<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 多个过滤器 &#123;&#123; message | filterA | filterB &#125;&#125;</span></span><br><span class="line"><span class="comment">// 表达式 message 的值将作为参数传入到函数A中处理完成。然后继续调用filterB，将 filterA 的结果传递到 filterB 中</span></span><br><span class="line"><span class="comment">// 过滤器参数 &#123;&#123; message | filterA('arg1', arg2) &#125;&#125;</span></span><br><span class="line"><span class="comment">// filterA 被定义为接收三个参数的过滤器函数。其中 message的值作为第一个参数，普通字符串 'arg1' 作为第二个参数，表达式 arg2 的值作为第三个参数。</span></span><br></pre></td></tr></table></figure></p><h2 id="数组或对象值的更新问题"><a href="#数组或对象值的更新问题" class="headerlink" title="数组或对象值的更新问题"></a>数组或对象值的更新问题</h2><p><code>因为 JavaScript 的限制，Vue.js 不能检测到下面数组变化：不会触发视图更新</code><br><code>直接用索引设置元素，如 vm.items[0] = {}；</code><br><code>修改数据的长度，如 vm.items.length = 0。</code><br>数组变异方法会触发试图更新<br><code>push() pop() shift() unshift() splice() sort() reverse()</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 改变数组或对象的某一项值时,试图未更新, 触发试图更新的方法如下</span></span><br><span class="line"><span class="comment">// 1. 改变数组或对象的引用 重新为其赋值</span></span><br><span class="line"><span class="comment">// 2. 使用数组的变异方法  或 对象拷贝 新对象替换老对象</span></span><br><span class="line">vm = &#123; <span class="attr">list</span>: [&#123;<span class="attr">id</span>: <span class="string">'11'</span>, <span class="attr">name</span>: <span class="string">'bob'</span>&#125;,&#123;<span class="attr">id</span>: <span class="string">'22'</span>, <span class="attr">name</span>: <span class="string">'tom'</span>&#125;] &#125;</span><br><span class="line">vm.list.splice(<span class="number">1</span>,<span class="number">1</span>, &#123;<span class="attr">id</span>: <span class="string">'33'</span>, <span class="attr">name</span>: <span class="string">'tew'</span>&#125;)</span><br><span class="line"><span class="comment">// &#123; list:[&#123;id: "11", name: "bob"&#125;, &#123;id: "33", name: "tew"&#125;] &#125;</span></span><br><span class="line"><span class="comment">// 新对象  替换 旧对象</span></span><br><span class="line">obj = <span class="built_in">Object</span>.assign(&#123;&#125;, <span class="keyword">this</span>.obj, &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">e</span>: <span class="number">2</span> &#125;)</span><br><span class="line">obj = &#123;...this.obj, &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">e</span>: <span class="number">2</span> &#125;&#125;</span><br><span class="line"><span class="comment">// 3. 使用 Vue.set()或者 vm.$set()</span></span><br><span class="line">Vue.set(vm.list,<span class="string">'name'</span>,<span class="string">'tew'</span>)</span><br><span class="line">vm.$set(vm.list,<span class="string">'name'</span>,<span class="string">'tew'</span>)</span><br><span class="line"><span class="comment">// 4. 使用 this.$forceUpdate() 强制组件重新渲染</span></span><br></pre></td></tr></table></figure></p><h2 id="props-参数校验-与非props特性"><a href="#props-参数校验-与非props特性" class="headerlink" title="props 参数校验 与非props特性"></a>props 参数校验 与非props特性</h2><ul><li>props值方式一：<code>字符串数组，数组中的字符串就是传父组件传递的名称</code></li><li>props值方式二：<code>对象，对象可以设置传递时的类型， 默认值，是否必须等</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 非props 特性</span></span><br><span class="line"><span class="comment">// 如果子组件没有用props接受 会报错</span></span><br><span class="line"><span class="comment">// 父组件的属性会展示在子组件最外层的元素属性中</span></span><br><span class="line"><span class="comment">// props参数校验</span></span><br><span class="line">Vue.comonent(<span class="string">'child'</span>, &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    content: &#123;</span><br><span class="line">      type: <span class="built_in">String</span>, <span class="comment">// String Number Boolean Array Object Date Function Symbol</span></span><br><span class="line">      required: <span class="literal">false</span>, <span class="comment">// 必填</span></span><br><span class="line">      <span class="keyword">default</span>: <span class="string">'默认值'</span>, <span class="comment">// 字符串的默认值</span></span><br><span class="line">      validator(value)&#123; <span class="comment">// 自定义验证函数</span></span><br><span class="line">        <span class="keyword">return</span> value.length &gt; <span class="number">5</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    person: &#123;</span><br><span class="line">      type: <span class="built_in">Object</span>,</span><br><span class="line">      <span class="comment">// 对象或数组 默认值 必须从一个工厂函数获取</span></span><br><span class="line">      <span class="keyword">default</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="attr">name</span>: <span class="string">'tew'</span>&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  template: <span class="string">'&lt;div&gt;&#123;&#123;person.name&#125;&#125;--&#123;&#123;content&#125;&#125;&lt;/div&gt;'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h2 id="Vue-cli2-脚手架"><a href="#Vue-cli2-脚手架" class="headerlink" title="Vue-cli2 脚手架"></a>Vue-cli2 脚手架</h2><ol><li><code>npm install vue-cli -g</code>    安装 vue命令环境  脚手架工具  验证安装ok? vue –V</li><li>生成项目模板<br>vue init &lt;模板名&gt; 本地文件夹名称 vue list 查看官方提供模板<br>模块名  webpack 大型项目  Eslint 检测代码规范  单元测试<br>webpack-simple simple  browserify  browserify-simple</li><li>进入到生成目录里面 cd xxx  npm install  安装项目依赖</li><li>npm run dev    启动项目<br><code>注: 使用npm init 初始化项目的时候 路径不能有中文 不能有大写字母</code><br><code>vue-cli2 初始化项目过程</code><br><img src="/image/vue/vue-cli1.png" alt="vue-cli"><br><code>vue-cli2 项目目录结构</code><br><img src="/image/vue/vue-cli2.png" alt="vue-cli"></li></ol>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>git暂存，撤销更改等进阶用法</title>
      <link href="/git%E8%BF%9B%E9%98%B6/"/>
      <url>/git%E8%BF%9B%E9%98%B6/</url>
      
        <content type="html"><![CDATA[<p>当我们在开发项目的时候，突然来一个变更需要修改，但你又不想提交，这时我们除了将当前项目提交（<code>commit</code>）后切换（<code>checkout</code>） 到其他分支外，我们还可以先将当前的修改暂存（<code>stash</code>）起来，然后再切换（<code>checkout</code>）到其他分支，而不需要提交（<code>commit</code>），这样就可以减少一个 <code>commit</code><br><a id="more"></a></p><h2 id="git-stash-暂存文件"><a href="#git-stash-暂存文件" class="headerlink" title="git stash 暂存文件"></a>git stash 暂存文件</h2><h4 id="git-stash-或-git-stash-save-‘注释’-暂存修改"><a href="#git-stash-或-git-stash-save-‘注释’-暂存修改" class="headerlink" title="git stash 或 git stash save ‘注释’  暂存修改"></a>git stash 或 git stash save ‘注释’  暂存修改</h4><p>1、文件已经被git跟踪，只是修改了代码(而不是新增加文件)，我们可以使用git stash或git stash save “注释” 来暂存修改。<br>2、如果有新添加的文件，那么就需要添加参数 -a(会把隐藏的文件或.gitnore忽略的文件也暂存)<code>慎用</code>  -u 只暂存未跟踪的文件</p><ul><li>添加 -a 参数 (git stash -a 或 git stash save -a “注释”)<code>慎用</code></li><li>先 git add . 然后再使用 git stash 或 git stash save “注释” 来暂存修改</li><li>添加 -u 参数 (git stash -u 或 git stash save -u “注释”) <code>推荐</code><br><code>注: stash@{id}里面的id默认从0开始</code>  <a href="https://git-scm.com/docs/git-stash" target="_blank" rel="noopener">git-stash文档</a></li></ul><h4 id="git-stash-list-查看之前缓存的所有stash"><a href="#git-stash-list-查看之前缓存的所有stash" class="headerlink" title="git stash list  查看之前缓存的所有stash"></a>git stash list  查看之前缓存的所有stash</h4><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git stash list</span><br><span class="line">-------------------------</span><br><span class="line">stash@&#123;0&#125;: On masterOrder: masterOrder</span><br><span class="line">stash@&#123;1&#125;: On devOrder: devOrder</span><br></pre></td></tr></table></figure><h4 id="git-stash-show-查看某一次stash信息-修改了哪些文件"><a href="#git-stash-show-查看某一次stash信息-修改了哪些文件" class="headerlink" title="git stash show  查看某一次stash信息 修改了哪些文件"></a>git stash show  查看某一次stash信息 修改了哪些文件</h4><h4 id="git-stash-show-p-‘stash-0-’-查看某一次stash信息-查看修改文件里修改的内容"><a href="#git-stash-show-p-‘stash-0-’-查看某一次stash信息-查看修改文件里修改的内容" class="headerlink" title="git stash show -p ‘stash@{0}’ 查看某一次stash信息 查看修改文件里修改的内容"></a>git stash show -p ‘stash@{0}’ 查看某一次stash信息 查看修改文件里修改的内容</h4><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git stash show stash@&#123;0&#125;</span><br><span class="line">-------------------------</span><br><span class="line">gulpfile.js | 1 +</span><br><span class="line">1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure><h4 id="git-stash-apply-取出暂存区的stash-但不在stash-list中删除"><a href="#git-stash-apply-取出暂存区的stash-但不在stash-list中删除" class="headerlink" title="git stash apply 取出暂存区的stash 但不在stash list中删除"></a>git stash apply 取出暂存区的stash 但不在stash list中删除</h4><ul><li><code>git stash apply</code> 不指定stash 则默认取出第一条stash暂存</li><li><code>git stash apply stash@{1}</code> 取出指定stash</li></ul><h4 id="git-stash-drop-删除暂存区的stash"><a href="#git-stash-drop-删除暂存区的stash" class="headerlink" title="git stash drop 删除暂存区的stash"></a>git stash drop 删除暂存区的stash</h4><ul><li><code>git stash drop</code> 不指定stash 则默认删除第一条stash暂存</li><li><code>git stash drop stash@{1}</code> 删除指定stash</li></ul><h4 id="git-stash-pop-取出并删除暂存区的stash"><a href="#git-stash-pop-取出并删除暂存区的stash" class="headerlink" title="git stash pop 取出并删除暂存区的stash"></a>git stash pop 取出并删除暂存区的stash</h4><ul><li><code>git stash pop</code> 不指定stash 则默认取出并删除第一条stash暂存</li><li><code>git stash pop stash@{1}</code> 取出并删除指定stash</li></ul><h4 id="git-stash-clear-清空stash列表中所有的stash"><a href="#git-stash-clear-清空stash列表中所有的stash" class="headerlink" title="git stash clear 清空stash列表中所有的stash"></a>git stash clear 清空stash列表中所有的stash</h4><p><code>如果你使用的是vscode中windows的powershell命令行,则需要注意操作某个指定的stash时, &#39;stash@{1}&#39; 需要加上引号,否则会有如下问题,使用git bash命令行或者cmder等命令行工具可以不用加</code><br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git stash apply stash@&#123;1&#125;</span><br><span class="line">----------------------</span><br><span class="line">unknown option: -encodedCommand</span><br></pre></td></tr></table></figure></p><h4 id="stash-drop-误删恢复"><a href="#stash-drop-误删恢复" class="headerlink" title="stash drop 误删恢复"></a>stash drop 误删恢复</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. git fsck <span class="comment">--lost -found :查看最近移除的文件</span></span><br><span class="line">2. git <span class="keyword">show</span>  <span class="string">'误删编号'</span>：查看删除文件内容</span><br><span class="line"><span class="number">3.</span> git stash <span class="keyword">apply</span> <span class="string">'误删编号'</span>： 本地合并误删的文件内容</span><br></pre></td></tr></table></figure><p>参考：<a href="https://blog.csdn.net/weixin_44388689/article/details/120076830" target="_blank" rel="noopener">git stash drop 误删恢复</a></p><h2 id="git-tag-标签"><a href="#git-tag-标签" class="headerlink" title="git tag 标签"></a>git tag 标签</h2><p>项目的版本管理中,每当一个release版本发布时,需要做一个记录,以便以后需要的时候重新打包这个版本,这时候就用到tag这个功能.</p><ul><li>添加标签 <code>git tag -a v1.1.0 -m &quot;Release version&quot;</code> <code>-a v1.1.0 标签名称   -m 后面时注释</code></li><li>查看所有标签  <code>git tag --list</code></li><li><p>提交标签到远程服务器</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git push origin --tags <span class="comment">// 提交所有tag至服务器端</span></span><br><span class="line">git push origin v1<span class="number">.1</span><span class="number">.0</span> <span class="comment">// 提交某个tag至服务器端</span></span><br><span class="line"><span class="comment">// 注：git push origin master操作不会推送标签到服务器端。</span></span><br></pre></td></tr></table></figure></li><li><p>切换到某个标签 <code>git checkout [tagname]</code><br><code>切换到某个tag时， 不处于任何分支，处于有利状态，也未版本回退，请不要再次tag上修改，修改bug可以基于此tag创建分支并提交</code></p></li><li>查看某个标签信息 <code>git show v1.1.0</code></li><li>删除标签  <code>git tag -d v1.1.0</code></li><li>删除远程服务器标签  <code>git push origin :refs/tag/v1.1.0</code></li></ul><h2 id="git-撤销更改"><a href="#git-撤销更改" class="headerlink" title="git 撤销更改"></a>git 撤销更改</h2><ul><li>本地修改了一堆文件(并没有使用<code>git add</code>到暂存区)，想放弃修改。<br><code>git checkout -- &lt;filename&gt; 或 git checkout -- . (所有修改文件)</code></li></ul><p><code>将工作区中的文件的修改撤销，只撤销还没有add到暂存区的文件，不会撤销暂存区的文件，只放弃了修改的文件，新增和删除的不会被放弃</code></p><ul><li>本地新增或删除了一堆文件(并没有<code>git add</code>到暂存区)，想放弃修改<br><code>git clean -f &lt;filename&gt;</code> 移除本地新增，修改或删除的未add的文件</li></ul><h2 id="git回退"><a href="#git回退" class="headerlink" title="git回退"></a>git回退</h2><ul><li>本地修改/新增了一堆文件，已经<code>git add</code>到暂存区，想放弃修改。<br><code>git reset [HEAD] &lt;filename&gt; 或 git reset [HEAD] .</code> 或者 git 高版本可用  <code>git restore --staged &lt;filename&gt;</code></li><li>本地通过<code>git add &amp; git commit</code>之后，但还未<code>git push</code>，想要撤销此次commit<br><code>git reset commit_id 或 git reset --hard commit_id</code></li><li>撤销<code>git push</code>到远程的代码 (谨慎操作)<br><code>首先在本地仓库使用git reset –hard [commit_id]将本地仓库重置为需要撤销的版本,然后使用git push origin -f 进行提交，这样可以强制远程仓库与本地仓库一致</code></li><li>撤销commit注释（修改commit注释） 最近一次提交<br><code>git commit --amend -m &#39;备注信息&#39;</code>  即可覆盖上次信息合并为一次提交</li></ul><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="https://blog.csdn.net/sinat_29774479/article/details/78599702" target="_blank" rel="noopener">git各种情况的版本回退</a><br><a href="https://blog.csdn.net/qq_33475105/article/details/101229069" target="_blank" rel="noopener">Git撤销修改</a><br><a href="http://www.git-scm.com.cn/1546.html" target="_blank" rel="noopener">Git中文网-GitLab中文网 - Git安装、git使用、git下载、git中文</a><br><a href="https://github.com/521xueweihan/git-tips" target="_blank" rel="noopener">非常不错的git-tips</a><br><a href="https://juejin.im/post/5ee649ff51882542ea2b5108" target="_blank" rel="noopener">三年 Git 使用心得 &amp; 常见问题整理</a></p>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>git基本操作</title>
      <link href="/git%E5%9F%BA%E7%A1%80/"/>
      <url>/git%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<p>Git是一种版本控制器，git可以帮我们管理我们的代码保证代码不丢失，记录历史只要代码提交到git上就永久不会丢失,可以随时穿越，团队协作，强大的分支管理功能。<br><a id="more"></a></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ul><li>windows <a href="https://git-scm.com/downloads" target="_blank" rel="noopener">git下载地址</a></li><li>mac如果安装过xcode自带的git,homebrew是mac的包管理器</li><li>mac的命令行工具 <a href="http://ohmyz.sh/" target="_blank" rel="noopener">http://ohmyz.sh/</a>  <a href="http://www.iterm2.com" target="_blank" rel="noopener">http://www.iterm2.com</a></li><li><code>git --version</code> 查看版本号</li><li><code>git 图形化工具 SourceTree</code> 或 <code>Git GUI</code></li></ul><h2 id="初始化仓库"><a href="#初始化仓库" class="headerlink" title="初始化仓库"></a>初始化仓库</h2><ul><li><code>git init</code> 初始化git仓库</li><li><code>git clone &lt;git-repo&gt;</code> 克隆已被git管理项目</li></ul><h2 id="git配置"><a href="#git配置" class="headerlink" title="git配置"></a>git配置</h2><ol><li><code>项目配置文件：项目/.git/config</code> 只对本项目生效</li></ol><ul><li><code>git config --local user.name tew</code></li><li><code>git config --local user.email xxx@163.co</code></li></ul><ol start="2"><li><code>全局配置文件：~/.gitconfig或用户/.gitconfig</code> 全局生效</li></ol><ul><li><code>git config --global user.name tew</code> 配置用户名</li><li><code>git config --global user.email xxx@163.com</code> 配置用户邮箱</li><li><code>git config --global core.autocrlf false</code> 禁用换行符自动转换 取消windows下拉取项目将lf转为crlf</li><li><code>git config --list 或 git config -l</code> 查看git系统配置</li><li><code>git config --global -l</code> 查看git全局配置</li><li><code>git config --global --unset user.name</code> 删除全局配置</li></ul><h2 id="git的三种区域"><a href="#git的三种区域" class="headerlink" title="git的三种区域"></a>git的三种区域</h2><ul><li>工作区 即开发者的工作目录</li><li>暂存区 修改已被记录,但尚未录入版本库的区域</li><li>版本库 存储变化日志及版本信息</li></ul><h2 id="git-open-在浏览器中打开git项目对应的仓库地址"><a href="#git-open-在浏览器中打开git项目对应的仓库地址" class="headerlink" title="git-open 在浏览器中打开git项目对应的仓库地址"></a>git-open 在浏览器中打开git项目对应的仓库地址</h2><p><code>npm i -g git-open</code><br>在任何一个git目录，输入git open 就可以在你的浏览器中打开git项目对应的仓库地址, 支持GitHub, GitLab</p><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><ul><li><code>git add .</code> 将所有工作区文件添加到暂存区</li><li><code>git add file1 file2 ...</code> 将多个文件添加到暂存区 多个文件用空格隔开</li><li><code>git add -u</code> 只把修改过的文件加入暂存区，不增加新增的</li><li><code>git status</code> 查看工作区状态</li><li><code>git show &lt;commitId&gt;</code> 查看某次commit所做的更改</li><li><code>git commit -m &lt;message&gt;</code> 提交暂存区文件到版本库</li><li><code>git commit -am &lt;message&gt;</code> 提交暂存区已修改文件到版本库 无法提交为跟踪文件（未执行git add操作）</li><li><code>git commit -amend</code> 修改提交的文件内容或提交信息</li><li><code>git pull</code> 远程仓库拉取项目最新代码到工作区</li><li><code>git push</code> 将提交推送至远程仓库</li></ul><h2 id="版本回退-将版本库从当前版本回退到指定版本"><a href="#版本回退-将版本库从当前版本回退到指定版本" class="headerlink" title="版本回退 将版本库从当前版本回退到指定版本"></a>版本回退 将版本库从当前版本回退到指定版本</h2><ul><li><code>git reset --hard &lt;commitId&gt;</code> 回退本分支到某次提交，重置工作区与暂存区</li><li><code>git reset --hard HEAD^</code> 回退到前1个版本</li><li><code>git reset --hard HEAD^^</code> 回退到前2个版本</li><li><code>git reset --hard HEAD~n</code> 回退到前n个版本</li><li><code>git reset --hard 版本号</code> 回退到指定版本<br><code>git reset它可以被用来移除提交快照，尽管它通常被用来撤销暂存区和工作区的修改。不管是哪种情况，它应该只被用于本地修改——你永远不应该重设和其他开发者共享的快照。当你用 reset 回滚到了某个版本后，那么在下一次 git 提交时，之前该版本后面的版本会被作为垃圾删掉。如果要修改远程共享提交快照请使用git revert</code></li></ul><h2 id="git分支"><a href="#git分支" class="headerlink" title="git分支"></a>git分支</h2><ul><li><code>git branch</code> 查看本地分支</li><li><code>git branch -r</code> 查看所有远程分支</li><li><code>git branch -a</code> 查看所有分支</li><li><code>git branch devTest</code> 创建分支</li><li><code>git checkout devTest</code> 切换分支</li><li><code>git merge devTest</code> 合并分支</li><li><code>git branch -d devTest</code> 删除分支</li><li><code>git branch -D devTest</code> 强制删除分支</li><li><code>git branch -m devTest test</code>更改分支名称</li><li><code>git checkout -b devFlow</code> 创建devFlow分支并立即切换到devFlow分支上</li><li><code>git cherry-pick [commit]</code> 选择一个commit，合并进当前分支</li><li><code>git rebase &lt;branch&gt;</code> 衍合指定分支到当前分支</li><li><code>git revert &lt;commit&gt;</code> 撤销指定的提交<code>注：</code>git checkout 文件名或路径` 将暂存区内容还原到工作区(撤销更改)</li></ul><h2 id="git项目关联的三种方式"><a href="#git项目关联的三种方式" class="headerlink" title="git项目关联的三种方式"></a>git项目关联的三种方式</h2><ol><li>本地新建好 Git 项目，然后关联远程仓库`</li></ol><ul><li><code>git init</code> 初始化一个Git仓库</li><li><code>git add .</code> 将文件添加到暂存区</li><li><code>git commit -m &quot;提交&quot;</code> 提交暂存区文件</li><li><code>git remote add origin &lt;git-repo-url&gt;</code> 关联远程仓库</li><li><code>git push -u origin master</code> 推送到远程仓库</li></ul><ol start="2"><li>已建好远程仓库 然后clone到本地<br><code>git clone &lt;git-repo-url&gt;</code></li><li>将已使用git管理但未关联远程的项目 和指定的远程仓库关联<br><code>git remote add origin git@github.com:ittew/tetsts.git</code><br><code>git push -u origin master</code></li></ol><h2 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h2><ul><li><code>git remote add &#39;别名&#39; &#39;远程仓库地址&#39;</code> 添加远程仓库并起别名</li><li><code>git remote</code> 查看远程仓库的详细信息</li><li><code>git remote-v</code> 查看远程仓库的地址</li><li><code>git remote remove &#39;别名&#39;</code> 删除远程仓库的别名</li><li><code>git remote rename &#39;旧名称&#39; &#39;新名称&#39;</code> 更改远程仓库别名</li><li><code>git remote set-url origin &lt;newurl&gt;</code> 设置或修改远程仓库的地址</li></ul><h2 id="git配置公钥登录-避免每次都要输入用户名-密码"><a href="#git配置公钥登录-避免每次都要输入用户名-密码" class="headerlink" title="git配置公钥登录 避免每次都要输入用户名/密码"></a>git配置公钥登录 避免每次都要输入用户名/密码</h2><ul><li>创建公钥<code>ssh key</code>  <code>ssh-keygen -t rsa –C &#39;xxx@163.com&#39;</code> 一路按回车即可 邮箱为git账号绑定的邮箱</li><li>在用户目录下找到<code>.ssh</code>目录下<code>id_rsa.pup</code>(公钥)文件 <code>C:\Users\Administrator\.ssh\id_rsa.pup</code></li><li>用编辑器打开<code>id_rsa.pup</code>文件复制全部内容</li><li>在gitlab、github或码云上的个人中心添加新的SSH公钥 将复制的内容粘贴进去</li><li>测试验证是否配置成功 <code>ssh -T git@github.com</code> 看到以下内容及成功<br><code>Hi ittew! You&#39;ve successfully authenticated, but GitHub does not provide shell access.</code></li><li>最重要的一步 <code>git remote -v</code> 查看你当前的远程 remote url 不用https协议，改用git 协议（即SSH）<br><code>git remote set-url origin &lt;sshUrl&gt; 或 将项目目录.git的config文件修改里面的url为git@github.com:xxx/xxx.git</code></li><li>再次查看 git remote -v 出现以下内容即修改成功<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修改前 git remote -v</span></span><br><span class="line">origin  https:<span class="comment">//github.com/ittew/mpvue-book.git (fetch)</span></span><br><span class="line">origin  https:<span class="comment">//github.com/ittew/mpvue-book.git (push)</span></span><br><span class="line"><span class="comment">// 修改后 git remote -v</span></span><br><span class="line">origin  git@github<span class="selector-class">.com</span>:ittew/hexo<span class="selector-class">.git</span> (fetch)</span><br><span class="line">origin  git@github<span class="selector-class">.com</span>:ittew/hexo<span class="selector-class">.git</span> (push)</span><br></pre></td></tr></table></figure></li></ul><h2 id="git免密登录的三种方式"><a href="#git免密登录的三种方式" class="headerlink" title="git免密登录的三种方式"></a>git免密登录的三种方式</h2><ul><li>配置SSH免密登录 (git配置公钥登录)</li><li><p>在URL中实现</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">原来的地址：http<span class="variable">s:</span>//github.<span class="keyword">com</span>/xxx.git</span><br><span class="line">修改的地址：http<span class="variable">s:</span>//用户名:密码@github.<span class="keyword">com</span>/xxx.git</span><br><span class="line">git remote <span class="built_in">add</span> origin master http<span class="variable">s:</span>//用户名:密码@github.<span class="keyword">com</span>/xxx.git</span><br></pre></td></tr></table></figure></li><li><p>git自动管理凭证<br>参考资料：<a href="http://www.360doc.com/content/18/0417/22/54185769_746494224.shtml" target="_blank" rel="noopener">Git凭证存储</a></p></li></ul><h2 id="git日志"><a href="#git日志" class="headerlink" title="git日志"></a>git日志</h2><ul><li><code>git log</code> 显示提交日志</li><li><code>git log --pretty=oneline</code> 格式化日志格式</li><li><code>git log --graph</code> 图形化日志记录</li><li><code>git reflog</code> 可以查看所有分支的所有操作记录</li><li><code>git shortlog -sn</code> 统计每个作者的提交个数</li><li><code>git shortlog -sn --no-merges</code> 统计每个作者的提交个数，不包含<code>merge commit</code></li><li><code>git shortlog</code>  统计每个作者的提交情况</li></ul><h2 id="git忽略文件"><a href="#git忽略文件" class="headerlink" title="git忽略文件`"></a>git忽略文件`</h2><p><code>.gitignore 忽略文件，让git不在管理当前项目下的某些文件</code><br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">项目根目录新建 <span class="string">.gitignore</span> 文件</span><br><span class="line"><span class="string">.idea</span> 忽略单个文件</span><br><span class="line">dist/ 忽略文件夹</span><br><span class="line">node_modules/  忽略文件夹</span><br><span class="line">*<span class="string">.h</span> 忽略以 <span class="string">.h</span> 结尾的文件</span><br><span class="line">!con.h 不忽略 con.h 文件</span><br><span class="line">*<span class="string">.h</span>[s|d] 忽略以 <span class="string">.hs</span>或<span class="string">.hd</span> 结尾文件</span><br></pre></td></tr></table></figure></p><p>更多参考：<a href="https://gitub.com/github/gitignore" target="_blank" rel="noopener">不同开发语言的gitignore设置</a></p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul><li><code>git remote prune origin</code> 远程已经删除的分支，在本地执行<code>git branch -a</code>显示还存在，执行以下命令可以清除</li><li><code>git中操作多个文件使用空格将其隔开即可 如 git add file1 file2 ...</code></li><li><code>git rm filename</code> 删除暂存区和工作区的文件</li><li><code>git rm --cached filename</code> 只删除暂存区的文件，不会删除工作区的文件</li></ul><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="https://git-scm.com/book/zh/v2" target="_blank" rel="noopener">Git-关于版本控制</a><br><a href="https://shfshanyue.github.io/cheat-sheets/git" target="_blank" rel="noopener">Git 常用命令图</a><br><a href="https://juejin.im/post/5c35b1f3e51d4503834d39b4?utm_source=gold_browser_extension" target="_blank" rel="noopener">为了前端的深度-git的命令行</a><br><a href="https://www.liaoxuefeng.com/wiki/896043488029600" target="_blank" rel="noopener">Git教程–廖雪峰</a></p>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Fiddler抓包</title>
      <link href="/Fiddler%E6%8A%93%E5%8C%85%E5%B7%A5%E5%85%B7/"/>
      <url>/Fiddler%E6%8A%93%E5%8C%85%E5%B7%A5%E5%85%B7/</url>
      
        <content type="html"><![CDATA[<p><code>Fiddler</code> 是世界上最强大最好用的<code>Web</code>调试工具，可以称得上是”神器” 。其用途非常广泛，能记录所有客户端和服务器的<code>HTTP</code>和<code>HTTPS</code> 请求，允许你监视、设置断点，甚至至修改输入输出数据。<code>Fiddler</code>包含了一个强大的基于事件脚本的子系统，并且能使用.NET语言进行扩展。无论对开发人员或者测试人员来说，<code>Fiddler</code>都是非常有用的工具。<br><a id="more"></a></p><h2 id="Fiddler下载和安装"><a href="#Fiddler下载和安装" class="headerlink" title="Fiddler下载和安装"></a>Fiddler下载和安装</h2><p>Fiddler下载地址: <a href="https://www.telerik.com/fiddler" target="_blank" rel="noopener">Fiddler</a></p><h2 id="Fiddler-基本界面"><a href="#Fiddler-基本界面" class="headerlink" title="Fiddler 基本界面"></a>Fiddler 基本界面</h2><ul><li>主菜单栏–&gt; Fiddler基础功能</li><li>工具栏—&gt; 提供了很多常见的命令</li><li>Web Sessions列表(会话列表)—&gt;显示捕捉到的请求的详细信息</li><li>功能面板—&gt;包含很多常用的功能比如(Inspectors,AutoResponder等)</li><li>QuickExec—&gt;命令行工具, 可以输入简单的命令例如cls清空</li></ul><p><img src="/image/other/fiddler1.png" alt="简介"></p><h2 id="Fiddler-抓包设置"><a href="#Fiddler-抓包设置" class="headerlink" title="Fiddler 抓包设置"></a>Fiddler 抓包设置</h2><ol><li>找到你的网络连接或者wiff，打开HTTP代理， 输入Fiddler所在机器的<code>IP地址(比如:192.168.1.104)</code> 以及Fiddler的<code>端口号8888</code>, 设置代理</li><li><code>安装Fiddler证书</code>这一步是为了让Fiddler能捕获HTTPS请求。如果你只需要截获HTTP请求，可以忽略这一步。假如我安装了Fiddler的机器的<code>IP地址是:192.168.1.104</code>打开手机浏览器访问 <code>http://192.168.1.104:8888</code>， 点<code>&quot;FiddlerRoot certificate&quot;</code> 然后安装证书</li><li>默认情况下， <code>Fiddler</code>不会捕获<code>HTTPS</code>会话，需要进行设置,启动Fiddler，在菜单栏中单击<code>Tools-&gt;Fiddler Options-&gt;HTPPS</code>，选中<code>DecryptH PS traffic</code>，在弹出的２个对话框中单击<code>＂Yes＂</code>.同时选中<code>“Igno server certificate errors”</code>来忽略一些证书错误 如图</li></ol><p><img src="/image/other/fiddler2.png" alt="简介"></p><h2 id="Fiddler-设置断点修改请求报文"><a href="#Fiddler-设置断点修改请求报文" class="headerlink" title="Fiddler 设置断点修改请求报文"></a>Fiddler 设置断点修改请求报文</h2><p><code>Fiddler</code>不但能抓包，还能改包。想要修改<code>HTTP</code>报文，就需要先下断点拦截住<code>HTTP</code>请求报文或者 <code>HTTP</code>响应报文，修改后再放行。<code>Fiddler</code>既能修改<code>HTTP请求报文</code>，也能修改<code>HTTP响应报文</code>。<code>AutoResponder</code>是<code>Fiddler</code>比较重要且比较强大的功能之一。可用于拦截某一请求，并重定向到本地的资源，或者使用<code>Fiddler</code>的内置响应。可用于调试服务器端代码而无需修改服务器端的代码和配置，因为拦截和重定向后，实际上访问的是本地的文件或者得到的是<code>Fiddler</code>的内置响应。<br><img src="/image/other/fiddler3.png" alt="简介"> <code>设置断点</code><br><img src="/image/other/fiddler4.png" alt="简介"> <code>修改请求，然后放行</code><br><img src="/image/other/fiddler5.png" alt="简介"></p><h2 id="Fiddler-设置断点修改响应体"><a href="#Fiddler-设置断点修改响应体" class="headerlink" title="Fiddler 设置断点修改响应体"></a>Fiddler 设置断点修改响应体</h2><p><code>Fiddler</code>修改<code>HTTP</code>响应体，就需要先下断点拦截住<code>HTTP</code>请求，修改后再放行。<br><code>设置断点</code><img src="/image/other/fiddler6.png" alt="简介"> <code>修改响应，然后放行</code><br><img src="/image/other/fiddler7.png" alt="简介"></p><h2 id="Fiddler-在线调试线上文件"><a href="#Fiddler-在线调试线上文件" class="headerlink" title="Fiddler 在线调试线上文件"></a>Fiddler 在线调试线上文件</h2><p>在工作中经常需要去调试 <code>HTML</code>、<code>css</code>、或者<code>JavaScript</code>文件。<code>Fiddler</code>中的<code>Auto Responder</code>功能可以把要调试的文件保存到本地进行调试，这大大减少了在线调试的困难，提高了效率。你只需要修改本地文件，然后刷新浏览器，这样你就能看到修改后的效果了。而不用每次修改代码之后，重新部署到正式服务器上。<br><img src="/image/other/fiddler8.png" alt="简介"></p><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ol><li><code>在Fiddler抓包的过程中，我们经常看到HTTP响应是乱码，单击“Response body is encoded. Click to decode.&quot;可以解压HTTP响应</code></li><li><code>Fiddler忽略HTTP的握手验证请求 Tunnel to请求, 选在菜单中的 Rules--&gt;Hide CONNESTS</code></li></ol><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="https://blog.csdn.net/ohmygirl/article/details/17846199" target="_blank" rel="noopener">Fiddler 简介</a><br><a href="https://blog.csdn.net/ohmygirl/article/details/17849983" target="_blank" rel="noopener">使用Fiddler 做抓包分析</a><br><a href="https://blog.csdn.net/ohmygirl/article/details/17855031" target="_blank" rel="noopener">Fiddler 命令行和 HTTP 断点调试</a><br><a href="https://www.jianshu.com/p/99b6b4cd273c" target="_blank" rel="noopener">Fiddler 教程</a></p><h2 id="Vorlon-远程调试"><a href="#Vorlon-远程调试" class="headerlink" title="Vorlon 远程调试"></a>Vorlon 远程调试</h2><ul><li>全局安装 <code>npm i -g vorlon</code></li><li>启动服务 <code>vorlon</code></li><li>调试页面引入 <code>&lt;script src=&quot;http://本地ip地址:1337/vorlon.js&quot;&gt;&lt;/script&gt;</code></li><li>手机设置代理 ip地址为电脑的局域网ip地址, 默认端口:8888</li><li>浏览器打开调试：<code>http://本地ip地址:1337</code></li></ul><h2 id="weinre真机调试"><a href="#weinre真机调试" class="headerlink" title="weinre真机调试"></a>weinre真机调试</h2><p><code>Weinre(WebInspector Remote)</code>是一款基于<code>Web Inspector(Webkit)</code>的远程调试工具，借助于网络，可以在PC上直接调试运行在移动设备上的远程页面</p><ul><li>全局安装 <code>npm install –g weinre</code></li><li><p>启动 <code>weinre --httpPort 8090 --boundHost -all-</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 8080端口使用情况较多，所以我选择了指定8090端口。</span></span><br><span class="line">httpPort: 设置Wninre使用的端口号，默认是<span class="number">8080</span></span><br><span class="line">boundHost: [hostname | Ip | -all-]: 默认是 <span class="string">'localhost'</span>.</span><br><span class="line">debug [<span class="literal">true</span> | <span class="literal">false</span>] :这个选项与–verbose类似， 会输出更多的信息。默认为<span class="literal">false</span>。</span><br><span class="line">readTimeout [seconds]:Server发送信息到Target/Client的超时时间， 默认为<span class="number">5</span>s。</span><br><span class="line">deathTimeout  [seconds]:默认为<span class="number">3</span>倍的readTimeout,如果页面超过这个时间都没有任何响应,那么就会断开连接.</span><br></pre></td></tr></table></figure></li><li><p>在浏览器中输入<code>localhost:8090</code> 打开 WeinreDe bug 客户端</p></li><li>在我们要调试的页面中，增加一个脚本。<code>&lt;script src=&quot;http://localhost:8090/target/target-script-min.js#anonymous&quot;&gt;&lt;/script&gt;</code>记住将localhost换成你的IP地址.</li><li>在手机端访问要调试的网页,就可以点击Elements进行调试, 修改样式时，会在手机端即时生效，并且也可以查看控制台信息。<br><img src="/image/other/weinre.png" alt="简介"></li></ul><h2 id="Charles实现本地数据mock模拟"><a href="#Charles实现本地数据mock模拟" class="headerlink" title="Charles实现本地数据mock模拟"></a>Charles实现本地数据mock模拟</h2><ul><li>安装 windows 版charles <a href="https://www.charlesproxy.com/download/" target="_blank" rel="noopener">官网下载地址</a></li></ul><h2 id="项目中引入VConsole"><a href="#项目中引入VConsole" class="headerlink" title="项目中引入VConsole"></a>项目中引入VConsole</h2><p><code>&lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/vConsole/3.0.0/vconsole.min.js&quot;&gt;&lt;/script&gt;</code></p><h2 id="项目中引入eruda"><a href="#项目中引入eruda" class="headerlink" title="项目中引入eruda"></a>项目中引入eruda</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/eruda/2.3.3/eruda.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined">eruda.init();</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>eruda和vconsole</code>内置于项目，打印移动端日志，查看网络请求以及查看 Cookie 和 Storage</p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> fiddler </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>javascript基础(四)--(BOM,DOM)</title>
      <link href="/javascript%E5%9F%BA%E7%A1%80(4)/"/>
      <url>/javascript%E5%9F%BA%E7%A1%80(4)/</url>
      
        <content type="html"><![CDATA[<p><code>DOM（Document Object Model）（文档对象模型）</code> 定义了用于访问文档的标准, 允许程序和脚本动态访问和更新文档的内容、结构和样式。<code>BOM（borwser Object  Model）（浏览器对象模型）</code> 使用对象描述了浏览器的各个部分的内容。<code>DOM</code>描述了处理网页内容的方法和接口，<code>BOM</code>描述了与浏览器进行交互的方法和接口。<br><a id="more"></a></p><h2 id="BOM-Browser-Object-Model-浏览器对象模型"><a href="#BOM-Browser-Object-Model-浏览器对象模型" class="headerlink" title="BOM(Browser Object Model)   浏览器对象模型"></a>BOM(Browser Object Model)   浏览器对象模型</h2><h4 id="window对象-窗口本身-BOM模型中的顶层对象"><a href="#window对象-窗口本身-BOM模型中的顶层对象" class="headerlink" title="window对象 窗口本身 BOM模型中的顶层对象"></a>window对象 窗口本身 BOM模型中的顶层对象</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// window尺寸兼容获取方法 (不包括工具栏和滚动条)</span></span><br><span class="line"><span class="keyword">var</span> w=<span class="built_in">window</span>.innnerWidth(标准浏览器)||<span class="built_in">document</span>.body.clientWidth(IE5678)||</span><br><span class="line"><span class="built_in">document</span>.documentElement.clientWidth</span><br><span class="line"><span class="built_in">window</span>.open()  <span class="comment">// 在新窗口打开空白页面</span></span><br><span class="line"><span class="comment">// window.open(url, target, setting, boolean)</span></span><br><span class="line"><span class="comment">// 参数1：要加载的URL   参数2：窗口目标   参数:3：新目标窗口的一些设置  参数4：是否取代浏览器历史记录</span></span><br><span class="line"><span class="built_in">window</span>.open(<span class="string">"http://www.baidu.com"</span>) <span class="comment">// 在新窗口打开指定网页(默认为新窗口打开)</span></span><br><span class="line"><span class="built_in">window</span>.open(<span class="string">"http://www.baidu.com"</span>,<span class="string">'_self'</span>) <span class="comment">// 在自身窗口打开指定页面</span></span><br><span class="line"><span class="built_in">window</span>.open(<span class="string">"http://www.baidu.com"</span>,<span class="string">'name'</span>,<span class="string">'width=320,height=480'</span>) <span class="comment">// 在自身窗口打开指定页面</span></span><br><span class="line"><span class="built_in">window</span>.close() <span class="comment">// 关闭窗口  基本不用</span></span><br><span class="line"><span class="built_in">window</span>.moveTo() <span class="comment">// 使窗口移动到制定位置</span></span><br><span class="line"><span class="built_in">window</span>.resizeTo()  <span class="comment">// 使窗口尺寸改变指定大小</span></span><br></pre></td></tr></table></figure><h4 id="Navigator对象"><a href="#Navigator对象" class="headerlink" title="Navigator对象"></a>Navigator对象</h4><p>①<code>window.navigator.userAgent</code> 获取操作系统的版本,浏览器版本/类型的信息<br>②<code>window.navigator.appName</code>   返回浏览器的名称<br>③<code>window.navigator.cookieEnabled</code>  返回指明浏览器中是否启用cookie的布尔值<br>④<code>window.navigator.paltform</code>    获取用户所使用的操作系统</p><h4 id="History对象"><a href="#History对象" class="headerlink" title="History对象"></a>History对象</h4><p>①<code>window.history.length</code>  返回浏览器历史列表中的url数量<br>②<code>window.history.back()</code>  加载 <code>history</code> 列表中的前一个 URL<br>③<code>window.history.forward()</code> 加载 <code>history</code> 列表中的下一个 URL<br>④<code>window.history.go(-num)</code> 加载 <code>history</code> 列表中的某个具体页面</p><h4 id="location对象"><a href="#location对象" class="headerlink" title="location对象"></a>location对象</h4><p>①<code>window.location</code> 返回当前文档的URL<br>②<code>window.location.href=&quot;http://www.baidu.com&quot;</code>  跳转页面<br>②<code>window.location.assign(&#39;http://www.baidu.com&#39;)</code>  跳转页面<br>③<code>window.loaction.reload()</code>  刷新当前页面<br>④<code>window.loaction.search</code>  返回地址栏中?后面的参数<br>⑤<code>window.location.hash</code>    返回地址栏中的hash值</p><h4 id="screen对象"><a href="#screen对象" class="headerlink" title="screen对象"></a>screen对象</h4><p>①<code>window.screen.width</code>  返回显示器的宽度<br>②<code>window.screen.height</code> 返回显示器的高度<br>③<code>window.screen.availHeight/availWidth</code> 有效宽度或高度去除任务栏</p><h4 id="document对象"><a href="#document对象" class="headerlink" title="document对象"></a>document对象</h4><p><code>包含了页面中的可见内容,由html标签对象节点构成对象树树根就是document</code><br>1.可视区尺寸<br><code>document.documentElement.clientWidth</code><br><code>document.documentElement.clientHeight</code><br>2.滚动距离<br><code>document.documentElement.scrollTop||docuemnt.body.scrollTop</code><br>3.文档高度<br><code>document.documentElement.offsetHeight</code><br><code>document.body.offsetHeight (IE)</code></p><h2 id="DOM-Document-Object-Model-文档对象模型-整个页面结构"><a href="#DOM-Document-Object-Model-文档对象模型-整个页面结构" class="headerlink" title="DOM  (Document Object Model)  文档对象模型 整个页面结构"></a>DOM  (Document Object Model)  文档对象模型 整个页面结构</h2><h4 id="DOM对象属性"><a href="#DOM对象属性" class="headerlink" title="DOM对象属性"></a>DOM对象属性</h4><p>1.<code>document.cookie</code> 设置或返回与当前文档有关的所有<code>cookie</code><br>2.<code>document.title</code> 当前文档的标题<br>3.<code>document.URL</code> 当前文档(页面)的完整URL(地址栏显示的URL)<br>4.<code>document.domain</code> 获取域名<br>5.<code>document.referrer</code> 连接到当前页面的那个页面的URL<br>6.<code>document.body.innerHTML</code> 设置body内容<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ex:<span class="keyword">var</span> t = <span class="built_in">document</span>.title</span><br><span class="line"><span class="built_in">console</span>.log(t)  <span class="comment">//字符串的练习</span></span><br><span class="line">t = <span class="string">'字符串'</span></span><br><span class="line"><span class="built_in">console</span>.log(t)   <span class="comment">//字符串</span></span><br><span class="line"><span class="keyword">var</span> u = <span class="built_in">document</span>.URL</span><br><span class="line"><span class="built_in">console</span>.log(u)   <span class="comment">//file:///C:/Users/Administrator/Desktop/1.html</span></span><br></pre></td></tr></table></figure></p><h4 id="获取DOM对象的方法"><a href="#获取DOM对象的方法" class="headerlink" title="获取DOM对象的方法"></a>获取DOM对象的方法</h4><ol><li><code>document.getElementById(&#39;test1&#39;)</code>  按ID找 返回值是单个对象 多个相同ID时只返回第一个</li><li><code>document.getElementsByTagName(&#39;p&#39;)[0]</code> 必须加方括号下标明确那一个对象<br><code>document.getElementsByTagName(&#39;p&#39;)[1].style.background=&quot;green&quot;</code><br>按标签找 返回值是对象的集合(数组) 即使只找到一个也包装成对象的集合<br><code>document.getElementsByTagName()</code><br>动态方法  可以动态获取元素,获取动态的NodeLists,改变dom结构会影响Nodelists</li><li><code>document.querySelectorAll()</code> 返回所有匹配到的元素NodeList集合，没匹配到返回空的NodeList<br>静态方法  获取静态的Nodelist,改变相关的node不会改变静态的nodelist,这个对象必须在获取的时候被创建出来<br><code>在动态NodeList里return的是一个指针，而静态的NodeList返回时当前的node所有信息。</code></li><li><code>document.querySelector(CSS选择符)</code> 返回匹配到的第一个元素，没匹配到返回null</li><li><code>document.getElementsByName(&#39;username&#39;)[0]</code><br>对于表单元素 可以用name来找返回值是对象的集合(数组)<br><code>注:获取表单中输入的数据 document.表单名.表单元素名.value</code></li><li><code>document.getElementsByClassName(&#39;test2&#39;)[0]</code>  //IE9以下不兼容<br>按类名查找 对象的集合(数组)</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*&lt;body&gt;</span></span><br><span class="line"><span class="comment">  &lt;h1&gt;找对象&lt;/h1&gt;</span></span><br><span class="line"><span class="comment">  &lt;div id="test1"&gt;</span></span><br><span class="line"><span class="comment">    &lt;p&gt;p1&lt;/p&gt;</span></span><br><span class="line"><span class="comment">    &lt;p&gt;p2&lt;/p&gt;</span></span><br><span class="line"><span class="comment">    &lt;p&gt;p3&lt;/p&gt;</span></span><br><span class="line"><span class="comment">  &lt;/div&gt;</span></span><br><span class="line"><span class="comment">  &lt;div class="test2"&gt;class test2&lt;/div&gt;</span></span><br><span class="line"><span class="comment">  &lt;input type="text" name="username" value="bob" /&gt;</span></span><br><span class="line"><span class="comment">&lt;/body&gt;*/</span></span><br><span class="line"><span class="comment">//获取class   兼容ie9以下</span></span><br><span class="line"><span class="keyword">var</span> body = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'body'</span>)</span><br><span class="line"><span class="keyword">var</span> con = getByClass(body[<span class="number">0</span>],<span class="string">'con'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(con[<span class="number">0</span>].className)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getByClass</span>(<span class="params">oParent,cla</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> arr = []</span><br><span class="line">  <span class="keyword">var</span> ele = oParent.getElementsByTagName(<span class="string">'*'</span>)</span><br><span class="line">  <span class="keyword">var</span> re  = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'\\b'</span>+cla+<span class="string">'\\b'</span>) <span class="comment">//独立部分</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;ele.length;i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(re.test(ele[i].className))&#123;</span><br><span class="line">      arr.push(ele[i])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="操作对象的属性"><a href="#操作对象的属性" class="headerlink" title="操作对象的属性"></a>操作对象的属性</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">""</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">title</span>=<span class="string">""</span> <span class="attr">style</span>=<span class="string">"width:200px;height:200px;"</span>  /&gt;</span></span><br><span class="line">img对象的属性  img.src  img.alt img.title img.style</span><br><span class="line">普通属性的读取  对象.标签属性</span><br><span class="line">普通属性的改值  对象.标签属性 = "值"</span><br><span class="line">获得元素的自定义属性  getAttribute('alt')</span><br><span class="line">设置元素的自定义属性  setAttribute('abc','hao')</span><br><span class="line">移除元素的自定义属性  removeAttribute('alt')</span><br><span class="line"></span><br><span class="line">attributes  属性值集合</span><br><span class="line">getAttribute()   获取节点行间属性的值   setAttribute()   设置行间属性节点的值</span><br><span class="line"></span><br><span class="line">自定义属性的设置和获取</span><br><span class="line">obj.attr = "值"</span><br><span class="line">obj.index = i;   //索引值匹配  匹配对应关系</span><br><span class="line"></span><br><span class="line">js中允许把 "." 换成 "['']"</span><br><span class="line">obj.style.width = "100px"    // .后面的值无法修改</span><br><span class="line">obj.style[attr] = value      // []后面的值可以随便写</span><br></pre></td></tr></table></figure><h4 id="设置样式"><a href="#设置样式" class="headerlink" title="设置样式"></a>设置样式</h4><p><code>对象.style.width = &#39;100px&#39;</code><br><code>对象.style.cssText = &#39;width:100px;height:100px&#39;</code> 只会修改行内的样式 后写的覆盖前面的</p><h4 id="获取样式"><a href="#获取样式" class="headerlink" title="获取样式"></a>获取样式</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 行间样式的获取 CSS属性的访问</span></span><br><span class="line">oBox.style.width <span class="comment">// 只能获取行间样式</span></span><br><span class="line"><span class="comment">// 操作class要用className    obj.className</span></span><br><span class="line"><span class="comment">// 如果修改元素的float属性</span></span><br><span class="line">obj.style.styleFloat = <span class="string">"left"</span>;  (IE)</span><br><span class="line">obj.style.cssFloat = <span class="string">"left"</span>;  (非IE)</span><br><span class="line"><span class="comment">// 如果css属性带有横线则把横线去掉后的字母大写 obj.style.marginLeft</span></span><br><span class="line"><span class="comment">// 非行间样式的获取  (得到的是计算后最终的样式)</span></span><br><span class="line"><span class="number">1.</span>getComputedStyle(oBox,<span class="literal">null</span>(伪元素)).width<span class="comment">//标准浏览器兼容,IE8以下不兼容</span></span><br><span class="line"><span class="number">2.</span>oBox.currentStyle.width     <span class="comment">//IE6,7,8和opera兼容,其他不兼容</span></span><br><span class="line"><span class="comment">// 兼容写法(不能直接获取复合样式,不要获取未设置的样式)</span></span><br><span class="line"><span class="built_in">console</span>.log(getStyle(oBox,<span class="string">'width'</span>));</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStyle</span>(<span class="params">obj,attr</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> obj.currentStyle?obj.currentStyle[attr]:getComputedStyle(obj)[attr];</span><br><span class="line">&#125;</span><br><span class="line">注: 属性操作注意事项</span><br><span class="line">  a. 所有的相对路径都别拿来做判断</span><br><span class="line">  b. 颜色值不要拿来做判断 背景图片路径也不能做判断</span><br><span class="line">  c. innerHTML值别拿来做判断</span><br><span class="line">  d. 所有的图片路径不能做判断  但是可以用getAttribute(<span class="string">'src'</span>)</span><br></pre></td></tr></table></figure><h4 id="DOM节点相关操作"><a href="#DOM节点相关操作" class="headerlink" title="DOM节点相关操作"></a>DOM节点相关操作</h4><ul><li>节点信息</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">a.nodeName <span class="comment">// 节点名称 obj.nodeName</span></span><br><span class="line">  元素节点和属性节点:标签或属性名称</span><br><span class="line">  文本节点:  永远都是#text</span><br><span class="line">  文档节点:  永远都是#document</span><br><span class="line">b.nodeType   <span class="comment">// 节点类型(返回数值) obj.nodeType</span></span><br><span class="line">  NodeType:节点类型<span class="number">12</span>种(常见有 元素节点 文本节点 属性节点 注释节点)</span><br><span class="line">  元素节点:返回<span class="number">1</span></span><br><span class="line">  属性节点:返回<span class="number">2</span></span><br><span class="line">  文本节点:返回<span class="number">3</span>   文字,空格或换行都属于文本节点</span><br><span class="line">  注释节点:返回<span class="number">8</span></span><br><span class="line">  文档节点:返回<span class="number">9</span></span><br><span class="line">c.nodeValue   <span class="comment">//获取节点的值</span></span><br><span class="line">  只有属性节点,注释节点和文本节点才有值,元素节点是没有值 返回<span class="literal">null</span>(节点值用innerText)</span><br></pre></td></tr></table></figure><ul><li>查找节点</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">a.子节点</span><br><span class="line">  obj.childNodes <span class="comment">// 获取所有子节点 在IE6 7 8只会找到元素节点 而其他浏览器所有节点都会找到</span></span><br><span class="line">  obj.children <span class="comment">// 只会找到元素节点 不存在兼容问题 推荐使用</span></span><br><span class="line">b.父节点  <span class="comment">//obj.parentNode  找元素的父节点</span></span><br><span class="line">c.兄弟节点</span><br><span class="line">  obj.nextElementSibling  <span class="comment">//下一个兄弟节点</span></span><br><span class="line">  obj.previousElementSibling  <span class="comment">//上一个兄弟节点</span></span><br><span class="line">  obj.nextSiblings      <span class="comment">// 取得下一个紧邻的兄弟元素</span></span><br><span class="line">  obj.previousSiblings  <span class="comment">// 取得上一个紧邻的兄弟元素</span></span><br><span class="line">d. 第一个或最后的节点</span><br><span class="line">  obj.firstElementChild</span><br><span class="line">  obj.lastElementChild</span><br><span class="line">注:nextSibling属性与nextElementSibling属性的差别：</span><br><span class="line">nextSibling返回指定元素节点后下一个兄弟节点(包括文本节点、注释节点即回车、换行、空格、文本)</span><br><span class="line">nextElementSibling属性只返回元素节点之后的兄弟元素节点(不包括文本节点、注释节点)</span><br></pre></td></tr></table></figure><ul><li>节点相关操作</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">A. 创建节点</span><br><span class="line">  <span class="built_in">document</span>.createElement(<span class="string">'标签'</span>)</span><br><span class="line">B. 添加节点</span><br><span class="line">  parentNode.appendChild(<span class="string">'元素节点'</span>)  <span class="comment">// 往父节点后面添加一个子节点</span></span><br><span class="line">  parentNode.insertBefore(新节点,子节点或<span class="literal">null</span>) <span class="comment">// 在指定子节点前面插入一个节点</span></span><br><span class="line">  parentNode.insertAfter(新节点,子节点)  <span class="comment">//在指定子节点后面插入一个节点</span></span><br><span class="line">C. 删除节点</span><br><span class="line">  obj.parentNode.removeChild(obj) 先找到对象  再找到其父元素  在删除该对象</span><br><span class="line">D. 替换节点</span><br><span class="line">  parentNode.replaceChild(用来替换节点,被替换节点)  参数必须</span><br><span class="line">C. 克隆节点</span><br><span class="line">  obj.cloneNode(<span class="built_in">boolean</span>) 默认为<span class="literal">false</span>  但不会clone事件</span><br><span class="line">    <span class="literal">true</span>: 克隆元素及其包含的子孙节点</span><br><span class="line">    <span class="literal">false</span>: 克隆元素但不包含的子孙节点</span><br><span class="line"></span><br><span class="line">创建及添加元素节点</span><br><span class="line"><span class="keyword">var</span> div1=<span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line"><span class="keyword">var</span> odiv=<span class="built_in">document</span>.getElementById(<span class="string">"one"</span>);</span><br><span class="line">odiv.appendChild(div1);</span><br><span class="line"></span><br><span class="line">创建及添加属性节点</span><br><span class="line"><span class="keyword">var</span> newAttr= <span class="built_in">document</span>.createAttribute(<span class="string">"id"</span>);</span><br><span class="line"><span class="keyword">var</span> odiv=<span class="built_in">document</span>.getElementById(<span class="string">"one"</span>);</span><br><span class="line">newAttr.value=<span class="string">"newDiv1"</span>;</span><br><span class="line">odiv.setAttributeNode(newAttr)</span><br><span class="line"></span><br><span class="line">创建及添加文本节点</span><br><span class="line"><span class="keyword">var</span> div1=<span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line"><span class="keyword">var</span> odiv=<span class="built_in">document</span>.getElementById(<span class="string">"one"</span>);</span><br><span class="line"><span class="keyword">var</span> txt=<span class="built_in">document</span>.createTextNode(<span class="string">"文本内容"</span>);</span><br><span class="line">div1.appendChild(txt);</span><br><span class="line">odiv.appendChild(div1);</span><br></pre></td></tr></table></figure><ul><li><code>innerHTML</code>与<code>innerText</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">obj.innerHTML=<span class="string">"&lt;li&gt;春&lt;/li&gt;&lt;li&gt;夏&lt;/li&gt;&lt;li&gt;秋&lt;/li&gt;"</span>; <span class="comment">//改变标签里的内容</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&lt;div id="test"&gt;&lt;span&gt;test1&lt;/span&gt;test2&lt;/div&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">test.innerHTML: 包括Html标签和文本内容  <span class="comment">// &lt;span&gt;test1&lt;/span&gt;test2</span></span><br><span class="line">test.innerText: 去除Html标签只含文本内容 <span class="comment">// test1 test2</span></span><br><span class="line">test.outerHTML: 除了包含innerHTML的全部内容外, 还包含对象标签本身。<span class="comment">//&lt;div id="test"&gt;&lt;span&gt;test1&lt;/span&gt;test2&lt;/div&gt;</span></span><br><span class="line">注:innerHTML是符合W3C标准的属性,而innerText不适用于firefox浏览器,</span><br><span class="line"><span class="comment">// 在火狐中可以使用 test.TextContent 或 test.innerHTML.replace(/&lt;.+?&gt;/gim,'')</span></span><br></pre></td></tr></table></figure><ul><li><p>动态添加脚本文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadScript</span> (<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>)</span><br><span class="line">  script.type = <span class="string">'text/javascript'</span></span><br><span class="line">  script.src = url</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(script)</span><br><span class="line">&#125;</span><br><span class="line">loadScript(<span class="string">'test.js'</span>)</span><br></pre></td></tr></table></figure></li><li><p>动态添加样式文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadStyle</span> (<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> link = <span class="built_in">document</span>.createElement(<span class="string">'link'</span>)</span><br><span class="line">  link.rel = <span class="string">'stylesheet'</span></span><br><span class="line">  link.type = <span class="string">'text/css'</span></span><br><span class="line">  link.href = url</span><br><span class="line">  <span class="keyword">var</span> head = <span class="built_in">document</span>.head || <span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>]</span><br><span class="line">  head.appendChild(link)</span><br><span class="line">&#125;</span><br><span class="line">loadStyle(<span class="string">'common.css'</span>)</span><br></pre></td></tr></table></figure></li></ul><h2 id="JS-表格和表单的操作"><a href="#JS-表格和表单的操作" class="headerlink" title="JS 表格和表单的操作"></a>JS 表格和表单的操作</h2><ul><li>表单的操作<br>1.<code>selectedIndex</code> 可设置或返回下拉列表中被选择选项的索引号,若多选则返回第一个被选择的索引号<br><code>obj.options[obj.selectIndex].value</code> 获取选中下拉列表选项的值<br>2.<code>focus()</code>获取焦点 <code>select()</code>选中<br>3.<code>复选框和单选按钮的onclick事件可以通过checked判断是否被选中</code><br><code>下拉列表一般用onchange事件遍历所有项通过selected判断是否选中</code><br><code>注. IE6,IE7,IE8 不支持input类型修改,会报错</code><br>4.<code>document.forms</code> 获取页面中所有的表单</li><li>表格的操作</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">tab.tHead <span class="comment">//获取表格头部thead</span></span><br><span class="line">tab.tFoot <span class="comment">//获取表格底部tfoot</span></span><br><span class="line">tab.tBodies <span class="comment">//获取表格主体tbody可以有多个</span></span><br><span class="line"><span class="comment">// tr和td对象的访问</span></span><br><span class="line">tab.rows <span class="comment">//获取表格中的行数tr</span></span><br><span class="line">tab.rows[<span class="number">0</span>].cells <span class="comment">//获取某一行的列数</span></span><br><span class="line"><span class="comment">//通过数组方式更新指定单元格中的数据</span></span><br><span class="line">tab.rows[<span class="number">1</span>].cells[<span class="number">2</span>].innerHTML=<span class="string">"as"</span>;</span><br><span class="line"><span class="comment">//tr和td对象的创建</span></span><br><span class="line">tab.insertRow() <span class="comment">//为表格新增行</span></span><br><span class="line">row.insertCell() <span class="comment">//为行新增列(参数-1)表示新增在最后面</span></span><br><span class="line"><span class="comment">//tr和td对象的删除</span></span><br><span class="line">tab.deleteRow() <span class="comment">//删除行</span></span><br><span class="line">tab.rows[<span class="number">0</span>].deleteCell() <span class="comment">//删除列</span></span><br></pre></td></tr></table></figure><h4 id="DOM扩展"><a href="#DOM扩展" class="headerlink" title="DOM扩展"></a>DOM扩展</h4><ul><li><p><code>document.activeElement HTML5新增辅助管理DOM焦点的功能</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// document.activeElement // 会始终引用DOM中当前获得了焦点的元素</span></span><br><span class="line"><span class="comment">// 获得焦点的方式：页面加载、用户输入(Tab)、调用focus()</span></span><br><span class="line"><span class="comment">// 文档刚刚加载完成时，document.activeElement中保存的是document.body元素的引用 加载期间值为null</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.activeElement) <span class="comment">// &lt;body&gt;...&lt;/body&gt; 加载完成默认是body</span></span><br><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">'btn'</span>)</span><br><span class="line">btn.focus()</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.activeElement === btn) <span class="comment">// true</span></span><br><span class="line"><span class="comment">// doucment.hasFocus() // 确认文档是否获得了焦点</span></span><br><span class="line"><span class="built_in">console</span>.log(doucment.hasFocus) <span class="comment">// 文档是否获取了焦点 可判断用户是否正在与页面交互</span></span><br></pre></td></tr></table></figure></li><li><p><code>classList HTML5新增的操作类名的方式</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">obj.classList.add(<span class="string">'demo'</span>) <span class="comment">// add 添加指定的类名 如果已存在就不在添加</span></span><br><span class="line">obj.classList.contains(<span class="string">'demo'</span>) <span class="comment">// contains 是否包含给定类名 存在返回true 否则返回false</span></span><br><span class="line">obj.classList.remove(<span class="string">'demo'</span>) <span class="comment">// remove 删除给定的类名</span></span><br><span class="line">obj.classList.toggle(<span class="string">'demo'</span>) <span class="comment">// toggle 如果已存在给定类名则删除它，如果不存在给定的值则添加给定类名</span></span><br></pre></td></tr></table></figure></li><li><p><code>data-xxx HTML5新增自定义数据属性</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在标签上添加 data-开头自定义属性 可以通过 元素.dataset.属性获取</span></span><br><span class="line"><span class="comment">// &lt;div id="mydiv" data-appid = '123' data-name='tew'&gt;</span></span><br><span class="line"><span class="built_in">console</span>.log(mydiv.dataset.appid + <span class="string">'-'</span> + mydiv.dataset.name) <span class="comment">// 123-tew</span></span><br></pre></td></tr></table></figure></li><li><p><code>ele.scrollIntoView()</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 滚动浏览器窗口或某个容器元素，使调用元素或获得焦点元素出现在视口中</span></span><br><span class="line"><span class="comment">// scrollIntoView(true)或scrollIntoView() // 滚动之后会让调用元素顶部与视口顶部尽可能平齐</span></span><br><span class="line"><span class="comment">// scrollIntoView(false) // 滚动之后会让调用元素尽可能全部出现在视口中 调用元素底部与视口顶部平齐</span></span><br></pre></td></tr></table></figure></li><li><p><code>ele.scrollIntoViewIfNeeded()</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将不在视口可见区域的元素滚动到视口课件区域，如果已在视口可见区域则不滚动</span></span><br><span class="line"><span class="comment">// ele.scrollIntoViewIfNeeded() 同 ele.scrollIntoViewIfNeeded(true)</span></span><br><span class="line"><span class="comment">//    元素将在其所在滚动区的可视区域中居中对齐</span></span><br><span class="line"><span class="comment">// ele.scrollIntoViewIfNeeded(false)  // 元素将与可视区域最近的边缘对齐</span></span><br></pre></td></tr></table></figure></li><li><p><code>contentDocument</code> 框架内容文档对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &lt;iframe id='myIframe'&gt;</span></span><br><span class="line"><span class="keyword">var</span> iframe = <span class="built_in">document</span>.getElementById(<span class="string">'myIframe'</span>)</span><br><span class="line"><span class="keyword">var</span> iframeDoc = iframe.conetenDocument || iframe.contentWindow.document</span><br><span class="line"><span class="comment">// iframe.contentWindow.document 兼容IE8</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="try-catch-错误处理"><a href="#try-catch-错误处理" class="headerlink" title="try-catch 错误处理"></a>try-catch 错误处理</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 把有可能抛出错误的代码都放在try语句块中，而把那些用于错误处理的代码放在catch语句块中</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="comment">// 可能会导致错误的代码 try 中的任何代码发生错误就会立即退出执行，然后接着执行catch块</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">  <span class="comment">// 在错误发生时的处理</span></span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">  <span class="comment">// 无论try或catch执行 finally语句都会执行</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 无论执行try或catch finally 都会被执行</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a)</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err) <span class="comment">// ReferenceError: a is not defined</span></span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'finally'</span>) <span class="comment">// finally</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line">  <span class="built_in">console</span>.log(a) <span class="comment">// 1</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'finally'</span>) <span class="comment">// finally</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 只要代码中包含了finally子句，无论try还是catch语句块中的return语句都将被忽略</span></span><br><span class="line"><span class="comment">// 在try还是catch语句块中包含return语句 finally需谨慎使用</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">  &#125; <span class="keyword">catch</span> () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(test()) <span class="comment">// 0</span></span><br><span class="line"><span class="string">``</span></span><br><span class="line"></span><br><span class="line">#### 其他</span><br><span class="line">* 可视区的宽/高</span><br><span class="line"><span class="number">1.</span><span class="string">`document.documentElement.clientWidth`</span>  可视区域的宽</span><br><span class="line"><span class="number">2.</span><span class="string">`document.documentElement.clientHeight`</span> 可视区域的高</span><br><span class="line">* 元素的宽/高</span><br><span class="line"><span class="number">1.</span><span class="string">`offsetWidth/offsetHeight`</span>: 获取元素的宽度或高度=<span class="string">`width/height+padding+border`</span></span><br><span class="line"><span class="number">2.</span><span class="string">`clientWidth/clientHeight`</span>: 获取元素的宽度或高度=<span class="string">`width/height+padding`</span></span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">`js</span></span><br><span class="line"><span class="string">/*css</span></span><br><span class="line"><span class="string">#one&#123;</span></span><br><span class="line"><span class="string">  height:100px;</span></span><br><span class="line"><span class="string">  width:100px;</span></span><br><span class="line"><span class="string">  background:red;</span></span><br><span class="line"><span class="string">  margin:20px 30px;</span></span><br><span class="line"><span class="string">  padding:20px 30px;</span></span><br><span class="line"><span class="string">  border:10px solid black;</span></span><br><span class="line"><span class="string">&#125;*/</span></span><br><span class="line"><span class="string">console.log(one.offsetWidth);    //180=100+30+30+10+10</span></span><br><span class="line"><span class="string">console.log(one.clientWidth);    //160=100+30+30</span></span><br></pre></td></tr></table></figure><ul><li><code>scrollTop</code>  滚动高度 被隐藏在内容区域上方的像素值<br><code>兼容写法 var scrollTop = document.body.scroolTop || document.documentElement.scrollTop</code></li><li><code>offsetParent</code>  最近有定位属性的祖先节点 如果祖先没有定位则你认为body</li><li><code>offsetLeft/offsetTop</code>    外边框到有定位父级的内边框的距离</li><li><code>obj.getBoundingClientRect()</code> 获取元素的信息(返回对象)<br><code>包括 height width bottom top right left  获取的值会随滚动条变化</code></li><li><code>window.onerro</code> 捕获即时运行错误 任何没有通过try-catch处理的错误都会触发</li><li><code>performance.getEntries()</code> 获取所有加载成功的资源列表</li></ul>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js基础 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>javascript基础(三)--(内置对象,事件)</title>
      <link href="/javascript%E5%9F%BA%E7%A1%80(3)/"/>
      <url>/javascript%E5%9F%BA%E7%A1%80(3)/</url>
      
        <content type="html"><![CDATA[<h2 id="Date对象"><a href="#Date对象" class="headerlink" title="Date对象"></a>Date对象</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//返回当前的日期和时间</span></span><br><span class="line"><span class="keyword">var</span> d = mew <span class="built_in">Date</span>()  <span class="comment">//Sat Jun 24 2017 10:34:00 GMT+0800 (中国标准时间)</span></span><br><span class="line">d.getFullYear()     <span class="comment">//返回四位数的年份</span></span><br><span class="line">d.getMonth()        <span class="comment">//返回月份(0--11)实际d.getMonth()+1</span></span><br><span class="line">d.getDate()         <span class="comment">//返回一个月中的某一天(1--31)</span></span><br><span class="line">d.getDay()          <span class="comment">//返回一周中的第几天(0--6)</span></span><br><span class="line">d.getHours()        <span class="comment">//返回小时(0--23)</span></span><br><span class="line">d.getMinutes()      <span class="comment">//返回分钟(0--59)</span></span><br><span class="line">d.getSeconds()      <span class="comment">//返回秒数(0--59)</span></span><br><span class="line">d.getMilliseconds() <span class="comment">//返回毫秒</span></span><br><span class="line">d.getTime()         <span class="comment">//返回1970.1.1 0:0:0到现在的毫秒数</span></span><br><span class="line"><span class="comment">// Date对象参数  无参数默认返回当前系统时间</span></span><br><span class="line"><span class="comment">// 数字形式</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2017</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">48</span>,<span class="number">12</span>)</span><br><span class="line"><span class="comment">// 字符串形式</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"June 10,2013,12:12:12"</span>)</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">'2017-9-8 12:34:56'</span>) <span class="comment">// ios 不兼容</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">'2017/9/8 12:34:56'</span>)</span><br><span class="line"><span class="comment">//时间戳</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">1495835060500</span>)</span><br><span class="line"><span class="comment">//时间转换公式</span></span><br><span class="line"><span class="keyword">var</span> t = <span class="built_in">Math</span>.floor((endTime-now)/<span class="number">1000</span>)</span><br><span class="line"><span class="comment">// 天:  Math.floor(t/86000)</span></span><br><span class="line"><span class="comment">// 时:  Math.floor(t%86400/3600)</span></span><br><span class="line"><span class="comment">// 分:  Math.floor(t%86400%3600/60)</span></span><br><span class="line"><span class="comment">// 秒:  t%60</span></span><br><span class="line"><span class="comment">// 获取当前时间戳</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>().getTime() <span class="comment">// 1511418074000</span></span><br><span class="line"><span class="built_in">Date</span>.now() <span class="comment">// 1511428145000</span></span><br><span class="line">+<span class="keyword">new</span> <span class="built_in">Date</span>() <span class="comment">// 1511428145000</span></span><br></pre></td></tr></table></figure><h2 id="Math对象"><a href="#Math对象" class="headerlink" title="Math对象"></a>Math对象</h2><ol><li>Math.ceil()     大于或小于该数的最小整数(向上取整)</li><li>Math.floor()    小于或等于该数的最大整数(向下取整)</li><li>Math.round()    四舍五入</li><li>Math.min(m,n)   取最小的</li><li>Math.max(m,n)   取最大的</li><li>Math.sqrt(m)    m的开方</li><li>Math.pow(m,n)   m的n次方</li><li>Math.toFixed(n) 保留小数点后几位</li><li>Math.random()   返回0-1的随机数</li><li>Math.abs()     取绝对值<br><code>取n到m的之间的随机数 Math.round(Math.random()*(m-n)+n)</code></li></ol><h2 id="String对象"><a href="#String对象" class="headerlink" title="String对象"></a>String对象</h2><p><code>字符串的长度  str.length(只关注字符的个数,不关心是汉字还是其他字符) 不可写</code><br><code>字符串中单个字符可以使用[]获取       str[1]</code><br><code>字符串比较大小时   比较第一个字符的ASCII码</code><br><code>js中字符串截取只关注字符的个数,不关心是汉字还是其他字符</code></p><ul><li><p><code>substr(start,length)</code> 从指定位置截取指定长度的子字符串(包括起始位置)<br>①:如果<code>start</code>为负数       则<code>start=str.length+start</code><br>②:如果<code>length</code>为<code>负数或0</code> 则返回一个空字符串<br>③:如果没指定<code>length</code>      则返回start后面的所有字符</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"我有一个梦想"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substr(<span class="number">2</span>,<span class="number">2</span>))   <span class="comment">//一个</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substr(<span class="number">2</span>,<span class="number">0</span>))   <span class="comment">//空字符串</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substr(<span class="number">2</span>))     <span class="comment">//一个梦想</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substr(<span class="number">-2</span>,<span class="number">4</span>))  <span class="comment">//梦想</span></span><br></pre></td></tr></table></figure></li><li><p><code>substring(start,end)</code> 从指定位置截取到结束位置<code>end-1</code>的字符串<br>①:如果<code>start</code>或<code>end</code>为<code>负数或NaN</code>,它被看做<code>0</code><br>②:如果<code>start</code>和<code>end</code>相等       则返回一个空字符串<br>③:如果没指定<code>end</code>            则返回<code>start</code>后面的所有字符<br>④:参数反转,交换位置,总使用最小的作为开始,大的作为结束,大于字符串长度,视为字符串长度</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">"我有一个梦想"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substring(<span class="number">2</span>,<span class="number">5</span>))  <span class="comment">//一个梦</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substring(<span class="number">2</span>))    <span class="comment">//一个梦想</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substring(<span class="number">4</span>,<span class="number">3</span>))  <span class="comment">//个</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substring(<span class="number">-1</span>,<span class="number">5</span>)) <span class="comment">//我有一个梦</span></span><br></pre></td></tr></table></figure></li><li><p><code>slice(start,end)</code> 从指定位置截取到结束位置<code>end-1</code>的字符串 不包含结束位置<code>end</code><br>①参数不反转 不交换位置<br>②负数从后面倒着往前数<br><code>&#39;a1b3c&#39;.slice(1, 3)  //=&gt;  1b</code></p></li><li><p><code>str.charAt(n)</code> 返回某位置的字符,如果<code>n为负数</code>或<code>大于str.length</code>则返回空</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">'wamp'</span></span><br><span class="line"><span class="built_in">console</span>.log(str.charAt(<span class="number">1</span>))  <span class="comment">//a</span></span><br><span class="line"><span class="built_in">console</span>.log(str.charAt(<span class="number">5</span>))  <span class="comment">//空字符串</span></span><br><span class="line"><span class="built_in">console</span>.log(str.charAt(<span class="number">-1</span>)) <span class="comment">//空字符串</span></span><br></pre></td></tr></table></figure></li><li><p><code>str.charCodeAt(n只能是数字) 返回某个位置的字符的ASCII编码</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">'wamp'</span> str.charAt(<span class="number">1</span>))  <span class="comment">//97</span></span><br></pre></td></tr></table></figure></li><li><p><code>String.fromCharCode(16800)</code> 返回<code>ASCII</code>码对应的字符 可写多个</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="built_in">String</span>.fromCharCode(<span class="number">11111</span>,<span class="number">12345</span>)) <span class="comment">//口艹`</span></span><br></pre></td></tr></table></figure></li><li><p><code>str.indexOf()</code>  左–&gt;右  返回某个字符的第一次出现位置 找不到返回-1<br><code>str.indexOf(&#39;cd&#39;,n)</code>  从第几位开始找某个字符 若n为负数 当成0</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">'wampacda'</span></span><br><span class="line"><span class="built_in">console</span>.log(str.indexOf(<span class="string">'a'</span>))     <span class="comment">//  1</span></span><br><span class="line"><span class="built_in">console</span>.log(str.indexOf(<span class="string">'b'</span>))     <span class="comment">//  -1</span></span><br><span class="line"><span class="built_in">console</span>.log(str.indexOf(<span class="string">'a'</span>,<span class="number">3</span>))   <span class="comment">//  4</span></span><br><span class="line"><span class="built_in">console</span>.log(str.indexOf(<span class="string">'a'</span>,<span class="number">-2</span>))  <span class="comment">//  1</span></span><br><span class="line"><span class="comment">// 找出某字符出现的所有位置</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'wampaccdabakakakakkak'</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;str.length)&#123;</span><br><span class="line">  <span class="keyword">var</span> a = str.indexOf(<span class="string">'a'</span>,i)</span><br><span class="line">  <span class="keyword">if</span>(a == <span class="number">-1</span>)<span class="keyword">break</span></span><br><span class="line">  <span class="built_in">console</span>.log(a)</span><br><span class="line">  i=a+<span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>str.lastIndexOf()</code>  右–&gt;左  返回某个字符的最后一次出现位置 找不到返回<code>-1</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">'wampacda'</span></span><br><span class="line"><span class="built_in">console</span>.log(str.lastIndexOf(<span class="string">'a'</span>)) <span class="comment">//8</span></span><br></pre></td></tr></table></figure></li><li><p><code>str.split()</code>  拆分字符串为数组 第二个参数表示长度</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">'www.tanzhouedu.com'</span></span><br><span class="line"><span class="built_in">console</span>.log(str.split(<span class="string">''</span>))   <span class="comment">//w,w,w,.,t,a,n,z,h,o,u,e,d,u,.,c,o,m</span></span><br><span class="line"><span class="built_in">console</span>.log(str.split(<span class="string">'.'</span>))  <span class="comment">//www,tanzhouedu,com</span></span><br><span class="line"><span class="built_in">console</span>.log(str.split(<span class="string">'b'</span>))  <span class="comment">//www.tanzhouedu.com</span></span><br><span class="line"><span class="built_in">console</span>.log(str.split(<span class="string">'.'</span>,<span class="number">2</span>))<span class="comment">//www,tanzhouedu</span></span><br></pre></td></tr></table></figure></li><li><p><code>str.toUpperCase()</code> 把字符串全部转化为大写</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">'www.tanzhouedu.com'</span></span><br><span class="line"><span class="built_in">console</span>.log(str.toUpperCase())<span class="comment">//WWW.TANZHOUEDU.COM</span></span><br></pre></td></tr></table></figure></li><li><p><code>str.toLowerCase()</code> 把字符串全部转化为小写</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">'Www.TanzhouEdu.coM'</span></span><br><span class="line"><span class="built_in">console</span>.log(str.toUpperCase())<span class="comment">//www.tanzhouedu.com</span></span><br></pre></td></tr></table></figure></li><li><p><code>str.match(/\d+/g)</code> 正则匹配</p></li><li><code>str.replace(/abc/,&quot;aaa&quot;)</code> 查找并替换</li></ul><h2 id="数组对象"><a href="#数组对象" class="headerlink" title="数组对象"></a>数组对象</h2><ul><li>数组是多个变量的集合 数组中的每一个值叫做一个元素，每一个元素在数组中的位置，以数字表示，称为索引。</li><li><p>声明方式<br>①<code>var arr = [&#39;a&#39;,2,&#39;abc&#39;,function a(){},{}]</code><br>②<code>var arr1 = new Array(a,b,c,d)</code><br>③<code>var arr = new Array(5)</code> 创建初始值为<code>undefined</code>长度为<code>5</code>的数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注:二维数组的声明及访问</span></span><br><span class="line"><span class="comment">// 当使用new Array(n)时,如果n为数字则代表数组长度, 为字符串则表示数组的内容</span></span><br><span class="line"><span class="keyword">var</span> arr=[[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="string">"数字"</span>,<span class="string">"数字"</span>],[<span class="string">"a"</span>,<span class="string">"b"</span>]]</span><br><span class="line"><span class="built_in">console</span>.log(arr[<span class="number">2</span>][<span class="number">1</span>])  <span class="comment">//b</span></span><br><span class="line"><span class="comment">// 获取二位数组的长度arr[i].length</span></span><br></pre></td></tr></table></figure></li><li><p>数组元素的访问</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>,<span class="number">2</span>,<span class="string">'abc'</span>,<span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;,&#123;&#125;]</span><br><span class="line"><span class="built_in">console</span>.log(arr[<span class="number">3</span>])    <span class="comment">//function a()&#123;&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>数组的长度<code>arr.length</code>  可写(可以更改)<br><code>当定义数组的索引值超过数组长度,自动扩展数组长度,当获取数组中不存在索引时将返回undefined</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>,<span class="number">2</span>,<span class="string">'abc'</span>,<span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;,&#123;&#125;]</span><br><span class="line"><span class="built_in">console</span>.log(arr.length)   <span class="comment">//5</span></span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="comment">// 缩减数组</span></span><br><span class="line">arr1.length = <span class="number">2</span></span><br><span class="line"><span class="built_in">console</span>.log(arr1)   <span class="comment">// [1, 2]</span></span><br><span class="line"><span class="comment">// 快速清空数组  arr.length = 0  或 arr = []</span></span><br><span class="line">arr1.length = <span class="number">0</span></span><br><span class="line"><span class="built_in">console</span>.log(arr1)   <span class="comment">//[]</span></span><br><span class="line"><span class="comment">// 注:数组的元素字母和汉字都要用引号引起来</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr.push()</code> 从后面给数组添加元素  返回数组长度</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>,<span class="number">2</span>,<span class="string">'abc'</span>,<span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;,&#123;&#125;]</span><br><span class="line"><span class="built_in">console</span>.log(arr.push(<span class="string">'你好'</span>))  <span class="comment">//6</span></span><br><span class="line"><span class="built_in">console</span>.log(arr)  <span class="comment">//['a',2,'abc',function a()&#123;&#125;,&#123;&#125;,'你好']</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr.unshift()</code> 从前面给数组添加元素  返回数组长度(IE 6,7无返回值)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>,<span class="number">2</span>,<span class="string">'abc'</span>,<span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;]</span><br><span class="line"><span class="built_in">console</span>.log(arr.unshift(<span class="string">'你好'</span>))   <span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(arr)    <span class="comment">//['你好','a',2,'abc',function a()&#123;&#125;,&#123;&#125;]</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr.pop()</code> 删除数组最后一个元素 返回数组最后一个元素</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>,<span class="number">2</span>,<span class="string">'abc'</span>,<span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;]</span><br><span class="line"><span class="built_in">console</span>.log(arr.pop())   <span class="comment">//function a()&#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(arr)            <span class="comment">//['a',2,'abc']</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr.shift()</code> 删除数组第一个元素   返回数组第一个元素</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>,<span class="number">2</span>,<span class="string">'abc'</span>,<span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;]</span><br><span class="line"><span class="built_in">console</span>.log(arr.shift())</span><br><span class="line"><span class="built_in">console</span>.log(arr)         <span class="comment">//[2,'abc',function a()&#123;&#125;]</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr.splice()</code> 向/从数组中添加/删除元素，然后返回被删除的元素<br>①<code>arr.splice(start)</code>  从第几个开始删除后面的  返回删除的所有元素</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>,<span class="number">2</span>,<span class="string">'abc'</span>,<span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;]</span><br><span class="line"><span class="built_in">console</span>.log(arr.splice(<span class="number">2</span>))    <span class="comment">//abc,function a()&#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(arr)              <span class="comment">//[a,2]</span></span><br></pre></td></tr></table></figure><p>②<code>arr.splice(start,n)</code>  从第几个开始删除几个  返回删除的元素<br>若<code>start</code>为负从结尾开始,n为<code>0</code>,不删除</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>,<span class="number">2</span>,<span class="string">'abc'</span>,<span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;]</span><br><span class="line"><span class="built_in">console</span>.log(arr.splice(<span class="number">2</span>,<span class="number">1</span>))  <span class="comment">//abc</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">//[a,2,function a()&#123;&#125;]</span></span><br></pre></td></tr></table></figure><p>③<code>arr.splice(start,n,m)</code>从<code>start</code>开始的几个,替换为<code>m</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>,<span class="number">2</span>,<span class="string">'abc'</span>,<span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;]</span><br><span class="line"><span class="built_in">console</span>.log(arr.splice(<span class="number">1</span>,<span class="number">2</span>,<span class="string">'你好'</span>))    <span class="comment">//2,abc</span></span><br><span class="line"><span class="built_in">console</span>.log(arr)          <span class="comment">//[a,你好,function a()&#123;&#125;]</span></span><br></pre></td></tr></table></figure><p>④<code>arr.splice(start,0,m)</code>从第几个开始添加m</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>,<span class="number">2</span>,<span class="string">'abc'</span>,<span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;]</span><br><span class="line"><span class="built_in">console</span>.log(arr.splice(<span class="number">1</span>,<span class="number">0</span>,<span class="string">'你好'</span>))    <span class="comment">//空</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// ["a", "你好", 2, "abc", ƒ]</span></span><br><span class="line"><span class="comment">//数组去重</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>]</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;arr.length;i++)&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> j=i+<span class="number">1</span>;j&lt;arr.length;j++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr[i]==arr[j])&#123;</span><br><span class="line">      arr.splice(j--,<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// 1,2,3,4</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr.sort()</code> 把数组内的元素按字符编码或大小升序排列(原数组改变)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sort方法内部默认是调用每个数组项的toString(),然后按字符串比较，通常会自定义比较函数</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>,<span class="number">2</span>,<span class="string">'abc'</span>,<span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;,<span class="number">1</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.sort())   <span class="comment">//[1,2,'a','abc',function a()&#123;&#125;]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr)           <span class="comment">//[1,2,'a','abc',function a()&#123;&#125;]</span></span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">1</span>, <span class="string">'10'</span>, <span class="string">'5'</span>, <span class="number">4</span>]</span><br><span class="line">arr1.sort() <span class="comment">// [1, '10', 4, '5'] 默认按字符串编码排序</span></span><br><span class="line">arr1.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b) <span class="comment">// [1, 4, '5', '10']</span></span><br><span class="line"><span class="comment">// 改变排序规则  arr.sort(function(a,b)&#123; return b-a&#125;)  倒序</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">6</span>,<span class="number">55</span>,<span class="number">4</span>,<span class="number">8</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> b-a  <span class="comment">//只是改变顺序不改变数据</span></span><br><span class="line">&#125;))   <span class="comment">//55,8,6,4,1</span></span><br><span class="line"><span class="comment">// 随机排序打乱数组</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">55</span>,<span class="number">8</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">1</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.random()<span class="number">-0.5</span>  <span class="comment">//只是改变顺序不改变数据</span></span><br><span class="line">&#125;))   <span class="comment">//55,8,6,4,1</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr.reverse()</code> 把数组的顺序颠倒(原数组改变)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>,<span class="number">2</span>,<span class="string">'abc'</span>,<span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;,<span class="number">1</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.reverse())   <span class="comment">//[1,function a()&#123;&#125;,'abc',2,'a']</span></span><br><span class="line"><span class="built_in">console</span>.log(arr)              <span class="comment">//[1,function a()&#123;&#125;,'abc',2,'a']</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr1.concat(arr2)</code> 数组合并 将数组打散然后拼接在一起  返回拼接后的新数组 (原数组不改变)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>]</span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr1.concat(arr2,[arr3])) <span class="comment">//['a','b','c',1,2]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr1)     <span class="comment">//['a','b','c']</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2)     <span class="comment">//[1,2]</span></span><br><span class="line"><span class="comment">// 将数组打散然后拼接在一起</span></span><br><span class="line">[].concat(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>); <span class="comment">// [1,2,3]</span></span><br><span class="line">[].concat([<span class="number">1</span>, <span class="number">2</span>], <span class="number">4</span>); <span class="comment">// [1, 2, 4]</span></span><br><span class="line">[].concat([<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]); <span class="comment">// [1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr.join()</code> 将数组转化为字符串  返回整个数组元素的字符串(原数组不改变)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr1.join())  <span class="comment">//'a,b,c'</span></span><br><span class="line"><span class="built_in">console</span>.log(arr1)         <span class="comment">//['a','b','c']</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr1.join(<span class="string">'&lt;'</span>))  <span class="comment">//'a&lt;b&lt;c'</span></span><br><span class="line"><span class="built_in">console</span>.log(arr1)         <span class="comment">//['a','b','c']</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr.toString()或arr.valueOf()</code> 将数组的每一个元素转化为以逗号分割的字符串</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="string">'a'</span>].toString()       <span class="comment">// "1,4,2,a"</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">4</span>,[<span class="number">2</span>,<span class="string">'a'</span>,[<span class="number">5</span>, <span class="string">'多'</span>]]].toString()  <span class="comment">// "1,4,2,a,5,多"</span></span><br><span class="line">arr.toLocaleString()：<span class="comment">//将对象转换成字符串</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr.slice()</code> 可从已有的数组中返回指定的元素 返回一个新的数组(包含<code>start</code>不包含<code>end</code>)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>,<span class="number">1</span>,<span class="string">'b'</span>,<span class="number">3</span>,<span class="string">'c'</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.slice(<span class="number">1</span>,<span class="number">3</span>))   <span class="comment">// [1,'b']</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr.map()</code> 方法按照原始数组元素顺序依次处理元素。映射应该有返回值<br><code>注意： map() 不会对空数组进行检测。 map() 不会改变原始数组。</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data=[<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="keyword">var</span> Squares=data.map(<span class="function"><span class="keyword">function</span>(<span class="params">val,index,arr</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(arr[index]==val)  <span class="comment">// ==&gt; true</span></span><br><span class="line"><span class="keyword">return</span> val*val</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(Squares)    <span class="comment">// 1,9,16</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr.forEach()</code> 从头到尾遍历数组，为每一个元素调用指定的函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">data.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">v,i,a</span>)</span>&#123; a[i] = v + <span class="number">1</span> &#125;)    <span class="comment">// [2,3,4,5]</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr.filter()</code>  过滤数组元素 返回新数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data = [<span class="number">1</span>,<span class="number">5</span>,<span class="number">8</span>]</span><br><span class="line">data.filter(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123; <span class="keyword">return</span> v&gt;<span class="number">5</span> &#125;) <span class="comment">// [8]</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr.every()</code> 对数组中的所有元素调用判定函数都返回<code>true</code>，结果才返回<code>true</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data = [<span class="number">1</span>,<span class="number">5</span>,<span class="number">8</span>]</span><br><span class="line">data.every(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> x&lt;<span class="number">10</span> &#125;) <span class="comment">// true</span></span><br><span class="line">data.every(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> x&lt;<span class="number">7</span> &#125;)  <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr.some()</code>  对数组中的所有元素调用判定函数只要有一个返回<code>true</code>，结果返回<code>true</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data = [<span class="number">1</span>,<span class="number">5</span>,<span class="number">8</span>]</span><br><span class="line">data.some(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> x&lt;<span class="number">7</span> &#125;)   <span class="comment">// true</span></span><br><span class="line">data.some(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> x&lt;<span class="number">1</span> &#125;)   <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr.reduce()</code> 和 <code>arr.reduceRight()</code><br><code>用指定的函数将数组元素进行组合</code><br><code>第一个参数是执行操作的函数，第二个参数（可选）传递给函数的初始值</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// arr.reduce((sum, item) =&gt; &#123;&#125;,num)</span></span><br><span class="line"><span class="comment">/* 1. 当没有第二个参数初始值num时</span></span><br><span class="line"><span class="comment">第一次循环 sum默认为数组的第0个 item为数组的第1个 第二次以后 sum = sum + item */</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">arr.reduce(<span class="function">(<span class="params">sum, item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(sum, item)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 1 2   undefined 3  undefined 4</span></span><br><span class="line"><span class="keyword">let</span> res = arr.reduce(<span class="function">(<span class="params">sum, item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(sum, item) <span class="comment">// 第一次 1 2  第二次 3 3  第三次 6 4</span></span><br><span class="line">  <span class="keyword">return</span> sum + item</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// 10</span></span><br><span class="line"><span class="comment">/* 2. 当有第二个参数 初始值num时</span></span><br><span class="line"><span class="comment">第一次循环 sum就是初始值num  item为数组的第0个 第二次以后 sum = sum + item*/</span></span><br><span class="line"><span class="keyword">let</span> res = arr.reduce(<span class="function">(<span class="params">sum, item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(sum, item) <span class="comment">// 第一次 5 1  第二次 6 2  第三次 8 3 第四次 11 4</span></span><br><span class="line">  <span class="keyword">return</span> sum + item</span><br><span class="line">&#125;, <span class="number">5</span>)</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// 15</span></span><br></pre></td></tr></table></figure></li><li><p><code>arr.indexOf()</code>和<code>arr.lastIndexOf</code>()返回找到的第一个元素的索引，找不到返回<code>-1</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data = [<span class="number">1</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">5</span>]</span><br><span class="line">data.indexOf(<span class="number">1</span>)   <span class="comment">// 0</span></span><br><span class="line">data.lastIndex(<span class="number">1</span>) <span class="comment">// 3</span></span><br><span class="line">data.indexOf(<span class="number">6</span>)   <span class="comment">// -1</span></span><br></pre></td></tr></table></figure></li><li><p><code>Array.isArray(arr)</code> 判断对象是否是数组</p></li></ul><h2 id="事件（event）"><a href="#事件（event）" class="headerlink" title="事件（event）"></a>事件（event）</h2><blockquote><p>事件:浏览者在浏览网页时触发某些动作所作出的相应反应</p></blockquote><ul><li><p>常见事件<br><code>onclick</code> <strong><em>鼠标单击事件</em></strong>       当鼠标单击选定元素时所触发的事件<br><code>ondblclick</code>  <strong><em>鼠标双击事件</em></strong>       当鼠标双击选定元素时所触发的事件<br><code>onmousedown</code> <strong><em>鼠标按下事件</em></strong>       当按下鼠标时所触发的事件<br><code>onmouseup</code>   <strong><em>鼠标释放事件</em></strong>       当按下鼠标被释放时所触发的事件<br><code>onmousemove</code> <strong><em>鼠标移动事件</em></strong>       当鼠标指针在选定元素上移动时触发的事件<br><code>onmouseover</code> <strong><em>鼠标经过事件</em></strong>       当鼠标经过选定元素时触发的事件<br><code>onmouseout</code>  <strong><em>鼠标离开事件</em></strong>       当鼠标指针离开选定元素时触发的事件<br><code>onkeydown</code>   <strong><em>按下键盘按键事件</em></strong>    当用户按下键盘上任意键时触发的事件<br><code>onkeypress</code>  <strong><em>按下并释放按键事件</em></strong>  当用户按下键盘按键并任意释放按键时触发的事件<br><code>onkeyup</code>     <strong><em>释放键盘按键事件</em></strong>    当按下键盘按键后释放按键时触发的事件<br><code>onerror</code>     <strong><em>页面出错事件</em></strong>        当页面在加载文本或图片时，发生错误所触发的事件<br><code>onload</code>      <strong><em>页面加载完事件</em></strong>      当页面完成图片文本等内容的加载后触发的事件<br><code>onunload</code>    <strong><em>离开页面事件</em></strong>        当浏览者结束访问网页而离开网页时触发的事件<br><code>onresize</code>    <strong><em>窗口改变事件</em></strong>        当浏览器改变页面窗口大小或框架大小被调整时触发的事件<br><code>onscroll</code>    <strong><em>滚动条滚动事件</em></strong>      当滚动条滚动时触发的事件<br><code>onblur</code>      <strong><em>失去焦点事件</em></strong>        当选定元素停止作为用户交互的焦点时触发的事件<br><code>onchange</code>    <strong><em>元素发生改变事件</em></strong>    当选定元素的数据或文字发生改变并失去焦点时触发的事件<br><code>onfocus</code>     <strong><em>获得焦点事件</em></strong>        当元素获得焦点时触发的事件<br><code>onreset</code>     <strong><em>表单重置事件</em></strong>        当表单中元素被重置时触发的事件<br><code>onsubmit</code>    <strong><em>表单提交事件</em></strong>        当表单中的元素被提交时所触发的事件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">注: onmouseover,onscroll和onresize都是以时间间隔计算的</span><br><span class="line">注: onkeydown  比 onkeypress  早</span><br><span class="line">  onkeypress 只响应 字母 数字 符号等 功能键不会响应</span><br><span class="line">  在form中写上onsubmit=<span class="string">"return fun()"</span> 才能拦截提交的效果</span><br><span class="line">  <span class="built_in">window</span>/img/body.onLoad     加载事件</span><br><span class="line">  不是所有的元素都能够获得焦点或有onkeydown事件,能够响应用户操作的元素才有</span><br><span class="line">  DOMContentLoaded文档加载形成完整的DOM树之前完成形成  不包含图片资源、js文件、css文件等其他资源 onload包含图片资源</span><br><span class="line">onchange不同元素的表现形式:</span><br><span class="line">  text:   当输入内容改变,并且失去焦点时触发</span><br><span class="line">  radio:  被选中的时候才会触发</span><br><span class="line">  checkbox:   选中和取消选中都会触发</span><br><span class="line">  select: 选中不同的选项时触发</span><br><span class="line">  file:   选择文件之后被触发</span><br></pre></td></tr></table></figure></li><li><p>事件对象 在触发DOM的事件时，产生一个包含所有与事件有关的事件对象event<br><code>事件在发生的瞬间,发生位置,时间,鼠标按键,触发的节点等信息被打包成一个对象,自动传递给事件函数的第一个参数(event)</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在IE中event对象是window对象的一个全局属性</span></span><br><span class="line"><span class="comment">// 键盘键值  ev.keyCode(IE)或ev.which</span></span><br><span class="line"><span class="comment">// 鼠标按钮  ev.button //0 鼠标左键 1鼠标中键 2鼠标右键  (firefox)</span></span><br><span class="line"><span class="comment">// 事件对象的兼容写法</span></span><br><span class="line">oDiv.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</span><br><span class="line">  ev = ev || <span class="built_in">window</span>.event</span><br><span class="line">  ev.clientX <span class="comment">//鼠标对于浏览器窗口可视区域的X坐标(窗口坐标)不包括工具栏和滚动条</span></span><br><span class="line">  ev.clientY <span class="comment">//鼠标对于浏览器窗口可视区域的Y坐标(窗口坐标)不包括工具栏和滚动条</span></span><br><span class="line">  ev.screenX <span class="comment">//鼠标相对于用户显示器屏幕左上角的X坐标  屏幕坐标位置</span></span><br><span class="line">  ev.screenY <span class="comment">//鼠标相对于用户显示器屏幕左上角的Y坐标  屏幕坐标位置</span></span><br><span class="line">  ev.pageX   <span class="comment">//鼠标相对于文档的X坐标   页面坐标位置</span></span><br><span class="line">  ev.pageY   <span class="comment">//鼠标相对于文档的Y坐标   页面坐标位置</span></span><br><span class="line">  <span class="comment">// 阻止默认行为 或者 return false</span></span><br><span class="line">  ev ? ev.preventDefault() : <span class="built_in">window</span>.event.returnValue = <span class="literal">false</span></span><br><span class="line">  <span class="comment">// 事件目标和事件源 ev.target 标准浏览器事件源   ev.srcElement ie事件源</span></span><br><span class="line">  <span class="keyword">var</span> target = ev.target || ev.srcElement</span><br><span class="line">  <span class="comment">// 阻止冒泡</span></span><br><span class="line">  ev.stopPropagation() || ev.cancelBubble = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 事件目标和事件源</span></span><br></pre></td></tr></table></figure></li><li><p>事件冒泡 事件开始由触发事件的元素然后逐渐向上传播到较为不具体的节点(document)<br><code>当父元素和子元素都加入onclick事件时,触发子元素onclick事件后父元素的onclick事件同样会被触发,造成事件的多层并发(事件由内向外传递)</code><br><code>阻止冒泡事件 在当前要阻止冒泡的事件函数中使用ev.cancelBubble = true 或 ev.stopPropagation()</code></p></li><li>事件捕获 事件开始由较为不具体的节点(document)更早接收到，触发事件的元素最后接收到事件<br><code>当父元素和子元素都加入onclick事件时,触发子元素onclick事件后父元素的onclick事件同样会被触发,造成事件的多层并发(事件由外向内传递)</code></li><li>事件三个阶段<br>1 <code>捕获</code>(从外向内寻找触发事件的元素)<br>2 <code>目标</code>(找到触发事件的元素)<br>3 <code>冒泡</code>(事件从内向外冒泡)</li><li><p>事件绑定  给元素绑定额外事件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 标准浏览器</span></span><br><span class="line">obj.addEventListener(事件名&lt;去掉on&gt;,事件函数,是否捕获)</span><br><span class="line">ev: obj.addEventListener(<span class="string">'click'</span>,fn2,<span class="literal">false</span>)</span><br><span class="line">  <span class="literal">false</span> 冒泡  一个出去的事件触发了你,你就去执行fn2这个函数</span><br><span class="line">  <span class="literal">true</span>  捕获  一个进去的事件触发了你,你就去执行fn2这个函数</span><br><span class="line">特点:<span class="number">1.</span> 有事件捕获</span><br><span class="line">     <span class="number">2.</span> 事件名称没有on</span><br><span class="line">     <span class="number">3.</span> 事件函数执行的顺序是正序</span><br><span class="line">     <span class="number">4.</span> <span class="keyword">this</span>指向触发该函数的事件的对象</span><br><span class="line"><span class="comment">// IE8以下支持</span></span><br><span class="line">obj.attachEvent(事件名 ,事件函数)</span><br><span class="line">ev: obj.attachEvent(<span class="string">'onclick'</span>,fn2)</span><br><span class="line">特点:<span class="number">1.</span> 没有事件捕获</span><br><span class="line">     <span class="number">2.</span> 事件名称有on</span><br><span class="line">     <span class="number">3.</span> 事件函数执行的顺序 IE8以下 倒序 IE9及以上 正序</span><br><span class="line">     <span class="number">4.</span> <span class="keyword">this</span>指向<span class="built_in">window</span></span><br><span class="line"><span class="comment">// 兼容写法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bindevent</span>(<span class="params">obj,evName,evFn</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(obj.addEventListener)&#123;</span><br><span class="line">    obj.addEventListener(evName,evFn,<span class="literal">false</span>)</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    obj.attachEvent(<span class="string">'on'</span>+evName,funtion()&#123;</span><br><span class="line">      evFn.call(obj)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 给一个元素的同一个事件绑定多个不同的函数,直接使用onclick则会覆盖前面的事件</span></span><br><span class="line"><span class="comment">// 而使用addEventListener或attachEvent可以绑定多个事件</span></span><br><span class="line"><span class="built_in">document</span>.bindevent(<span class="string">'onclick'</span>,fn1)</span><br><span class="line"><span class="built_in">document</span>.bindevent(<span class="string">'onclick'</span>,fn2)</span><br></pre></td></tr></table></figure></li><li><p>事件解绑  解除元素的绑定事件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 普通事件的取消</span></span><br><span class="line"><span class="built_in">document</span>.onclick = <span class="literal">null</span>  取消普通事件</span><br><span class="line"><span class="comment">// 其他浏览器</span></span><br><span class="line">obj.removeEventListener(事件名&lt;去掉on&gt;,事件函数,是否捕获)</span><br><span class="line">ev: obj.removeEventListener(<span class="string">'click'</span>,fn2,<span class="literal">false</span>)</span><br><span class="line"><span class="comment">// IE8以下不支持</span></span><br><span class="line">obj.detachEvent(事件名 ,事件函数)</span><br><span class="line">ev: obj.detachEvent(<span class="string">'onclick'</span>,fn2)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">off</span>(<span class="params">obj,evName,evFn</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(obj.removeEventListener)&#123;</span><br><span class="line">    obj.removeEventListener(evName,evFn,<span class="literal">false</span>)</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    obj.attachEvent(<span class="string">'on'</span>+evName,funtion()&#123;</span><br><span class="line">      evFn.call(obj)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>事件委托<br><code>事件委托利用事件冒泡的原理，只在父级指定一个处理事件程序，而不必给每个可单击的元素添加事件处理程序</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&lt;ul id="list"&gt;</span></span><br><span class="line"><span class="comment">  &lt;li id="apple"&gt;apple&lt;/li&gt;</span></span><br><span class="line"><span class="comment">  &lt;li id="pear"&gt;pear&lt;/li&gt;</span></span><br><span class="line"><span class="comment">  &lt;li id="peach"&gt;peach&lt;/li&gt;</span></span><br><span class="line"><span class="comment">&lt;/ul&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">list.onclick = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> ev = event || ev</span><br><span class="line">  <span class="keyword">var</span> target = ev.target || ev.scrElement</span><br><span class="line">  <span class="built_in">console</span>.log(target.innerText)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>事件方法<br><code>obj.onfocus()</code>   给指定元素设置焦点<br><code>obj.onblur()</code>    取消指定元素的焦点<br><code>obj.onselect()</code>  选择指定元素里面的文本内容</p></li><li>其他<br><code>oncontextmenu 右键菜单事件</code><br><code>ex:禁止右键 document.oncontextmenu = function(){  return false }</code><br><code>contentEditable=true</code> 可以使元素div可编辑<br><code>onchange</code> 事件在内容改变（两次内容有可能还是相等的）且失去焦点时触发；<br><code>onpropertychange</code> 事件却是实时触发，任何属性改变都会触发的，即每增加或删除一个字符就会触发，通过<br>js改变也会触发该事件(IE专有)<br><code>oninput</code> 事件是IE之外大多数浏览器支持,只在value改变时触发，实时的，即每增加或删除一个字符就会触发，然而通过js改变value时，却不会触发；<br><code>beforeunload 页面卸载前触发</code><br><code></code></li></ul>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js基础 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>javascript基础(二)--(函数,作用域)</title>
      <link href="/javascript%E5%9F%BA%E7%A1%80(2)/"/>
      <url>/javascript%E5%9F%BA%E7%A1%80(2)/</url>
      
        <content type="html"><![CDATA[<p>函数在<code>javascript</code>中无处不在，函数得功能：提高软件的开发效率，提高软件的可维护性，提高软件的重用性，控制程序设计的复杂性。函数重用封装的思路：尽量保证HTML代码结构一致,可以通过父级选取子元素，把核心主程序实现,用函数包起来，把每组不同的值找出来,通过传参实现.<br><a id="more"></a></p><h2 id="JS-函数"><a href="#JS-函数" class="headerlink" title="JS  函数"></a>JS  函数</h2><blockquote><p>函数是一段完成指定任务的已命名代码块</p></blockquote><h2 id="自定义函数"><a href="#自定义函数" class="headerlink" title="自定义函数"></a>自定义函数</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">function_name</span>(<span class="params">$arg1,$arg2</span>)</span>&#123;</span><br><span class="line">  fun_body</span><br><span class="line">  <span class="keyword">return</span> arg_n</span><br><span class="line">&#125;</span><br><span class="line">function_name() <span class="comment">// 函数的调用可以在函数前也可以在函数后面</span></span><br><span class="line"><span class="number">1.</span>函数名要有意义,函数名不区分大小写,不能重复定义，和保留字相同的名称不能使用</span><br><span class="line"><span class="number">2.</span>被传入的参数称为实参,而函数用于接收的参数称为形参(相当于<span class="keyword">var</span> arg1 = n),参数可有可无,</span><br><span class="line">  可以有多个<span class="string">","</span>用逗号分隔 不定参 <span class="built_in">arguments</span>  实参的集合  参数个数不固定时</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.length)<span class="comment">//不定参</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">1</span>])</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a</span>)</span>&#123;  <span class="comment">//形参</span></span><br><span class="line">  <span class="built_in">console</span>.log(a)</span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="number">5</span>) <span class="comment">//实参</span></span><br><span class="line"><span class="comment">// js函数参数设置默认值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">simue</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="built_in">arguments</span>[<span class="number">0</span>] ? <span class="built_in">arguments</span>[<span class="number">0</span>] : <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="built_in">arguments</span>[<span class="number">1</span>] ? <span class="built_in">arguments</span>[<span class="number">1</span>] : <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(simue()) <span class="comment">//输出3</span></span><br><span class="line"><span class="built_in">console</span>.log(simue(<span class="number">10</span>)) <span class="comment">//输出12</span></span><br><span class="line"><span class="built_in">console</span>.log(simue(<span class="number">10</span>,<span class="number">20</span>)) <span class="comment">//输出30</span></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>函数分为执行过程 和 结果</span><br><span class="line"><span class="comment">// 函数返回值return后面紧跟要返回的一个值 不会直接输出 可以终止函数后面不执行</span></span><br><span class="line"><span class="comment">// 如果函数内不return结果  则返回值默认为undefined</span></span><br><span class="line">ex:<span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log((a)   <span class="comment">//函数体 function a()&#123; var a = 1 &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log((a()) <span class="comment">//undefined</span></span><br><span class="line">ex:<span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>) <span class="comment">//执行过程</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> a</span><br><span class="line">&#125;</span><br><span class="line">fn()        <span class="comment">//没有任何显示</span></span><br><span class="line"><span class="built_in">console</span>.log(fn()) <span class="comment">//函数体 function()&#123;alert(2);&#125;</span></span><br><span class="line">fn()()      <span class="comment">//2</span></span><br><span class="line">ex:<span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> a()</span><br><span class="line">&#125;</span><br><span class="line">fn()         <span class="comment">//2  a()函数执行弹出2</span></span><br><span class="line"><span class="built_in">console</span>.log(fn())  <span class="comment">//2  undefined</span></span><br><span class="line">fn()() <span class="comment">//报错 fn()(即undefined) is not a function</span></span><br><span class="line"><span class="number">4.</span>变量函数：如果将一个函数名称给一个变量在变量后加上()就会调用对应的函数</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>)</span>&#123;&#125;  <span class="keyword">var</span> a=add  a()</span><br></pre></td></tr></table></figure><h2 id="函数声明"><a href="#函数声明" class="headerlink" title="函数声明"></a>函数声明</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(fn)    <span class="comment">//弹出函数体 function fn()&#123;alert(1);&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(fn())  <span class="comment">//弹出 1 (主动执行函数)</span></span><br><span class="line"><span class="comment">// 函数执行方式</span></span><br><span class="line">a fn()</span><br><span class="line">b <span class="built_in">document</span>.onclick=fn</span><br><span class="line">c setInterval(<span class="string">'fn()'</span>,<span class="number">3000</span>)</span><br><span class="line">d setIntertval(fn,<span class="number">3000</span>)</span><br></pre></td></tr></table></figure><h2 id="函数表达式-函数自执行-立即执行函数"><a href="#函数表达式-函数自执行-立即执行函数" class="headerlink" title="函数表达式(函数自执行)(立即执行函数)"></a>函数表达式(函数自执行)(立即执行函数)</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">a <span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; alert(<span class="number">2</span>);&#125;</span><br><span class="line">b !<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">c (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;)()</span><br><span class="line">d -<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">e +<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">f ~<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">注:函数表达式 可以直接在末尾加()执行 <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;alert(<span class="number">2</span>)&#125;()</span><br><span class="line"><span class="comment">// 函数表达式不属于函数声明 b=function()&#123;&#125; 是一个赋值过程是一个函数赋给b变量</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line">a()  <span class="comment">//2</span></span><br><span class="line">b()  <span class="comment">// b is not defined  ie8以下弹出 2</span></span><br></pre></td></tr></table></figure><h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><p>作用域只能由内向外寻找得到变量,而不能从外向内得到变量<br>闭包：指有权访问另一个函数作用域中的变量的函数<br>闭包解决的问题<br>(1) 在函数外面可以读取到函数内部的变量<br>(2) 让这些变量始终保存在内存中<br>闭包的基本形式<br>(1) 在外部函数内创建函数<br>(2) 将外部函数的返回值设置为新创建的函数<br>(3) 在外部函数就可以接收到返回值<br>(4) 使用这个函数就可以在外部访问到内部函数的数据<br>特点: 如果内部函数引用了外部函数的参数或者变量,外部函数的参数不会被回收<br>作用: 变量需要长期存在与内存中(创建私有变量)    避免全局变量的污染<br><code>垃圾回收机制</code><br><code>闭包下的变量和参数是不会被回收的，而是一直存在内存当中。</code><br>而<code>普通局部变量和参数</code>是会使用完以后被垃圾回收机制回收回去，不会存留在内存当中。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">ex: <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">3</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(a);</span><br><span class="line">&#125;</span><br><span class="line">fn() <span class="comment">//等fn执行完以后 a会被回收</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 闭包运用,存索引,let声明 获取索引值</span></span><br><span class="line">ex: <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;oLi.length;i++)&#123;</span><br><span class="line">  oLi[i].onclick = funciton()&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">ex: <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;oLi.length;i++)&#123;</span><br><span class="line">  oLi[i].index = i;</span><br><span class="line">  oLi[i].onclick = funciton()&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.index)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">ex: <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;oLi.length;i++)&#123;</span><br><span class="line">  !<span class="function"><span class="keyword">function</span>(<span class="params">i</span>)</span>&#123;</span><br><span class="line">    oLi[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(i)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="堆栈内存"><a href="#堆栈内存" class="headerlink" title="堆栈内存"></a>堆栈内存</h2><ul><li>堆内存： 存储引用数据类型（对象，函数）</li><li>栈内存： 提供JS代码执行的环境和存储基本数据类型值</li><li>堆内存释放：让所有引用堆内存空间地址的变量赋值为null即可（没有变量占用堆内存，浏览器在空闲时就会把它释放掉）</li><li>栈内存释放：普通局部变量和参数使用完以后被垃圾回收机制回收回去，不会存留在内存当中。</li></ul><h2 id="eval函数"><a href="#eval函数" class="headerlink" title="eval函数"></a>eval函数</h2><p>  eval函数用于计算某个字符串得到结果或执行其中的javascript代码<br>  eval只有一个参数 如果传入的参数不是字符串，他直接返回这个参数<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ex: <span class="built_in">eval</span>(<span class="string">"2"</span>+<span class="string">"3"</span>)   <span class="comment">//5</span></span><br><span class="line">    <span class="built_in">eval</span>(<span class="string">"alert('hello')"</span>)   <span class="comment">//hello</span></span><br></pre></td></tr></table></figure></p><h2 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h2><p>一个过程或函数直接或间接调用自己本身,成为递归过程或递归函数<br>递归的特点<br>1.递归就是在过程或函数里调用自身<br>2.在使用递归从过程中必须有明确的递归结束条件 成为递归出口<br>3.递归算法解题运行效率较低<br>4.递归次数过多容易造成栈溢出  入栈出栈的过程<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 斐波那契数列第n项</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fib</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(n&lt;=<span class="number">2</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> fib(n<span class="number">-1</span>) + fib(n<span class="number">-2</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(fib(<span class="number">5</span>))</span><br></pre></td></tr></table></figure></p><h2 id="callee关键字"><a href="#callee关键字" class="headerlink" title="callee关键字"></a>callee关键字</h2><p>在函数内部使用，代表当前函数的引用(名字)。<br>作用：降低代码的耦合度。<br>耦合度：一处代码的修改会导致其他代码也要发生改变(耦合度高),在项目里边要开发低耦合度的代码(一处代码修改尽量少地引起其他代码的变化)。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 未使用callee关键字</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jiecheng</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(n == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> n*jiecheng(n<span class="number">-1</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(jiecheng(<span class="number">5</span>)) <span class="comment">// 120</span></span><br><span class="line"><span class="keyword">var</span> jc = jiecheng <span class="comment">// 对象赋值 引用传递</span></span><br><span class="line">jiecheng = <span class="literal">null</span> <span class="comment">// 销毁jiecheng函数对象</span></span><br><span class="line">jc(<span class="number">5</span>) <span class="comment">//  jiecheng is not a function</span></span><br><span class="line"><span class="comment">// 使用callee降低代码的耦合度</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jiecheng</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(n == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  <span class="comment">// 调用本函数（或者f1()）代表当前运行的函数</span></span><br><span class="line">  <span class="keyword">return</span> n * <span class="built_in">arguments</span>.callee(n<span class="number">-1</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(jiecheng(<span class="number">5</span>)) <span class="comment">// 120</span></span><br><span class="line"><span class="keyword">var</span> jc = jiecheng <span class="comment">// 对象赋值 引用传递</span></span><br><span class="line">jiecheng = <span class="literal">null</span> <span class="comment">// 销毁jiecheng函数对象</span></span><br><span class="line"><span class="built_in">console</span>.log(jc(<span class="number">5</span>)) <span class="comment">// 120</span></span><br></pre></td></tr></table></figure></p><h2 id="JS-代码执行顺序-变量提升或预解析"><a href="#JS-代码执行顺序-变量提升或预解析" class="headerlink" title="JS 代码执行顺序(变量提升或预解析)"></a>JS 代码执行顺序(变量提升或预解析)</h2><ul><li>定义(预解析) <code>在当前作用域下, 会把带var和function a{}进行提前声明或者定义</code><br>先去找 <code>var</code> <code>function a(){}</code> <code>形参数(相当于var)私有变量</code><br><code>将var声明的变量名和function函数提升到作用域的最上方</code><br><code>var a</code> //声明变量不赋值,变量在正式运行之前,值为undefined<br><code>function a(){}</code> //函数块,函数在正式运行之前,都是整个函数块<br><code>参数(相当于var)</code> 如果是函数内则先分析参数 对形参赋值形成私有变量</li><li><p>特殊</p><ul><li><code>当函数名和变量名相同时,只提升函数,忽略变量(JS预解析),函数优先级更高</code></li><li><code>函数表达式只会提升变量名,不会提升后面的函数(只对等号左边进行变量提升)</code></li><li><code>在条件判断语句中不管判断语句是否成立，都会发生变量提升，但不会提升函数整体, 只提升函数名称(即声明未定义),提前使用会报错</code></li><li><code>函数执行形成私有作用域，形参是私有变量，在私有作用域中，先进行形参赋值形成私有变量，在变量提升</code></li><li><code>块级作用域: 判断体 循环体等大括号都是块级作用域(只对let/const/function起作用, 对var不起作用)</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 示例一</span></span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 示例二</span></span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 示例三</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> f) <span class="comment">// undefined</span></span><br><span class="line">f() <span class="comment">// f is not a function</span></span><br><span class="line"><span class="keyword">if</span>(<span class="literal">false</span>)&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123; <span class="built_in">console</span>.log(<span class="number">111</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 示例四</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> f) <span class="comment">// undefined</span></span><br><span class="line">f() <span class="comment">// f is not a function</span></span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123; <span class="built_in">console</span>.log(<span class="number">111</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 示例五</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> f) <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123; <span class="built_in">console</span>.log(<span class="number">111</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line">f() <span class="comment">// 111</span></span><br><span class="line"><span class="comment">// 示例六</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> f) <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">if</span>(<span class="literal">false</span>)&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">f() <span class="comment">// f is not a function</span></span><br><span class="line"><span class="comment">//</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>执行 (逐行解析代码)<br>表达式:  = + - * / ++ – ! 参数等  表达式会修改预解析的值</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 示例一</span></span><br><span class="line"><span class="built_in">console</span>.log(a)         <span class="comment">//5  输出function a()&#123;console.log(40)&#125;</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>             <span class="comment">//1  定义var a       6 赋值 a = 10</span></span><br><span class="line"><span class="built_in">console</span>.log(a)       <span class="comment">//7  输出10</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;          <span class="comment">//2  定义function a()&#123;&#125;</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">20</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a)         <span class="comment">//8  输出10</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">30</span>;            <span class="comment">//3  定义var a但无效 9赋值 a = 30</span></span><br><span class="line"><span class="built_in">console</span>.log(a)         <span class="comment">//10 输出30</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;          <span class="comment">//4  定义function a()&#123;&#125;覆盖前面</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">40</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a)         <span class="comment">//11 输出30</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例二</span></span><br><span class="line">a()                    <span class="comment">//5  执行 function a()&#123;console.log(2)&#125; 输出2</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;    <span class="comment">//1  定义 var a   6 执行 将匿名函数赋值给a</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line">a()                    <span class="comment">//7  执行 function()&#123;console.log(1)&#125;() 输出1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;          <span class="comment">//2  定义 function a()&#123;&#125;</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line">a()                    <span class="comment">//8  执行 function()&#123;console.log(1)&#125;() 输出1</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>)</span>&#123;  <span class="comment">//3  定义 var a</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>)       <span class="comment">//4  定义 var function b()&#123;&#125;</span></span><br><span class="line">&#125;                      <span class="comment">//9  执行 将函数b赋值给a</span></span><br><span class="line">a()                    <span class="comment">//10 执行 a()相当于b() 输出3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例三</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>              <span class="comment">//1  var a;                    3  a = 1;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a</span>)</span>&#123;        <span class="comment">//2  定义function fn(a)&#123;...&#125;   5  function fn( var a)&#123;....&#125;</span></span><br><span class="line">  <span class="built_in">console</span>.log(a)       <span class="comment">//6  a = undefiend  函数局部作用域内a</span></span><br><span class="line">  a = <span class="number">2</span>                <span class="comment">//7  a = 2   局部a</span></span><br><span class="line">&#125;</span><br><span class="line">fn()                   <span class="comment">//4  fn()</span></span><br><span class="line"><span class="built_in">console</span>.log(a)         <span class="comment">//8  a = 1  全局</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例四</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>              <span class="comment">//1  var a;                   3 a = 1;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a</span>)</span>&#123;        <span class="comment">//2  fn = function fn(a)&#123;...&#125; 5 fn( var a)&#123;....&#125;  6 fn(a = 1)&#123;....&#125;</span></span><br><span class="line">  <span class="built_in">console</span>.log(a)       <span class="comment">//7  a = 1  函数局部作用域内a</span></span><br><span class="line">  a = <span class="number">2</span>                <span class="comment">//8  a = 2   局部a</span></span><br><span class="line">&#125;</span><br><span class="line">fn(a)                  <span class="comment">//4  fn()</span></span><br><span class="line"><span class="built_in">console</span>.log(a)         <span class="comment">//9  a = 1  全局</span></span><br></pre></td></tr></table></figure><h2 id="JS-作用域与作用域链-es5"><a href="#JS-作用域与作用域链-es5" class="headerlink" title="JS 作用域与作用域链(es5)"></a>JS 作用域与作用域链(es5)</h2><p>作用域就是变量的作用范围   <code>if for没有块级作用域 只有函数能开辟作用域</code><br>静态作用域：变量或函数作用域与定义时的作用域有关，跟在哪执行时的作用域无关<br>动态作用域：this跟在哪定义时的无关，跟在哪执行有关，只有在执行阶段才能决定变量的作用域<br>在JavaScript中，如果函数的调用者不存在，那么它的调用者将会是<code>全局window对象</code>（或其他环境中的全局变量)</p><p><code>所有的全局变量或对象都是在window对象上定义的， 所有的全局变量和对象都属于window对象</code><br><code>1.全局作用域</code>   在代码任何地方都能访问到的对象拥有全局作用域<br>a.最外层函数和在最外层函数外面定义的变量拥有全局作用域(可以在任何地方被改变)<br>b.所有未定义直接赋值的变量自动声明为拥有全局作用域<br>c.所有<code>window</code>对象的内置属性都拥有全局作用域<br><code>2.局部作用域(函数作用域)</code> 只有在函数内部可以访问到,在局部作用域(函数)外无法访问<br>局部作用域内的对象(函数或变量),所有未定义直接赋值的变量可以作为<code>window</code>的属性,不存在返回<code>undefined</code>,未定义也未赋值的变量寻找不到则直接报错<code>xxx is not defined</code><br>函数的形参本身就是一个局部变量   相当于<code>function b(var a){}</code><br><code>3.作用域链</code> (函数)域先从自己的作用域找数据变量,找不到再去上级作用域,直到script还没找到则报错<br><code>script</code>是最大的域,有多个<code>script</code>,从上往下依次执行 函数可作为小的作用域 域内先定义后执行<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 作用域链</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">0</span>           <span class="comment">//1  定义 var a    3 执行 赋值a=0</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;    <span class="comment">//2  定义 function fn()&#123;...&#125;</span></span><br><span class="line">  <span class="built_in">console</span>.log(a)    <span class="comment">//7  执行 console.log(a) //undefined</span></span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>         <span class="comment">//6  定义 var a    8 赋值 a=1</span></span><br><span class="line">  <span class="built_in">console</span>.log(a)    <span class="comment">//9  执行 console.log(a) //1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a)      <span class="comment">//4  执行 console.log(a)  //0</span></span><br><span class="line">fn()                <span class="comment">//5  执行 fn()</span></span><br><span class="line"><span class="built_in">console</span>.log(a)      <span class="comment">//10 执行 console.log(a)  //0</span></span><br><span class="line"><span class="comment">// 函数作用域: 定义过程中的作用域 而不是调用时的作用域</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">80</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(age)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> age = <span class="number">40</span></span><br><span class="line">  fn1()</span><br><span class="line">&#125;</span><br><span class="line">fn2() <span class="comment">// 80  fn1()定义时作用域</span></span><br></pre></td></tr></table></figure></p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ol><li>a href=”javascript:;”或a href=”javascript:void(0)” 点A标签的时候,让当前页不跳转。</li><li>在同一个网页中,放任意个数的<code>&lt;script&gt;</code>由上往下执行 一般放在<code>&lt;/body&gt;</code>结束之前。原因:先呈现页面,加载DOM树结构,后加载脚本,提高用户体验  基于网站优化</li><li>js中允许把 “.” 换成 “[‘’]”</li><li>!-[-1,] 判断IE</li><li>IE独有api  isIE = document.documentMode</li></ol>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js基础 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>javascript基础(一)--(数据类型,运算符,语句等)</title>
      <link href="/javascript%E5%9F%BA%E7%A1%80(1)/"/>
      <url>/javascript%E5%9F%BA%E7%A1%80(1)/</url>
      
        <content type="html"><![CDATA[<h2 id="JS-包含三部分"><a href="#JS-包含三部分" class="headerlink" title="JS  包含三部分"></a>JS  包含三部分</h2><ol><li><code>核心ECMASCRIPT</code></li><li><code>DOM</code></li><li><code>BOM</code></li></ol><h2 id="JS-注释"><a href="#JS-注释" class="headerlink" title="JS  注释"></a>JS  注释</h2><ol><li>单行注释  <code>// 被注释的这一行,它不会被执行</code></li><li>多行注释  <code>/* 注释多行 */</code><br><code>注 \n  在js文本中(弹框等)的换行,JavaScript 会忽略多余的空格。您可以向脚本添加空格，来提高其可读性</code></li></ol><h2 id="JS-三种弹框"><a href="#JS-三种弹框" class="headerlink" title="JS  三种弹框"></a>JS  三种弹框</h2><ol><li><code>alert</code>(“弹出框”)</li><li><code>confirm</code>(“提示信息”) 返回值为<code>true</code>或<code>false</code></li><li><code>prompt</code>(“提示信息”,”默认值”) 点击确定返回输入的字符串</li></ol><h2 id="JS-输出"><a href="#JS-输出" class="headerlink" title="JS  输出"></a>JS  输出</h2><ol><li><code>document.write() document.writeln()</code>输出之后会加空格,如果在文档已完成加载后执行 <code>document.write</code>，整个<code>HTML</code>页面将被覆盖</li><li><code>consloe.log()</code> 控制台输出信息</li><li><code>console.time(1)</code>  <code>code console.timeEnd(1)</code>  用来标记循环耗时</li><li><code>console.table(obj)</code>  将json对象按表格输出</li></ol><h2 id="JS-变量"><a href="#JS-变量" class="headerlink" title="JS  变量"></a>JS  变量</h2><ol><li>以字母 下划线 <code>$</code>开头 不能由数字开头 不能使用关键字</li><li>对大小写敏感(<code>age</code>和<code>AGE</code>是不同的变量)<br>当给变量分配文本值时,应该用双引号或单引号包围这个值。<br>当给变量赋的值是数值时,不要使用引号.如果用引号该值会被作为文本来处理</li><li>声明多个变量用逗号隔开<code>(var a,b,c)</code></li><li>声明变量的时候没有给它赋值。只是声明，没有管它，没有给它赋值。<br><code>var name;</code><br><code>alert(name); //会弹出undefined;</code><br>变量存放在栈里 键盘上的字符,数字,特殊符号放在常量池  对象放在堆里面</li><li>局部变量会在函数运行以后被删除 全部变量会在页面关闭后被删除</li></ol><h2 id="JS-数据类型-es6之前"><a href="#JS-数据类型-es6之前" class="headerlink" title="JS  数据类型 (es6之前)"></a>JS  数据类型 (es6之前)</h2><ul><li>基本数据类型<br>一 <code>number</code> 数值型   <code>infinity</code> 无穷大数字   <code>10/0  infinity</code><br>二 <code>string</code> 字符串   必须用引号引起来<br>三 <code>bool</code>   布尔型   <code>true和false</code>    布尔值直接使用  千万不要加上引号<br>四 <code>function</code> 函数<br>五 <code>undefined</code> 未定义</li><li>复合数据类型<br>六 <code>object</code> 对象 <code>null 对象{} 数组[]</code></li><li><p>注意问题</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">null</span>   没有这个对象或无值(空)  通过给一个变量赋 <span class="literal">null</span> 值来清除变量的内容</span><br><span class="line"><span class="literal">undefined</span>  有声明而未赋值的变量</span><br><span class="line"><span class="literal">null</span>==<span class="literal">undefined</span>;   <span class="comment">//true</span></span><br><span class="line"><span class="built_in">isNaN</span>()判断是否是<span class="literal">NaN</span>(判断之前先用<span class="built_in">Number</span>()转换)</span><br><span class="line"><span class="literal">NaN</span>   不是一个数字 但是它是number数字型</span><br><span class="line"><span class="literal">NaN</span> 和 <span class="literal">NaN</span>  自己不相等 是布尔值<span class="literal">false</span></span><br></pre></td></tr></table></figure></li><li><p>显式类型转换</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">一 <span class="built_in">Number</span>()  转换成数值型</span><br><span class="line">ex:<span class="keyword">var</span> a = <span class="string">'110'</span></span><br><span class="line">   <span class="keyword">var</span> b = <span class="built_in">Number</span>(a)</span><br><span class="line">   <span class="built_in">console</span>.log(b)  <span class="comment">// 110</span></span><br><span class="line">   <span class="built_in">console</span>.log(<span class="keyword">typeof</span> b) <span class="comment">//number</span></span><br><span class="line">ex:<span class="keyword">var</span> a = <span class="string">'110px'</span></span><br><span class="line">   <span class="keyword">var</span> b = <span class="built_in">Number</span>(a)</span><br><span class="line">   <span class="built_in">console</span>.log(b) <span class="comment">//NaN 不是一个数字</span></span><br><span class="line">   <span class="built_in">console</span>.log(<span class="keyword">typeof</span> b) <span class="comment">// number</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">""</span>)--&gt;<span class="number">0</span>   <span class="built_in">Number</span>(<span class="literal">null</span>)--&gt;<span class="number">0</span>    <span class="built_in">Number</span>([])--&gt;<span class="number">0</span></span><br><span class="line">注:空字符串 空数组和<span class="literal">null</span> 进行<span class="built_in">Number</span>()转换时 返回<span class="number">0</span></span><br><span class="line">   对象 函数 undefiend 使用<span class="built_in">Number</span>()时 都为<span class="literal">NaN</span></span><br><span class="line">   当数组有且只一个元素,而这个元素是数值时 <span class="built_in">Number</span>()转换成该数值</span><br><span class="line">   数组不是一个元素时不管是什么<span class="built_in">Number</span>()转换都是<span class="literal">NaN</span></span><br><span class="line">二 <span class="built_in">parseInt</span>() 强制取整  <span class="built_in">parseFloat</span>()  转换成小数</span><br><span class="line">   <span class="built_in">parseInt</span>(b,<span class="number">10</span>)  <span class="comment">//第二个参数表示进制</span></span><br><span class="line">   对字符串或数组的第一个字符进行判断,不是数字字符将停止转换</span><br><span class="line">   除了加号/空格/减号(负数)外的任何非数字都将得到<span class="literal">NaN</span>)</span><br><span class="line">ex:<span class="keyword">var</span> a = <span class="string">'100px'</span>;</span><br><span class="line">   <span class="keyword">var</span> b = <span class="built_in">parseInt</span>(a);</span><br><span class="line">   <span class="built_in">console</span>.log(b); <span class="comment">//100</span></span><br><span class="line">   <span class="built_in">console</span>.log(<span class="keyword">typeof</span> b);<span class="comment">//number</span></span><br><span class="line">   当数组第一个元素是数字<span class="built_in">parseInt</span>()或<span class="built_in">parseFloat</span>()将数组第一个元素转换成数字</span><br><span class="line">ex:<span class="built_in">console</span>.log(<span class="built_in">Number</span>([<span class="string">'a'</span>]))         <span class="comment">//NaN</span></span><br><span class="line">   <span class="built_in">console</span>.log(<span class="built_in">Number</span>([<span class="number">2</span>,<span class="string">'2'</span>,<span class="number">2</span>]))   <span class="comment">//NaN</span></span><br><span class="line">   <span class="built_in">console</span>.log(<span class="built_in">Number</span>([<span class="string">'2'</span>]))         <span class="comment">//2</span></span><br><span class="line">   <span class="built_in">console</span>.log(<span class="built_in">parseInt</span>([<span class="string">"2"</span>,<span class="number">3</span>,<span class="number">4</span>]))   <span class="comment">//2</span></span><br><span class="line">   <span class="built_in">console</span>.log(<span class="built_in">parseInt</span>([<span class="string">'a'</span>,<span class="number">2</span>]))       <span class="comment">//NaN</span></span><br><span class="line">三 转换为布尔值 <span class="built_in">Boolean</span>(变量) 或  !!变量</span><br></pre></td></tr></table></figure></li><li><p>隐式类型转换<br>① <code>+(拼接)   //100 + &#39;1&#39; =&gt; &#39;1001&#39;</code>    变字符串<br>② <code>- * / % ++ --  // &#39;100&#39;-2 =&gt; 98</code>   变数字<br>③ <code>&gt; &lt;     // (var a=&#39;10&#39;)&lt;(var b=4)</code>  转换成布尔值 会用number转换<br>④ <code>字符串比较大小时   比较第一个字符的ASCII码</code><br>⑤ <code>!取反</code> 把右边的数据类型转换成布尔值</p></li></ul><h2 id="JS-运算符"><a href="#JS-运算符" class="headerlink" title="JS  运算符"></a>JS  运算符</h2><ol><li>算术运算符 <code>+ - * / % ++ --</code><br><code>++ --</code>  自增或自减 不支持布尔型 对于字符串自增或自减属于升序或降序<br><code>a++或a--</code>  先用(赋值)再加 结果不变 ++a或–a  先加再用(赋值) 结果加1或减1</li><li>赋值运算符 <code>= += -= *= /= %=</code><br>把右边的值赋给左边的变量或常量</li><li>比较运算符 <code>&lt; &gt; &lt;= &gt;= == != === !==</code><br>比较运算符的结果都是一个布尔型<br>恒等于<code>===</code>值和类型都相同  非恒等于<code>!==</code>数值不相等或类型不相同<br><code>==</code>和<code>!=</code>在比较之前首先让双方的值做隐士类型转换<br>在简单基本比较运算符中  值和引用都要一样</li><li>逻辑运算符<br><code>and</code>或<code>&amp;&amp;</code> 逻辑与 当两边都为<code>true</code>时，才返回<code>true</code>，否则返回<code>false</code><br><code>or</code>或<code>||</code>  逻辑或 只要有一个为<code>true</code>时，返回<code>true</code>，都为假时才返回<code>false</code><br><code>xor</code> 逻辑异或 当两个操作数一个为真一个为假时，才返回<code>true</code><br><code>！</code> 逻辑非 单一操作数为<code>true</code>，则返回<code>false</code></li><li>位运算符<br>对二进制位从低位到高位对齐后进行计算<br><code>&amp;</code> 按位与 <code>|</code> 按位或 <code>^</code> 按位异或 <code>~</code> 按位取反 <code>&lt;&lt;</code> 向左移位 <code>&gt;&gt;</code> 向右移位<br><code>注: 按位运算不会出现短路</code></li><li><p>三元运算符(条件运算符)<br>表达式1？表达式2：表达式3<br>如果表达式1为真则执行表达式2，表达式1为假则执行表达式3</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">一. 在取模%运算符中  正负号取决于被除数的正负</span><br><span class="line">ex: <span class="keyword">var</span> a = <span class="number">5</span>,b = <span class="number">-2</span></span><br><span class="line">    <span class="built_in">console</span>.log(a%b)  <span class="comment">//1</span></span><br><span class="line">ex: <span class="keyword">var</span> a = <span class="number">-5</span>,b = <span class="number">-2</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(a%b)  <span class="comment">//-1</span></span><br><span class="line">在js中拼接用<span class="string">"+"</span>  从左往右碰到第一个非数值之后就理解为字符串拼接</span><br><span class="line">在JS中任何类型的值都可以转换成逻辑布尔值</span><br><span class="line">假 <span class="string">""</span>(空字符串) <span class="literal">null</span> <span class="literal">undefined</span>  <span class="literal">false</span> <span class="literal">NaN</span> <span class="number">0</span>为假,其他都为真</span><br><span class="line">真 函数  对象  非空字符串  非<span class="number">0</span>的数字  数组  <span class="literal">true</span>都为真</span><br><span class="line">注:在js中逻辑运算符(短路) 返回的是最早能判断表达式结果的那个值</span><br><span class="line">二. 对于&amp;&amp;  如果第一个值是<span class="literal">false</span> 则整个表达式都是<span class="literal">false</span> 并返回第一个值。</span><br><span class="line">如果第一个值是<span class="literal">true</span>  则直接返回最后一个值不管真假</span><br><span class="line">三. 对于||  如果第一个值是<span class="literal">false</span> 则看后面的条件是否为真,找到真值就将其返回</span><br><span class="line">如果到最后也没找到真值，则返回最后一个值。</span><br><span class="line">如果第一个值是真就直接返回第一个</span><br><span class="line">ex <span class="keyword">var</span> a = <span class="literal">false</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">6</span></span><br><span class="line"><span class="keyword">var</span> c = <span class="literal">true</span></span><br><span class="line"><span class="keyword">var</span> d = a || b &amp;&amp; c</span><br><span class="line"><span class="built_in">console</span>.log(d)  <span class="comment">//true</span></span><br><span class="line">ex <span class="keyword">var</span> a = <span class="literal">false</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">6</span></span><br><span class="line"><span class="keyword">var</span> c = <span class="literal">null</span></span><br><span class="line"><span class="keyword">var</span> d = a &amp;&amp; b || c</span><br><span class="line"><span class="built_in">console</span>.log(d) <span class="comment">//null</span></span><br><span class="line">四. void取消返回值</span><br></pre></td></tr></table></figure></li><li><p><code>delete</code>删除对象的属性或数组中的元素<br>删除数组元素时，并没有改变数组的长度，只是留下了一个<code>undefined</code>的值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ex: <span class="keyword">delete</span> obj.a <span class="keyword">delete</span> obj[<span class="string">"a"</span>] <span class="keyword">delete</span> array[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="keyword">delete</span> arr[<span class="number">1</span>]    <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">//[empty, 2]</span></span><br><span class="line">arr.length       <span class="comment">//2</span></span><br></pre></td></tr></table></figure></li><li><p>逗号表达式<br>一般形式是：表达式1，表达式2，表达式3……表达式n<br>逗号表达式的求解过程是：先计算表达式1的值，再计算表达式2的值，……一直计算到表达式n的值。<br>最后整个逗号表达式的值是表达式n的值。 看下面几个例子：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">8</span> * <span class="number">2</span>, x * <span class="number">4</span> <span class="comment">/*整个表达式的值为64，x的值为16*/</span></span><br><span class="line">(x = <span class="number">8</span> * <span class="number">2</span>, x * <span class="number">4</span>), x * <span class="number">2</span> <span class="comment">/*整个表达式的值为128，x的值为16*/</span></span><br><span class="line">x = (z = <span class="number">5</span>, <span class="number">5</span> * <span class="number">2</span>) <span class="comment">/*整个表达式为赋值表达式，它的值为10，z的值为5*/</span></span><br><span class="line">x = z = <span class="number">5</span>, <span class="number">5</span> * <span class="number">2</span> <span class="comment">/*整个表达式为逗号表达式，它的值为10，x和z的值都为5*/</span></span><br><span class="line"><span class="comment">// 逗号表达式用的地方不太多，一般情况是在给循环变量赋初值时才用得到</span></span><br></pre></td></tr></table></figure></li><li><p><code>in</code>运算符<br><code>in</code>运算符它的左操作符是一个字符串或可以转化为字符串，右操作符是一个对象。如果右侧的对象拥有一个  名为左操作数值的属性名，那么表达式返回true</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ex:<span class="keyword">var</span> point = &#123; <span class="attr">x</span>:<span class="number">1</span>, <span class="attr">y</span>:<span class="number">1</span> &#125;</span><br><span class="line"><span class="string">"x"</span> <span class="keyword">in</span> point <span class="comment">// true</span></span><br><span class="line"><span class="string">"z"</span> <span class="keyword">in</span> point <span class="comment">// false 对象不存在z属性</span></span><br><span class="line"><span class="string">"toString"</span> <span class="keyword">in</span> point <span class="comment">// true 对象继承了toString方法</span></span><br><span class="line"><span class="keyword">var</span> data = [ <span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span> ]</span><br><span class="line"><span class="string">"0"</span> <span class="keyword">in</span> data <span class="comment">// true  数组包含"0"属性</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">in</span> data   <span class="comment">// true  数字转换为字符串</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">in</span> data   <span class="comment">// false 没有索引为3的元素</span></span><br></pre></td></tr></table></figure></li><li><p><code>typeof</code>运算符(es6之前)<br>返回表示操作数类型的字符串  <code>typeof(xx)</code> <code>typeof xx</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span>(<span class="literal">undefined</span>) <span class="comment">// "undefined"</span></span><br><span class="line"><span class="keyword">typeof</span>(<span class="literal">null</span>) <span class="comment">// "object"</span></span><br><span class="line"><span class="keyword">typeof</span>(<span class="number">1.2</span>) <span class="comment">// "number"</span></span><br><span class="line"><span class="keyword">typeof</span>(<span class="literal">NaN</span>) <span class="comment">// "number"</span></span><br><span class="line"><span class="keyword">typeof</span>(<span class="string">'字符串'</span>) <span class="comment">// "string"</span></span><br><span class="line"><span class="keyword">typeof</span>(<span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;&#125;) <span class="comment">// "function"</span></span><br><span class="line"><span class="keyword">typeof</span>(&#123;&#125;) <span class="comment">// "object"</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="JS-语句"><a href="#JS-语句" class="headerlink" title="JS  语句"></a>JS  语句</h2><ul><li><p>条件控制语句</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// if语句</span></span><br><span class="line"><span class="keyword">if</span> (expr(真或假)) &#123;</span><br><span class="line">  statement</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 只有一条语句时，大括号可以省略</span></span><br><span class="line"><span class="keyword">if</span>(expr) statement</span><br><span class="line"><span class="comment">// if...else语句</span></span><br><span class="line"><span class="keyword">if</span> (expr) &#123;</span><br><span class="line">  statement</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  statement</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// if...elseif语句</span></span><br><span class="line"><span class="keyword">if</span> (expr1) &#123;</span><br><span class="line">  statement1</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (expr2) &#123;</span><br><span class="line">  statement2</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  statement3</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// switch...case语句</span></span><br><span class="line"><span class="keyword">switch</span>(变量)&#123;</span><br><span class="line">  <span class="keyword">case</span> 值<span class="number">1</span>:</span><br><span class="line">    statement1</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">case</span> 值<span class="number">2</span>:</span><br><span class="line">    statement2</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">case</span> 值<span class="number">3</span>:</span><br><span class="line">    statement3</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    statement</span><br><span class="line">&#125;</span><br><span class="line">a. switch(变量)  变量的类型只能是数字或字符串</span><br><span class="line">b. case中值的判断必须是 === 类型和数值都得相等</span><br><span class="line">c. switch <span class="keyword">case</span> 适合单个值匹配  elseif 适合判断范围时使用</span><br><span class="line">d. break是退出<span class="keyword">switch</span>使用的,如果需要同时匹配多个值可以使用多个<span class="keyword">case</span>而不加<span class="keyword">break</span></span><br><span class="line">e. default无论放在开始还是结束,不会影响程序执行,先执行<span class="keyword">case</span> 在执行 <span class="keyword">default</span> 放在末尾可以不加<span class="keyword">break</span>  放在开头必须加<span class="keyword">break</span></span><br></pre></td></tr></table></figure></li><li><p>循环控制语句 用于遍历对象或数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// while循环语句</span></span><br><span class="line"><span class="comment">// 表达式为true时  才执行循环体</span></span><br><span class="line"><span class="keyword">while</span>(expr)&#123;</span><br><span class="line">  statement;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//  for语句</span></span><br><span class="line"><span class="keyword">for</span>(expr1;expr2;expr3)&#123;</span><br><span class="line">  statement;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// expr1变量的初始赋值,expr2为循环条件,expr3为变量递增或递减</span></span><br><span class="line"><span class="comment">// 用于已知循环次数多条件循环操作</span></span><br><span class="line"><span class="comment">// do...while循环语句</span></span><br><span class="line"><span class="comment">// 先执行循环体,在判断表达式,成立再执行循环体</span></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  statement</span><br><span class="line">&#125; <span class="keyword">while</span>(expr)</span><br><span class="line"><span class="comment">// for...in 循环语句  遍历对象所以可枚举的属性（enumerable）</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> json)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key+<span class="string">'--&gt;'</span>+json[key]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>跳转控制语句 常用于跳出<code>for</code>循环或<code>foreach</code>循环<br><code>break</code>语句 <code>break n</code> 指定要跳出几层循环 结束整个循环结构<br><code>continue</code>语句 <code>continue n</code> 指定要跳出几层循环 只能终止本次循环 继续下一层循环</p></li></ul><h2 id="JS中的保留字"><a href="#JS中的保留字" class="headerlink" title="JS中的保留字"></a>JS中的保留字</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">break</span>    <span class="keyword">catch</span>   <span class="keyword">case</span>    <span class="keyword">continue</span>   <span class="keyword">do</span>   <span class="keyword">default</span>  <span class="keyword">delete</span>  <span class="keyword">debugger</span>  <span class="keyword">else</span>    <span class="literal">false</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">for</span>     <span class="title">finally</span> <span class="title">instanceof</span> <span class="title">in</span>   <span class="title">if</span>       <span class="title">new</span>     <span class="title">null</span>      <span class="title">return</span>  <span class="title">switch</span></span></span><br><span class="line"><span class="function"><span class="title">this</span>     <span class="title">typeof</span>  <span class="title">true</span>    <span class="title">throw</span>      <span class="title">try</span>  <span class="title">var</span>      <span class="title">void</span>    <span class="title">with</span>      <span class="title">while</span></span></span><br></pre></td></tr></table></figure><h2 id="JS运算符优先级"><a href="#JS运算符优先级" class="headerlink" title="JS运算符优先级"></a>JS运算符优先级</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 优先级 由高到底</span></span><br><span class="line"><span class="comment">//运算符         //描述</span></span><br><span class="line">. [] ()         字段访问、数组下标、函数调用以及表达式分组</span><br><span class="line">++ -- - ~ ! <span class="keyword">delete</span> <span class="keyword">new</span> <span class="keyword">typeof</span> <span class="keyword">void</span> 一元运算符、返回数据类型、对象创建</span><br><span class="line">* <span class="regexp">/ %           乘法、除法、取模</span></span><br><span class="line"><span class="regexp">+ - +           加法、减法、字符串连接</span></span><br><span class="line"><span class="regexp">&lt;&lt; &gt;&gt; &gt;&gt;&gt;       移位</span></span><br><span class="line"><span class="regexp">&lt; &lt;= &gt; &gt;= instanceof 小于、小于等于、大于、大于等于、instanceof</span></span><br><span class="line"><span class="regexp">== != === !==   等于、不等于、严格相等、非严格相等</span></span><br><span class="line"><span class="regexp">&amp;               按位与</span></span><br><span class="line"><span class="regexp">^               按位异或</span></span><br><span class="line"><span class="regexp">|               按位或</span></span><br><span class="line"><span class="regexp">&amp;&amp;              逻辑与</span></span><br><span class="line"><span class="regexp">||              逻辑或</span></span><br><span class="line"><span class="regexp">?:              条件</span></span><br><span class="line"><span class="regexp">= oP=           赋值、运算赋值</span></span><br><span class="line"><span class="regexp">,               多重求值</span></span><br></pre></td></tr></table></figure><h2 id="JS-定时器"><a href="#JS-定时器" class="headerlink" title="JS 定时器"></a>JS 定时器</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置定时器 (目前最小时间14毫秒)</span></span><br><span class="line"><span class="number">1.</span>setInterval  <span class="comment">//每隔多少秒执行一次 不清除会一直执行下去</span></span><br><span class="line">ex: setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="built_in">console</span>.log(<span class="string">'定时器例子'</span>)&#125;, <span class="number">3000</span>)</span><br><span class="line"><span class="number">2.</span>setTimeout   <span class="comment">//隔多少秒后执行(只执行一次)</span></span><br><span class="line">ex: setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="built_in">console</span>.log(<span class="string">'定时器例子'</span>)&#125;, <span class="number">3000</span>)</span><br><span class="line"><span class="comment">// 清除定时器  最好在使用定时器的时候先清除上一次的定时器</span></span><br><span class="line">clearInterval(t) / clearTimeout(t)</span><br><span class="line">ex:<span class="keyword">var</span> num = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> t = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  num++</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'123'</span>)</span><br><span class="line">  <span class="keyword">if</span>(num == <span class="number">2</span>)&#123;</span><br><span class="line">    clearInterval(t)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,<span class="number">3000</span>)</span><br><span class="line"><span class="comment">//问题:  在点击事件中执行多次停不下来   在每次开启时,先清除定时器</span></span><br><span class="line"><span class="number">3.</span>定时器有n个参数 setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params">num</span>)</span>&#123; <span class="built_in">console</span>.log(num)&#125;, <span class="number">1000</span>, <span class="number">123</span>)   <span class="comment">//123</span></span><br></pre></td></tr></table></figure><h2 id="JS-小知识"><a href="#JS-小知识" class="headerlink" title="JS 小知识"></a>JS 小知识</h2><ol><li><p>定时器有多个参数, 返回值<code>timer</code>是整数数字</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> timer = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(num) <span class="comment">// 123</span></span><br><span class="line">&#125;, <span class="number">1000</span>, <span class="number">123</span>)</span><br><span class="line"><span class="built_in">console</span>.log(timer) <span class="comment">// 61834</span></span><br></pre></td></tr></table></figure></li><li><p>利用<code>\</code>进行多行字符串的拼接</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">obj.innerHTML=<span class="string">'&lt;div&gt;这行&lt;/div&gt;\</span></span><br><span class="line"><span class="string">              &lt;span&gt;文字&lt;/span&gt;\</span></span><br><span class="line"><span class="string">              &lt;p&gt;标签&lt;/p&gt;'</span></span><br></pre></td></tr></table></figure></li><li><p><code>console.log(&#39;%c&#39;+带样式得输出,&#39;font-size:50px;color:red&#39;)</code>  可以输出样式,图片等</p></li><li><code>typeof写法  typeof arr等价于typeof(arr)  还有instanceof和in</code></li><li><p>嵌套for循环跳出循环</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;            <span class="attr">a</span>:<span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">0</span>;j &lt; <span class="number">1</span>; j++)&#123;               <span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; <span class="number">1</span>; j++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(i == <span class="number">3</span>)&#123;                              <span class="keyword">if</span>(i == <span class="number">3</span>)&#123;</span><br><span class="line">      <span class="keyword">break</span>;                                   <span class="keyword">break</span> a</span><br><span class="line">    &#125;                                        &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(i)                           <span class="built_in">console</span>.log(i)</span><br><span class="line">    <span class="comment">//0 1 2 4                                //0 1 2</span></span><br><span class="line">  &#125;                                        &#125;</span><br><span class="line">&#125;                                        &#125;</span><br></pre></td></tr></table></figure></li><li><p><code>call(obj) 改变this指向  不写参数  默认指向window</code></p></li><li><code>obj.getBoundingClientRect()   获取元素上下左右宽高6个值</code></li><li>元素尺寸：对应<code>jQuery</code>中的<code>$(xx).outerWidth()</code>和<code>$(xx).outerHeight()</code>方法，包括<code>padding</code>和<code>border</code>，也就是元素的<code>border-box</code>的尺寸。在原生<code>DOMAPI</code>中对应的是<code>offsetWidth</code>和<code>offsetHeight</code>,所以,有时候也称为<code>元素偏移尺寸</code>。</li><li>元素内部尺寸：对应<code>jQuery</code>中的<code>$(xx).innerWidth()</code>和<code>$(xx).innerHeight()</code>方法，表示元素的内部区域尺寸，包括<code>padding</code>但不包括<code>border</code>，也就是元素的<code>padding-box</code>尺寸。在原生的<code>DOM API</code>中<br>对应<code>clientWidth</code>和<code>clientHeight</code>，所以，有时候也称为<code>元素可视尺寸</code>。</li><li>元素外部尺寸：对应<code>jQuery</code>中的<code>$(xx).outerWidth(true)</code>和<code>$(xx).outerHeight(true)</code>方法， 表示元素的外部尺寸，不仅包括<code>padding</code>和<code>border</code>，还包括<code>margin</code>，也就是元素的<code>margin-box</code>尺寸。<br>没有相对应的原生的<code>DOMAPI</code></li></ol><h2 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h2><ul><li><code>json</code> 是存储和传输数据的格式用于服务器端向网页传递数据</li><li><code>json</code> 英文全称<code>JavaScript Object Notation</code></li><li><code>json</code> 格式仅仅是一个文本,文本可以被任何编程语言读取及作为数据格式传递</li></ul><ol><li><p><code>json</code>语法规则</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a.数据为键/值对      <span class="string">"firstName"</span>:<span class="string">"John"</span>  <span class="comment">// 属性名最好加上双引号</span></span><br><span class="line">b.并列数据由逗号分隔  <span class="string">"firstName"</span>:<span class="string">"John"</span>, <span class="string">"lastName"</span>:<span class="string">"Doe"</span></span><br><span class="line">c.大括号保存对象      &#123;<span class="string">"firstName"</span>:<span class="string">"John"</span>, <span class="string">"lastName"</span>:<span class="string">"Doe"</span>&#125;</span><br><span class="line">d.方括号保存数组      <span class="string">"employees"</span>:[&#123;<span class="string">"firstName"</span>:<span class="string">"John"</span>, <span class="string">"lastName"</span>:<span class="string">"Doe"</span>&#125;]</span><br><span class="line"><span class="keyword">var</span> arr=&#123;<span class="string">"employees"</span>:[</span><br><span class="line">  &#123;<span class="string">"firstName"</span>:<span class="string">"John"</span>, <span class="string">"lastName"</span>:<span class="string">"Doe"</span>&#125;,</span><br><span class="line">  &#123;<span class="string">"firstName"</span>:<span class="string">"Anna"</span>, <span class="string">"lastName"</span>:<span class="string">"Smith"</span>&#125;,</span><br><span class="line">  &#123;<span class="string">"firstName"</span>:<span class="string">"Peter"</span>, <span class="string">"lastName"</span>:<span class="string">"Jones"</span>&#125;</span><br><span class="line">]&#125;</span><br><span class="line"><span class="comment">// JSON取值</span></span><br><span class="line">arr.employees[<span class="number">0</span>].firstName  <span class="comment">//John</span></span><br><span class="line">arr[<span class="string">"employees"</span>][<span class="number">0</span>].firstName  <span class="comment">//John</span></span><br></pre></td></tr></table></figure></li><li><p><code>Json</code>遍历<code>for in</code>(不能使用for循环),<code>json</code>是没有长度的,<code>json.length</code>会得到<code>undefined</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> json1 =&#123;</span><br><span class="line">  <span class="string">'url'</span>:[<span class="string">'img/1.jpg'</span>,<span class="string">'img/2.jpg'</span>,<span class="string">'img/3.jpg'</span>,<span class="string">'img/4.jpg'</span>],</span><br><span class="line">  <span class="string">'text'</span>:[<span class="string">'这是第一张图片'</span>,<span class="string">'这是第二张图片'</span>,<span class="string">'这是第三张图片'</span>,<span class="string">'这是第四张图片'</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> attr <span class="keyword">in</span> json1)&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;json1[attr].length;i++)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(json1[attr][i])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>json</code>字符串转换为<code>javascript</code>对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建javascript字符串字符传为JSON格式的数据</span></span><br><span class="line"><span class="keyword">var</span> txt=<span class="string">'&#123;"employees":['</span>+</span><br><span class="line">  <span class="string">'&#123;"firstName":"John", "lastName":"Doe"&#125;,'</span>+</span><br><span class="line">  <span class="string">'&#123;"firstName":"John", "lastName":"Doe"&#125;,'</span>+</span><br><span class="line">  <span class="string">'&#123;"firstName":"John", "lastName":"Doe"&#125;]&#125;'</span>;</span><br><span class="line"><span class="comment">// 使用JSON.parse() 将json字符串转换为javascript对象</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="built_in">JSON</span>.parse(txt)</span><br><span class="line"><span class="comment">// 获取值并输出</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.employees[<span class="number">1</span>].firstName+<span class="string">"--"</span>+obj.employees[<span class="number">1</span>].lastName)</span><br><span class="line"><span class="built_in">console</span>.log(obj[<span class="string">"employees"</span>][<span class="number">2</span>].firstName+<span class="string">"--"</span>+obj[<span class="string">"employees"</span>][<span class="number">2</span>].lastName)</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js基础 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>移动端适配</title>
      <link href="/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D/"/>
      <url>/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D/</url>
      
        <content type="html"><![CDATA[<p>为了适应各种移动端设备，完美呈现现应有的布局效果,各个移动端设备，分辨率大小不一致，网页想铺满整个屏幕，并在各种分辨下等比缩放。常见适配方案如: <code>固定高度宽度自适应</code>、<code>固定宽度，viewport等比缩放</code>、<code>Rem适配</code>、<code>像素比适配</code>、<code>vw适配</code>、<code>媒体查询</code>等。<br><a id="more"></a></p><h4 id="单位"><a href="#单位" class="headerlink" title="单位"></a>单位</h4><ul><li><code>em</code> 相对于当前元素字体大小,当前元素未设置字体大小则继承父级字体大小 默认 1em=16px em作为font-size使用时,相对于父元素字体大小 em作为宽高等使用时 相对于自身字体大小 例如默认 <code>font-size:2em;width:2em; // width为64px</code></li><li><code>rem</code> R -&gt; root 根节点(html)根据 <code>html</code> 的字体大小计算其他元素尺寸</li><li><code>vw</code> 和 <code>vh</code> 相对于屏幕(可视窗口宽度) <code>宽度100vw</code>和<code>高度100vh</code></li><li><code>vmin</code>是指vw和vh中最小的那个,<code>vmax</code>是vw和vh中最大的那个</li></ul><h4 id="适配方案"><a href="#适配方案" class="headerlink" title="适配方案"></a>适配方案</h4><ol><li>固定高度，宽度自适应（百分比，flex布局）或者响应式<br><code>高度固定(单位可以是px 百分比 auto) 常用flex布局或百分比宽度</code></li><li>固定宽度，viewport等比缩放<br><code>设计图的宽度就是网页显示的宽度,动态改变视口的缩放比例,页面宽度写死</code></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 弊端: 统一宽度之后 无法做响应式,富文本编辑器上传的内容也会被缩放</span></span><br><span class="line"><span class="keyword">var</span> width  = <span class="built_in">window</span>.screen.width,</span><br><span class="line">  fixedW = <span class="number">640</span>,</span><br><span class="line">  scale  = width / fixedW,</span><br><span class="line">  meta   = <span class="built_in">document</span>.createElement(<span class="string">'meta'</span>),</span><br><span class="line">  mateAttr= &#123;</span><br><span class="line">    <span class="string">'name'</span>: <span class="string">'viewport'</span>,</span><br><span class="line">    <span class="string">'content'</span>: <span class="string">'width='</span> + fixedW + <span class="string">',initial-scale='</span> + scale + <span class="string">',minimum-scale='</span> + scale +<span class="string">',maximum-scale='</span> scale + <span class="string">',user-scalable=no'</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> metaAttr) &#123;</span><br><span class="line">  meta[key] = metaAttr[key]</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.head.appendChild(meta)</span><br></pre></td></tr></table></figure><ol start="3"><li>Rem做宽度自适应,窗口为设备宽度<br><code>根据屏幕的分辨率,动态设置html的文字大小，达到等比缩放的功能</code></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">win</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> docEle  = win.document.documentElement;</span><br><span class="line">  <span class="keyword">var</span> timer   = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">var</span> resizeEvt = <span class="string">'orientationchange'</span> <span class="keyword">in</span> <span class="built_in">window</span> ? <span class="string">'orientationchange'</span> : <span class="string">'resize'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeRem</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="comment">//获取矩形的宽高上下左右距离</span></span><br><span class="line">  <span class="keyword">var</span> width = docEle.getBoundingClientRect().width;</span><br><span class="line"><span class="keyword">if</span>(width &gt; <span class="number">640</span>)&#123;  <span class="comment">//兼容ipad就去掉</span></span><br><span class="line">width = <span class="number">640</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fontS = width/<span class="number">10</span>;  <span class="comment">//把设备宽度10等分</span></span><br><span class="line">  docEle.style.fontSize = fontS+<span class="string">'px'</span>; <span class="comment">//设置根元素字体大小</span></span><br><span class="line">&#125;</span><br><span class="line">  changeRem();</span><br><span class="line">  <span class="comment">//页面尺寸发生改变的时候在执行changeRem</span></span><br><span class="line">  win.addEventListener(resizeEvt,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    clearTimeout(timer);</span><br><span class="line">    timer = setTimeout(changeRem,<span class="number">30</span>);</span><br><span class="line">  &#125;,<span class="literal">false</span>);</span><br><span class="line">  <span class="comment">//页面加载的时候,如果是调用缓存的话再执行changeRem</span></span><br><span class="line">  win.addEventListener(<span class="string">'pageshow'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(e.persisted)&#123; <span class="comment">//缓存</span></span><br><span class="line">      clearTimeout(timer);</span><br><span class="line">      timer = setTimeout(changeRem,<span class="number">30</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,<span class="literal">false</span>);</span><br><span class="line">&#125;)(<span class="built_in">window</span>)</span><br></pre></td></tr></table></figure><ol start="4"><li>像素比适配(rem做宽度,viewport缩放)<br><code>物理像素(设备像素)--手机屏幕分辨率   独立像素(css像素)--屏幕宽度</code><br><code>像素比  =物理像素 / 独立像素 window.devicePixelRatio</code></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dpr = <span class="built_in">window</span>.devicePixelRatio;</span><br><span class="line"><span class="keyword">var</span> scale = <span class="number">1</span>;</span><br><span class="line"><span class="comment">//检测设备，设置相应的像素比</span></span><br><span class="line"><span class="keyword">if</span> (!dpr &amp;&amp; !scale) &#123;</span><br><span class="line">  <span class="keyword">var</span> isAndroid = <span class="built_in">window</span>.navigator.appVersion.match(<span class="regexp">/android/gi</span>);</span><br><span class="line">  <span class="keyword">var</span> isIPhone = <span class="built_in">window</span>.navigator.appVersion.match(<span class="regexp">/iphone/gi</span>);</span><br><span class="line">  <span class="keyword">var</span> devicePixelRatio = <span class="built_in">window</span>.devicePixelRatio;</span><br><span class="line">  <span class="keyword">if</span> (isIPhone) &#123; <span class="comment">// iOS下，对于2和3的屏，用2倍的方案，其余的用1倍方案</span></span><br><span class="line">    <span class="keyword">if</span> (devicePixelRatio &gt;= <span class="number">3</span> &amp;&amp; (!dpr || dpr &gt;= <span class="number">3</span>)) &#123;</span><br><span class="line">      dpr = <span class="number">3</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (devicePixelRatio &gt;= <span class="number">2</span> &amp;&amp; (!dpr || dpr &gt;= <span class="number">2</span>))&#123;</span><br><span class="line">      dpr = <span class="number">2</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      dpr = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123; <span class="comment">// 其他设备下，仍旧使用1倍的方案</span></span><br><span class="line">    dpr = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  scale = <span class="number">1</span> / dpr; <span class="comment">//meta 缩放比例</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//动态生成meta</span></span><br><span class="line"><span class="keyword">var</span> metaEl = <span class="built_in">document</span>.createElement(<span class="string">'meta'</span>);</span><br><span class="line">metaEl.setAttribute(<span class="string">'name'</span>, <span class="string">'viewport'</span>);</span><br><span class="line">metaEl.setAttribute(<span class="string">'content'</span>, <span class="string">'initial-scale='</span> + scale + <span class="string">', maximum-scale='</span> + scale + <span class="string">', minimum-scale='</span> + scale + <span class="string">', user-scalable=no'</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">document</span>.documentElement.firstElementChild) &#123;</span><br><span class="line">  <span class="built_in">document</span>.documentElement.firstElementChild.appendChild(metaEl);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> wrap = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">  wrap.appendChild(metaEl);</span><br><span class="line">  <span class="built_in">document</span>.write(wrap.innerHTML);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li>直接给<code>html</code>设置<code>font-size:13.33333vw</code> 需要给body设置初始字体大小</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  body&#123; font-size:12px &#125;</span></span><br><span class="line"><span class="comment">// 直接使用rem不需要js计算, 只需要在750设计图上得到的尺寸px直接除以100就可以得到rem的值</span></span><br><span class="line"><span class="comment">// 假设1rem=50px  则 100vw = 7.5rem = 375px 可以得出 1rem = 13.33333vw</span></span><br><span class="line"><span class="comment">// 例如  在设计图中元素宽高为  50px  则可以直接写成  0.5rem</span></span><br></pre></td></tr></table></figure><h4 id="移动端横竖屏切换"><a href="#移动端横竖屏切换" class="headerlink" title="移动端横竖屏切换"></a>移动端横竖屏切换</h4><ul><li><code>window.orientation</code> 竖屏为0 横屏为90或-90</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">set_html_fontsize</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> h = <span class="built_in">Math</span>.max(<span class="built_in">document</span>.documentElement.clientHeight, <span class="built_in">window</span>.innerHeight || <span class="number">0</span>);</span><br><span class="line">  <span class="keyword">var</span> w = <span class="built_in">Math</span>.max(<span class="built_in">document</span>.documentElement.clientWidth, <span class="built_in">window</span>.innerWidth || <span class="number">0</span>);</span><br><span class="line">  <span class="keyword">var</span> width = w &gt; h ? h : w;</span><br><span class="line">  width = w &gt; <span class="number">720</span> ? <span class="number">720</span> : w</span><br><span class="line">  <span class="built_in">document</span>.getElementsByTagName(<span class="string">"html"</span>)[<span class="number">0</span>].style.cssText = <span class="string">'font-size: '</span> + ~~(width*<span class="number">100000</span>/<span class="number">36</span>)/<span class="number">10000</span>+<span class="string">"px;"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 监听横竖屏切换</span></span><br><span class="line"><span class="built_in">window</span>.orientationchange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  set_html_fontsize()</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">window</span>.onresize = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  set_html_fontsize()</span><br><span class="line">&#125;;</span><br><span class="line">set_html_fontsize();</span><br></pre></td></tr></table></figure><h4 id="媒体查询"><a href="#媒体查询" class="headerlink" title="媒体查询"></a>媒体查询</h4><ul><li><p><code>max-device-width</code>和<code>max-width</code>的区别</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 1、max-device-width是设备整个显示区域的宽度，例如，真实的设备屏幕宽度。</span></span><br><span class="line"><span class="comment">2、max-width是目标显示区域的宽度，例如，浏览器宽度。</span></span><br><span class="line"><span class="comment">3、如果使用max-device-width，那么在PC浏览器上浏览网页时，缩小或放大浏览器时是不执行CSS的，因为“PC设备”没有变化。但如果使用max-width，缩小或放大浏览器时是执行CSS的，因为“显示区域”即浏览器大小发生了变化。</span></span><br><span class="line"><span class="comment">4、如果使用max-device-width，那么当手机由竖变横时，CSS是不执行的，因为“手机宽度”并没有变化。如果使用max-width，那么当手机由竖变横时，CSS是执行的，因为“显示区域”发生了变化。</span></span><br><span class="line"><span class="comment">5、通常，面向“移动设备”用户使用max-device-width；面向“PC设备”用户使用max-width。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li><li><p><code>link标签</code><br><code>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;screen and (max-width:767px)&quot;  href=&quot;phone.css&quot; /&gt;</code><br>如果屏幕宽度小于767像素(<code>max-width:767px</code>)就加载<code>phone.css</code>文件<br><code>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;screen and (min-width:768px)&quot;   href=&quot;phone.css&quot; /&gt;</code><br>如果屏幕宽度大于768像素(<code>min-width:768px</code>)就加载<code>pc.css</code>文件</p></li><li><code>css @media</code></li><li>媒体查询(不同屏幕大小使用不同的样式)<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.d1</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>:<span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">background</span>:<span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*  超小屏幕 手机&gt; */</span></span><br><span class="line">@<span class="keyword">media</span> (max-width:<span class="number">768px</span>)&#123;</span><br><span class="line">  <span class="selector-class">.d1</span>&#123; <span class="attribute">background</span>:skyblue; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*  小屏幕 平板 */</span></span><br><span class="line">@<span class="keyword">media</span> (min-width:<span class="number">768px</span>) and (max-width:<span class="number">992px</span>)&#123;</span><br><span class="line">  <span class="selector-class">.d1</span>&#123; <span class="attribute">background</span>:<span class="number">#999</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*  中等屏幕 桌面显示器 */</span></span><br><span class="line">@<span class="keyword">media</span> (min-width:<span class="number">992px</span>) and (max-width:<span class="number">1200px</span>)&#123;</span><br><span class="line">  <span class="selector-class">.d1</span>&#123; <span class="attribute">background</span>:blue; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*  大屏幕 大桌面显示器&gt; */</span></span><br><span class="line">@<span class="keyword">media</span> (min-width:<span class="number">1200px</span>)&#123;</span><br><span class="line">  <span class="selector-class">.d1</span>&#123; <span class="attribute">background</span>:pink; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> 移动端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 移动端 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>angular1学习</title>
      <link href="/angular1/"/>
      <url>/angular1/</url>
      
        <content type="html"><![CDATA[<p><code>Angularjs</code>是一个<code>javascript</code>框架,通过<code>&lt;script&gt;</code>标签添加到<code>HTML</code>页面,通过指令扩展了<code>HTML</code>,通过表达式绑定数据到<code>HTML</code>主要是通过<code>ng-directives</code>扩展.<code>AngularJS</code>使得开发现代的单页面应用程序(<code>Single Page Applications</code>)更加容易.<code>Angular</code>更适合复杂的大型项目,通常是企业级的项目.<br><a id="more"></a></p><h4 id="定义模块作用域"><a href="#定义模块作用域" class="headerlink" title="定义模块作用域"></a>定义模块作用域</h4><p>通过<code>angular.module(&#39;app&#39;,[])</code>来声明模块 ,第一个参数应用<code>app</code>的名称,第二个参数依赖集合(即使没有也要传入空数组),返回的是一个<code>angular</code>模块对象</p><h4 id="控制器controller"><a href="#控制器controller" class="headerlink" title="控制器controller"></a>控制器controller</h4><p><code>angular</code>变量是要定义在一个作用域里面的,<code>controller</code>是专门用来定义作用域的,一个控制器就是一个作用域定义<code>angular.module(&#39;app&#39;,[]).controller(&#39;&#39;,fn)</code><br>在<code>angular</code>中有一项技术叫参数注入,想使用什么东西就注入什么东西,在<code>angular</code>中的局部作用域叫做<code>$scope</code>,要使用作用域就要将它注入进来,<code>$rootScope</code>是全局作用域<br><img src="/image/ng1/control.png" alt="控制器"></p><h4 id="定义变量"><a href="#定义变量" class="headerlink" title="定义变量"></a>定义变量</h4><p>初始化变量<code>ng-init=&#39;age=1;class=3&#39;</code>,多个变量之间用<code>;</code>隔开<br><code>ng-model</code>:双向绑定,定义变量名.把元素值(输入框的值)绑定到应用程序变量中<br><code>ng-bind</code>:绑定变量名,获取该变量的数据,避免渲染页面看到插值符号,把应用程序数据(变量)绑定到HTML视图<br><code>ng-app</code>:定义<code>angularJS</code>的使用范围定义一个<code>AngularJS</code>应用程序<br><code>ng-cloak</code>:解决闪烁<br><img src="/image/ng1/变量.png" alt="变量"></p><h4 id="显示隐藏"><a href="#显示隐藏" class="headerlink" title="显示隐藏"></a>显示隐藏</h4><p><code>ng-show</code> 用来显示元素<br><code>ng-hide</code> 用来隐藏元素<br><code>angular中ng-show是通过class设置的,通过!important来提高权重</code></p><h4 id="插值表达式"><a href="#插值表达式" class="headerlink" title="插值表达式"></a>插值表达式</h4><p><code>angular,vue</code>插值表达式的语法是一样的,在插值符号中使用,不同之处,<code>angular</code>可以在<code>ng-bind</code>指令中使用插值表达式<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;表达式&#125;&#125; 将数据绑定HTML与ng-<span class="keyword">bind</span>相同</span><br><span class="line">ng-model是用于表单元素的，支持双向绑定。对普通元素无效；</span><br><span class="line">ng-<span class="keyword">bind</span>用于普通元素，不能用于表单元素，应用程序单向地渲染数据到元素；</span><br><span class="line">当ng-<span class="keyword">bind</span>和&#123;&#123;&#125;&#125;同时使用时，ng-<span class="keyword">bind</span>绑定的值覆盖该元素的内容。</span><br></pre></td></tr></table></figure></p><p><img src="/image/ng1/表达式.png" alt="表达式"></p><h4 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h4><p><code>angular</code>中在定义过滤器语法 <code>变量|过滤器:参数1:参数2</code><br><img src="/image/ng1/filter1.png" alt="表达式"><br><code>json</code> 将对象转化成json对象  <code>date</code> 将日期格式化<br><code>currency</code> 将数字转换成一个价格的形式  <code>currency</code>:货币标识符: 保留位数<br><img src="/image/ng1/filter2.png" alt="表达式"><br>字符串过滤器 <code>uppercase</code>转大写  <code>lowercase</code>转小写 <code>limitTo</code>截取<br><img src="/image/ng1/filter3.png" alt="表达式"><br><code>number</code> 将数字转换成科学计数法 千分符,参数表示保留几位小数,会根据最后一位四舍五入<br><code>orderBy</code> 对集合进行排序 参数1表示排序的字段,是数字按大小排序,是字符串按字符串编码排序.参数2表示升序或倒序,默认是<code>false</code>正序,<code>true</code>倒序.</p><h4 id="自定义过滤器"><a href="#自定义过滤器" class="headerlink" title="自定义过滤器"></a>自定义过滤器</h4><p>通过<code>filter()</code>方法自定义过滤器,多个过滤器用<code>|</code>隔开,前一个过滤器的输出作为后一个过滤器的输入,第一个参数表示过滤器的名称,第二个参数表示工厂函数<br><img src="/image/ng1/filter4.png" alt="表达式"><br>验证指令<br>1.必填项验证 <code>repuired    --&gt; ng-required=&#39;true&#39;</code><br>2.最大长度与最小长度 <code>maxlength--&gt;ng-maxlength minlength--&gt;ng-minlength</code><br>3.正则验证 <code>pattern</code>–&gt;<code>ng-pattern=&#39;/\d{11}/&#39;</code><br>当为表单元素<code>form</code>添加<code>name</code>属性的时候,会根据name在作用域中创建变量子表单元素的<code>name</code>属性会添加到<code>form</code>元素对应的变量内,每个变量都有四个属性<br><code>$dirty</code> 表示是否输入过  <code>true</code> 输入过<br><code>$pristine</code> 表示是否输入过 <code>true</code>  没有输入过<br><code>$invalid</code>  表示是否是不合法 <code>true</code>  不合法<br><code>$valid</code>   表示是否合法 <code>true</code> 合法<br><img src="/image/ng1/验证.png" alt="表达式"><br>表单相关指令<br><code>ng-disabled</code>  表单是否可以使用<br><code>ng-checked</code>  是否被选中<br><code>ng-readonly</code>  是否只读<br><code>ng-change</code>   事件 在内容发生改变时触发  依赖于ng-model指令<br><code>ng-submit</code>   表单提交事件  要绑定给form元素    由submit类型元素触发</p><h4 id="其他常用指令"><a href="#其他常用指令" class="headerlink" title="其他常用指令"></a>其他常用指令</h4><p><code>AngularJS</code>指令是扩展的<code>HTML</code>属性带有前缀<code>ng-***</code>,<code>AngularJS</code>通过指令来扩展<code>HTML</code><br><code>ng-href</code> 动态的渲染a标签的href属性值,避免在渲染a标签的时候,href不存在打开错误的页面,在没有添加ng-href之前是不会由a链接的特性的<br><code>ng-src</code> 动态创建src属性 提高用户体验 否则会请求一张错误的图片地址<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">注意:  ng-href与ng-src指令 都是一个指令,属性值是字符串,要使用插值符号&#123;&#123;&#125;&#125;</span><br></pre></td></tr></table></figure></p><p><code>ng-class</code> 指令 动态绑定类<br>值可以是字符串,变量,对象(属性值是一个布尔值<code>true</code>表示保留这个类，<code>flase</code>表示删除这个类)<br><img src="/image/ng1/ngclass.png" alt="表达式"><br><code>ng-style</code> 指令  动态创建样式<br>变量–&gt;变量的值是对象 属性名称是css样式名称 属性值是css样式值<br>对象–&gt;属性名称是css样式名称  属性值是css样式值<br><img src="/image/ng1/ngstyle.png" alt="表达式"><br><code>ng-if</code> 模板判断指令 值为true显示 值为false 隐藏<br><code>angular</code>中<code>ng-if</code>指令控制的元素显示位置是通过注释确定,当我们为一个元素添加一个<code>ng-if</code>指令的时候,会创建一个相应的注释<br><code>ng-switch</code> 多分支控制模板创建<br>根据<code>case</code>创建了一个<code>ng-switch-when</code>指令,根据<code>default</code>创建了一个<code>ng-switch-default</code>指令,<code>ng-switch</code>通过<code>on</code>属性来添加一个判断的条件<br><img src="/image/ng1/ngswitch.png" alt="表达式"><br><code>ng-repeat</code> 用来循环创建模板的 <code>ng-repeat=&#39;item in items&#39;</code><br>提供了6个临时变量<br><code>$index</code>: 索引值从0开始 <code>$first</code>: 是否是第一次循环  <code>$last</code>: 是否是最后一次循环<br><code>$middle</code>: 除了第一次和最后一次  <code>$odd</code>: 奇数次循环  <code>$even</code>: 偶数次循环后5个指令值都是布尔值<br><img src="/image/ng1/ngrepeat.png" alt="表达式"><br><code>ng-include</code> 异步加载模板指令,可以通过异步请求加载一个模板,他的值是js环境,可以使用变量,如果这个指令绑定给具有控制器的元素使用,此时作为控制器内的模板,该控制器中定义的数据可以在该模板中使用<br><img src="/image/ng1/nginclude.png" alt="表达式"><br><img src="/image/ng1/nginclude1.png" alt="表达式"><br><img src="/image/ng1/nginclude2.png" alt="表达式"></p><h4 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h4><p>第一步 在<code>html</code>中使用这个指令(指令名以-分隔 如<code>my-directive</code>)<br>第二步 在<code>js</code>中通过<code>directive</code>方法来定义自定义指令<br>第一个参数是指令名称 必须是驼峰命名<br>第二个参数是一个函数,指令工厂函数,没有参数,作用域是全局作用域返回值是描述指令的对象<br><code>template</code>: 自定义指令的模板内容 ,会渲染到自定义指令中<br><code>templateUrl</code>: 引入外部模板文件<br><code>replace</code>: 是否替换原来的容器元素(默认<code>false</code>)<br><img src="/image/ng1/mydirective.png" alt="表达式"><br>在angular中一共有四种自定义指令的形式     ECMA<br><code>E</code> 表示自定义标签元素类型(<code>Element</code>) 如<code>&lt;my-title&gt;&lt;/my-title&gt;</code>(默认)<br><code>C</code> 表示类类型(<code>Class</code>) 如<code>&lt;div class=&#39;ng-hide&#39;&gt;&lt;/div&gt;</code>(必须设置)<br><code>M</code> 表示注释类型(<code>comment</code>) 如<code>&lt;!-- directive:my-title  --&gt;</code>(必须设置)<br><code>A</code> 表示属性类型(<code>Attribute</code>) 如<code>&lt;div ng-if=&#39;isShow&#39;&gt;&lt;/div&gt;</code>(默认)<br>不是默认的必须用<code>restrict:&#39;CM&#39;</code>设置 ,四种类型都是大写的,可以组合使用<br><img src="/image/ng1/ECMA.png" alt="表达式"></p><h4 id="自定义指令的作用域"><a href="#自定义指令的作用域" class="headerlink" title="自定义指令的作用域"></a>自定义指令的作用域</h4><p>自定义指令的作用域是通过控制器来定义的,控制器不是定义在元素上,而是定义在返回的对象上叫controller作用域<br><code>$scope</code>  表示作用域<br><code>$elemnet</code>   表示获取的自定义指令容器元素的jqlite对象<br><code>$attrs</code>    自定义指令容器元素属性的服务,驼峰式命名法 属性名称映射关系对象<br><img src="/image/ng1/scope1.png" alt="表达式"><br><img src="/image/ng1/scope2.png" alt="表达式"><br><img src="/image/ng1/scope3.png" alt="表达式"><br>作用域关系<br>自定义指令的作用域是通过<code>scope</code>属性来约束的,可以通过这个属性来定义自定指令的作用域与父作用域的关系<br>对于一个自定义指令,他的内容有两种一种是在指令元素内的<br><img src="/image/ng1/scope4.png" alt="表达式"><br>另外一种是在指令外的,通过<code>template</code>或者<code>templateUrl</code>来设置的<br><img src="/image/ng1/scope5.png" alt="表达式"><br><code>scope</code> 有三个值  默认是<code>false</code><br><code>true</code>  子,父作用域是隔离的,两个作用域不会相互覆盖是独立的<br><code>false</code>  子,父作用域在同一个作用域,子作用域定义变量会覆盖父作用域的变量<br><code>{}</code>     子,父作用域是隔离的, 但子作用域的数据是父作用域的数据(模板使用)<br>这三个属性可以定义子作用域与父作用域的分离,子作用域是指自定义指令的作用域,父作用域是指外部控制器的作用域<br><code>scope:true或{}</code>是解决子作用域与父作用域分离的<br>自定义指令修饰符<br><code>@修饰符</code>是解决在作用域分离的时候,子作用域使用父作用域中数据的问题<br>第一步 在指令容器元素中绑定数据(插值语法)<br>第二步 在<code>scope</code>对象中定义该属性,属性值要使用<code>@</code>修饰符<br>属性名称是子作用域中使用的变量,属性值是绑定的自定义指令元素上的属性名称<br>这种绑定的作用域数据是单向的只能由父作用域传递给子作用域,此时父作用域域子作用域是独立的,子作用域中的数据会被父作用域覆盖<br><img src="/image/ng1/scope6.png" alt="表达式"><br><code>=修饰符</code> 是解决在作用域分离的时候,子作用域使用父作用域中数据的问题<br>第一步 在指令容器元素中绑定数据(不能插值语法)<br>第二步 在<code>scope</code>对象中定义该属性,属性值要使用<code>=</code>修饰符<br>属性名称是子作用域中使用的变量,属性值是绑定的自定义指令元素上的属性名称<br>这种绑定的作用域数据是双向绑定的,父作用域的修改会影响到子作用域,子作用域的修改会影响父作用域,此时父作用域域子作用域是独立的,子作用域中的数据会被父作用域覆盖</p><h4 id="link方法-指令的编译方法"><a href="#link方法-指令的编译方法" class="headerlink" title="link方法 指令的编译方法"></a>link方法 指令的编译方法</h4><p>到目前为止,指令只能使用一些数据,渲染模板,替换元素,如果需要指令具备一定的功能,我们需要将指令的实现的业务逻辑定义在<code>link</code>方法中.<br><img src="/image/ng1/link.png" alt="表达式"><br><img src="/image/ng1/link2.png" alt="表达式"></p><h4 id="complie-编译方法"><a href="#complie-编译方法" class="headerlink" title="complie 编译方法"></a>complie 编译方法</h4><p><code>link</code> 是编译的一个子过程  <code>compile</code> 是编译的全过程<br>属性值也是函数,函数的返回值就是<code>link</code>方法,<code>compile</code>是从指令获取到指令编译完成全部过程<br>有两个参数,第一个参数表示指令容器元素,第二个参数表示<code>attrs</code>属性对象,作用域是指令描述对象,返回值是<code>link</code>方法<br><img src="/image/ng1/compile.png" alt="表达式"></p>]]></content>
      
      
      <categories>
          
          <category> angular </category>
          
      </categories>
      
      
        <tags>
            
            <tag> angular </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>学会使用svn</title>
      <link href="/%E5%AD%A6%E4%BC%9A%E4%BD%BF%E7%94%A8svn/"/>
      <url>/%E5%AD%A6%E4%BC%9A%E4%BD%BF%E7%94%A8svn/</url>
      
        <content type="html"><![CDATA[<p><code>svn</code>全称<code>Subversion</code>，是代码版本管理软件，管理着随时间改变的数据。这些数据放置在一个中央资料档案库 (<code>repository</code>) 中。 这个档案库很像一个普通的文件服务器, 不过它会记住每一次文件的变动。这样你就可以把档案恢复到旧的版本, 或是浏览文件的变动历史。 许多人会把版本控制系統想像成某种 “时光机器”。<br><a id="more"></a></p><h2 id="SVN的作用"><a href="#SVN的作用" class="headerlink" title="SVN的作用"></a>SVN的作用</h2><ol><li>可以很好地协调一个团队共同开发同一个项目,多人开发同一个项目不会出现代码覆盖情况。</li><li>针对一个文件可以创建许多不同版本，并且可以随时查看不同版本的内容。</li><li>公司领导可以通过svn查看每个人的工作情况</li></ol><h2 id="SVN下载"><a href="#SVN下载" class="headerlink" title="SVN下载"></a>SVN下载</h2><p><a href="https://tortoisesvn.net/downloads.html" target="_blank" rel="noopener">下载地址</a></p><h2 id="SVN服务器端安装"><a href="#SVN服务器端安装" class="headerlink" title="SVN服务器端安装"></a>SVN服务器端安装</h2><p><code>注: 双击setup-subversion-1.6.5.msi然后一路next即可</code><br><img src="/image/svn/svn.png" alt="svn"></p><h2 id="SVN客户端安装"><a href="#SVN客户端安装" class="headerlink" title="SVN客户端安装"></a>SVN客户端安装</h2><p><code>注: 双击安装客户端软件(安装完毕重启电脑)：(根据自己操作系统位数64/32做选择安装)</code><br><img src="/image/svn/svn1.png" alt="svn1"><br><code>客户端安装完毕，鼠标右键有对应的标志(可能需要重启生效)，即代表安装成功</code><br><img src="/image/svn/svn2.png" alt="svn2"></p><h2 id="从SVN服务器检出代码"><a href="#从SVN服务器检出代码" class="headerlink" title="从SVN服务器检出代码"></a>从SVN服务器检出代码</h2><p><code>在工作目录点击右键,在右键菜单中选择 SVN Checkout</code><br><img src="/image/svn/svn3.png" alt="svn3"><br><code>点击“OK”按钮后，在弹出的对话框中输入用户名和密码，验证成功后，开始从远程服务器下载到本地工作目录中</code><br><img src="/image/svn/svn4.jpg" alt="svn4"><br><code>点击“确定”按钮后，即可获取完成，出现如下下载界面, 下载完成点击OK之后,服务器上所有内容都会下载到本地文件夹下</code><br><img src="/image/svn/svn5.jpg" alt="svn5"></p><h2 id="SVN图标集含义"><a href="#SVN图标集含义" class="headerlink" title="SVN图标集含义"></a>SVN图标集含义</h2><p><img src="/image/svn/svn6.png" alt="svn6"></p><h2 id="SVN更新文件"><a href="#SVN更新文件" class="headerlink" title="SVN更新文件"></a>SVN更新文件</h2><p><code>更新本地代码与SVN服务器上最新的版本一致，只要在需要更新的文件夹上点击右键或者在文件下空白处点击右键，选择”SVN Update” (获取指定版本中的内容，点击右键执行SVN菜单中的“Update to reversion“)，就可以了。</code><br><img src="/image/svn/svn7.png" alt="svn7"></p><h2 id="SVN提交更新-SVN-Commit"><a href="#SVN提交更新-SVN-Commit" class="headerlink" title="SVN提交更新(SVN Commit)"></a>SVN提交更新(SVN Commit)</h2><p><code>本地文件修改后，若是需要更新到服务器上，则需要提交（Commit）最新的更新。Commit的作用是将本地最新修改的文件同步到SVN服务端，供其他人来参考或者使用，当然使用之前，要先Update一下，来确保是最新的,在修改文件上击右键，出现菜单，选择“SVN Commit…”，如下：</code><br><img src="/image/svn/svn8.png" alt="svn8"><br><code>然后填写关于本次更新的日志（log message），这是必填项，否则commit会失败</code><br><img src="/image/svn/svn9.png" alt="svn9"><br><code>点击ok之后,若没有出现错误则表明刚刚的修改已成功提交</code></p><h2 id="SVN新增文件"><a href="#SVN新增文件" class="headerlink" title="SVN新增文件"></a>SVN新增文件</h2><p><code>鼠标选中本地增加的新文件,右键选择“Tortoise SVN”的“Add”项，如下图所示,然后在文件夹右键选择“SVN Commit…”，将新文件上传到svn服务器上（若只上传单个文件，只需点中单个文件上传即可）。</code><br><code>新目录内部的文件不能直接提交，必须是先提交目录本身，然后该目录的文件才可以单独进行(add/)commit提交动作。</code><br><img src="/image/svn/svn10.png" alt="svn10"></p><h2 id="SVN删除文件"><a href="#SVN删除文件" class="headerlink" title="SVN删除文件"></a>SVN删除文件</h2><p><code>删除文件后，在当前文件夹右键选择“SVN Commit…”项进行提交，提交方式同增加文件的提交方式，提交之后才能将新文件从配置库中删除。</code></p><h2 id="撤销更改（Revert）"><a href="#撤销更改（Revert）" class="headerlink" title="撤销更改（Revert）"></a>撤销更改（Revert）</h2><p><code>在修改了某些文件后（文件未上传到配置库），需要返回到修改前的状态，则选中文件夹右键选择“Tortoise SVN”的“Revert...”项进行撤销，本地硬盘上的文件将恢复到修改前的内容，修改的内容将被删除。</code></p><h2 id="查看历史文件（Show-log）"><a href="#查看历史文件（Show-log）" class="headerlink" title="查看历史文件（Show log）"></a>查看历史文件（Show log）</h2><p><code>Show log顾名思义是显示日志的作用，主要是显示该文件或者该目录被执行的操作，是被谁修改了，以及修改的时间和日期。鼠标选中文件夹右键选择“Tortoise SVN”的“Show log”项，系统弹出此路径下的所有文件版本信息。</code></p><h2 id="SVN版本回退"><a href="#SVN版本回退" class="headerlink" title="SVN版本回退"></a>SVN版本回退</h2><p><code>空白区域右键---&gt;TotoriseSVN----&gt;更新至版本(Update to revision)----&gt;根据日志回退---&gt;显示日志选择要回退到的版本</code><br><img src="/image/svn/svn11.png" alt="svn11"></p><h2 id="SVN冲突解决"><a href="#SVN冲突解决" class="headerlink" title="SVN冲突解决"></a>SVN冲突解决</h2><blockquote><p><code>SVN冲突: 多个程序员对同一文件,同一处代码进行修改,在他们提交的时候会产生冲突</code></p></blockquote><p><img src="/image/svn/svn12.png" alt="svn12"><br><code>如上图，test_conflict.py文件发生了冲突，并且多出了几个文件，其中.mine是我本地修改了还没提交的版本，.r2文件是上一个版本的文件，.r1是上上个版本的文件。</code><br><img src="/image/svn/svn13.png" alt="svn13"><br><code>Edit confilicts：</code>修改冲突，可以对冲突的行进行内容选择，后面我们详细说。<br><code>Mark as resolved：</code>直接标记为已解决，这样会删除.mine、.r1、.r2这些文件，但这只是标记，如果你直接标记为解决，实际上文件还是冲突的，只是状态修复了。<br><code>Resolve conflict using &#39;theirs&#39;：</code>使用他的提交覆盖我的修改来解决冲突。如果你的修改不需要提交，你可以方便的选择这个。<br><code>Resolve conflict using &#39;mine&#39;：</code>使用我本地的版本覆盖他的来解决冲突。如果对方提交的代码没什么用，你可以直接使用这个来解决。</p><h2 id="SVN-锁机制"><a href="#SVN-锁机制" class="headerlink" title="SVN 锁机制"></a>SVN 锁机制</h2><ol><li><code>对于某些重要的文件不允许别人修改可以对其添加锁，防止其他人修改提交</code></li><li><code>可以避免多人同时修改某文件产生冲突，添加锁后提交，修改完成提交并解锁</code></li></ol><ul><li>添加锁 <code>svn lock xxx.html</code> 或 选中文件后在右键菜单中选择<code>Get lock</code></li><li>解锁 <code>svn unlock xxx.html</code> 或 选中文件后在右键菜单中选择<code>Realease lock</code></li></ul><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://blog.csdn.net/dily3825002/article/details/6717076" target="_blank" rel="noopener">SVN使用方法，简易图解</a><br><a href="https://blog.csdn.net/clementad/article/details/45199703" target="_blank" rel="noopener">图解SVN</a><br><a href="https://tortoisesvn.net/docs/nightly/TortoiseSVN_zh_CN/" target="_blank" rel="noopener">SVN简易文档</a></p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> svn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hexo其他常用配置</title>
      <link href="/hexo%E5%85%B6%E4%BB%96%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/"/>
      <url>/hexo%E5%85%B6%E4%BB%96%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>在<code>hexo</code>的使用过程当中,经常会发现或者需要修改一些<code>hexo</code>的配置,以便于更好的使用<code>hexo</code>快速发布文章或者增加更多好用实用的功能,特记录一些在使用过程中添加或修改的功能.<br><a id="more"></a></p><h2 id="实现实时预览编辑"><a href="#实现实时预览编辑" class="headerlink" title="实现实时预览编辑"></a>实现实时预览编辑</h2><blockquote><p>在最近用<code>hexo</code>写文章的时候,每次修改之后,在<code>hexo s</code>启动后,不能在浏览器实时刷新过来,每次都得手动刷新进行预览,很不方便.  在网上找到如下方案</p></blockquote><ul><li><p>首先在项目目录下安装 <code>hexo-browsersync</code> 插件</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install </span>hexo-<span class="keyword">browsersync </span>--save</span><br></pre></td></tr></table></figure></li><li><p>然后运行 <code>hexo s</code>  看到如下内容说明启动成功</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 其中 3001 端口是 browsersync 的配置页面, 4000 端口就是我们的调试页面了.</span></span><br><span class="line">$ hexo s</span><br><span class="line">[BS] Access URLs:</span><br><span class="line"> --------------------------------------</span><br><span class="line">          UI: http:<span class="comment">//localhost:3001</span></span><br><span class="line"> --------------------------------------</span><br><span class="line"> UI External: http:<span class="comment">//192.168.191.1:3001</span></span><br><span class="line"> --------------------------------------</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http:<span class="comment">//localhost:4000/. Press Ctrl+C to stop.</span></span><br></pre></td></tr></table></figure></li></ul><p><code>注: 但是不知道是不是版本的问题一直没有成功, 后来打开http://localhost:3001,在页面中引入了一个js文件,重启之后便成功了</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">修改的文件路径  \hexo\themes\next\layout\_scripts\vendors.swig</span><br><span class="line">在头部添加js  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'http://localhost:3000/browser-sync/browser-sync-client.js?v=2.24.6'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="避免hexo中对的解析"><a href="#避免hexo中对的解析" class="headerlink" title="避免hexo中对的解析"></a>避免hexo中对 {{}} 的解析</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// hexo中使用&#123;&#123;&#125;&#125;或&#123;％％&#125;包装的内容默认会被解析  在代码块中不会被解析</span></span><br><span class="line"><span class="comment">// 只要将单行代码中的大括号包含在raw标签中就可以避免被解析</span></span><br><span class="line"><span class="comment">// 语法`&#123;% raw %&#125;&#123;&#123;&#125;&#125;&#123;% endraw %&#125;`实现模型中的数据渲染</span></span><br><span class="line"><span class="comment">// 渲染后 ---&gt; 语法&#123;&#123;&#125;&#125;实现模型中的数据渲染</span></span><br></pre></td></tr></table></figure><h2 id="hexo的next主题分页设置"><a href="#hexo的next主题分页设置" class="headerlink" title="hexo的next主题分页设置"></a>hexo的next主题分页设置</h2><ul><li>显示更多的分页数量<br><code>打开 ./themes/next/layout/_partials/pagination.swig 文件，修改 mid_size 字段：</code></li></ul><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">if</span></span> page.prev or page.next %&#125;</span><span class="xml"></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"pagination"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    </span><span class="template-variable">&#123;&#123;</span></span><br><span class="line"><span class="template-variable">      paginator(&#123;</span></span><br><span class="line"><span class="template-variable">        prev_text: '&lt;i class="fa fa-angle-left"&gt;&lt;/i&gt;',</span></span><br><span class="line"><span class="template-variable">        next_text: '&lt;i class="fa fa-angle-right"&gt;&lt;/i&gt;',</span></span><br><span class="line"><span class="template-variable">        mid_size: 10</span></span><br><span class="line"><span class="template-variable">      &#125;)</span></span><br><span class="line"><span class="template-variable">    &#125;&#125;</span><span class="xml"></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">endif</span></span> %&#125;</span><span class="xml"></span></span><br></pre></td></tr></table></figure><ul><li>每页显示文章数量</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">//</span>  <span class="string">根目录</span> <span class="string">_config.yml</span> <span class="string">文件下</span></span><br><span class="line"><span class="comment"># 默认分页显示的数量</span></span><br><span class="line"><span class="attr">index_generator:</span></span><br><span class="line"><span class="attr">  path:</span> <span class="string">''</span></span><br><span class="line"><span class="attr">  per_page:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">  order_by:</span> <span class="bullet">-date</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>js正则表达式</title>
      <link href="/js%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
      <url>/js%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p><code>js正则表达式，js中的象形文字</code>。正则表达式（英语：Regular Expression，在代码中常简写为regex、regexp或RE）使用单个字符串来描述、匹配一系列符合某个句法规则的字符串搜索模式，可用于文本搜索和文本替换。<br><a id="more"></a></p><h2 id="JS-正则表达式-RegExp对象"><a href="#JS-正则表达式-RegExp对象" class="headerlink" title="JS 正则表达式(RegExp对象)"></a>JS 正则表达式(RegExp对象)</h2><ul><li>正则定义  正则只是针对字符串 默认区分大小写<br>1.<code>patt=new Regexp(&#39;规则&#39;,&#39;g&#39;)</code>  规则必须是字符串 如有\或特殊字符需用\转义<br>2.<code>patt=/\d{6-10}/g</code>  简写 不要写引号  需要传参的时候必须用<code>new</code></li><li><p>正则的五个方法<br>1.<code>/\d+/.test(字符串)</code>  检索字符串中的指定值 返回<code>true</code>或<code>false</code><br>2.<code>/\d+/.exec(字符串)</code>  检索字符串中的指定值 返回值是被找到的值 没有返回<code>null</code><br>3.<code>str.replace(/\d+/,&quot;hello&quot;或callback)</code> 查找并替换  匹配成功返回替换后的字符串<br>4.<code>str.match(/\d+/)</code>  正则去匹配字符串  匹配成功返回匹配成功的数组 不成功返回<code>null</code><br>5.<code>str.search(/\d+/)</code> 正则去匹配字符串  匹配成功返回位置,失败返回-1<br><code>正则默认都是匹配成功就结束了,不会继续匹配,只匹配一次 要全部匹配则要加修饰符g(全局匹配)，</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// new RegExp("e") 声明正则</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"The best things is sleeping"</span></span><br><span class="line"><span class="keyword">var</span> patt1 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"e"</span>)</span><br><span class="line"><span class="built_in">console</span>.log(patt1.test(str))  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(patt1.exec(str))  <span class="comment">//["e", index: 2, input: "The best...", groups: undefined]</span></span><br><span class="line"><span class="keyword">var</span> patt = <span class="regexp">/e/</span></span><br><span class="line"><span class="built_in">console</span>.log(str.search(patt)) <span class="comment">//2</span></span><br><span class="line"><span class="built_in">console</span>.log(str.match(patt))  <span class="comment">//["e", index: 2, input: "The best...", groups: undefined]</span></span><br><span class="line"><span class="built_in">console</span>.log(str.replace(patt, <span class="string">'E'</span>)) <span class="comment">//ThE best things is sleeping</span></span><br><span class="line"><span class="comment">// 使用 /\d&#123;2&#125;/ 声明正则</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'我日西安水电费贱贵大傻逼阿达'</span></span><br><span class="line"><span class="keyword">var</span> patt = <span class="regexp">/我日|贱|大傻逼/g</span></span><br><span class="line"><span class="keyword">var</span> result  = str.replace(patt,<span class="function"><span class="keyword">function</span>(<span class="params">s</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> res = <span class="string">''</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;s.length;i++)&#123;</span><br><span class="line">      res += <span class="string">'*'</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">return</span> res</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(result) <span class="comment">//**西安水电费*贵***阿达</span></span><br><span class="line"><span class="comment">// 去掉前后空格</span></span><br><span class="line"><span class="keyword">var</span> re1  = <span class="regexp">/^\s+|\s$/g</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">' as da '</span>.replace(re1, <span class="string">''</span>)) <span class="comment">//as da</span></span><br></pre></td></tr></table></figure></li><li><p>修饰符<br><code>i  执行对大小写不敏感的匹配</code><br><code>g  执行全局匹配</code><br><code>m  执行多行匹配 放在/后面  /e/gi</code></p></li><li><p>表达式<br><code>[abc]</code>  用于查找方括号之间的任意一个(字符类) <code>/[abc]/</code><br><code>[^abc]</code> 用于查找任何不在方括号之间的字符 <code>/[^abc]/</code><br><code>|</code> 或 <code>a|b</code><br><code>()</code> 匹配子项或分组操作<br><code>[a-z]</code> 范围  [a-z]<br><code>[\b]</code> 退格直接量<br><code>注: 匹配子项 把正则的整体叫做(母亲) 然后把左边第一个小括号里面的正则叫做第一个子项(第一个孩子) 第二个小括号就是 第二个子项str.replace(patt,function(母亲,第一个子项,第二个子项){}</code></p></li><li><p>元字符 转义字符<br><code>.</code>   查找除换行符之外任意字符<br><code>\w</code>  用于查找字符 字符包括<code>[A-Za-z0-9_]</code>     <code>\W</code> 非字符 <code>[^A-Za-z0-9_]</code><br><code>\d</code>  用于查找数字 <code>0-9</code>                    <code>\D</code> 非数字<br><code>\s</code>  用于查找空白(空格 <code>tab</code> 回车 换行)     <code>\S</code> 非空白<br><code>\b</code>  独立的部分(单词边界)(起始  结束 空格)   <code>\B</code> 非独立的部分(非单词边界)<br><code>\1或\2..</code>      重复的第一个子项,第二个子项</p></li><li>量词(频率匹配)  匹配不确定的次数  大括号<code>{}</code>  量词<br><code>+</code>     一次或多次<br><code>*</code>     任意次<br><code>?</code>     零次或一次<br><code>{n}</code>   必须是n次<br><code>{n,}</code> 至少n次<br><code>{n,m}</code> 最少n次,最多m次<br><code>$</code>    匹配以某字符结尾<br><code>^</code>   匹配以某字符开始</li><li><p>格式化字符串：<br>正则表达式中的每个<code>()</code>，都是一个子表达式,每个子表达式都会自动获得一个从<code>1</code>开始的编号替换时，可用<code>$n</code>，指代本次匹配中第<code>n</code>个子表达式的对应内容</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> date = <span class="string">'20190108180155'</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/(\d&#123;4&#125;)(\d&#123;2&#125;)(\d&#123;2&#125;)(\d&#123;2&#125;)(\d&#123;2&#125;)(\d&#123;2&#125;)/</span></span><br><span class="line">date.replace(reg, <span class="string">'$1年$2月$3日 $4:$5:$6'</span>) <span class="comment">// "2019年01月08日 18:01:55"</span></span><br><span class="line">date.replace(reg, <span class="string">'$1-$2-$3 $4:$5:$6'</span>) <span class="comment">// "2019-01-08 18:01:55"</span></span><br><span class="line"><span class="comment">// 隐藏手机号中间4位</span></span><br><span class="line"><span class="string">'18855558888'</span>.replace(<span class="regexp">/(\d&#123;3&#125;)\d*(\d&#123;4&#125;)/g</span>, <span class="string">'$1****$2'</span>) <span class="comment">// 188****8888</span></span><br></pre></td></tr></table></figure></li><li><p>捕获分组和后向引用<br>当一个模式的全部或者部分内容由一对括号分组时，它就对内容进行捕获并临时存储与内存中。可以通过后向引用重用捕获的内容。<br>\1或者$1 这里\1或$1引用的是第一个捕获的分组，而\2或$2引用的是第二个捕获的分组，以此类推。</p></li><li>\1 \2 \3……\9 \10  —匹配模式中的后向引用</li><li><p>$1 $2 $3……$9 $10  —替换模式中的组的引用</p></li><li><p>捕获分组和非捕获分组<br><code>() 表示捕获分组, ()会把每个分组里的匹配的值保存起来, 使用$n(n是一个数字, 表示第n个捕获组的内容)</code><br><code>(?:) 表示非捕获分组, 和捕获分组唯一的区别在于, 非捕获分组匹配的值不会保存起来</code></p></li><li><p>前向声明(前瞻)或反前向声明(负前瞻)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/(\w)\<span class="number">1</span>+<span class="regexp">/g;    /</span><span class="regexp">/(\w) 变成子项  \1和前面子项相同 +多个</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/exp1(?=exp2)  前向声明    查找exp2前面的exp1</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/exp1(?!exp2)  反前向声明  查找后面不是exp2的exp1</span></span><br><span class="line"><span class="regexp">var str = 'abasad';</span></span><br><span class="line"><span class="regexp">var re  = /</span>a(?=s)/g; <span class="comment">// 查找 s 前面的 a</span></span><br><span class="line"><span class="keyword">var</span> re1 = <span class="regexp">/a(?!s)/g</span>; <span class="comment">// 查找后面不是 s 的 a</span></span><br><span class="line"><span class="built_in">console</span>.log(str.replace(re,<span class="string">'*'</span>)); <span class="comment">//ab*sad  将 s 前面的 a 替换成 *</span></span><br><span class="line"><span class="built_in">console</span>.log(str.replace(re1,<span class="string">'*'</span>)); <span class="comment">//*bas*d 将 a 后面不是 s 的 a 替换成 *</span></span><br></pre></td></tr></table></figure></li><li><p>后顾或负后顾</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (?&lt;=exp2)exp1 查找exp2后面的exp1</span></span><br><span class="line"><span class="comment">// (?&lt;!exp2)exp1 查找前面不是exp2的exp1</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'abasad'</span>;</span><br><span class="line"><span class="keyword">var</span> re  = <span class="regexp">/(?&lt;=s)a/g</span>; <span class="comment">// 查找 s 后面的 a</span></span><br><span class="line"><span class="keyword">var</span> re1 = <span class="regexp">/(?&lt;!s)a/g</span>; <span class="comment">// 查找前面不是 s 的 a</span></span><br><span class="line"><span class="built_in">console</span>.log(str.replace(re,<span class="string">'*'</span>)); <span class="comment">// abas*d  将 s 后面的 a 替换成 *</span></span><br><span class="line"><span class="built_in">console</span>.log(str.replace(re1,<span class="string">'*'</span>)); <span class="comment">// *b*sad 将前面不是 s 的 a 替换成 *</span></span><br></pre></td></tr></table></figure></li><li><p>正则表达式 \1 \2 反向引用之类的问题</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// \0 \1 \2 都要和正则表达式集合()一起使用</span></span><br><span class="line"><span class="comment">// \1表示重复正则第一个圆括号内匹配到的内容</span></span><br><span class="line"><span class="comment">// \2表示重复正则第二个圆括号内匹配到的内容</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'abdcbcdadcabce'</span></span><br><span class="line"><span class="built_in">console</span>.log(str.split(<span class="string">''</span>).sort().join(<span class="string">''</span>).match(<span class="regexp">/([a-z])\1*/g</span>)) <span class="comment">// ["aaa", "bbb", "cccc", "ddd", "e"]</span></span><br><span class="line"><span class="keyword">var</span> RegExp1 = <span class="regexp">/^(123)(456)\1$/</span> <span class="comment">// 123456123</span></span><br><span class="line"><span class="keyword">var</span> RegExp1 = <span class="regexp">/^(123)(456)\2$/</span> <span class="comment">// 123456456</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul><li>使用正则<code>test()</code>第一次是<code>true</code>,第二次是<code>false</code><br><code>正则表达式 lastIndex 属性用于规定下次匹配的起始位置。RegExp.exec( ) 和 RegExp.test( ) 找到的，它们都以 lastIndex 属性所指的位置作为下次检索的起始点。lastIndex 属性是可读可写的， 需配合修饰符g使用</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s1 = <span class="string">"1R1MRLPRL"</span>;</span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/mrlp/ig</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg.test(s1)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex) <span class="comment">// 7</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.test(s1)) <span class="comment">// false</span></span><br><span class="line"><span class="comment">// 方法一 直接去掉 g</span></span><br><span class="line"><span class="keyword">var</span> s1 = <span class="string">"1R1MRLPRL"</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/mrlp/i</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.test(s1)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.test(s1)) <span class="comment">// true</span></span><br><span class="line"><span class="comment">// 方法二 当必须使用g时  将lastIndex重置为0</span></span><br><span class="line"><span class="keyword">var</span> s1 = <span class="string">"1R1MRLPRL"</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/mrlp/ig</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.test(s1)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex) <span class="comment">// 7</span></span><br><span class="line">reg.lastIndex = <span class="number">0</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.test(s1)) <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="贪婪匹配与惰性匹配"><a href="#贪婪匹配与惰性匹配" class="headerlink" title="贪婪匹配与惰性匹配"></a>贪婪匹配与惰性匹配</h2><ul><li><p><code>(.+) 贪婪匹配</code><br>贪婪匹配是先看整个字符串是否匹配，如果不匹配，它会去掉字符串的最后一个字符，并再次尝试。如果还不匹配，那么再去掉当前最后一个，直到发现匹配或不剩任何字符</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">'aaa&lt;div style="font-color:red;"&gt;123456&lt;/div&gt;bbb'</span></span><br><span class="line">str.match(<span class="regexp">/&lt;.+&gt;/</span>); <span class="comment">// &lt;div style="font-color:red;"&gt;123456&lt;/div&gt;</span></span><br><span class="line"><span class="keyword">var</span> str2 = <span class="string">'abcdabceba'</span></span><br><span class="line">str.match(<span class="regexp">/.+b/</span>) <span class="comment">// abcdabceb</span></span><br></pre></td></tr></table></figure></li><li><p><code>(.+?) 惰性匹配</code><br>惰性匹配是从左侧第一个字符开始向右匹配, 先看第一个字符是不是一个匹配, 如果不匹配就加入下一个字符再尝式匹配, 直到发现匹配</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">'aaa&lt;div style="font-color:red;"&gt;123456&lt;/div&gt;bbb'</span></span><br><span class="line">str.match(<span class="regexp">/&lt;.+?&gt;/</span>) <span class="comment">// &lt;div style="font-color:red;"&gt;</span></span><br><span class="line"><span class="keyword">var</span> str2 = <span class="string">'abcdabceba'</span></span><br><span class="line">str.match(<span class="regexp">/.+?b/</span>) <span class="comment">// ab</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 正则表达式 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>npm常用操作</title>
      <link href="/npm%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/"/>
      <url>/npm%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<p><code>npm</code> 是<code>Node.js</code>的包管理工具（<code>package manager</code>）,<code>npm</code> 由三个独立的部分组成: 网站(开发者查找包,设置参数以及管理<code>npm</code>的主要途径)  注册表(保存每个包（<code>package</code>）的信息)  命令行工具(通过命令行或终端运行。开发者通过 <code>CLI</code> 与 <code>npm</code> 打交道)。<br><a id="more"></a></p><h2 id="npm-install-安装包-或-npm-i-包名"><a href="#npm-install-安装包-或-npm-i-包名" class="headerlink" title="npm install 安装包 或 npm i 包名"></a>npm install 安装包 或 npm i 包名</h2><p><code>npm install jquery或 npm install jquery@2.2.4 安装指定版本</code></p><ul><li>本地项目包<br>npm i &lt;包&gt;<br>安装在当前项目目录（node_modules）下，根据模块访问规则，当前项目以及子项目可访问。一般用于安装项目独立使用的包。</li><li>全局包<br>npm i -g &lt;包&gt;<br>安装在 npm 指定的全局目录下，通过全局模块访问机制可以在全局范围内访问。一般用于安装工具性质的包。</li><li>一次性安装多个模块 <code>npm i gulp-pug gulp-debug gulp-sass</code><h2 id="npm-ls-查看已经安装的依赖包"><a href="#npm-ls-查看已经安装的依赖包" class="headerlink" title="npm ls 查看已经安装的依赖包"></a>npm ls 查看已经安装的依赖包</h2></li></ul><h2 id="npm-update-更新包"><a href="#npm-update-更新包" class="headerlink" title="npm update 更新包"></a>npm update 更新包</h2><p><code>注： jquery@2.2.4 执行 npm update之后,只会更新jquery@2.x.x以后的小版本，不会直接更新到3.x.x版本, 如需下载3.x版本重新安装需要的版本即可</code></p><ul><li>更新单个全局包 <code>npm update &lt;name&gt; -g</code></li><li>更新项目生产环境依赖包 <code>npm update &lt;name&gt; -save</code></li><li>更新项目开发环境依赖包 <code>npm update &lt;name&gt; -save-dev</code></li></ul><h2 id="更新依赖包"><a href="#更新依赖包" class="headerlink" title="更新依赖包"></a>更新依赖包</h2><ul><li>检测依赖包 <code>npm i npm-check-updates -g</code></li><li>查看哪些依赖包需要更新 <code>ncu</code></li><li>更新package.json文件中的依赖包为最新版本</li><li>安装最新的依赖包 <code>npm i</code></li><li><code>npm outdate</code> 查看安装包有没有版本更新</li></ul><h2 id="npm-run-查看-package-json中有哪些-npm-script命令"><a href="#npm-run-查看-package-json中有哪些-npm-script命令" class="headerlink" title="npm run 查看 package.json中有哪些 npm script命令"></a>npm run 查看 package.json中有哪些 npm script命令</h2><h2 id="npm-uninstall-卸载包"><a href="#npm-uninstall-卸载包" class="headerlink" title="npm uninstall 卸载包"></a>npm uninstall 卸载包</h2><h2 id="查看包信息"><a href="#查看包信息" class="headerlink" title="查看包信息"></a>查看包信息</h2><ul><li><p><code>npm view vue 或 npm v vue</code> 查看安装包所有信息</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm  v vue</span><br><span class="line">vue@<span class="number">2.6</span><span class="number">.14</span> | MIT | <span class="string">deps:</span> none | <span class="string">versions:</span> <span class="number">360</span></span><br><span class="line"><span class="string">beta:</span> <span class="number">3.2</span><span class="number">.0</span>-beta<span class="number">.8</span>  <span class="string">csp:</span> <span class="number">1.0</span><span class="number">.28</span>-csp     <span class="string">latest:</span> <span class="number">2.6</span><span class="number">.14</span>      <span class="string">next:</span> <span class="number">3.2</span><span class="number">.21</span></span><br></pre></td></tr></table></figure></li><li><p><code>npm v vue version</code> 查看包最新版本</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">npm</span>  <span class="selector-tag">v</span> <span class="selector-tag">vue</span> <span class="selector-tag">version</span></span><br><span class="line">2<span class="selector-class">.6</span><span class="selector-class">.14</span></span><br></pre></td></tr></table></figure></li><li><p><code>npm view &lt;packagename&gt; versions 或 npm view &lt;packagename&gt; versions --json</code> 查看指定包的所有版本</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">npm view rimraf versions</span><br><span class="line">[</span><br><span class="line">  '<span class="number">1.0</span><span class="number">.0</span>', '<span class="number">1.0</span><span class="number">.1</span>', '<span class="number">1.0</span><span class="number">.2</span>', '<span class="number">1.0</span><span class="number">.4</span>', '<span class="number">1.0</span><span class="number">.5</span>',</span><br><span class="line">  '<span class="number">1.0</span><span class="number">.6</span>', '<span class="number">1.0</span><span class="number">.7</span>', '<span class="number">1.0</span><span class="number">.8</span>', '<span class="number">1.0</span><span class="number">.9</span>', '<span class="number">2.0</span><span class="number">.0</span>',</span><br><span class="line">  '<span class="number">2.0</span><span class="number">.1</span>', '<span class="number">2.0</span><span class="number">.2</span>', '<span class="number">2.0</span><span class="number">.3</span>', '<span class="number">2.1</span><span class="number">.0</span>', '<span class="number">2.1</span><span class="number">.1</span>',</span><br><span class="line">  '<span class="number">2.1</span><span class="number">.2</span>', '<span class="number">2.1</span><span class="number">.3</span>', '<span class="number">2.1</span><span class="number">.4</span>', '<span class="number">2.2</span><span class="number">.0</span>', '<span class="number">2.2</span><span class="number">.1</span>',</span><br><span class="line">  '<span class="number">2.2</span><span class="number">.2</span>', '<span class="number">2.2</span><span class="number">.3</span>', '<span class="number">2.2</span><span class="number">.4</span>', '<span class="number">2.2</span><span class="number">.5</span>', '<span class="number">2.2</span><span class="number">.6</span>',</span><br><span class="line">  '<span class="number">2.2</span><span class="number">.8</span>', '<span class="number">2.3</span><span class="number">.0</span>', '<span class="number">2.3</span><span class="number">.1</span>', '<span class="number">2.3</span><span class="number">.2</span>', '<span class="number">2.3</span><span class="number">.3</span>',</span><br><span class="line">  '<span class="number">2.3</span><span class="number">.4</span>', '<span class="number">2.4</span><span class="number">.0</span>', '<span class="number">2.4</span><span class="number">.1</span>', '<span class="number">2.4</span><span class="number">.2</span>', '<span class="number">2.4</span><span class="number">.3</span>',</span><br><span class="line">  '<span class="number">2.4</span><span class="number">.4</span>', '<span class="number">2.4</span><span class="number">.5</span>', '<span class="number">2.5</span><span class="number">.0</span>', '<span class="number">2.5</span><span class="number">.1</span>', '<span class="number">2.5</span><span class="number">.2</span>',</span><br><span class="line">  '<span class="number">2.5</span><span class="number">.3</span>', '<span class="number">2.5</span><span class="number">.4</span>', '<span class="number">2.6</span><span class="number">.0</span>', '<span class="number">2.6</span><span class="number">.1</span>', '<span class="number">2.6</span><span class="number">.2</span>',</span><br><span class="line">  '<span class="number">2.6</span><span class="number">.3</span>', '<span class="number">2.7</span><span class="number">.0</span>', '<span class="number">2.7</span><span class="number">.1</span>', '<span class="number">3.0</span><span class="number">.0</span>', '<span class="number">3.0</span><span class="number">.1</span>',</span><br><span class="line">  '<span class="number">3.0</span><span class="number">.2</span>'</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li></ul><h2 id="npm-root-g-查看全局包的安装路径"><a href="#npm-root-g-查看全局包的安装路径" class="headerlink" title="npm root -g 查看全局包的安装路径"></a>npm root -g 查看全局包的安装路径</h2><h2 id="npm-init-快速创建-package-json-需要手动选择配置"><a href="#npm-init-快速创建-package-json-需要手动选择配置" class="headerlink" title="npm init 快速创建 package.json 需要手动选择配置"></a>npm init 快速创建 package.json 需要手动选择配置</h2><h2 id="npm-init-–yes或-y-直接跳过参数问答环节，快速生成package-json"><a href="#npm-init-–yes或-y-直接跳过参数问答环节，快速生成package-json" class="headerlink" title="npm init –yes或-y 直接跳过参数问答环节，快速生成package.json"></a>npm init –yes或-y 直接跳过参数问答环节，快速生成package.json</h2><h2 id="npm-config-list-查看npm基础配置"><a href="#npm-config-list-查看npm基础配置" class="headerlink" title="npm config list 查看npm基础配置"></a>npm config list 查看npm基础配置</h2><h2 id="npm-config-get-prefix-获取全局安装的默认目录"><a href="#npm-config-get-prefix-获取全局安装的默认目录" class="headerlink" title="npm config get prefix 获取全局安装的默认目录"></a>npm config get prefix 获取全局安装的默认目录</h2><h2 id="npm-config-set-key-value-设置npm镜像和node-sass"><a href="#npm-config-set-key-value-设置npm镜像和node-sass" class="headerlink" title="npm config set key value 设置npm镜像和node-sass"></a>npm config set key value 设置npm镜像和node-sass</h2><ul><li>npm config set registry <a href="https://registry.npm.taobao.org" target="_blank" rel="noopener">https://registry.npm.taobao.org</a></li><li>npm config set SASS_BINARY_SITE <a href="https://npm.taobao.org/mirrors/node-sass/" target="_blank" rel="noopener">https://npm.taobao.org/mirrors/node-sass/</a></li></ul><h2 id="npm-i-g与-npm-i-S-或-npm-i-D-区别"><a href="#npm-i-g与-npm-i-S-或-npm-i-D-区别" class="headerlink" title="npm i -g与 npm i -S 或 npm i -D 区别"></a>npm i -g与 npm i -S 或 npm i -D 区别</h2><ul><li><code>npm i xxx -g</code> 全局安装</li><li><code>npm i xxx -S</code> 是 <code>npm i xxx --save</code>的简写 安装的插件会在<code>package.json</code>文件中写入到<code>dependencies</code>对象里面去,<code>dependencies</code>需要发布到生产环境.(生产依赖/项目依赖包) 开发时使用，上线还需要</li><li><code>npm i xxx -D</code> 是 <code>npm i xxx --save-dev</code>的简写 安装的插件会在<code>package.json</code>文件中写入到<code>devDependencies</code>对象里面去,<code>devDependencies</code>里面的插件只用于开发环境不用于生产环境.(开发依赖) 开发时需要，线上不需要</li></ul><h2 id="发布自己的模块包"><a href="#发布自己的模块包" class="headerlink" title="发布自己的模块包"></a>发布自己的模块包</h2><ul><li><p>package.json文件 项目（模块、包）说明配置文件，该文件描述了当前包的信息，只有拥有package.json文件的项目才可以被发布<br><code>自动创建package.json npm init / npm init --yes</code></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">package.json</span><br><span class="line">name：包名称，必填</span><br><span class="line">version：版本，必填，格式 x<span class="selector-class">.x</span><span class="selector-class">.x</span></span><br><span class="line">main : 包的入口主文件</span><br><span class="line">scripts：自定义脚本，通过 npm run 脚本名称即可执行脚本定义的命令</span><br><span class="line">dependencies：生产环境下需要使用的依赖包</span><br><span class="line">devDependencies：只做开发环境（测试环境）下使用的依赖包</span><br></pre></td></tr></table></figure></li><li><p>注册 npmjs.org 账号</p></li><li>登录 npm adduser / npm login 要切回到npm源</li><li>发布 npm publish  <a href="https://www.npmjs.cn" target="_blank" rel="noopener">查看发布的npm包</a></li></ul><h2 id="快速删除node-modules依赖或文件"><a href="#快速删除node-modules依赖或文件" class="headerlink" title="快速删除node_modules依赖或文件"></a>快速删除node_modules依赖或文件</h2><ul><li>npm i rimraf -g  全局安装 rimraf  模块</li><li>rimraf node_modules</li></ul><h2 id="cmd中-set-可以查看所有的环境变量"><a href="#cmd中-set-可以查看所有的环境变量" class="headerlink" title="cmd中  set  可以查看所有的环境变量"></a>cmd中  set  可以查看所有的环境变量</h2><h2 id="npm-script-串行-或者-并行"><a href="#npm-script-串行-或者-并行" class="headerlink" title="npm script 串行 或者 并行"></a>npm script 串行 或者 并行</h2><p><code>{&quot;test&quot;: &quot;npm run lint:js &amp;&amp; npm run lint:css &amp;&amp; npm run lint:json &amp;&amp; npm run lint:markdown&quot;}</code><br>这也是让多个 npm script 串行的典型用例，实现方式也比较简单，只需要用 &amp;&amp; 符号把多条 npm script 按先后顺序串起来即可<br><code>{&quot;test&quot;: &quot;npm run lint:js &amp; npm run lint:css &amp; npm run lint:json &amp; npm run lint:markdown &amp; wait&quot;}</code><br>需要把子命令的运行从串行改成并行，实现方式更简单，把连接多条命令的 &amp;&amp; 符号替换成 &amp; 即可。<br><code>{&quot;test&quot;: &quot;npm-run-all lint:js lint:css lint:json lint:markdown&quot;} 或 {&quot;test&quot;: &quot;npm-run-all lint:*&quot;}</code><br>我们可以使用 npm-run-all 实现更轻量和简洁的多命令运行。需要安装 <code>npm i npm-run-all -D</code></p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> npm </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JSON数据格式</title>
      <link href="/JSON%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F/"/>
      <url>/JSON%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p><code>json</code> 英文全称 JavaScript Object Notation,<code>json</code> 是存储和传输数据的格式用于服务器端向网页传递数据,<code>json</code>格式仅仅是一个文本,文本可以被任何编程语言读取及作为数据格式传递.<br><a id="more"></a></p><h2 id="JSON语法规则"><a href="#JSON语法规则" class="headerlink" title="JSON语法规则"></a>JSON语法规则</h2><ul><li>映射用冒号(‘:’)   <code>&quot;firstName&quot;: &quot;John&quot;</code></li><li>并列数据之间由逗号(‘,’)分隔  <code>&quot;firstName&quot;: &quot;John&quot;,&quot;lastName&quot;: &quot;Doe&quot;</code></li><li>映射的集合(对象)用大括号  <code>{&quot;firstName&quot;: &quot;John&quot;,&quot;lastName&quot;: &quot;Doe&quot;}</code></li><li>并列数据集合(数组)用方括号(‘[]’) <code>&quot;employees&quot;:[{&quot;firstName&quot;:&quot;John&quot;, &quot;lastName&quot;:&quot;Doe&quot;}]</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=&#123;<span class="string">"employees"</span>:[</span><br><span class="line">    &#123;<span class="string">"firstName"</span>:<span class="string">"John"</span>, <span class="string">"lastName"</span>:<span class="string">"Doe"</span>&#125;,</span><br><span class="line">    &#123;<span class="string">"firstName"</span>:<span class="string">"Anna"</span>, <span class="string">"lastName"</span>:<span class="string">"Smith"</span>&#125;,</span><br><span class="line">    &#123;<span class="string">"firstName"</span>:<span class="string">"Peter"</span>, <span class="string">"lastName"</span>:<span class="string">"Jones"</span>&#125;</span><br><span class="line">]&#125;</span><br></pre></td></tr></table></figure><p><code>注: 并列的数据之间要用逗号隔开,最后一个”名/值”之后不能加逗号,英文,中文要用双引号括起来 不能使用单引号,也不能没有</code></p><h2 id="JSON的优点"><a href="#JSON的优点" class="headerlink" title="JSON的优点"></a>JSON的优点</h2><ul><li>数据格式比较简单，易于读写，格式都是压缩的，占用带宽小</li><li>支持多种语言，包括<code>C,C#,C++,JAVA,Javascript，Perl，python，PHP</code>等服务器端的语言，便于服务器端的解析</li><li>传输速度特别快</li></ul><h2 id="常见的四种数据格式"><a href="#常见的四种数据格式" class="headerlink" title="常见的四种数据格式"></a>常见的四种数据格式</h2><ul><li><code>XML</code>      标准的通用标记语言</li><li><code>JSON</code>     存储和传输数据的格式</li><li><code>Serialize</code>   将变量序列化，返回有变量类型和结构的字符串</li><li><code>Array()</code>   基本数据类型 不能用于数据的传输和交替</li><li><code>JSON</code>和<code>Serialize</code>的区别</li></ul><blockquote><p><code>相同点</code></p></blockquote><ul><li>都是把其他数据类型转换成一个可以传输的字符串</li><li>都是结构性数据</li><li>资源类型都不可以转换为<code>JSON</code>或<code>Serialize</code></li></ul><blockquote><p><code>不同点</code></p></blockquote><ul><li><code>Serialize</code> 序列化后的数据格式 保存数据原有类型</li><li><code>JSON</code> 数据格式比<code>Serialize</code>序列化之后的数据更简单</li></ul><blockquote><p><code>适用场景</code></p></blockquote><ul><li><code>JSON</code> 适合数据量大，不要求保留原有数据类型下使用</li><li><code>Serialize</code> 适合存储带有加密方式的数据，防止数据被中途截取</li></ul><p><img src="/image/other/json1.png" alt="json"></p><h2 id="在PHP中常用的JSON函数"><a href="#在PHP中常用的JSON函数" class="headerlink" title="在PHP中常用的JSON函数"></a>在PHP中常用的JSON函数</h2><ul><li><code>Json_encode()</code>  将数组，对象转换成<code>JSON</code>格式 (对象只能转换公有属性),只能接收<code>utf8</code>编码格式,其他格式则返回<code>false</code>或<code>null</code></li><li><code>Json_decode()</code>  将<code>JSON</code>字符串转换成对象</li><li><code>Json_decode($obj,true)</code>   将<code>JSON</code>字符串转换成数组</li></ul><p><img src="/image/other/json2.png" alt="json"></p><h2 id="在JS中常用的JSON函数"><a href="#在JS中常用的JSON函数" class="headerlink" title="在JS中常用的JSON函数"></a>在JS中常用的JSON函数</h2><ul><li><code>$.getJSON()</code>  获得<code>JSON</code>数据</li><li><code>eval()</code> 解析<code>json</code>格式字符串为<code>json</code>对象  不安全<br><code>eval()</code> 函数的参数是一个字符串，作用是直接执行其中的<code>JavaScript</code>代码。在低版本的浏览器不得不使用这种方式<code>eval()</code> 的参数，在字符串两旁加了括号，这是必须的，否则会报错。使其变成表达式</li><li><code>JSON.parse()</code>  解析<code>json</code>格式字符串为<code>json</code>对象 (IE8以下不兼容)(对象)<br>可以有第二个参数，是一个函数。此函数有两个参数：name 和 value，分别代表名称和值</li><li><code>JSON.stringify()</code>   将对象(<code>json</code>对象或数组)转换成<code>json</code>字符串<br>可以有三个参数 第三个表示格式化输出<code>JSON.stringify(myObject,null,4)</code></li></ul><p><img src="/image/other/json3.png" alt="json"><br><img src="/image/other/json4.png" alt="json"></p>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> json </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hexo Next代码块复制</title>
      <link href="/hexo%E4%BB%A3%E7%A0%81%E5%9D%97%E5%A4%8D%E5%88%B6/"/>
      <url>/hexo%E4%BB%A3%E7%A0%81%E5%9D%97%E5%A4%8D%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<p>在<code>NexT</code>主题的v6.3版本里已经加入了代码复制这个功能，所以如果你刚开始使用NexT，直接升级主题，并在主题配置文件中打开代码复制的开关就好了,如果版本低于6.3你可以参考以下方式自行添加.<br><a id="more"></a></p><h4 id="下载clipboard-min-js"><a href="#下载clipboard-min-js" class="headerlink" title="下载clipboard.min.js"></a>下载clipboard.min.js</h4><p>下载地址 <a href="https://raw.githubusercontent.com/zenorocha/clipboard.js/master/dist/clipboard.min.js" target="_blank" rel="noopener">clipboard.min.js</a>保存文件到如下目录 <code>.\themes\next\source\js\src</code></p><h4 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h4><p>在 <code>.\themes\next\source\js\src</code> 目录下新建 <code>clipboard-use.js</code>,文件内容如下:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*页面载入完成后，创建复制按钮*/</span></span><br><span class="line">!<span class="function"><span class="keyword">function</span> (<span class="params">e, t, a</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/* code */</span></span><br><span class="line">  <span class="keyword">var</span> initCopyCode = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> copyHtml = <span class="string">''</span>;</span><br><span class="line">    copyHtml += <span class="string">'&lt;button class="btn-copy" data-clipboard-snippet=""&gt;'</span>;</span><br><span class="line">    copyHtml += <span class="string">'  &lt;i class="fa fa-globe"&gt;&lt;/i&gt;&lt;span&gt;copy&lt;/span&gt;'</span>;</span><br><span class="line">    copyHtml += <span class="string">'&lt;/button&gt;'</span>;</span><br><span class="line">    $(<span class="string">".highlight"</span>).wrap($(<span class="string">'&lt;div class="highlight-wrap"&gt;&lt;/div&gt;'</span>));</span><br><span class="line">    $(<span class="string">'.highlight-wrap'</span>).prepend(copyHtml);</span><br><span class="line">    <span class="keyword">var</span> clipboard = <span class="keyword">new</span> ClipboardJS(<span class="string">'.btn-copy'</span>, &#123;</span><br><span class="line">        target: <span class="function"><span class="keyword">function</span>(<span class="params">trigger</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> trigger.nextElementSibling;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 成功提示</span></span><br><span class="line">    clipboard.on(<span class="string">'success'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">      toastPlug(<span class="string">'复制成功!'</span>, <span class="number">2000</span>)</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  initCopyCode();</span><br><span class="line">&#125;(<span class="built_in">window</span>, <span class="built_in">document</span>);</span><br></pre></td></tr></table></figure><h4 id="设置复制按钮样式"><a href="#设置复制按钮样式" class="headerlink" title="设置复制按钮样式"></a>设置复制按钮样式</h4><p>在 <code>.\themes\next\source\css\_custom\custom.styl</code>样式文件中添加下面代码：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*代码块复制按钮*/</span></span><br><span class="line"><span class="selector-class">.highlight-wrap</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.btn-copy</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#eee</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(#fcfcfc,#eee);</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#d5d5d5</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">-webkit-user-select</span>: none;</span><br><span class="line">    <span class="attribute">-moz-user-select</span>: none;</span><br><span class="line">    <span class="attribute">-ms-user-select</span>: none;</span><br><span class="line">    <span class="attribute">user-select</span>: none;</span><br><span class="line">    <span class="attribute">-webkit-appearance</span>: none;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">outline</span>: none;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">-webkit-transition</span>: opacity .<span class="number">5s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">-o-transition</span>: opacity .<span class="number">5s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">transition</span>: opacity .<span class="number">5s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">2px</span> <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">7px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">7px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.btn-copy</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.highlight-wrap</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.btn-copy</span>&#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="引入文件"><a href="#引入文件" class="headerlink" title="引入文件"></a>引入文件</h4><p>在 <code>.\themes\next\layout\_layout.swig</code>文件中，添加引用（注：在 swig 末尾或 body 结束标签（）之前添加）：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 代码块复制功能 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/js/src/clipboard.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/js/src/clipboard-use.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><code>注: 一开始找的添加复制按钮代码,有一点小bug,如果代码块部分内容超出有横向滑动,复制按钮copy就会跟着移动,而不能固定在右上角,此时只需要将复制按钮和highlight部分外层包裹一个元素设置position:relative即可</code></p><h4 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h4><p><a href="https://reuixiy.github.io/technology/computer/computer-aided-art/2017/06/09/hexo-next-optimization.html" target="_blank" rel="noopener">打造个性超赞博客 Hexo+NexT+GitHub Pages 的超深度优化</a><br><a href="https://easyhexo.sm9.top/Easy-Hexo" target="_blank" rel="noopener">轻松入门 Hexo</a><br><a href="https://qiming.info/Hexo%E5%8D%9A%E5%AE%A2%E4%B8%AD%E5%8A%A0%E5%85%A5%E4%BB%A3%E7%A0%81%E5%9D%97%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD/" target="_blank" rel="noopener">Hexo博客中加入代码块复制功能</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>前端开发常见问题</title>
      <link href="/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
      <url>/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>在前端日常开发中,经常会遇到各种各样的兼容性问题,或者各种各样的奇葩问题,无论是<code>css</code>,<code>html</code>还是<code>js</code>都会有一些小的问题所在,特记录下平常可能遇到的问题和一些解决方法.<br><a id="more"></a></p><h2 id="p标签解析问题"><a href="#p标签解析问题" class="headerlink" title="p标签解析问题"></a>p标签解析问题</h2><p><img src="/image/other/p.png" alt="p"></p><h2 id="当一个元素指定多个-class-时，class-的优先级与指定顺序无关，而是和-class-的定义顺序有关。后声明的优先级高。"><a href="#当一个元素指定多个-class-时，class-的优先级与指定顺序无关，而是和-class-的定义顺序有关。后声明的优先级高。" class="headerlink" title="当一个元素指定多个 class 时，class 的优先级与指定顺序无关，而是和 class 的定义顺序有关。后声明的优先级高。"></a>当一个元素指定多个 class 时，class 的优先级与指定顺序无关，而是和 class 的定义顺序有关。后声明的优先级高。</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">.red &#123; <span class="attr">color</span>: red &#125;</span><br><span class="line">.blue &#123; <span class="attr">color</span>: blue &#125;</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br><span class="line"><span class="regexp">&lt;div class="red blue"&gt;这是什么颜色&lt;/</span>div&gt;  <span class="comment">// blue</span></span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"blue red"</span>&gt;这是什么颜色&lt;<span class="regexp">/div&gt;  /</span><span class="regexp">/ blue</span></span><br></pre></td></tr></table></figure><h2 id="隐藏元素的方法异同"><a href="#隐藏元素的方法异同" class="headerlink" title="隐藏元素的方法异同"></a>隐藏元素的方法异同</h2><ol><li>Display：non    e；隐藏盒子，并且不占位置</li><li>Overflow：hidden；隐藏超出部分</li><li>Visibility：hidden；隐藏盒子，占位置</li><li>Opacity：0；隐藏盒子，占位置</li><li>Position-left/top：-999em；隐藏盒子，测试不占位置</li></ol><h2 id="BFC-Block-formatting-context-块级格式化上下文"><a href="#BFC-Block-formatting-context-块级格式化上下文" class="headerlink" title="BFC(Block formatting context) 块级格式化上下文"></a>BFC(Block formatting context) 块级格式化上下文</h2><ul><li><p>哪些元素或属性会生成BFC</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. 根元素   <span class="selector-tag">html</span></span><br><span class="line">2. <span class="selector-tag">float</span>属性不为<span class="selector-tag">none</span> 浮动框</span><br><span class="line">3. <span class="selector-tag">position</span>为<span class="selector-tag">absolute</span>或<span class="selector-tag">fixed</span></span><br><span class="line">4. <span class="selector-tag">display</span>为<span class="selector-tag">inline-block</span>, <span class="selector-tag">table-cell</span>, <span class="selector-tag">table-caption</span>, <span class="selector-tag">flex</span>, <span class="selector-tag">inline-flex</span> 非块框的块容器</span><br><span class="line">5. <span class="selector-tag">overflow</span>不为<span class="selector-tag">visible</span>的块框</span><br></pre></td></tr></table></figure></li><li><p>BFC 作用</p></li></ul><ol><li>解决清除浮动问题 BFC包含浮动元素,BFC会根据子元素的情况自动适应高度</li><li>解决margin 合并问题</li><li>BFC可以阻止元素被浮动元素覆盖(文字环绕)</li></ol><h2 id="屏蔽右键菜单"><a href="#屏蔽右键菜单" class="headerlink" title="屏蔽右键菜单"></a>屏蔽右键菜单</h2><ul><li><code>&lt;body oncontextmenu=&quot;return false&quot; ondragstart=&quot;return false&quot; onselectstart=&quot;return false&quot;&gt;&lt;/body&gt;</code></li></ul><h2 id="常用正则整理"><a href="#常用正则整理" class="headerlink" title="常用正则整理"></a>常用正则整理</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = &#123;</span><br><span class="line">  chinese : <span class="regexp">/^[\u4e00-\u9fa5]&#123;1,6&#125;$/g</span>,</span><br><span class="line">  trim    : <span class="regexp">/^\s+|\s$/g</span>,</span><br><span class="line">  email   : <span class="regexp">/\w+@[a-z0-9]+(\.[a-z]+)&#123;1,3&#125;/g</span>,</span><br><span class="line">  url: <span class="regexp">/[a-zA-Z]+:\/\/[^\s]*/g</span>,</span><br><span class="line">  qq      : <span class="regexp">/[1-9][0-9]&#123;4,9&#125;/g</span>,</span><br><span class="line">  postcode: <span class="regexp">/[1-9]\d&#123;5&#125;/g</span>,</span><br><span class="line">  card    : <span class="regexp">/[1-9]\d&#123;14&#125;|[1-9]\d&#123;17&#125;|[1-9]\d&#123;16&#125;x/g</span>,</span><br><span class="line">  tel     : <span class="regexp">/^1[3456789]\d&#123;9&#125;$/g</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="cacl使用问题"><a href="#cacl使用问题" class="headerlink" title="cacl使用问题"></a>cacl使用问题</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">在使用calc(<span class="number">100%</span> - <span class="number">20px</span> + <span class="number">5px</span>*<span class="number">2</span>))</span><br><span class="line"><span class="selector-class">.elm</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: calc(expression);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 使用“+”、“-”、“*” 和 “/”四则运算；</span></span><br><span class="line"><span class="comment">//可以使用百分比、px、em、rem等单位；</span></span><br><span class="line">可以混合使用各种单位进行计算；</span><br><span class="line">表达式中有“+”和“-”时，其前后必须要有空格，如<span class="string">"widht: calc(12%+5em)"</span>这种没有空格的写法是错误的；</span><br><span class="line">表达式中有“*”和“/”时，其前后可以没有空格，但建议留有空格。</span><br></pre></td></tr></table></figure><h2 id="a标签点击事件与href中代码执行顺序问题"><a href="#a标签点击事件与href中代码执行顺序问题" class="headerlink" title="a标签点击事件与href中代码执行顺序问题"></a>a标签点击事件与href中代码执行顺序问题</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul onclick=<span class="string">"javascript:console.log('ul-click')"</span>&gt;</span><br><span class="line">  &lt;li onclick=<span class="string">"javascript:console.log('li-click')"</span>&gt;</span><br><span class="line">    &lt;a id=<span class="string">"test"</span> href=<span class="string">"javascript:console.log('a-href')"</span>&gt;a点击事件&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>li&gt;</span><br><span class="line">&lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">test.onclick = function()&#123; console.log('a-click') &#125;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/a-click   li-click    ul-click   a-href</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/先执行a标签的onclick事件,然后冒泡执行父级的click事件，在执行自身的href里的js代码</span></span><br></pre></td></tr></table></figure><ul><li><code>some()</code>  不会对空数组进行检测，不会改变原始数组。对于空数组上的任何条件，此方法返回false。</li><li><code>every()</code> 不会对空数组进行检测，不会改变原始数组。对于空数组上的任何条件，此方法返回true。</li><li><code>switch case</code> 的条件判断是全等于即===</li><li><code>test.toFixed(2)</code> 返回值类型的是字符串 test必须是数字类型 不能是字符串</li><li><code>ios不支持2018-09-09这类时间格式</code></li><li><code>字体颜色渐变 ios 存在标签兼容问题  android正常</code></li><li><code>移动端 border-radius 小于6像素 设置正园时  变形问题  采用transform:scale(0.5)进行缩放  缩放会占位  采用margin负值调整即可</code></li><li><p><code>禁用的input框在ios和android下表现不一致</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:disabled</span>, <span class="selector-tag">input</span><span class="selector-attr">[disabled]</span>&#123;</span><br><span class="line">  background-color : #fff;   //修改默认灰色样式</span><br><span class="line">  <span class="selector-tag">color</span>: <span class="selector-id">#666</span>;</span><br><span class="line">  -webkit-text-fill-color:#666; //字体颜色安卓与IOS适配</span><br><span class="line">  -webkit-opacity:1;   // 不透明级别安卓与IOS适配</span><br><span class="line">  opacity:1; // ios默认的不透明级别为0.3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>URL 全称是 Uniform Resource Locator ，中文译名为“统一资源定位符”，用于完整地描述 Internet 上某一处资源的地址。一般称之为 URL 地址，或者 Web 地址，俗称“网址”</code></p></li><li><p><code>URI 全称是 Uniform Resource Identifier ，中文译名为“统一资源标识符”，用来唯一地标识一个资源。而URL是一种具体的URI，我们可以简单地 URI和URL 看作同一个东西</code></p></li><li><p><code>var val = tel.replace(/[^\d]/g, &#39;&#39;)  //只能输入数字</code></p></li><li><code>scrollTop在有些机型获取不是整数的问题  数值为小数</code></li><li><code>解决CSS position:fixed 抖动问题, fixed元素设置 -webkit-transform: translateZ(0);</code></li><li><code>QQ  分享问题   不是QQ好友  分享有问题</code></li><li><p>页面上的图片没有找到 使用类似404图片</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">nofind</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">var</span> img=event.srcElement;</span></span><br><span class="line"><span class="actionscript">  img.src=<span class="string">"images/logoError.png"</span>;</span></span><br><span class="line"><span class="actionscript">  img.onerror = <span class="literal">null</span>; <span class="comment">// 控制不要一直跳动</span></span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/logo.png"</span> <span class="attr">onerror</span>=<span class="string">"nofind()"</span> /&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>美化表单元素</p><ol><li><p>禁用select默认箭头，::-ms-expand修改表单控件下拉箭头，设置隐藏并使用背景图片来修饰<br><code>select::-ms-expand { display:none; }</code></p></li><li><p>禁用radio和checkbox默认样式，::-ms-check修改表单复选框或单选框默认图标，设置隐藏并使用背景图片来修饰<br><code>input[type=radio]::-ms-check,input[type=checkbox]::-ms-check { display:none; }</code></p></li><li><p>禁用pc端表单输入框默认清除按钮，::-ms-clear修改清除按钮，设置隐藏并使用背景图片来修饰<br><code>input[type=text]::-ms-clear,input[type=tel]::-ms-clear,input[type=number]::-ms-clear { display:none; }</code></p></li></ol></li><li><p>内容多左对齐, 内容少居中对齐</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="comment">/* 利用 inline-block 重新创造一个新的盒模型环境 */</span></span></span><br><span class="line"><span class="css">  <span class="selector-tag">div</span>&#123; <span class="attribute">background</span>: red;<span class="attribute">text-align</span>: center; &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">p</span>&#123; <span class="attribute">display</span>:inline-block;<span class="attribute">text-align</span>: left; &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>内容多左对齐, 内容少居中对齐内容多左对齐, 内容少居中对齐内容多左对齐, 内容少居中对齐内容多左对齐, 内容少对齐内容多左对齐, 内容少对齐内容多左对齐, 内容少对齐内容多左对齐, 内容少居中对齐内容多左对齐, 内容少居中对齐内容多左对齐, 内容少居中对齐<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>实现多行文本上下居中</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="comment">/* 方法一 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.method1</span>&#123;</span></span><br><span class="line"><span class="undefined">      height: 100px;</span></span><br><span class="line"><span class="undefined">      width: 200px;</span></span><br><span class="line"><span class="undefined">      font-size: 12px;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#000</span>;</span></span><br><span class="line"><span class="undefined">      line-height: 100px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.method1</span> <span class="selector-tag">span</span>&#123;</span></span><br><span class="line"><span class="undefined">      display: inline-block;</span></span><br><span class="line"><span class="undefined">      line-height: normal;</span></span><br><span class="line"><span class="undefined">      vertical-align: middle;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="comment">/* 方法二 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.method2</span>&#123;</span></span><br><span class="line"><span class="undefined">      height: 100px;</span></span><br><span class="line"><span class="undefined">      width: 200px;</span></span><br><span class="line"><span class="undefined">      font-size: 12px;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#000</span>;</span></span><br><span class="line"><span class="undefined">      vertical-align: middle;</span></span><br><span class="line"><span class="undefined">      display: table-cell;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 方法一 利用 inline-block 重新创造一个新的盒模型环境 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"method1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>多行文本居中多行文本居中多行文本居中多行文本居中多多行<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 方法二  采用 display: table-cell --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"method2"</span>&gt;</span></span><br><span class="line">    多行文本居中多行文本居中多行文本居中多行文本居中多多行</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="Doctype含义"><a href="#Doctype含义" class="headerlink" title="Doctype含义?"></a>Doctype含义?</h4><ul><li>Doctype声明不属于HTML标签,它是一条指令,告诉浏览器编写页面所使用的的HTML或XHTML版本</li></ul><h4 id="img的alt与title有何异同？-strong与em的异同？"><a href="#img的alt与title有何异同？-strong与em的异同？" class="headerlink" title="img的alt与title有何异同？ strong与em的异同？"></a>img的alt与title有何异同？ strong与em的异同？</h4><ul><li>alt(alt text):为图片加载失败无法正常显示时用来指定替换文字</li><li>title(tool tip):为元素提供额外说明信息,鼠标移入时显示</li><li>strong:粗体强调标签，强调，表示内容的重要性</li><li>em:斜体强调标签，更强烈强调，表示内容的强调点</li></ul><h4 id="行内元素和块级元素的具体区别是什么？行内元素的padding和margin可设置吗？"><a href="#行内元素和块级元素的具体区别是什么？行内元素的padding和margin可设置吗？" class="headerlink" title="行内元素和块级元素的具体区别是什么？行内元素的padding和margin可设置吗？"></a>行内元素和块级元素的具体区别是什么？行内元素的padding和margin可设置吗？</h4><ul><li>块级元素(block)特性：总是独占一行 宽度(width)、高度(height)、内边距(padding)和外边距(margin)都可控制</li><li>内联元素(inline)特性：和相邻的内联元素在同一行 宽度(width)、高度(height)、上下内边距和上下外边距无效</li><li>行内块(inline-block): 拥有内在尺寸，可设置高宽，但不会自动换行 如<code>&lt;input&gt; 、&lt;img&gt; 、&lt;button&gt; 、&lt;texterea&gt; 、&lt;label&gt;</code></li></ul><h4 id="rgba-和opacity的透明效果有什么不同？"><a href="#rgba-和opacity的透明效果有什么不同？" class="headerlink" title="rgba()和opacity的透明效果有什么不同？"></a>rgba()和opacity的透明效果有什么不同？</h4><ul><li>opacity作用于元素，以及元素内的所有内容的透明度，</li><li>rgba()只作用于元素的颜色或其背景色。（设置rgba透明的元素的子元素不会继承透明效果！）</li></ul><h4 id="display-none与visibility-hidden的区别是什么？"><a href="#display-none与visibility-hidden的区别是什么？" class="headerlink" title="display:none与visibility:hidden的区别是什么？"></a>display:none与visibility:hidden的区别是什么？</h4><ul><li>display: 隐藏对应的元素但不保留该元素原来的空间。</li><li>visibility: 隐藏对应的元素但保留元素原来的空间。</li></ul><h4 id="哪些css属性可以继承？"><a href="#哪些css属性可以继承？" class="headerlink" title="哪些css属性可以继承？"></a>哪些css属性可以继承？</h4><ul><li>可继承：font系列 line-height text-align text-indent color list-style cursor visibility等</li><li>不可继承：border padding margin width height</li></ul><h4 id="link和-import的区别是"><a href="#link和-import的区别是" class="headerlink" title="link和@import的区别是?"></a>link和@import的区别是?</h4><p>A. Link属于HTML标签,而@import是css提供的<br>B. 页面被加载时,link会同时被加载,而@import会等到引用的它的css文件加载完再加载<br>C. Import只在IE以上才能识别,而link是html标签,无兼容性问题<br>D. Link方式样式的权重高于@import</p><h4 id="什么是CSS-Hack"><a href="#什么是CSS-Hack" class="headerlink" title="什么是CSS Hack?"></a>什么是CSS Hack?</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1、条件Hack</span></span><br><span class="line">&lt;!--[<span class="keyword">if</span> IE]&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">    .test&#123;<span class="attr">color</span>:red;&#125;</span><br><span class="line">  &lt;<span class="regexp">/style&gt;</span></span><br><span class="line"><span class="regexp">&lt;![endif]--&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 2、属性Hack</span></span><br><span class="line"><span class="regexp">.test&#123;</span></span><br><span class="line"><span class="regexp">  color:#090\9;   /</span>* For IE8+ *<span class="regexp">/</span></span><br><span class="line"><span class="regexp">  *color:#f00;    /</span>* For IE7 and earlier *<span class="regexp">/</span></span><br><span class="line"><span class="regexp">  _color:#ff0;     /</span>* For IE6 and earlier *<span class="regexp">/</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 3、选择符Hack</span></span><br><span class="line"><span class="regexp">* html .test&#123;color:#090;&#125;     /</span>* For IE6 and earlier *<span class="regexp">/</span></span><br><span class="line"><span class="regexp">* + html .test&#123;color:#ff0;&#125;    /</span>* For IE7 *<span class="regexp">/</span></span><br></pre></td></tr></table></figure><h4 id="CSS样式的优先级"><a href="#CSS样式的优先级" class="headerlink" title="CSS样式的优先级?"></a>CSS样式的优先级?</h4><ul><li>!important &gt; 内联样式 &gt; id &gt; class &gt; 标签</li></ul><h4 id="重排与重绘"><a href="#重排与重绘" class="headerlink" title="重排与重绘"></a>重排与重绘</h4><ul><li>重绘: 当在页面上修改了一些不需要改变定位的样式的时候(比如background-color),浏览器只会将新的样式重新绘制给元素</li><li>重排: 当页面上的改变影响了文档内容,结构或者元素定位时,就会发生重排(或称重新布局).<br>重排通常由以下改变触发:<br>1)Dom操作(元素增,删,改或者改变元素顺序)<br>2)内容的改变,包括Form表单中文字的变化<br>3)计算或改变css属性<br>4)增加或删除一个样式表<br>5)浏览器窗口的操作(改变大小,滚动窗口)</li></ul><h4 id="常见浏览器的内核"><a href="#常见浏览器的内核" class="headerlink" title="常见浏览器的内核"></a>常见浏览器的内核</h4><ul><li>IE: trident内核</li><li>Firefox：gecko内核</li><li>Safari:webkit内核</li><li>Opera:以前是presto内核，Opera现已改用Google Chrome的Blink内核</li><li>Chrome:Blink(基于webkit，Google与Opera Software共同开发)</li></ul><h4 id="对前端工程师这个职位你是怎么样理解的"><a href="#对前端工程师这个职位你是怎么样理解的" class="headerlink" title="对前端工程师这个职位你是怎么样理解的?"></a>对前端工程师这个职位你是怎么样理解的?</h4><p>a. 前端是最贴近用户的程序员，前端的能力就是能让产品从 90分进化到 100 分，甚至更好<br>b. 参与项目，快速高质量完成实现效果图，精确到1px；<br>c. 与团队成员，UI设计，产品经理的沟通；<br>d. 做好的页面结构，页面重构和用户体验；<br>e. 处理hack，兼容、写出优美的代码格式；<br>f. 针对服务器的优化、拥抱最新前端技术。</p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 其他 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>this指向详解</title>
      <link href="/this%E6%8C%87%E5%90%91%E8%AF%A6%E8%A7%A3/"/>
      <url>/this%E6%8C%87%E5%90%91%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<p><code>this</code>的指向在函数定义的时候是确定不了的，只有函数执行的时候才能确定<code>this</code>到底指向谁，实际上<code>this</code>的最终指向的是那个调用它的对象（在非严格模式情况下）, 如果函数的调用者不存在，那么它的调用者将会是<code>全局window对象</code><br><a id="more"></a></p><h2 id="1-全局环境中"><a href="#1-全局环境中" class="headerlink" title="1. 全局环境中"></a>1. 全局环境中</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">// window</span></span><br></pre></td></tr></table></figure><h2 id="2-事件处理函数"><a href="#2-事件处理函数" class="headerlink" title="2. 事件处理函数"></a>2. 事件处理函数</h2><p><code>DOM 事件处理函数</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">box.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 事件处理函数中的this指向触发该事件的元素</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>);  <span class="comment">// div</span></span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">// 函数自调用 this指向window</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">// window</span></span><br><span class="line">  &#125;)()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><code>内联事件处理函数</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--当代码被内联处理函数调用时，它的this指向所在的DOM元素(即div) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span> <span class="attr">onclick</span>=<span class="string">"console.log(this)"</span>&gt;</span>div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--当代码被包括在函数内部或自执行函数内时指向window --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span> <span class="attr">onclick</span>=<span class="string">"(function()&#123; console.log( this ) &#125;) ()"</span>&gt;</span>div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="3-函数内部"><a href="#3-函数内部" class="headerlink" title="3. 函数内部"></a>3. 函数内部</h2><ul><li>函数直接执行</li></ul><p><code>非严格模式下 this默认指向全局对象window</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line">test()  <span class="comment">// window</span></span><br><span class="line"><span class="built_in">window</span>.test()  <span class="comment">// window</span></span><br></pre></td></tr></table></figure></p><p><code>严格模式下 this为undefined</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">  "use strict"</span>  <span class="comment">// 开启严格模式</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line">test()  <span class="comment">// undefiend</span></span><br><span class="line"><span class="built_in">window</span>.test()  <span class="comment">// window</span></span><br></pre></td></tr></table></figure></p><ul><li>自执行函数(自调用函数表达式)，<code>this</code>默认指向<code>window</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span> + <span class="string">' !'</span>)  <span class="comment">//window !</span></span><br><span class="line">&#125;();</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span> + <span class="string">' ()'</span>) <span class="comment">//window ()</span></span><br><span class="line">&#125;)();</span><br><span class="line">-<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span> + <span class="string">' -'</span>) <span class="comment">//window -</span></span><br><span class="line">&#125;();</span><br><span class="line">+<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span> + <span class="string">' +'</span>)  <span class="comment">//window +</span></span><br><span class="line">&#125;();</span><br><span class="line">~<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span> + <span class="string">' ~'</span>) <span class="comment">//window ~</span></span><br><span class="line">&#125;();</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span> + <span class="string">' ()'</span>) <span class="comment">//window ()</span></span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure><ul><li>call  bind  apply 改变函数体内部this指向<br><code>apply call 都会使该函数立即执行，bind不会立即执行，而是返回一个新函数</code></li><li><code>call  函数.call(obj,arg1,arg2)</code> 会直接调用该函数且第一个参数就是函数执行时的this,后面的参数可有多个</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params">m, n</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>, m, n);</span><br><span class="line">&#125;</span><br><span class="line">test(<span class="number">2</span>, <span class="number">3</span>)  <span class="comment">// window 2 3</span></span><br><span class="line">test.call(&#123;<span class="attr">name</span>: <span class="string">'bob'</span>&#125;, <span class="number">2</span>, <span class="number">3</span>) <span class="comment">// &#123;name: 'bob'&#125; 2 3</span></span><br></pre></td></tr></table></figure><ul><li><code>apply 函数.apply(obj,[arg1,arg2])</code> 会直接调用该函数且第一个参数是函数执行的this,后面是一个数组,执行时会将数组变成参数列表</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params">m, n</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>, m, n);</span><br><span class="line">&#125;</span><br><span class="line">test.apply(&#123;<span class="attr">name</span>: <span class="string">'bob'</span>&#125;, [<span class="number">2</span>, <span class="number">3</span>]) <span class="comment">// &#123;name: 'bob'&#125; 2 3</span></span><br></pre></td></tr></table></figure><ul><li>借助<code>call apply</code> 去使用<code>Math</code> 或 <code>Array</code> 的方法案例</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.max.apply(<span class="literal">null</span>, [<span class="number">2</span>, <span class="number">9</span>, <span class="number">5</span>])); <span class="comment">// 9</span></span><br><span class="line"><span class="comment">//console.log(document.getElementsByTagName("*").slice()); // 报错，不能直接使用slice</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">document</span>.getElementsByTagName(<span class="string">"*"</span>))) <span class="comment">// 正确用法</span></span><br></pre></td></tr></table></figure><p><code>对于 apply、call 二者而言，作用完全一样，只是接受参数的方式不太一样</code></p><ul><li><code>bind 函数.bind(obj)</code> 创建一个新函数，并不会立即调用，但只能绑定一次</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fn = test.bind(&#123;<span class="attr">name</span>: <span class="string">'bob'</span>&#125;)</span><br><span class="line">fn()  <span class="comment">// &#123;name: 'bob'&#125;</span></span><br><span class="line"><span class="keyword">var</span> fun = fn.bind(&#123;<span class="attr">name</span>: <span class="string">'tom'</span>&#125;)</span><br><span class="line">fun() <span class="comment">// &#123;name: 'bob'&#125;</span></span><br></pre></td></tr></table></figure><ul><li><code>箭头函数 =&gt;</code> 与定义时环境上下文中<code>this</code>一致 ，不能用<code>bind,call,apply</code>修改其内部指向，没有<code>arguments</code>对象</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//此时定义时上下文中的this即window</span></span><br><span class="line">&#125;</span><br><span class="line">fn() <span class="comment">// window</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">box.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//setTimeout setInterval 延时函数内部函数的this指向window</span></span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">// window</span></span><br><span class="line">    <span class="comment">//this.style.backgroundColor = "red"; 报错</span></span><br><span class="line">  &#125;, <span class="number">2000</span>)</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">// div</span></span><br><span class="line">    <span class="keyword">this</span>.style.backgroundColor = <span class="string">"red"</span>;</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>apply、call、bind比较<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// apply 、 call 、bind 三者都是用来改变函数的this对象的指向的；</span></span><br><span class="line"><span class="comment">// apply 、 call 、bind 三者第一个参数都是this要指向的对象，也就是想指定的上下文；</span></span><br><span class="line"><span class="comment">// apply 、 call 、bind 三者都可以利用后续参数传参；</span></span><br><span class="line"><span class="comment">// bind 是返回对应函数，便于稍后调用；apply 、call 则是立即调用 。</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="4-对象内部"><a href="#4-对象内部" class="headerlink" title="4. 对象内部"></a>4. 对象内部</h2><ul><li>函数作为对象的方法调用</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 作为对象的方法调用 this指向调用该函数的对象</span></span><br><span class="line"><span class="keyword">var</span> obj =  &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  fn: <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.a)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.fn() <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a: <span class="number">2</span>,</span><br><span class="line">    <span class="comment">// 作为对象方法的箭头函数this指向全局window对象</span></span><br><span class="line">    fn1: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'arrow'</span>,<span class="keyword">this</span>.a)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 作为对象方法的普通函数this指向调用它的对象</span></span><br><span class="line">    fn2: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'fun'</span>,<span class="keyword">this</span>.a)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.fn1() <span class="comment">// arrow 1</span></span><br><span class="line">obj.fn2() <span class="comment">// fun 2</span></span><br></pre></td></tr></table></figure><ul><li>多层嵌套的对象 <code>this</code> 就近绑定</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">2</span>,</span><br><span class="line">  b: &#123;</span><br><span class="line">    a: <span class="number">3</span>,</span><br><span class="line">    fn1: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.a)</span><br><span class="line">    &#125;,</span><br><span class="line">    fn2: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.a)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.b.fn1() <span class="comment">// 3</span></span><br><span class="line">obj.b.fn2() <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">var</span> temp = obj.b.fn1;</span><br><span class="line">temp() <span class="comment">// 1 函数直接调用this默认指向window</span></span><br></pre></td></tr></table></figure><ul><li>函数作为返回值使用</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">2</span>,</span><br><span class="line">  fn1: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.a)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  fn2: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.a)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.fn1()() <span class="comment">// 1</span></span><br><span class="line"><span class="comment">// obj.fn1() 执行返回 function () &#123; console.log(this.a) &#125;</span></span><br><span class="line"><span class="comment">// obj.fn1()() 相当于 (function () &#123; console.log(this.a) &#125;)()</span></span><br><span class="line"><span class="comment">// fn() 直接执行  this即window</span></span><br><span class="line">obj.fn2()() <span class="comment">// 2</span></span><br><span class="line"><span class="comment">// obj.fn2() 执行返回 function () &#123; console.log(this.a) &#125;</span></span><br><span class="line"><span class="comment">// obj.fn2()() 相当于 (() =&gt; &#123; console.log(this.a) &#125;)()</span></span><br><span class="line"><span class="comment">// (() =&gt; &#123;&#125;)() this指向上下文中的this即obj</span></span><br></pre></td></tr></table></figure><ul><li>函数或方法被赋值于变量时 this指向这个变量的拥有者</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tew = <span class="string">'111'</span></span><br><span class="line"><span class="keyword">var</span> it = &#123;</span><br><span class="line">  tew: <span class="string">'222'</span>,</span><br><span class="line">  getTew() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.tew)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">it.getTew()  <span class="comment">// 222</span></span><br><span class="line">fn1 = it.getTew</span><br><span class="line"><span class="built_in">console</span>.log(fn1) <span class="comment">// getTew() &#123; console.log(this.tew) &#125;</span></span><br><span class="line">fn1() <span class="comment">// 111</span></span><br></pre></td></tr></table></figure><h2 id="5-构造函数中"><a href="#5-构造函数中" class="headerlink" title="5. 构造函数中"></a>5. 构造函数中</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">// this指向实例化出来的对象</span></span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">"bob"</span></span><br><span class="line">&#125;</span><br><span class="line">Person() <span class="comment">// window</span></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person(); <span class="comment">// Person &#123;name: "tew"&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(p)  <span class="comment">// Person &#123;name: "bob"&#125;</span></span><br><span class="line">p.name = <span class="string">'tew'</span></span><br><span class="line"><span class="built_in">console</span>.log(p)  <span class="comment">// Person &#123;name: "tew"&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(p.name)  <span class="comment">// tew</span></span><br></pre></td></tr></table></figure><h2 id="6-原型链中"><a href="#6-原型链中" class="headerlink" title="6. 原型链中"></a>6. 原型链中</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原型链中的this指向调用它的对象</span></span><br><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name <span class="comment">// this指向调用该函数的对象</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 原型扩展绑定 showName方法</span></span><br><span class="line">Person.prototype.showName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 实例化对象</span></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person(<span class="string">'bob'</span>)</span><br><span class="line"><span class="comment">// 实例化对象的__proto__ 指向其构造函数的prototype</span></span><br><span class="line"><span class="built_in">console</span>.log(p.__proto__ === Person.prototype); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(p.__proto__); <span class="comment">// showName() &#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(Person.prototype); <span class="comment">// showName() &#123;&#125;</span></span><br><span class="line">p.showName() <span class="comment">// bob</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js基础 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Js调试命令</title>
      <link href="/Js%E8%B0%83%E8%AF%95%E5%91%BD%E4%BB%A4/"/>
      <url>/Js%E8%B0%83%E8%AF%95%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<p><code>Console</code>对象提供对浏览器控制台的接入。不同浏览器上它的工作方式是不一样的。<code>Console</code> 对象可以在任何全局对象中访问，如 Window。它被浏览器定义为 Window.Console，也可被简单的 Console 调用。<br><a id="more"></a><br>最常用的方法就是 <code>console.log()</code> 就是在控制台输出内容。<strong>console</strong> 对象还有除了 <code>log</code> 之外的其他方法。<br>注意：因为 <strong>Console 对象提供对浏览器控制台的接入</strong> ，所以在不同浏览器中的支持以及表现方法可能不太一样，但是调试内容只有开发者会看，所以保证在开发环境用这些方法就可以。</p><h4 id="分类输出"><a href="#分类输出" class="headerlink" title="分类输出"></a>分类输出</h4><ul><li>不同类别信息的输出。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'文字信息'</span>)</span><br><span class="line"><span class="built_in">console</span>.info(<span class="string">'提示信息'</span>)</span><br><span class="line"><span class="built_in">console</span>.warn(<span class="string">'警告信息'</span>)</span><br><span class="line"><span class="built_in">console</span>.error(<span class="string">'错误信息'</span>)</span><br></pre></td></tr></table></figure><p><img src="/image/console/console1.png" alt="CONSOLE1"></p><h4 id="表格输出"><a href="#表格输出" class="headerlink" title="表格输出"></a>表格输出</h4><ul><li>使用 <code>console.table()</code>可以将传入的对象，或数组以表格形式输出。适合排列整齐的元素。还可以只获取指定字段的数据.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Obj = &#123;</span><br><span class="line">  Obj1: &#123; <span class="attr">a</span>: <span class="string">'aaa'</span>, <span class="attr">b</span>: <span class="string">'bbb'</span>, <span class="attr">c</span>: <span class="string">'ccc'</span>&#125;,</span><br><span class="line">  Obj2: &#123; <span class="attr">a</span>: <span class="string">'aaa'</span>, <span class="attr">b</span>: <span class="string">'bbb'</span>, <span class="attr">c</span>: <span class="string">'ccc'</span>&#125;,</span><br><span class="line">  Obj3: &#123; <span class="attr">a</span>: <span class="string">'aaa'</span>, <span class="attr">b</span>: <span class="string">'bbb'</span>, <span class="attr">c</span>: <span class="string">'ccc'</span>&#125;,</span><br><span class="line">  Obj4: &#123; <span class="attr">a</span>: <span class="string">'aaa'</span>, <span class="attr">b</span>: <span class="string">'bbb'</span>, <span class="attr">c</span>: <span class="string">'ccc'</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.table(Obj)</span><br><span class="line"><span class="keyword">var</span> Arr = [[<span class="string">'aa'</span>, <span class="string">'bb'</span>, <span class="string">'cc'</span>], [<span class="string">'dd'</span>, <span class="string">'ee'</span>, <span class="string">'ff'</span>], [<span class="string">'gg'</span>, <span class="string">'hh'</span>, <span class="string">'ii'</span>]]</span><br><span class="line"><span class="built_in">console</span>.table(Arr)</span><br></pre></td></tr></table></figure><p><img src="/image/console/console4.png" alt="CONSOLE1"></p><h4 id="查看对象"><a href="#查看对象" class="headerlink" title="查看对象"></a>查看对象</h4><ul><li>使用 <code>Console.dir()</code>显示一个对象的所有属性和方法。</li><li>在 Chrome 中 <code>Console.dir()</code>和 <code>Console.log()</code>效果相同。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CodeDeer = &#123;</span><br><span class="line">  name: <span class="string">'张三'</span>,</span><br><span class="line">  blog: <span class="string">'www.google.com'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'console.dir(CodeDeer)'</span>)</span><br><span class="line"><span class="built_in">console</span>.dir(CodeDeer)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'console.log(CodeDeer)'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(CodeDeer)</span><br></pre></td></tr></table></figure><p><img src="/image/console/console5.png" alt="CONSOLE1"></p><h4 id="计次输出"><a href="#计次输出" class="headerlink" title="计次输出"></a>计次输出</h4><ul><li>使用 <code>Console.count()</code>输出内容和被调用的次数。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">console</span>.count(<span class="string">'运行次数：'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/image/console/console8.png" alt="CONSOLE1"></p><h4 id="计时功能"><a href="#计时功能" class="headerlink" title="计时功能"></a>计时功能</h4><ul><li>使用 <code>Console.time()</code>和 <code>Console.timeEnd()</code>包裹需要计时的代码片段，输出运行这段代码消耗的时间。</li></ul><ol><li><code>Console.time(&#39;登录用时&#39;)</code>中的参数作为计时器的标识，具有唯一性。</li><li><code>Console.timeEnd(&#39;登录用时&#39;)</code>中的参数来结束此标识的计时器，并以毫秒为单位返回运行时间。</li><li>最多同时运行 10000 个计时器。</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// console.time(参数标识) 必须和 console.timeEnd(参数) 一致</span></span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">'Chrome中循环1000次的时间'</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">'Chrome中循环1000次的时间'</span>)</span><br></pre></td></tr></table></figure><p><img src="/image/console/console10.png" alt="CONSOLE1"></p><h4 id="Console-log"><a href="#Console-log" class="headerlink" title="Console.log()"></a>Console.log()</h4><ul><li>最后再来介绍一下强大的 <code>Console.log()</code>，这个方法有很多的用法（其他输出方法的用法，如<code>error()</code>等，可以参照<code>log()</code>使用）。提示输出 可以再输出的对象、变量前加上提示信息，增加辨识度。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ans = <span class="number">12345</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'这是临时变量ans的值：'</span>, ans)</span><br></pre></td></tr></table></figure><p><img src="/image/console/console11.png" alt="CONSOLE1"></p><h4 id="debugger"><a href="#debugger" class="headerlink" title="debugger"></a>debugger</h4><ul><li>调试 js 代码时 可以在需要调试的地方打断点，然后在浏览器中打开在运行到这一段的代码时会在打断点的地方停止，在 <code>Chrome</code> 中可以按 <code>F10</code> 继续下一步，然后在 <strong>开发者工具–&gt;Sources</strong> 中可以看到具体内容，也可以用 鼠标 放到某个 变量上 看具体值。使用debugger检查页面hover后出现的弹窗，鼠标移入后在console控制台输入debugger然后回车,页面就卡住了就可以愉快的进行检查元素了<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> nums1 = [<span class="number">4</span>, <span class="number">9</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">let</span> nums2 = [<span class="number">9</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> solution2 = <span class="function">(<span class="params">arr1, arr2</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> result = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> arr1) &#123;</span><br><span class="line">    <span class="keyword">debugger</span></span><br><span class="line">    <span class="keyword">if</span> (arr2.includes(item)) &#123;</span><br><span class="line">      <span class="keyword">debugger</span></span><br><span class="line">      result.push(item)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> [...new <span class="built_in">Set</span>(result)]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'solution2'</span>, solution2(nums1, nums2))</span><br></pre></td></tr></table></figure></li></ul><p><img src="/image/console/debugger1.png" alt="CONSOLE1"></p>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js基础 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>sass入门</title>
      <link href="/sass/"/>
      <url>/sass/</url>
      
        <content type="html"><![CDATA[<p><code>Sass</code> 是对 CSS 的扩展，让 CSS 语言更强大、优雅。它允许你使用变量、嵌套规则、mixins、导入等众多功能，并且完全兼容 CSS 语法。<code>Sass</code> 有助于保持大型样式表结构良好，同时也让你能够快速开始小型项目，特别是在搭配<code>Compass</code>样式库一同使用时。<br><a id="more"></a></p><h2 id="sass安装"><a href="#sass安装" class="headerlink" title="sass安装"></a>sass安装</h2><p><code>sass</code>安装请参考<code>sass</code>官网进行操作  <a href="https://www.sass.hk/install/" target="_blank" rel="noopener">sass安装</a></p><h2 id="sass注释"><a href="#sass注释" class="headerlink" title="sass注释"></a>sass注释</h2><ul><li><code>//</code> 以//开始的注释,不会被编译到生成的css文件中</li><li><code>/**/</code> 以/**/包裹的注释会被编译到生成的css文件中</li></ul><h2 id="sass变量"><a href="#sass变量" class="headerlink" title="sass变量"></a>sass变量</h2><blockquote><p><code>sass</code>的变量必须是<code>$</code>开头，后面紧跟变量名，而变量值和变量名之间就需要使用冒号<code>(:)</code>分隔开（就像<code>CSS</code>属性设置一样），如果值后面加上<code>!default</code>则表示<code>默认值</code></p></blockquote><ul><li>普通变量 定义之后可以在全局范围内使用</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$fontSize</span>: <span class="number">12px</span>;</span><br><span class="line"><span class="selector-tag">body</span>&#123; <span class="attribute">font-size</span>: <span class="variable">$fontSize</span> &#125;</span><br><span class="line">// 编译后</span><br><span class="line">body&#123; font-size: <span class="number">12px</span>; &#125;</span><br></pre></td></tr></table></figure><ul><li>特殊变量 变量作为属性名或选择器或<code>url</code>中等必须要以<code>#{$varibles}</code>形式使用</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$borderDirection</span>:top !default;</span><br><span class="line"><span class="selector-class">.border-</span>#&#123;<span class="variable">$borderDirection</span>&#125;&#123;</span><br><span class="line"><span class="attribute">border</span>-#&#123;<span class="variable">$borderDirection</span>&#125;:<span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 编译后</span></span><br><span class="line"><span class="selector-class">.border-top</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="sass嵌套"><a href="#sass嵌套" class="headerlink" title="sass嵌套"></a>sass嵌套</h2><blockquote><p>所谓选择器嵌套指的是在一个选择器中嵌套另一个选择器来实现继承，从而增强了<code>sass</code>文件的结构性和可读性。在选择器嵌套中，可以使用&amp;表示父元素选择器</p></blockquote><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#top_nav</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>:<span class="number">#333</span>;</span><br><span class="line">  <span class="selector-tag">li</span>&#123; <span class="attribute">float</span>:left; &#125;</span><br><span class="line">  <span class="selector-tag">a</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    &amp;:hover&#123;</span><br><span class="line">      <span class="attribute">color</span>:<span class="number">#ddd</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 编译后</span></span><br><span class="line"><span class="selector-id">#top_nav</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#333</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#top_nav</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#top_nav</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#top_nav</span> <span class="selector-tag">a</span>:hover &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ddd</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>@at-root</code> sass3.3.0中新增的功能，用来跳出选择器嵌套的。默认所有的嵌套，继承所有上级选择器，但有了这个就可以跳出所有上级选择器。`</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent-2</span> &#123;</span><br><span class="line"><span class="attribute">color</span>:<span class="number">#f00</span>;</span><br><span class="line">  @at-root .child &#123;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">200px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 编译后</span></span><br><span class="line"><span class="selector-class">.parent-2</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f00</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.child</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="sass-混合mixin"><a href="#sass-混合mixin" class="headerlink" title="sass 混合mixin"></a>sass 混合mixin</h2><blockquote><p><code>sass</code>中使用<code>@mixin</code>声明混合，可以传递参数，参数名以$符号开始，多个参数以逗号分开，也可以给参数设置默认值。声明的<code>@mixin</code>通过<code>@include</code>来调用。</p></blockquote><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">mixin</span> opacity(<span class="variable">$opacity</span>:<span class="number">50</span>) &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="variable">$opacity</span> / <span class="number">100</span>;</span><br><span class="line">  <span class="attribute">filter</span>: alpha(opacity=<span class="variable">$opacity</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.opacity</span>&#123;</span><br><span class="line">  @<span class="keyword">include</span> opacity; <span class="comment">//参数使用默认值</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.opacity-80</span>&#123;</span><br><span class="line">  @<span class="keyword">include</span> opacity(<span class="number">80</span>); <span class="comment">//传递参数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 编译后</span></span><br><span class="line"><span class="selector-class">.opacity</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">  <span class="attribute">filter</span>: alpha(opacity=<span class="number">50</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.opacity-80</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">  <span class="attribute">filter</span>: alpha(opacity=<span class="number">80</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="sass-继承"><a href="#sass-继承" class="headerlink" title="sass 继承"></a>sass 继承</h2><blockquote><p><code>sass</code>中，选择器继承可以让选择器继承另一个选择器的所有样式，并联合声明。使用选择器的继承，要使用关键词<code>@extend</code>，后面紧跟需要继承的选择器。</p></blockquote><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.open</span>&#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">4px</span> solid <span class="number">#ff9aa9</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.speaker</span>&#123;</span><br><span class="line">  @<span class="keyword">extend</span> .open;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 编译后</span></span><br><span class="line"><span class="selector-class">.open</span>, <span class="selector-class">.speaker</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">4px</span> solid <span class="number">#ff9aa9</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.speaker</span> &#123;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Sass-运算"><a href="#Sass-运算" class="headerlink" title="Sass  运算"></a>Sass  运算</h2><blockquote><p><code>sass</code>具有运算的特性，可以对数值型的<code>Value</code>(如：数字、颜色、变量等)进行加减乘除四则运算。请注意运算符前后请留一个空格，不然会出错。</p></blockquote><p><code>注 : +号还可以做运算，还可做字符串连接, 需要给运算的外面添加一个小括号()才能执行除法运算</code><br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$width</span>: <span class="number">200px</span>;</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: (<span class="variable">$width</span> / <span class="number">2</span>);</span><br><span class="line">  <span class="attribute">height</span>: <span class="variable">$width</span> + <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 编译后</span></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="Sass-循环"><a href="#Sass-循环" class="headerlink" title="Sass 循环"></a>Sass 循环</h2><ul><li><p><code>@for循环</code> 指令包含两种格式：<code>@for $var from &lt;start&gt; through &lt;end&gt;</code>，或者 <code>@for $var from &lt;start&gt; to &lt;end&gt;</code> 使用to时包含<code>&lt;start&gt;</code>的值但不包含<code>&lt;end&gt;</code>的值.<code>&lt;start&gt;</code>和<code>&lt;end&gt;</code>必须是整数</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clauses-title</span> &#123;</span><br><span class="line">  @<span class="keyword">for</span> <span class="variable">$i</span> from 1 through 7 &#123;</span><br><span class="line">    &amp;<span class="selector-class">.billEntries0</span>#&#123;<span class="variable">$i</span>&#125; &#123;</span><br><span class="line">      <span class="attribute">background-image</span>: url(<span class="string">'../assets/billEntries0#&#123;$i&#125;.png'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// 编译后</span><br><span class="line">.clauses-title.billEntries01 &#123;</span><br><span class="line">  background-image: url(../img/billEntries01.png)</span><br><span class="line">&#125;</span><br><span class="line">.clauses-title.billEntries02 &#123;</span><br><span class="line">  background-image: url(../img/billEntries02.png)</span><br><span class="line">&#125;</span><br><span class="line">.clauses-title.billEntries03 &#123;</span><br><span class="line">  background-image: url(../img/billEntries03.png)</span><br><span class="line">&#125;</span><br><span class="line">.clauses-title.billEntries04 &#123;</span><br><span class="line">  background-image: url(../img/billEntries04.png)</span><br><span class="line">&#125;</span><br><span class="line">.clauses-title.billEntries05 &#123;</span><br><span class="line">  background-image: url(../img/billEntries05.png)</span><br><span class="line">&#125;</span><br><span class="line">.clauses-title.billEntries06 &#123;</span><br><span class="line">  background-image: url(../img/billEntries06.png)</span><br><span class="line">&#125;</span><br><span class="line">.clauses-title.billEntries07 &#123;</span><br><span class="line">  background-image: url(../img/billEntries07.png)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>@each循环</code> 指令的格式是 <code>$var in &lt;list&gt;</code>, <code>$var</code>可以是任何变量名，比如 <code>$length</code>而 <code>&lt;list&gt;</code>是一连串的值，也可以是值列表</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$primary</span>: <span class="number">#409EFF</span>;</span><br><span class="line"><span class="variable">$success</span>: <span class="number">#67C23A</span>;</span><br><span class="line"><span class="variable">$warning</span>: <span class="number">#E6A23C</span>;</span><br><span class="line"><span class="variable">$danger</span>: <span class="number">#F56C6C</span>;</span><br><span class="line"><span class="variable">$info</span>: <span class="number">#909399</span>;</span><br><span class="line"><span class="selector-class">.lea-button</span> &#123;</span><br><span class="line">  @<span class="keyword">each</span> <span class="variable">$type</span>,<span class="variable">$color</span> in (primary:<span class="variable">$primary</span>, success:<span class="variable">$success</span>, info:<span class="variable">$info</span>,</span><br><span class="line">    warning:<span class="variable">$warning</span>,danger:<span class="variable">$danger</span>) &#123;</span><br><span class="line">    &amp;-#&#123;<span class="variable">$type</span>&#125;&#123;</span><br><span class="line">      <span class="attribute">background</span>:#&#123;<span class="variable">$color</span>&#125;;</span><br><span class="line">      <span class="attribute">border</span>:<span class="number">1px</span> solid #&#123;<span class="variable">$color</span>&#125;;</span><br><span class="line">      <span class="attribute">color</span>:<span class="number">#fff</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 编译后</span></span><br><span class="line"><span class="selector-class">.lea-button-primary</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#409EFF</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#409EFF</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.lea-button-success</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#67C23A</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#67C23A</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.lea-button-info</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#909399</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#909399</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.lea-button-warning</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#E6A23C</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#E6A23C</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.lea-button-danger</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#F56C6C</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#F56C6C</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> CSS预处理器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sass </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>less入门</title>
      <link href="/less/"/>
      <url>/less/</url>
      
        <content type="html"><![CDATA[<p><code>Less</code>是一种动态样式语言，属于<code>CSS预处理语言</code>的一种，它使用类似CSS的语法，为    CSS的赋予了动态语言的特性，如变量、继承、运算、函数等，更方便CSS的编写和维护。    lesscss可以在多种语言、环境中使用，包括浏览器端、桌面客户端、服务端。<br><a id="more"></a></p><h2 id="less简介"><a href="#less简介" class="headerlink" title="less简介"></a>less简介</h2><p>常用的css预处理语言：<a href="https://www.sass.hk/" target="_blank" rel="noopener">Sass/Scss</a>  <a href="https://less.bootcss.com/" target="_blank" rel="noopener">Less</a> <a href="https://stylus.bootcss.com/" target="_blank" rel="noopener">Stylus</a><br><a href="http://lesscss.cn/" target="_blank" rel="noopener">less中文网</a></p><h2 id="编译环境或者在浏览器端使用"><a href="#编译环境或者在浏览器端使用" class="headerlink" title="编译环境或者在浏览器端使用"></a>编译环境或者在浏览器端使用</h2><ul><li>安装<code>node.js</code>(必须)</li><li>使用开发工具<code>visual studio code</code> 安装插件 <code>1:easy less 2:easy sass 3:view in browser</code></li><li>使用<code>koala</code>(国人开发的全平台的<code>LESS</code>编译工具)</li><li>在浏览器中使用(需要注意的是<code>link</code>标签一定要在<code>less.js</code>之前引入，并且<code>link</code>标签的<code>rel</code>属性要设置为<code>stylesheet/less</code>)</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 浏览器端使用 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet/less"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"styles.less"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"less.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="使用规则"><a href="#使用规则" class="headerlink" title="使用规则"></a>使用规则</h2><h4 id="less注释"><a href="#less注释" class="headerlink" title="less注释"></a>less注释</h4><ul><li><code>//</code> 以//开始的注释,不会被编译到生成的css文件中</li><li><code>/**/</code> 以/**/包裹的注释会被编译到生成的css文件中 </li><li><code>~</code>值  避免编译</li></ul><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span>&#123; <span class="attribute">width</span>: <span class="string">~'calc(300px - 30px)'</span> &#125;</span><br><span class="line"><span class="comment">// 编译后</span></span><br><span class="line"><span class="selector-id">#main</span>&#123; <span class="attribute">width</span>: calc(<span class="number">300px</span> - <span class="number">30px</span>) &#125;</span><br></pre></td></tr></table></figure><h4 id="less变量-variables"><a href="#less变量-variables" class="headerlink" title="less变量(variables)"></a>less变量(variables)</h4><ul><li>普通变量以<code>@</code>开头 <code>定义: @base: #333  使用: .box{color: @base}</code></li><li>作为选择器或属性名或URL 需要加(<code>@{变量}</code>)</li></ul><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@images:</span> <span class="string">"/flow/images"</span>;</span><br><span class="line"><span class="variable">@selector:</span> box;</span><br><span class="line"><span class="variable">@width:</span> width;</span><br><span class="line"><span class="variable">@&#123;selector&#125;</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#444</span>;</span><br><span class="line">    <span class="attribute">@&#123;width&#125;</span>:<span class="number">900px</span>;</span><br><span class="line">    <span class="attribute">background</span>: url(<span class="string">"@&#123;images&#125;/white-sand.png"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="混合-mixins"><a href="#混合-mixins" class="headerlink" title="混合(mixins)"></a>混合(mixins)</h4><ul><li>普通的混合(混合会输出到样式中)</li></ul><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.bordered</span>&#123;</span><br><span class="line">  <span class="attribute">border-top</span>:dotted <span class="number">1px</span> black;</span><br><span class="line">&#125;  </span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#111</span>;</span><br><span class="line">  <span class="selector-class">.bordered</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">// 编译结果</span></span><br><span class="line"><span class="selector-class">.bordered</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: dotted <span class="number">1px</span> black;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#111</span>;</span><br><span class="line">  <span class="attribute">border-top</span>: dotted <span class="number">1px</span> black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>不带输出的混合(后面加上<code>()</code>混合不会输出到样式中)</li></ul><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.bordered</span>()&#123;</span><br><span class="line">  <span class="attribute">border-top</span>:dotted <span class="number">1px</span> black;</span><br><span class="line">&#125;  </span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#111</span>;</span><br><span class="line">  <span class="selector-class">.bordered</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 编译后</span></span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#111</span>;</span><br><span class="line">  <span class="attribute">border-top</span>: dotted <span class="number">1px</span> black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>带参数的混合,可以有默认值</li></ul><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 多个参数推荐使用分号分隔，参数顺序可以调换但必须加加名称来引用, 有默认值时可以不用传值 */</span></span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@color</span>: black; <span class="variable">@margin</span>: <span class="number">10px</span>; <span class="variable">@padding</span>: <span class="number">20px</span>) &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@color</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="variable">@margin</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="variable">@padding</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class1</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="variable">@margin</span>: <span class="number">20px</span>; <span class="variable">@color</span>: <span class="number">#33acfe</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">#efca44</span>; <span class="variable">@padding</span>: <span class="number">40px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 编译后</span></span><br><span class="line"><span class="selector-class">.class1</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#33acfe</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#efca44</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>!important在mixin调用之后使用关键字将其继承的所有属性标记为!important</li></ul><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.foo</span> (<span class="variable">@bg</span>: <span class="number">#f5f5f5</span>, <span class="variable">@color</span>: <span class="number">#900</span>) &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="variable">@bg</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@color</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.important</span> &#123;</span><br><span class="line">  <span class="selector-class">.foo</span>() !important;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 编译后</span></span><br><span class="line"><span class="selector-class">.important</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f5f5f5</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#900</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="嵌套规则"><a href="#嵌套规则" class="headerlink" title="嵌套规则"></a>嵌套规则</h4><p>嵌套规则模仿了html的结构，使得css代码更加清晰明了  <code>&amp;</code>表示当前选择器的所有父选择器 </p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// less写法</span></span><br><span class="line"><span class="selector-id">#header</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>:black;</span><br><span class="line">  <span class="selector-class">.navigation</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>:<span class="number">12px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.logo</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">300px</span>;</span><br><span class="line">    <span class="selector-tag">&amp;</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">      <span class="attribute">color</span>: red</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 编译后</span></span><br><span class="line"><span class="selector-id">#header</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>:black;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#header</span> <span class="selector-class">.navigation</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>:<span class="number">12px</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-id">#header</span> <span class="selector-class">.logo</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">300px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#header</span> <span class="selector-class">.logo</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: red</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="运算"><a href="#运算" class="headerlink" title="运算"></a>运算</h4><p>任何数值，颜色和变量都可以进行运算，less会自动推断数值的单位，所以不必每个值都加上单位，运算符与值之间必须以空格分开</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@width:</span> <span class="number">450px</span>;</span><br><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@width</span> + <span class="number">450</span>;</span><br><span class="line">  <span class="selector-tag">p</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="variable">@width</span> * <span class="number">2</span> - <span class="number">100</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 编译后</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">900px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="合并属性"><a href="#合并属性" class="headerlink" title="合并属性"></a>合并属性</h4><p><code>“+”逗号分隔</code>所合并的属性值，<code>“+_”空格分隔</code>所合并的属性值</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*  + 逗号分隔所合并的属性值 */</span></span><br><span class="line"><span class="selector-class">.mixin</span>() &#123;</span><br><span class="line">  <span class="selector-tag">box-shadow</span>+: <span class="selector-tag">inset</span> <span class="selector-tag">0</span> <span class="selector-tag">0</span> <span class="selector-tag">10px</span> <span class="selector-id">#555</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.myclass</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>();</span><br><span class="line">  <span class="selector-tag">box-shadow</span>+: <span class="selector-tag">0</span> <span class="selector-tag">0</span> <span class="selector-tag">20px</span> <span class="selector-tag">black</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 编译后</span></span><br><span class="line"><span class="selector-class">.myclass</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">#555</span>, <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span> black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*  +_ 空格分隔所合并的属性值 */</span></span><br><span class="line"><span class="selector-class">.mixin</span>() &#123;</span><br><span class="line">  <span class="selector-tag">transform</span>+<span class="selector-tag">_</span>: <span class="selector-tag">scale</span>(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.myclass</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>();</span><br><span class="line">  <span class="selector-tag">transform</span>+<span class="selector-tag">_</span>: <span class="selector-tag">rotate</span>(<span class="number">15deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 编译后</span></span><br><span class="line"><span class="selector-class">.myclass</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: scale(<span class="number">2</span>) rotate(<span class="number">15deg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>更多less使用方式,可以参考以下链接</code></p><h2 id="学习链接"><a href="#学习链接" class="headerlink" title="学习链接"></a>学习链接</h2><p><a href="http://lesscss.cn/" target="_blank" rel="noopener">Less 中文网</a><br><a href="https://less.bootcss.com/" target="_blank" rel="noopener">快速入门 | Less.js 中文文档</a></p>]]></content>
      
      
      <categories>
          
          <category> CSS预处理器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> less </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hexo博客搭建</title>
      <link href="/hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/"/>
      <url>/hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<p><code>Hexo</code> 是一个快速、简洁且高效的博客框架。<code>Hexo</code> 使用 <code>Markdown</code>（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题<code>生成静态网页</code>。<br><a id="more"></a></p><h2 id="系统环境配置"><a href="#系统环境配置" class="headerlink" title="系统环境配置"></a>系统环境配置</h2><p>要使用<code>Hexo</code>,需要安装<code>Nodejs</code>以及<code>Git</code></p><h4 id="安装Node-js"><a href="#安装Node-js" class="headerlink" title="安装Node.js"></a>安装Node.js</h4><p><a href="https://nodejs.org/en/" target="_blank" rel="noopener">下载Node.js</a></p><h4 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h4><p><a href="https://git-scm.com/" target="_blank" rel="noopener">下载Git</a></p><h4 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h4><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">hexo init blog</span><br><span class="line">npm install</span><br><span class="line">hexo g 或 hexo <span class="keyword">generate</span></span><br><span class="line">hexo s 或 hexo server</span><br></pre></td></tr></table></figure><ul><li>hexo generate (<code>hexo g</code>) 生成静态文件，会在当前目录下生成一个新的叫做public的文件夹</li><li>hexo server (<code>hexo s</code>) 启动本地web服务，用于博客的预览</li><li>hexo deploy (<code>hexo d</code>) 部署播客到远端（比如github, heroku等平台）</li></ul><h4 id="部署本地博客"><a href="#部署本地博客" class="headerlink" title="部署本地博客"></a>部署本地博客</h4><ul><li>在任意盘下创建自己的博客文件夹（我是d:\blog）</li><li>鼠标右键 blog，选择 Git Bash Here。 如果没有安装 Git，就不会有这个选项。</li><li>Git Bash 打开之后，所在的位置就是 blog 这个文件夹的位置（/d/blog）</li><li>输入 hexo init 将 blog 文件夹初始化成一个博客文件夹</li><li>输入 npm install 安装依赖包。</li><li>输入 hexo g 生成（generate）待发布网页。</li><li>输入 hexo s 将生成的网页放在了本地服务器（server）。</li><li>浏览器里输入 <a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a> 。 就可以看到刚才的成果了。</li></ul><h4 id="发表文章"><a href="#发表文章" class="headerlink" title="发表文章"></a>发表文章</h4><ul><li>输入 hexo new “My-First-Post” 或者 在D:\blog\source_posts 路径下，新建 My-First-Post.md 的文件。 因为生成的文章文件基本都在这里.</li><li>重新输入 hexo g 重新生成静态文件</li><li>输入 hexo s 启动本地服务器</li><li>浏览器里输入 <a href="http://localhost:4000/查看新建的文章" target="_blank" rel="noopener">http://localhost:4000/查看新建的文章</a></li></ul><h4 id="Github-Pages设置"><a href="#Github-Pages设置" class="headerlink" title="Github Pages设置"></a>Github Pages设置</h4><p><code>GitHub Pages</code> 本用于介绍托管在GitHub的项目,每个帐号只能有一个仓库来存放个人主页，而且仓库的名字必须是<code>username/username.github.io</code>，这是特殊的命名约定。你可以通过<a href="http://username.github.io" target="_blank" rel="noopener">http://username.github.io</a> 来访问你的个人主页。</p><ul><li>注册 Github 账号，然后在 Github 中创建一个以username.github.io结尾的 Repository，其中username是你名字。</li><li>然后就可以在浏览器中通过<a href="https://username.github.io" target="_blank" rel="noopener">https://username.github.io</a> 直接访问你的网页了。</li></ul><h4 id="部署线上"><a href="#部署线上" class="headerlink" title="部署线上"></a>部署线上</h4><p>现在我们已经有了本地的Hexo的博客文件和Gitpage，现在只需要将文件部署上去便可以通过网页访问了。其部署的操作也非常简单</p><h6 id="1-获取Repository的链接"><a href="#1-获取Repository的链接" class="headerlink" title="1.获取Repository的链接"></a>1.获取Repository的链接</h6><ul><li>登录github，进入刚才我们建立Gitpage的Repository</li><li>点击Clone or download，复制链接</li></ul><h6 id="2-修改blog的配置文件"><a href="#2-修改blog的配置文件" class="headerlink" title="2. 修改blog的配置文件"></a>2. 修改blog的配置文件</h6><ul><li>打开blog文件夹中的_config.yml（不要用记事本）</li><li>找到#Deployment,填入以下内容：</li></ul><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">deploy</span>:</span><br><span class="line"> <span class="attribute">type</span>: git</span><br><span class="line"> <span class="attribute">repository</span>: <span class="attribute">https</span>:<span class="comment">//github.com/Ryanluoxu/ryanluoxu.github.io.git</span></span><br><span class="line"> <span class="attribute">branch</span>: master</span><br></pre></td></tr></table></figure><h6 id="3-部署"><a href="#3-部署" class="headerlink" title="3. 部署"></a>3. 部署</h6><ul><li>回到git bash</li><li>输入npm install hexo-deployer-git –save</li><li>输入 hexo d</li><li>得到 INFO Deploy done: git 即为部署成功</li><li>然后就可以在浏览器中通过<a href="https://username.github.io" target="_blank" rel="noopener">https://username.github.io</a> 看部署的效果了。在配置文件里可以修改网站的名字等一些东西，具体可以参考官方文档Hexo配置，主要就是修改Site里面的一些描述。</li></ul><p><code>更多next主题优化功能,可以参考以下链接</code></p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://www.jianshu.com/p/0311cb344dab" target="_blank" rel="noopener">最全Hexo+Next搭建博客教程</a><br><a href="https://www.jianshu.com/p/05289a4bc8b2" target="_blank" rel="noopener">简明Github Pages与Hexo教程</a><br><a href="https://segmentfault.com/a/1190000004947261" target="_blank" rel="noopener">手把手教你使用Hexo + Github Pages搭建个人独立博客</a><br><a href="https://www.cnblogs.com/xuwujing/p/7629965.html" target="_blank" rel="noopener">在Github上面搭建一个自己域名的Hexo博客</a><br><a href="https://blog.csdn.net/qq_33699981/article/details/72716951" target="_blank" rel="noopener">hexo的next主题个性化教程：打造炫酷网站</a><br><a href="http://gyxiaoh.com/tags/Hexo/" target="_blank" rel="noopener">Gitpage + Hexo搭建个人博客</a><br><a href="http://www.cduyzh.com/hexo-settings-1/" target="_blank" rel="noopener">基于hexo搭建个人免费博客——从零开始</a><br><a href="https://reuixiy.github.io/technology/computer/computer-aided-art/2017/06/09/hexo-next-optimization.html" target="_blank" rel="noopener">打造个性超赞博客Hexo+NexT+GitHubPages的超深度优化</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>label与input关联问题</title>
      <link href="/label%E4%B8%8Einput%E5%85%B3%E8%81%94%E9%97%AE%E9%A2%98/"/>
      <url>/label%E4%B8%8Einput%E5%85%B3%E8%81%94%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>点击事件在<code>label</code>标签执行2次,监听的是<code>label</code>和<code>input</code>的上层元素<code>click</code>事件.<code>label</code>和<code>input</code>关联（for显示关联或者input在label下隐式关联）, 点击<code>label</code>的时候，事件冒泡一次，同时会触发关联的<code>input</code>的<code>click</code>事件，导致事件再次冒泡.<br><a id="more"></a></p><h2 id="解决方式"><a href="#解决方式" class="headerlink" title="解决方式"></a>解决方式</h2><ol><li>不用label关联input</li><li>如果为了语义化或者用户体验必须使用label标签可以采用如下解决方式:<br> a 阻止默认行为<br> b 判断事件源对象的标签名为INPUT，如果为LABEL(必须大写)则返回<br> c 采用时间戳</li></ol><h2 id="方法一-阻止默认行为"><a href="#方法一-阻止默认行为" class="headerlink" title="方法一  阻止默认行为"></a>方法一  阻止默认行为</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"test1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>隐时关联</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"fruit"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">test1.onclick = <span class="function"><span class="keyword">function</span> <span class="params">(ev)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 方法一 阻止默认行为</span></span></span><br><span class="line"><span class="undefined">    ev.preventDefault();</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.id)</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="方法二-判断事件源对象"><a href="#方法二-判断事件源对象" class="headerlink" title="方法二  判断事件源对象"></a>方法二  判断事件源对象</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"test2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">'xian'</span>&gt;</span>显示关联<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"fruit"</span> <span class="attr">id</span>=<span class="string">"xian"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">test2.onclick = <span class="function"><span class="keyword">function</span> <span class="params">(ev)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">//方法2  在关联的情况下使用 目标对象的标签名判断</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">if</span>(ev.target.tagName == <span class="string">'LABEL'</span>)&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.id);</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="方法三-采用时间戳"><a href="#方法三-采用时间戳" class="headerlink" title="方法三  采用时间戳"></a>方法三  采用时间戳</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"test3"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">'xian'</span>&gt;</span>显示关联<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"fruit"</span> <span class="attr">id</span>=<span class="string">"xian"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> temp = <span class="number">0</span>;</span></span><br><span class="line"><span class="actionscript">test3.onclick = <span class="function"><span class="keyword">function</span><span class="params">(ev)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">//方法3  采用时间戳</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">if</span>(now - temp &lt; <span class="number">100</span>)&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.id)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    temp = now;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="方法四-不关联label和input"><a href="#方法四-不关联label和input" class="headerlink" title="方法四 不关联label和input"></a>方法四 不关联label和input</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 方法四  将label和input不关联  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"test4"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>不关联<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"fruit"</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">test4.onclick = <span class="function"><span class="keyword">function</span><span class="params">(ev)</span></span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.id)</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> html </category>
          
      </categories>
      
      
        <tags>
            
            <tag> html </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>CSS3学习</title>
      <link href="/CSS3/"/>
      <url>/CSS3/</url>
      
        <content type="html"><![CDATA[<p><code>CSS3</code> 是 <code>CSS</code> 的升级版本，这套新标准提供了更加丰富且实用的规范，如：<code>盒子模型box-sizing</code>、<code>过渡transition</code>、<code>动画animation</code>、<code>2D或3D变换transform</code>、<code>阴影box-shadow</code>、<code>背景和边框</code>、<code>文字特效text-shadow</code>、<code>多栏布局</code>、<code>弹性布局flex</code>、<code>栅格布局grid</code>、<code>渐变gradient</code>、<code>媒体查询</code>等等.<br><a id="more"></a></p><h2 id="CSS3-选择器"><a href="#CSS3-选择器" class="headerlink" title="CSS3 选择器"></a>CSS3 选择器</h2><ul><li>基本选择器<br><code>* 通用选择器</code>     找到所有的元素<br><code>&gt; 选择直接子元素</code>  选择到元素的直接后代子元素<br><code>+  相邻兄弟选择器</code> 选择到紧随目标后第一个元素<br><code>~  普通兄弟选择器</code> 选择到紧随其后的所有兄弟元素</li><li><code>伪元素选择器</code><ul><li><code>::first-line</code>    匹配文本块的首行</li><li><code>::first-letter</code> 匹配文本块的首字母</li></ul></li><li><code>伪类选择器</code><ul><li><code>:before</code> 在元素的内容前面添加内容(行内元素)</li><li><code>:after</code> 在元素的内容后面添加内容</li></ul></li><li>结构选择器<br><code>:nth-child</code> 选择指定索引处的子元素<br><code>:nth-child(n)</code> 父元素下的第几个子元素(n从一开始)<br><code>:nth-child(odd)</code>  奇数子元素(同nth-child(2n-1))<br><code>:nth-child(even)</code>  偶数子元素(同nth-child(2n))<br><code>:nth-child(an+b)</code>  套用公式<br><code>:nth-last-child(n)</code> 倒数第n个子元素<br><code>:nth-of-type(n)</code>  父元素下的第n个指定类型的子元素<br><code>:nth-last-of-type(n)</code>  父元素下的倒数第n个指定内型的子元素<br><code>:first-child</code>  选择父元素下的第一个子元素<br><code>:last-child</code>  选择父元素下的最后一个子元素<br><code>:only-child</code>  选择父元素下唯一的子元素<br><code>:only-of-type</code>  选择父元素下指定类型的唯一子元素<br><code>:root</code>  选择文档的根目录,返回html</li><li>属性选择器<br><code>E[attr]</code>  只指定属性名,没确定任何值<br><code>E[attr=&quot;value&quot;]</code>  指定属性名,并指定其对应的属性值<br><code>E[attr~=&quot;value&quot;]</code>  指定属性名,属性值是词列表且以空格隔开<br><code>E[attr ^=&quot;v&quot;]</code>  指定属性名, 属性值以v开头<br><code>E[attr $=&quot;v&quot;]</code>  指定属性名,属性值以v结束<br><code>E[attr *=&quot;v&quot;]</code>  指定属性名,属性值中包含了v<br><code>E[attr |=&quot;v&quot;]</code>  指定属性名,属性值以v-开头或v开头</li><li>伪类选择器 UI伪类选择器(表单)<br><code>:enabled</code>         选择启用状态元素<br><code>:disabled</code>         选择不可用状态元素<br><code>:checked</code>          选择被选中的input元素（单选按钮或复选框）<br><code>:default</code>          选择有默认值得元素(button默认值为submit)<br><code>:valid、invalid</code>      根据输入验证选择有效或无效的input元素<br><code>:in-range、out-of-range</code> 选择指定范围之内或者之外受限的元素<br><code>:repuired、optional</code>  根据是否允许:required属性选择input元素</li><li><p>动态伪类选择器<br><code>:link</code>               未访问的链接元素<br><code>:visited</code>            已访问的链接的元素<br><code>:hover</code>              鼠标悬停其上的元素<br><code>:ative</code>              鼠标长按时触发的事件<br><code>:focus</code>              当前获取焦点的元素</p></li><li><p>其他伪类选择器<br><code>:not(选择器)</code>     对括号内选择器的选择取反<br><code>:lang(目标语言)</code>     基于lang全局属性的元素<br><code>:target</code>        锚点片段标识符指向的元素<br><code>:empty</code>        选择内容为空的元素<br><code>::placeholder</code>  伪元素用于控制表单输入框占位符的外观 默认为灰色<br><code>::selection</code>     鼠标光标选中元素内容<br><code>IE9+、Opera、Google Chrome 以及 Safari 中支持 ::selection 选择器。 Firefox 支持替代的 ::-moz-selection。只能向 ::selection 选择器应用少量CSS 属性：color、background、cursor 以及 outline。</code></p></li></ul><h2 id="CSS3文本属性"><a href="#CSS3文本属性" class="headerlink" title="CSS3文本属性"></a>CSS3文本属性</h2><ul><li><p>单行省略</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">white-space:nowrap  控制文本(禁止)不换行</span><br><span class="line"><span class="built_in">text</span>-<span class="built_in">overflow</span>:ellipsis    当文本溢出时显示省略号</span><br><span class="line"><span class="built_in">overflow</span>:hidden;       溢出隐藏</span><br></pre></td></tr></table></figure></li><li><p>文本阴影<br><code>text-shadow:x,y,blur,color</code> 文本阴影<br><code>x 横向偏移   y 纵向偏移 blur  模糊距离  color 阴影颜色</code><br><img src="/image/css/text-shadow.png" alt="文本阴影"></p></li><li><p>其他新增文本属性<br><code>word-wrap:break-word</code>  内容将在边界内换行<br><code>-webkit-text-fill-color:文字填充颜色</code>  chrome内核支持<br><code>-webkit-text-stroke:2px 厚度 blue颜色</code> chrome内核支持</p></li></ul><h2 id="CSS3新增颜色"><a href="#CSS3新增颜色" class="headerlink" title="CSS3新增颜色"></a>CSS3新增颜色</h2><ul><li><code>HSLA模式 hsla(h,s,l,a)</code><br><code>H: Hue(色调)</code>  0或360代表红色 60代表黄色 120 代表绿色 180代表青色 240代表蓝色  取值范围0~360<br><code>S: Saturation(饱和度)</code>  取值为:0.0%-100.0%<br><code>L: Lightness(亮度)</code>     取值为:0.0%-100.0%<br><code>A: alpha  透明度</code>       取值为 0~1之间</li><li><code>RGBA模式 rgba(r,g,b,a)</code><br><code>r red 红色  0-255</code><br><code>g green 绿色  0-255</code><br><code>b blue  蓝色  0-255</code><br><code>a alpha 透明  0-1</code></li></ul><h2 id="CSS3新增边框属性"><a href="#CSS3新增边框属性" class="headerlink" title="CSS3新增边框属性"></a>CSS3新增边框属性</h2><ul><li><code>border-image</code> 边框背景图片<br><code>border-image-source:url()</code> 图片的路径<br><code>border-image-slice:number(边框宽度)</code> 图片的分割方式<br><code>border-image-width:图片的宽度(width)</code><br><code>border-image-outset:3</code> 图片向外扩展的数值<br><code>border-image-repeat:repeat</code>图片重复<ul><li><code>stretch</code> 拉伸方式来填充边框背景图</li><li><code>repeat</code> 平铺方式来填充边框背景图</li><li><code>round</code> 平铺方式来填充边框背景图.图片会根据边框的尺寸动态调整图片的大小直至正好可以铺满整个边框</li><li><code>space</code> 平铺方式来填充边框背景图.图片会根据边框的尺寸动态调整图片之间的间距直至正好可以铺满整个边框</li></ul></li><li><code>border-radius</code> 边框圆角<br><code>border-radius：50%</code> 八个值都为50% (半径)<br><code>border-radius：50% 40%</code> 左上角和右下角为50%  右上角和左下角40%<br><code>border-radius：50% 40% 30%</code> 左上角50% 右上角和左下角40% 右下角30%<br><code>border-radius：50% 40% 30% 20%</code> 左上角50%  右上角40%  右下角30% 左下角20%</li></ul><h2 id="CSS3盒模型"><a href="#CSS3盒模型" class="headerlink" title="CSS3盒模型"></a>CSS3盒模型</h2><h5 id="弹性盒模型"><a href="#弹性盒模型" class="headerlink" title="弹性盒模型"></a>弹性盒模型</h5><ul><li><code>display:box 或 display:inline-box</code><ul><li><code>box-orient:</code> 定义盒模型的布局方向<ul><li>horizontal   水平显示(默认值)</li><li>vertical     垂直方向</li><li>box-direction:  定义盒子内部元素的排列顺序</li><li>normal  正序(默认)</li><li>reverse  反序</li></ul></li><li><code>box-ordinal-group:n</code>  设置元素的具体位置</li><li><code>box-pack:</code> 对盒子水平方向富裕的空间进行管理<ul><li>start 所有子元素在盒子左侧显示，富裕空间在右侧</li><li>end 所有子元素在盒子右侧显示，富裕空间在左侧</li><li>center 所有子元素居中</li><li>justify 富余空间在子元素之间平均分布</li></ul></li><li><code>box-align:</code> 在垂直方向上对元素的位置进行管理<ul><li>start 所有子元素在居顶</li><li>end 所有子元素在居底</li><li>center 所有子元素居中</li></ul></li><li><code>resize</code> 自由缩放(要配合overflow:auto 一块使用)<ul><li>both 水平垂直都可以缩放</li><li>horizontal 只有水平方向可以缩放</li><li>vertical 只有垂直方向可以缩放</li></ul></li><li><code>box-flex</code> 在子元素中定义盒子的弹性空间 仅chorme内核的浏览器有效<br><code>子元素的宽=父盒子的宽/所有子素的box-flex属性值的和*子元素的box-flex属性值</code><br><img src="/image/css/box.png" alt="文本阴影"></li></ul></li><li>flex盒模型 <code>display:flex 或 display:index-flex</code><br><code>设置给父元素盒子的属性: 控制子元素的显示方式</code><br><a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html" target="_blank" rel="noopener">Flex 布局教程：语法篇</a><ul><li><code>flex-direction:</code>   决定子元素显示的方向 默认为row<ul><li>row:  从左向右排列(默认值)</li><li>row-reverse:  从右往左排列</li><li>column: 从上往下排列</li><li>column-reverse: 从下往上排列</li></ul></li><li><code>justify-content</code>  定义子项在水平方向的对齐方式<ul><li>flex-start: 元素在开始位置 富裕空间占据另一侧(默认)</li><li>flex-end:  富裕空间在开始位置,元素占据另一侧</li><li>center:   元素居中 富裕空间平分左右两侧</li><li>space-between: 富裕空间在每个元素之间平均分配</li><li>space-around: 富裕空间在每个元素两侧平均分</li></ul></li><li><code>align-items</code>     定义子项在竖直方向上的如何对齐<ul><li>flex-start: 元素在开始位置  富裕空间在另一侧</li><li>flex-end:  富裕空间在开始位置  元素占据另一侧</li><li>center:  元素居中 富裕空间 平分左右两侧(垂直居中)</li><li>stretch: 未设高度或为auto,将占满容器的高度或宽度(默认)</li><li>baseline:  项目的第一行文字的基线对齐</li></ul></li><li><code>flex-wrap:</code> 如果一行排列不下,如何换行<ul><li>nowrap:  不换行 默认</li><li>wrap:    换行显示</li><li>wrap-reverse:   反向换行(上下行互换)</li></ul></li><li><code>align-content</code>  定义多行的对齐方式,只有一行不起作用(堆栈伸缩行) 主要用于处理多行之间的富裕空间显示问题<ul><li>flex-start:  元素在开始位置,富裕空间占据另一侧(默认)</li><li>flex-end:   富裕空间在开始位置 元素占据另一侧</li><li>center:     元素居中 富裕空间 平分两侧</li><li>space-between:  富裕空间在元素之间平均分配</li><li>space-around:   富裕空间在元素两侧平均分配</li><li>stretch:   轴线占满整个交叉轴(默认</li></ul></li></ul></li><li><code>设置给子元素相关的属性: 子元素本身的显示方式</code><ul><li><code>order</code>  显示顺序  数字越大显示越靠后, 支持负数</li><li><code>flex</code>   伸缩性    auto|none|具体数值占比</li><li><code>align-self</code>   子元素在竖直方向上的对齐方式<ul><li>flex-start:  元素在开始位置(默认)</li><li>flex-end:   富裕空间在开始位置</li><li>center:    元素居中 富裕空间平分两侧</li><li>margin:auto   水平和竖直都居中</li></ul></li></ul></li></ul><h5 id="盒子阴影"><a href="#盒子阴影" class="headerlink" title="盒子阴影"></a>盒子阴影</h5><ul><li><code>box-shadow:[inset] x y blur [spread] color</code><br><code>inset: 内投影 outset: 外投影(默认) x 阴影水平偏移 y  阴影垂直偏移  blur 模糊半径(灰度) spread 扩展阴影半径(加大面积) 先扩展原有形状,再开始画阴影 color  阴影颜色</code><br><code>同一盒子上可以使用多个阴影用逗号隔开</code><br><img src="/image/css/box-shadow.png" alt="盒子阴影"></li></ul><h5 id="盒模型解析模式"><a href="#盒模型解析模式" class="headerlink" title="盒模型解析模式"></a>盒模型解析模式</h5><ul><li>标准盒模型 <code>box-sizing:content-box</code><br><code>盒模型宽高 = 2*border + 2*padding + content</code><br><img src="/image/css/box-shadow.png" alt="标准盒模型"></li><li>怪异盒模型 <code>box-sizing:border-box</code><br><code>盒模型宽高 = content-2*border-2*padding</code><br><img src="/image/css/box-shadow.png" alt="怪异盒模型"></li></ul><h2 id="CSS3新增背景属性"><a href="#CSS3新增背景属性" class="headerlink" title="CSS3新增背景属性"></a>CSS3新增背景属性</h2><ul><li>多重背景 <code>background:url(“&quot; )  0 0,url(“&quot;)  0 100%,url(“&quot;)  100% 100%</code></li><li><code>background-origin:</code>  背景区域定位<ul><li>border-box  从border区域开始显示背景</li><li>padding-box  从padding区域开始显示背景(默认)</li><li>content-box  从content区域开始显示背景</li></ul></li><li><code>background-clip:</code>   背景绘制区域<ul><li>border-box  从border区域向外裁剪背景(默认)</li><li>padding-box 从padding区域向外裁剪背景</li><li>content-box 从content区域向外裁剪背景</li><li>text        背景填充文本(仅webkit支持)文本区域显示背景</li></ul></li><li><code>background-size:</code>  背景大小<ul><li>具体指：数值或百分比</li><li>cover 覆盖： 图片等比例放大。保证完全覆盖盒子，但不一定能完整显示背景图，会超出</li><li>contain 包含:  图片最大化的等比例完整显示在盒子中，但可能不会铺满整个盒子，可能会留白</li></ul></li><li>线性渐变创建背景图像<br><code>background-image:linear-gradient(起点/角度,开始颜色,结束颜色,位置)</code></li><li>径向渐变创建背景图像<br><code>background-image:radial-gradient(起点(圆心位置),形状|大小|半径,颜色1,颜色2)</code></li></ul><h2 id="CSS3-过渡属性-过渡动画"><a href="#CSS3-过渡属性-过渡动画" class="headerlink" title="CSS3 过渡属性 过渡动画"></a>CSS3 过渡属性 过渡动画</h2><p><code>transition:property duration timing-function delay</code><br><code>transition:property</code> 过渡属性的名称</p><ul><li>none   没有过渡属性</li><li>all    所有属性过渡(默认)</li><li>property  具体属性名称</li></ul><p><code>transition-duration:</code> 过渡属性花费的时间(秒或毫秒)<br><code>transition-delay:</code> 过渡效果延迟时间(秒或毫秒)<br><code>transition-timing-function:</code> 过渡效果速度曲线</p><ul><li>linear:规定以相同速度开始至结束的过渡效果(匀速)</li><li>cubic-bezier(n,n,n,n):在函数中定义自己的值0到1之间的数值</li></ul><p><a href="cubic-bezier.com">贝塞尔曲线</a>`</p><p><code>过渡完成事件</code></p><ul><li><code>obj.addEventListener(&#39;webkitTransitionEnd&#39;,function(){})</code></li><li><code>obj.addEventListener(&#39;transitionend&#39;,function(){})</code></li></ul><h2 id="CSS3-动画属性"><a href="#CSS3-动画属性" class="headerlink" title="CSS3 动画属性"></a>CSS3 动画属性</h2><p><code>animation:name duration timing-function delay iteration-count direction</code></p><ul><li><code>animation-name:动画名称</code>   keyframename</li><li><code>animation-duration:动画执行时间</code>   秒或毫秒</li><li><code>animation-timing-function:动画速度曲线</code></li><li><code>animation-delay:动画效果延迟时间</code>  秒或毫秒</li><li><code>animation-iteration-count:动画执行次数</code><br><code>n 具体的次数 infinite 无线重复</code></li><li><code>animation-direction:动画的执行方向</code><br><code>normal  正常顺序(默认)  alternate 动画轮流反向播放</code></li><li><code>animation-fill-mode: 动画执行过程效果是否可见</code><br><code>none      不做改变(默认值)</code><br><code>forwards  当动画完成后,保持最后一个属性值(状态)不会回到原来(在最后一个关键帧中定义)</code><br><code>backwards  动画完成回到开始前状态</code></li><li><code>animation-play-state:动画执行状态(单独写) paused  暂停动画  running  运行动画</code></li><li><code>@keyframes animationname {keyframes-selector{css-style;}}</code><br><code>animationname 定义动画的名称</code><br><code>keyframes-selector  动画时长的百分比</code><br><code>0-100%  from(与0%相同)  to(与100%相同) 可以只有to</code><br><code>css-styles     一个或多个合法的CSS样式属性</code></li><li>动画事件<br>动画开始时触发:<code>obj.addEventListener(&quot;webkitAnimationStart&quot;, fn) obj.addEventListener(&quot;animationstart&quot;, fn)</code><br>动画执行过程中触发：<code>obj.addEventListener(&quot;webkitAnimationIteration&quot;,fn) obj.addEventListener(&quot;animationiteration&quot;, fn)</code><br>动画结束是触发：<code>obj.addEventListener(&#39;webkitAnimationEnd&#39;,fn) obj.addEventListener(&#39;animationend&#39;,fn)</code><br><code>逐帧动画 animation-timing-function :steps(1)  去除过渡的效果（补间) 区间之间的只有一个画面</code></li></ul><h2 id="CSS3-2D变换"><a href="#CSS3-2D变换" class="headerlink" title="CSS3  2D变换"></a>CSS3  2D变换</h2><ul><li><code>tansform:rorate(360deg)</code> 旋转函数(deg)</li><li><code>transform:skew(45deg,45deg)</code> 倾斜函数(deg)  skewX() skewY()</li><li><code>transform:scale(X,Y)</code> 缩放函数(正数,负数和小数)  scaleX()  scaleY()</li><li><code>transform:translate(X,Y)</code>  位移函数(px) translateX()      translateY()</li><li><code>transform  简写执行顺序(后写先执行)</code></li><li><code>transform-origin: x,y</code>  旋转的基准点(默认值center)<ul><li>x: left/center/right/length/%</li><li>y: top/center/bottom/length/%</li><li>z: length</li></ul></li><li><code>transform:matrix(a,b,c,d,e,f)</code> 矩阵函数 默认值：matrix(1,0,0,1,0,0)<ul><li>通过矩阵实现缩放<ul><li>x轴缩放 a=x<em>a    c=x</em>c   e=x*e;</li><li>y轴缩放 d=y<em>d    b=y</em>b   f=y*f;</li></ul></li><li>通过矩阵实现位移<ul><li>x轴位移: e=e+disX</li><li>y轴位移: f=f+disY</li></ul></li><li>通过矩阵实现倾斜<ul><li>x轴倾斜: c=Math.tan(xDeg/180*Math.PI)</li><li>y轴倾斜: b=Math.tan(yDeg/180*Math.PI</li></ul></li><li>通过矩阵实现旋转<ul><li>a=Math.cos(deg/180*Math.PI);</li><li>b=Math.sin(deg/180*Math.PI);</li><li>c=-Math.sin(deg/180*Math.PI);</li><li>d=Math.cos(deg/180*Math.PI);</li></ul></li></ul></li></ul><h2 id="CSS3-3D变换"><a href="#CSS3-3D变换" class="headerlink" title="CSS3  3D变换"></a>CSS3  3D变换</h2><p><code>transform-style:preserve-3d</code>   建立3D环境(要加给父级元素)<br><code>perspective:800px</code>  添加视镜 一般800px到1000px立体效果更好,就是元素里我们的距离近大远小<br><code>transfrom: translateZ()</code> 元素在Z轴方向上的移动距离<br><code>transform: scaleZ()</code>     元素在Z轴方向上的缩放<br><code>transform: rotate()</code></p><ul><li>rotateX() 元素围绕其 X 轴以给定的度数进行旋转</li><li>rotateY() 元素围绕其 Y 轴以给定的度数进行旋转</li><li>rotateZ() 元素围绕其 Z 轴进行旋转(和2D中效果一样)</li></ul><h2 id="CSS3-响应式布局"><a href="#CSS3-响应式布局" class="headerlink" title="CSS3  响应式布局"></a>CSS3  响应式布局</h2><h5 id="分栏布局-只有-webkit有效"><a href="#分栏布局-只有-webkit有效" class="headerlink" title="分栏布局(只有-webkit有效)"></a>分栏布局(只有-webkit有效)</h5><ul><li><code>column-width</code> 栏目宽度(给父元素加但不要加高度)</li><li><code>column-count</code> 栏目列数<br><code>当同时设column-width和column-count时,只有column-count有效</code></li><li><code>column-gap</code>   各栏目之间的距离</li><li><code>column-rule</code>  栏目的分隔线</li></ul><h5 id="响应式布局"><a href="#响应式布局" class="headerlink" title="响应式布局"></a>响应式布局</h5><ul><li>关键字<br><code>and not 用来排除某种指定的媒体类型</code><br><code>only    用来指定某种特定类型的媒体类型</code></li><li>媒体特性<br><code>max-width:600px</code>          最大宽度<br><code>min-width:600px</code>           最小宽度<br><code>max-device-width:480px</code>    设备输出宽度<br><code>orientation:portrait</code>          竖屏<br><code>orientation:landscape</code>        横屏<br><code>-webkit-min-device-pixel-ratio:2</code>   像素比<br><code>devicePixelRatio</code>            设备像素比<br><code>window.devicePrixelRatio=物理像素/dips</code></li><li>样式引入(不同设备引入不同css)<br><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;css/index.css&quot; media=&quot;all and (orientation:portrait )&quot;   /&gt;</code><br><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;css/index.css&quot; media=&quot;screen and (min-width:800px)&quot;   /&gt;</code><br><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;css/index.css&quot; media=&quot;screen and (min-width:600px) and (max-width:800px)&quot; /&gt;</code><br><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;css/index.css&quot; media=&quot;screen and (max-width:600px)&quot; /&gt;</code></li><li><p><code>max-device-width</code>和<code>max-width</code>的区别</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 1、max-device-width是设备整个显示区域的宽度，例如，真实的设备屏幕宽度。</span></span><br><span class="line"><span class="comment">2、max-width是目标显示区域的宽度，例如，浏览器宽度。</span></span><br><span class="line"><span class="comment">3、如果使用max-device-width，那么在PC浏览器上浏览网页时，缩小或放大浏览器时是不执行CSS的，因为“PC设备”没有变化。但如果使用max-width，缩小或放大浏览器时是执行CSS的，因为“显示区域”即浏览器大小发生了变化。</span></span><br><span class="line"><span class="comment">4、如果使用max-device-width，那么当手机由竖变横时，CSS是不执行的，因为“手机宽度”并没有变化。如果使用max-width，那么当手机由竖变横时，CSS是执行的，因为“显示区域”发生了变化。</span></span><br><span class="line"><span class="comment">5、通常，面向“移动设备”用户使用max-device-width；面向“PC设备”用户使用max-width。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li><li><p>媒体查询(不同屏幕大小使用不同的样式)</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.d1</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>:<span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">background</span>:<span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*  超小屏幕 手机&gt; */</span></span><br><span class="line">@<span class="keyword">media</span> (max-width:<span class="number">768px</span>)&#123;</span><br><span class="line">  <span class="selector-class">.d1</span>&#123; <span class="attribute">background</span>:skyblue; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*  小屏幕 平板 */</span></span><br><span class="line">@<span class="keyword">media</span> (min-width:<span class="number">768px</span>) and (max-width:<span class="number">992px</span>)&#123;</span><br><span class="line">  <span class="selector-class">.d1</span>&#123; <span class="attribute">background</span>:<span class="number">#999</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*  中等屏幕 桌面显示器 */</span></span><br><span class="line">@<span class="keyword">media</span> (min-width:<span class="number">992px</span>) and (max-width:<span class="number">1200px</span>)&#123;</span><br><span class="line">  <span class="selector-class">.d1</span>&#123; <span class="attribute">background</span>:blue; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*  大屏幕 大桌面显示器&gt; */</span></span><br><span class="line">@<span class="keyword">media</span> (min-width:<span class="number">1200px</span>)&#123;</span><br><span class="line">  <span class="selector-class">.d1</span>&#123; <span class="attribute">background</span>:pink; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>移动设备<code>viewpoart</code><br><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no&quot;/&gt;</code></p></li></ul><h2 id="CSS3-响应式设计"><a href="#CSS3-响应式设计" class="headerlink" title="CSS3  响应式设计"></a>CSS3  响应式设计</h2><ul><li><code>为什么要进行响应式设计</code> 为了在不同大小的设备上呈现同样的网页</li><li><code>早期的解决方案</code> 是为不同的设备提供不同的网页,比如专门的wp版本.</li><li><code>现在的解决方案</code>  让同一网页自动适应不同大小的屏幕,根据屏幕宽度,自动调整布局(layout).一次设计,普遍适用,自动识别屏幕宽度,并作出相应调整的网页设计</li><li><code>响应式设计详解</code><ul><li><code>viewport标签</code>  让网页自动适应屏幕的宽度<br>在头部head添加 <code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1&quot; /&gt;</code> 网页宽度默认等于屏幕宽度<code>width=device-width</code>  原始缩放比例<code>initial-scale=1</code></li><li><code>媒体查询</code> 自动探测屏幕宽度,然后加载相应的css文件<code>media query</code><br><code>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;screen and (max-width:767px)&quot;  href=&quot;phone.css&quot; /&gt;</code><br>如果屏幕宽度小于767像素(<code>max-width:767px</code>)就加载<code>phone.css</code>文件<br><code>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;screen and (min-width:768px)&quot;   href=&quot;phone.css&quot; /&gt;</code><br>如果屏幕宽度大于768像素(<code>min-width:768px</code>)就加载<code>pc.css</code>文件</li><li><code>不使用固定的宽度,尽可能使用百分比宽度</code></li><li><code>使用相对大小的字体</code><br>使用rem，相对根元素html字体大小,默认为16像素,所以 1rem = 16px。或者使用em字体大小</li><li><code>图片的自适应(fluid image)</code><br>实现图片的自动缩放<code>img{max-width:100%}</code>,多媒体标签实现自适应<code>object,embed{max-width:100%}</code></li></ul></li><li><code>响应式设计的原则</code><ul><li><code>移动优先</code>  在设计的初期就要考虑页面如何在多终端的展示</li><li><code>渐进增强(progressive enhancement)</code> 针对低版本浏览器进行构建页面，保证最基本的功能，然后再针对高级浏览器进行效果、交互等改进和追加功能达到更好的用户体验,意味着朝前看，同时保证其根基处于安全地带</li><li><code>优雅降级(graceful degradation)</code> 一开始就应该针对那些最高级、最完善的浏览器来设计网站构建完整的功能，然后再针对低版本浏览器进行兼容</li><li><code>区别</code> 优雅降级是从复杂的现状开始，并试图减少用户体验的供给，而渐进增强则是从一个非常基础的，能够起作用的版本开始，并不断扩充，以适应未来环境的需要。降级（功能衰减）意味着往回看；而渐进增强则意味着朝前看，同时保证其根基处于安全地带</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css3 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>html5学习</title>
      <link href="/html5/"/>
      <url>/html5/</url>
      
        <content type="html"><![CDATA[<p><code>Html5</code>特点:代码更加简洁,标签具有语义化,新增了一些属性,代码更加宽松,是互联网的下一代标准,新增了更加丰富且实用的规范, 如: 语义化标签、废除标签、丰富表单控件、拖拽事件、<code>Canvas</code>、<code>SVG矢量图</code>、<code>Video</code>、<code>Audio</code>、<code>触屏touch事件</code>、本地存储、应用缓存等.<br><a id="more"></a></p><h2 id="HTML5新增标签"><a href="#HTML5新增标签" class="headerlink" title="HTML5新增标签"></a>HTML5新增标签</h2><ul><li><p>结构标签:块级元素(<code>有语义的div</code>)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span>    标记定义一个页面或一个区域的头部</span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span>&gt;</span>       标记定义导航链接</span><br><span class="line"><span class="tag">&lt;<span class="name">section</span>&gt;</span>   标记定义一个区域(类似div)</span><br><span class="line"><span class="tag">&lt;<span class="name">aside</span>&gt;</span>     标记定义页面部分的侧边栏</span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span>    标记定义一个页面或一个区域的底部</span><br><span class="line"><span class="tag">&lt;<span class="name">article</span>&gt;</span>   标记定义一篇文章</span><br><span class="line"><span class="tag">&lt;<span class="name">dialog</span>&gt;</span>    标记定义一个会话框</span><br><span class="line"><span class="tag">&lt;<span class="name">hgroup</span>&gt;</span>    标记定义文件中一个区块的相关信息</span><br><span class="line"><span class="tag">&lt;<span class="name">figure</span>&gt;</span>    标记定义一组媒体内容以及他们的解释说明</span><br><span class="line"><span class="tag">&lt;<span class="name">figcaption</span>&gt;</span> 标记定义figure元素的解释说明</span><br></pre></td></tr></table></figure></li><li><p>多媒体标签</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span>&gt;</span>     页面中插入视频内容</span><br><span class="line"><span class="tag">&lt;<span class="name">audio</span>&gt;</span>    页面中插入音频内容</span><br><span class="line"><span class="tag">&lt;<span class="name">source</span>&gt;</span>    可定义多个媒体资源</span><br></pre></td></tr></table></figure></li><li><p>绘图标签</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span>&gt;</span>    绘制图片</span><br><span class="line"><span class="tag">&lt;<span class="name">svg</span>&gt;</span>    矢量图</span><br></pre></td></tr></table></figure></li><li><p>注释标签</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">&lt;ruby&gt;</span>      标记定义注释或音标</span><br><span class="line"><span class="symbol">&lt;rp&gt;</span>    告诉那些不支持Ruby元素的浏览器如何去显示</span><br><span class="line"><span class="symbol">&lt;rt&gt;</span>    标记定义对<span class="keyword">ruby</span>的注释内容文本</span><br></pre></td></tr></table></figure></li><li><p>其他标签</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">&lt;menu&gt;</span>     标记重新定义用户界面的菜单配合commond或者menuitem使用</span><br><span class="line"><span class="symbol">&lt;keygen&gt;</span>   标记定义表单里公钥</span><br><span class="line"><span class="symbol">&lt;mark&gt;</span>   标记定义有<span class="keyword">mark</span>标记的文本(默认为黄色背景)</span><br><span class="line"><span class="symbol">&lt;output&gt;</span>   标记定义一些输出类型,计算表单结果,配合表单事件</span><br><span class="line"><span class="symbol">&lt;time&gt;</span>     标记定义一个日期/时间  没什么用便于seo</span><br><span class="line"><span class="symbol">&lt;address&gt;</span>  标记定义文章或作者的详细信息 默认斜体显示</span><br><span class="line"><span class="symbol">&lt;meter&gt;</span>    状态标签,温度等 &lt;meter <span class="built_in">min</span>=<span class="string">'0'</span> <span class="built_in">max</span>=<span class="string">'45'</span> low=<span class="string">'36'</span> high=<span class="string">'38'</span> value=<span class="string">'35'</span> &gt;&lt;/meter&gt;</span><br><span class="line"><span class="symbol">&lt;progress&gt;</span> 进度条 &lt;progress  <span class="built_in">max</span>=<span class="string">"100"</span>  value=<span class="string">"30"</span>&gt;</span><br><span class="line"><span class="symbol">&lt;datalist&gt;</span> 为<span class="built_in">input</span>定义下拉列表仅在chrome中有效</span><br></pre></td></tr></table></figure></li><li><p>废除元素</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">纯表现 basefont,big,<span class="built_in">center</span>,<span class="built_in">font</span>,s,strike,tt,u</span><br><span class="line">会产生负面影响 frame,frameset,noframes</span><br><span class="line">产生混淆 acronym,applet,isindex,dir</span><br></pre></td></tr></table></figure></li></ul><h2 id="Html5新增表单"><a href="#Html5新增表单" class="headerlink" title="Html5新增表单"></a>Html5新增表单</h2><ul><li><p><code>input</code>表单<code>type</code>属性值</p><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">type</span></span>=<span class="string">"email"</span>     限制用户输入的必须为Email类型</span><br><span class="line"><span class="class"><span class="keyword">type</span></span>=<span class="string">"url"</span>       限制用户输入的必须为url类型</span><br><span class="line"><span class="class"><span class="keyword">type</span></span>=<span class="string">"date"</span>      限制用户输入的必须为日期类型</span><br><span class="line"><span class="class"><span class="keyword">type</span></span>=<span class="string">"datetime"</span>  显示完整日期 含时区</span><br><span class="line"><span class="class"><span class="keyword">type</span></span>=<span class="string">"datetime-local"</span>  显示完整日期  不含时区</span><br><span class="line"><span class="class"><span class="keyword">type</span></span>=<span class="string">"time"</span>      限制用户输入必须为时间类型</span><br><span class="line"><span class="class"><span class="keyword">type</span></span>=<span class="string">"month"</span>     限制用户输入的必须为月类型</span><br><span class="line"><span class="class"><span class="keyword">type</span></span>=<span class="string">"week"</span>      限制用户输入的必须为周类型</span><br><span class="line"><span class="class"><span class="keyword">type</span></span>=<span class="string">"number"</span>    限制用户输入的必须为数字类型</span><br><span class="line"><span class="class"><span class="keyword">type</span></span>=<span class="string">"range"</span>     生成一个滑动条 其他属性</span><br><span class="line"><span class="class"><span class="keyword">type</span></span>=<span class="string">"search"</span>    具有搜索意义的表单result=n的属性</span><br><span class="line"><span class="class"><span class="keyword">type</span></span>=<span class="string">"color"</span>     生成一个颜色选择表单</span><br><span class="line"><span class="class"><span class="keyword">type</span></span>=<span class="string">"tel"</span>       显示电话号码</span><br></pre></td></tr></table></figure></li><li><p>新增表单属性</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">required:</span>        内容不能为空</span><br><span class="line"><span class="symbol">placeholder:</span>     表单提示文字（占位符），输入文字后消失</span><br><span class="line"><span class="symbol">autofocus:</span>       自动聚焦 页面加载之后</span><br><span class="line">pattern          正则表达式</span><br><span class="line">autocomplete     是否保存或提示用户输入值 默认为on 关闭off</span><br></pre></td></tr></table></figure></li><li><p>表单验证反馈</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">invalid 事件  validity对象(valid查看验证是否通过)</span><br><span class="line">input.addEventListener(“invalid”,fn,false)  验证失败时执行函数</span><br><span class="line"><span class="section">阻止默认验证:    ev.preventDefault()</span></span><br><span class="line"><span class="section">关闭验证:        formnovalidate</span></span><br><span class="line"><span class="section">输入值为空时:    valueMissing</span></span><br><span class="line"><span class="section">值与设定类型不匹配:typeMismatch</span></span><br><span class="line"><span class="section">输入值不满足正则: patternMismatch</span></span><br><span class="line"><span class="section">不符合自定义验证: customError</span></span><br><span class="line"><span class="section">自定义验证:      setCustomValidity()</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="Html5拖拽事件"><a href="#Html5拖拽事件" class="headerlink" title="Html5拖拽事件"></a>Html5拖拽事件</h2><ul><li>图片自带拖拽功能, 其他元素可设置<code>draggable</code>属性<code>draggable:true</code></li><li>拖拽元素(被拖拽的元素对象)事件:<br><code>ondragstart</code>  拖拽前触发<br><code>ondrag</code>       拖拽过程中,连续触发<br><code>ondragend</code>    拖拽结束触发</li><li>目标元素(拖拽元素被拖到的对象)事件:<br><code>ondragenter</code>  进入目标元素触发<br><code>ondragover</code>   进入目标,离开目标之间,连续触发<br><code>ondragleave</code>  离开目标元素触发<br><code>ondrop</code>       在目标元素上释放鼠标触发,需要在<code>ondragover</code>里添加阻止默认行为,才可以实现</li><li><p>拖放事件的执行顺序</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Drop不触发  dragstart&gt;drag&gt;dragenter&gt;dragover&gt;dragleave&gt;dragend</span></span><br><span class="line"><span class="comment">// Drop触发时  dragstart&gt;drag&gt;dragenter&gt;dragover&gt;drop&gt;dragend</span></span><br><span class="line"><span class="comment">// (需要在dragover的时候阻止默认行为)</span></span><br><span class="line"><span class="comment">// 拖拽的兼容问题 在火狐浏览器中需设置dataTransfer对象才可以拖拽除图片外的标签</span></span><br></pre></td></tr></table></figure></li><li><p><code>dataTransfer</code>对象下的属性有:<br><code>setData()</code> 设置数据key和value(必须是字符串)<br><code>getData()</code> 获取数据 根据key获取对应的value<br><code>effectAllowed(none,copy,copyLink,copyMove,link,linkMove,move,all,uninitialized)</code>  设置光标样式<br><code>files</code> 获取外部拖拽的文件,返回filesList列表,在filesList下有个type属性,返回文件的类型</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">odiv1.ondragstart = <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> ev = ev || <span class="built_in">window</span>.event</span><br><span class="line">  ev.dataTransfer.setData(<span class="string">'data'</span>, <span class="string">'odiv1'</span>)</span><br><span class="line">&#125;</span><br><span class="line">odiv2.ondrop = <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> ev = ev || <span class="built_in">window</span>.event</span><br><span class="line">  ev.dataTransfer.getData(<span class="string">'data'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>图片上传与拖拽</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1.获取外部的拖拽的文件  file=ev.dataTransfer.files</span></span><br><span class="line"><span class="comment">2.新建一个文件读取对象  re=new FileReader()</span></span><br><span class="line"><span class="comment">3.读取拖拽进来的文件    re.readAsDataURL(file[0])</span></span><br><span class="line"><span class="comment">4.读取文件完成触发函数  re.onload=function()&#123;&#125;</span></span><br><span class="line"><span class="comment">5.取得读取到的数据      this.result</span></span><br><span class="line"><span class="comment">6.创建img标签 将取得数据赋值给img的src属性</span></span><br><span class="line"><span class="comment">7.将img对象添加到目标对象中</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">odiv3.ondrop = <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> ev = ev||<span class="built_in">window</span>.event</span><br><span class="line">  ev.preventDefault()</span><br><span class="line">  <span class="keyword">this</span>.indexHTML = <span class="string">''</span></span><br><span class="line">  <span class="keyword">var</span> file = ev.dataTransfer.files <span class="comment">// 获取外部拖拽的文件</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;file.length;i++) &#123; <span class="comment">// 遍历上传的文件</span></span><br><span class="line">    <span class="keyword">if</span>(file[i].type.indexOf(<span class="string">'image'</span>) &gt; <span class="number">-1</span>)&#123;<span class="comment">// 判断是否是图片类型</span></span><br><span class="line">      <span class="keyword">var</span> re = <span class="keyword">new</span> FileReader() <span class="comment">// 新建文件读取对象</span></span><br><span class="line">      re.readAsDataUrl(file[i]) <span class="comment">// 读取文件</span></span><br><span class="line">      re.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.result)</span><br><span class="line">        <span class="keyword">var</span> img = doucment.createElement(<span class="string">'img'</span>) <span class="comment">// 创建图片对象</span></span><br><span class="line">        img.src = <span class="keyword">this</span>.result <span class="comment">// 将读取到的文件数据赋值给img对象</span></span><br><span class="line">        odiv3.appendchild(<span class="string">'img'</span>) <span class="comment">// 将img对象添加到拖拽的目标对象odiv3上</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      alert(<span class="string">'请上传图片类型'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="Html5canvas绘图"><a href="#Html5canvas绘图" class="headerlink" title="Html5canvas绘图"></a>Html5canvas绘图</h2><ul><li>canvas标签 <code>&lt;canvas id=&quot;can&quot; width=&quot;300px&quot; height=&quot;300px&quot;&gt;&lt;/canvas&gt;</code><br><code>canvas元素本身是没有绘图能力的,所有的绘制工作必须在javascript中进行完成,拥有多种绘制图形,字符,图像的方法</code></li><li>canvas绘图环境设置<br><code>cxt=getContext(&quot;2d&quot;)</code> 目前只支持2d绘图环境(获取图形上下文)</li><li><p>绘制路径</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cxt.beginPath()   开始路径</span><br><span class="line">cxt.closePath()   结束路径</span><br><span class="line"><span class="comment">// 注:画每个图形最好都加上beginPath()和closePath()否则,会出现所有图形都连在一起,就是因为没有结束路径</span></span><br><span class="line">cxt.rect(x,y,w,h) 矩形路径</span><br><span class="line">cxt.save()        保存路径 新开辟一个空间来绘制图形 保存之前的画布内容</span><br><span class="line">cxt.restore()     恢复路径 释放之前的画布内容</span><br></pre></td></tr></table></figure></li><li><p>设置绘图样式和方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cxt.moveTo(x,y)        将触笔移动(x,y)点</span><br><span class="line">cxt.lineTo(x,y)        绘制到(x,y)点</span><br><span class="line">cxt.stroke()           用触笔方法画线</span><br><span class="line">cxt.fill()             用填充方法画线</span><br><span class="line">cxt.fillStyle=”green”  设置图形(填充)方法样式的颜色</span><br><span class="line">cxt.strokeStyle=”blue” 设置边框(触笔)方法的颜色</span><br><span class="line">cxt.lineWidth=<span class="number">10</span>       触笔的宽度(线宽)</span><br></pre></td></tr></table></figure></li><li><p>绘制线段</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cxt.moveTo(x,y)        绘制线段的起点</span><br><span class="line">cxt.lineTo(x,y)        绘制线段的终点</span><br><span class="line">cxt.stroke()           使用触笔方法划线段</span><br></pre></td></tr></table></figure></li><li><p>绘制矩形</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cxt.fillRect(x,y,w,h)    填充方法绘制实心矩形 x,y起点坐标 w宽 h高</span><br><span class="line">cxt.strokeRect(x,y,w,h) 触笔方法绘制空心矩形</span><br><span class="line">cxt.clearRect(x,y,w,h)  清除画布内容</span><br><span class="line"><span class="comment">// 当同时使用这两方法时,前面绘制的内容会被后面的覆盖</span></span><br></pre></td></tr></table></figure></li><li><p>图形边界样式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lineJoin 边界连接点的样式 miter(默认值) round(圆角) bevel(斜角)</span></span><br><span class="line"><span class="comment">// lineCap  端点样式 butt(默认值) round(圆角) square(长度多出线宽一半)</span></span><br></pre></td></tr></table></figure></li><li><p>绘制圆形</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ctx.arc(x,y,r,<span class="number">0</span>,<span class="number">360</span>,<span class="literal">false</span>)</span><br><span class="line"><span class="comment">// x,y  圆心坐标位置 r 圆半径  0,360 从0度到360度绘制一个圆形</span></span><br><span class="line"><span class="comment">// true/false  顺时针/逆时针绘图</span></span><br><span class="line"><span class="comment">// 注: 0,360  这是弧度制 角度*PI/180</span></span><br></pre></td></tr></table></figure></li><li><p>绘制曲线</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ctx.arcTo(x1,y1,x2,y2,r)</span><br><span class="line"><span class="comment">// x1,y1 坐标一 x2,y2 坐标二 r圆弧半径</span></span><br><span class="line">ctx.quadraticCurveTo(dx,dy,x1,y1)</span><br><span class="line"><span class="comment">// 贝塞尔曲线dx,dy控制点x1,y1 结束点</span></span><br><span class="line">ctx.BezierCurveTo(dx1,dy1,dx2,dy2,x1,y1)</span><br><span class="line"><span class="comment">// 贝塞尔曲线: dx1,dy1 控制点一 dx2,dy2 控制点二 x1,y1 结束点</span></span><br></pre></td></tr></table></figure></li><li><p>Canvas变换</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ctx.translate(x,y)  <span class="comment">// 从起始点为基准,移动到当前位置</span></span><br><span class="line">ctx.rotate(弧度)    <span class="comment">//旋转,弧度公式 角度*PI/180</span></span><br><span class="line">ctx.scale(wb,hb)    <span class="comment">//缩放比例(缩放canvas绘制的图片)</span></span><br></pre></td></tr></table></figure></li><li><p>绘制图片</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">drawImage(img,x,y,w,h)</span><br><span class="line"><span class="comment">// 绘制图片(图片,x坐标,y坐标,宽度,高度)</span></span><br><span class="line"><span class="comment">// 绘制图片时,要图片预加载之后再绘制,否则会因缓存而加载不出</span></span><br><span class="line"><span class="keyword">var</span> can = <span class="built_in">document</span>.getElementById(<span class="string">'can'</span>)</span><br><span class="line"><span class="keyword">var</span> ctx = can.getContext(<span class="string">"2d"</span>)</span><br><span class="line"><span class="keyword">var</span> img = <span class="keyword">new</span> Iamge()</span><br><span class="line">img.src = <span class="string">'images/1.jpg'</span></span><br><span class="line">img.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  ctx.drawImage(img, <span class="number">0</span>, <span class="number">0</span>, can.width, can.height)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 绘制背景图片</span></span><br><span class="line"><span class="keyword">var</span> can = <span class="built_in">document</span>.getElementById(<span class="string">'can'</span>)</span><br><span class="line"><span class="keyword">var</span> ctx = can.getContext(<span class="string">"2d"</span>)</span><br><span class="line"><span class="keyword">var</span> img = <span class="keyword">new</span> Iamge()</span><br><span class="line">img.src = <span class="string">'images/1.jpg'</span></span><br><span class="line">img.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  ctx.fillStyle(ctx.createPattern(img, <span class="string">'no-repeat'</span>))</span><br><span class="line">  ctx.fillReact(<span class="number">0</span>, <span class="number">0</span>, can.width, can.height)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>渐变</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 线性渐变</span></span><br><span class="line"><span class="comment">// createLinearGradient(x1,y1,x2,y2) // x1,y1 起始坐标点 x2,y2 结束坐标点</span></span><br><span class="line"><span class="comment">// addColorStop(位置,颜色) //渐变点: 位置:渐变点 0~1之间 可多个</span></span><br><span class="line"><span class="keyword">var</span> can = <span class="built_in">document</span>.getElementById(<span class="string">'can'</span>)</span><br><span class="line"><span class="keyword">var</span> ctx = can.getContext(<span class="string">"2d"</span>)</span><br><span class="line"><span class="keyword">var</span> color = ctx.createLinearGradient(<span class="number">50</span>, <span class="number">50</span>, <span class="number">200</span>, <span class="number">200</span>)</span><br><span class="line">color.addColorStop(<span class="number">0</span>, <span class="string">'#f3c'</span>)</span><br><span class="line">color.addColorStop(<span class="number">1</span>, <span class="string">'#03f'</span>)</span><br><span class="line">ctx.fileStyle = color</span><br><span class="line">ctx.fileReact(<span class="number">50</span>, <span class="number">50</span>, <span class="number">200</span>, <span class="number">200</span>)</span><br><span class="line"><span class="comment">// 径向渐变</span></span><br><span class="line"><span class="comment">// createRadialGradient(x1,y1,r1,x2,y2,r2)</span></span><br><span class="line"><span class="comment">// x1,y1,r1  内圆圆心坐标和半径  x2,y2,r2  外圆圆心坐标和半径</span></span><br><span class="line"><span class="keyword">var</span> can = <span class="built_in">document</span>.getElementById(<span class="string">'can'</span>)</span><br><span class="line"><span class="keyword">var</span> ctx = can.getContext(<span class="string">"2d"</span>)</span><br><span class="line"><span class="keyword">var</span> color = ctx.createLinearGradient(<span class="number">150</span>, <span class="number">150</span>, <span class="number">50</span>, <span class="number">150</span>, <span class="number">150</span>, <span class="number">100</span>)</span><br><span class="line">color.addColorStop(<span class="number">0</span>, <span class="string">'blue'</span>)</span><br><span class="line">color.addColorStop(<span class="number">0.5</span>, <span class="string">'red'</span>)</span><br><span class="line">color.addColorStop(<span class="number">1</span>, <span class="string">'yellow'</span>)</span><br><span class="line">ctx.fileStyle = color</span><br><span class="line">ctx.beginPath()</span><br><span class="line">ctx.arc(<span class="number">150</span>, <span class="number">150</span>, <span class="number">100</span>, <span class="number">0</span>, <span class="number">360</span>, <span class="literal">false</span>)</span><br><span class="line">ctx.closePath()</span><br><span class="line">ctx.fill()</span><br></pre></td></tr></table></figure></li><li><p>导出<code>canvas</code>图片</p><ol><li>火狐,谷歌浏览器右键菜单可直接导出为图片</li><li><code>img.src=can.toDataURL()</code>  //导出图片</li></ol></li><li><p>绘制文本</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// strokeText(文本,x,y)    绘制空心文本</span></span><br><span class="line"><span class="comment">// fillText(文本,x,y)       绘制实心文本</span></span><br><span class="line"><span class="comment">// font="font-size font-family"  注 尺寸字体缺一不可</span></span><br><span class="line"><span class="comment">// textAlign=""  文本左右对齐方式 // start center end left right</span></span><br><span class="line"><span class="comment">// textBaseline="" 文本上下对齐方式</span></span><br><span class="line">    <span class="comment">// alphabetic 默认 文本基线时普通字母的字母基线</span></span><br><span class="line">    <span class="comment">// top 文本基线是em方框的顶端</span></span><br><span class="line">    <span class="comment">// hanging 文本基线是悬挂基线</span></span><br><span class="line">    <span class="comment">// middle  文本基线是em方框的正中</span></span><br><span class="line">    <span class="comment">// ideographic 文本基线是表意基线</span></span><br><span class="line">    <span class="comment">// bottom  文本基线是em方框的底端</span></span><br><span class="line"><span class="comment">// measureText(文本).width  文本的实际宽度(只有宽度值)</span></span><br></pre></td></tr></table></figure></li><li><p>绘制阴影</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// shadowOffsetX,shadowOffsetY  x轴,y轴偏移</span></span><br><span class="line"><span class="comment">// shadowBlur   阴影模糊度</span></span><br><span class="line"><span class="comment">// shadowColor  阴影颜色  默认颜色 rgba(0,0,0,0)</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="HTML5-SVG矢量图"><a href="#HTML5-SVG矢量图" class="headerlink" title="HTML5 SVG矢量图"></a>HTML5 SVG矢量图</h2><ul><li><code>SVG</code>指可伸缩矢量图形,图像在放大和缩小时,图形质量不会损失,是使用<code>XML</code>来描述二维图形和绘图程序的语言</li><li><code>&lt;svg xmlns=”http://www.w3.org/2000/svg” version=”1.1”&gt;&lt;/svg&gt;</code></li><li><p>svg圆形</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;circle cx=<span class="string">"50"</span> cy=<span class="string">"50"</span> r=<span class="string">"30"</span> stroke=<span class="string">"red"</span> stroke-wodth=<span class="string">""</span></span><br><span class="line">  fill=<span class="string">"none/transparent"</span>  style=<span class="string">""</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">circle</span>&gt;</span></span></span><br><span class="line"><span class="comment">// 圆心坐标 cx,cy  半径 r  fill stroke stroke-width style 样式</span></span><br></pre></td></tr></table></figure></li><li><p>svg矩形</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;rect width=<span class="string">"90"</span> height=<span class="string">"90"</span> x=<span class="string">"200"</span> y=<span class="string">"10"</span> stroke=<span class="string">"red"</span></span><br><span class="line">stroke-width=<span class="string">"5"</span> fill=<span class="string">"transparent"</span> rx=<span class="string">"20"</span></span><br><span class="line">ry=<span class="string">"20"</span> stroke-opacity=<span class="string">"0.7"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span></span><br><span class="line"><span class="comment">// 宽/高 width/height  起始点 x,y  圆角 rx,ry  透明stroke-opacity</span></span><br></pre></td></tr></table></figure></li><li><p>svg线段</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;line x1=<span class="string">"50"</span> y1=<span class="string">"50"</span> x2=<span class="string">"150"</span> y2=<span class="string">"150"</span></span><br><span class="line">stroke=<span class="string">"red"</span> stroke-opacity=<span class="string">"0.7"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">line</span>&gt;</span></span></span><br><span class="line"><span class="comment">// 起始坐标 x1,y1  终止坐标 x2,y2</span></span><br></pre></td></tr></table></figure></li><li><p>svg折线</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;polyline points=<span class="string">"50 50 50 150 150 50 150 150"</span></span><br><span class="line">stroke=<span class="string">"red"</span> fill=<span class="string">"none"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">polyline</span>&gt;</span></span></span><br><span class="line"><span class="comment">// 空格或逗号隔开多个点</span></span><br></pre></td></tr></table></figure></li><li><p>svg多边形</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;polygon points=<span class="string">"50 50 50 150 150 50 150 150"</span></span><br><span class="line">stroke=<span class="string">"red"</span> fill=<span class="string">"none"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">polygon</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p>Text标签</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;text x=<span class="string">"150"</span> y=<span class="string">"150"</span> font-size=<span class="string">"40px"</span> text-anchor=<span class="string">"middle"</span>&gt;文字&lt;<span class="regexp">/text&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 起始位置 x,y  对齐方式 text-anchor:start/</span>end/middle</span><br></pre></td></tr></table></figure></li><li><p>Path路径</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;path d=<span class="string">"M50 50L150 30L200 100"</span> stroke=<span class="string">"red"</span></span><br><span class="line">stroke-width=<span class="string">"5"</span> fill=<span class="string">"none"</span>&gt; <span class="xml"><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span></span><br><span class="line"><span class="comment">// M(起始坐标)   L(结束坐标)  H(水平线)  V(垂直线)  Z(闭合路劲)</span></span><br><span class="line"><span class="comment">// C,S,Q,T(贝塞尔曲线)   A(圆弧)</span></span><br><span class="line"><span class="comment">// 大写为绝对坐标(具体的位置坐标)</span></span><br><span class="line"><span class="comment">// 小写为相对坐标(相对于起始点的具体长度)</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="HTML5视频video"><a href="#HTML5视频video" class="headerlink" title="HTML5视频video"></a>HTML5视频video</h2><ul><li><code>&lt;video src=&quot;xxx.mp4&quot; controls autoplay width=&quot;500&quot; height=&quot;500&quot; Preload=”preload” poster=”1.jpg”  loop=”loop”&gt;&lt;/video&gt;</code></li><li><p>Video的属性</p><figure class="highlight hsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Autopaly  视频加载完成后自动播放</span><br><span class="line">Controls  向用户显示播放控件(必须设定)</span><br><span class="line"><span class="keyword">Width</span>     设置播放器宽度</span><br><span class="line">Height    设置播放器高度</span><br><span class="line"><span class="keyword">Loop</span>      播放完是否继续播放该视频,循环播放</span><br><span class="line">Preload   页面加载时就加载视频,并预备播放</span><br><span class="line">Src       视频url地址</span><br><span class="line">Poster    加载等待的画面图片poster=”url”</span><br><span class="line">Autobuffer 设置为浏览器缓冲方式,不设置autoplay才有效</span><br></pre></td></tr></table></figure></li><li><p>video对象方法<br><code>vid.paly() 播放 vid.pause() 暂停  vid.load() 重新加载</code></p></li><li>video对象属性<figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">currentTime:  开始到播放现在所用的时间</span><br><span class="line">duration:     媒体总时间(只读)</span><br><span class="line">volume:       0.0<span class="string">-1</span>.0de 音量相对值</span><br><span class="line">muted:        是否静音false/true</span><br><span class="line">paused:       媒体是否暂停(只读)</span><br><span class="line">ended:        媒体是否播放完毕(只读)</span><br><span class="line"><span class="keyword">error:        </span>媒体发生错误的时候,返回错误代码(只读)</span><br><span class="line">currentSrc:   以字符串的形式返回媒体地址(只读)</span><br></pre></td></tr></table></figure></li></ul><h2 id="HTML5音频audio"><a href="#HTML5音频audio" class="headerlink" title="HTML5音频audio"></a>HTML5音频audio</h2><ul><li><code>&lt;audio src=&quot;xxx.mp4&quot; controls autoplay&gt;</code></li><li>audio 属性<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">autoplay</span>=<span class="string">"autoplay"</span>  加载完自动播放</span><br><span class="line"><span class="attr">controls</span>=<span class="string">"controls"</span>  显示用户控件</span><br><span class="line"><span class="attr">preload</span>=<span class="string">"preload"</span>    页面加载时加载音频,并预备播放</span><br><span class="line"><span class="attr">src</span>=<span class="string">"url"</span>            要播放的音频的URL</span><br></pre></td></tr></table></figure></li></ul><h2 id="HTML新增touch事件"><a href="#HTML新增touch事件" class="headerlink" title="HTML新增touch事件"></a>HTML新增touch事件</h2><ul><li><p>触屏事件<code>touch</code></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">touchstart</span>   当手指触摸到屏幕时触发</span><br><span class="line">touchmove  手指在屏幕上移动时触发</span><br><span class="line">touchend   手指离开屏幕时触发</span><br><span class="line">touchenter  当触点进入某个元素时触发</span><br><span class="line">touchleaver  当触点离开某个元素时触发</span><br><span class="line">touchcancel  当触点由于某些原因被中断时触发</span><br></pre></td></tr></table></figure></li><li><p>触屏事件对象<code>touchEvent</code></p><figure class="highlight tp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">touches  当前位于手机屏幕上的所有手指列表  最多<span class="number">5</span>个手指</span><br><span class="line">targetTouches  位于当前的元素上的手指的列表</span><br><span class="line">changeTouches 涉及当前事件的手指列表</span><br><span class="line">clientX  触摸目标在视窗中的<span class="keyword">X</span>坐标</span><br><span class="line">clientY  触摸目标在视窗中的<span class="keyword">Y</span>坐标</span><br><span class="line">identifier  标识触摸的唯一ID</span><br><span class="line">pageX  触摸目标在页面中的<span class="keyword">X</span>坐标</span><br><span class="line">pageY  触摸目标在页面中的<span class="keyword">Y</span>坐标</span><br><span class="line">screenX 触目目标在屏幕中的<span class="keyword">X</span>坐标</span><br><span class="line">screenY 触摸目标在屏幕中的<span class="keyword">Y</span> 坐标</span><br><span class="line">target  触摸的DOM节点目标</span><br></pre></td></tr></table></figure></li></ul><h2 id="Html5-新增JS特性"><a href="#Html5-新增JS特性" class="headerlink" title="Html5 新增JS特性"></a>Html5 新增JS特性</h2><ul><li><p>获取<code>class</code>列表属性</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &lt;div class=”div1 div2 div3”&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="keyword">var</span> odiv = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'div'</span>)</span><br><span class="line">odiv.classlist   <span class="comment">//div1 div2 div3</span></span><br><span class="line">odiv.classlist.length    <span class="comment">//3</span></span><br><span class="line">odiv.classlist.add(<span class="string">"div4"</span>)  <span class="comment">// 添加class类</span></span><br><span class="line">odiv.classlist.item(<span class="number">2</span>)  <span class="comment">// 返回类名在元素中的索引值从0开始</span></span><br><span class="line">odiv.classlist.remove(<span class="string">"div2"</span>,<span class="string">"div4"</span>)  <span class="comment">//移除多个class类</span></span><br><span class="line">odiv.classlist.toggle(<span class="string">"div5"</span>)   <span class="comment">// 有class类则移除没有则添加</span></span><br><span class="line">odiv.classList.contains(<span class="string">"div2"</span>) <span class="comment">// 是否包含某个类名</span></span><br></pre></td></tr></table></figure></li><li><p>新增选择器</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">"#div|.cnt|div|css选择器"</span>) <span class="comment">//只能返回一组中的第一个元素</span></span><br><span class="line"><span class="built_in">document</span>.querySelectorAll(“css选择器”) <span class="comment">// 可以获取一组元素</span></span><br><span class="line"><span class="built_in">document</span>.getElementsByClassName(<span class="string">"box"</span>)  <span class="comment">// IE9以下不兼容</span></span><br></pre></td></tr></table></figure></li><li><p>获取自定义属性</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&lt;div id="div1" data-tew='自定义属性' data-tew-all='多节自定义属性'&gt;自定义属性获取&lt;/div&gt;</span></span><br><span class="line"><span class="keyword">var</span> oDiv = <span class="built_in">document</span>.querySelector(<span class="string">'#div1'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(oDiv.dataset.tew)</span><br><span class="line"><span class="built_in">console</span>.log(oDiv.dataset.tewAll)</span><br></pre></td></tr></table></figure></li></ul><h2 id="Html5本地存储"><a href="#Html5本地存储" class="headerlink" title="Html5本地存储"></a>Html5本地存储</h2><ul><li><p><code>sessionStorage</code> 会话存储</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 生命周期为关闭浏览器窗口  关闭窗口数据销毁 在同一个窗口下数据可以共享</span></span><br><span class="line">sessionStorage.getItem(key)  <span class="comment">// 获取存储数据</span></span><br><span class="line">sessionStorage.setItem(key,value) <span class="comment">// 设置存储数据</span></span><br><span class="line">sessionStorage.removeItem(key)  <span class="comment">// 删除存储数据</span></span><br><span class="line">sessionStorage.clear()  <span class="comment">// 清除存储数据</span></span><br></pre></td></tr></table></figure></li><li><p><code>localStorage</code> 本地存储</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 永久生效，除非手动删除，清理垃圾，存储在磁盘上,可以在多窗口共享</span></span><br><span class="line"><span class="comment">// 只能存储字符串，可以将对象JSON.stringify()之后在存储,可能存储在浏览器内存和硬盘上</span></span><br><span class="line">localStorage.setItem(key, walue) <span class="comment">// 设置储存内容</span></span><br><span class="line">localStorage.getItem(key) <span class="comment">// 获取存储数据</span></span><br><span class="line">localStorage.removeItem(key) <span class="comment">// 删除key</span></span><br><span class="line">localStorage.clear() <span class="comment">// 清除所有数据</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="HTML5-历史管理history"><a href="#HTML5-历史管理history" class="headerlink" title="HTML5 历史管理history"></a>HTML5 历史管理history</h2><ul><li><p><code>history.pushState()</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location.href <span class="comment">// http://192.168.5.16:8000</span></span><br><span class="line">history.pushState(&#123;&#125;, <span class="string">''</span>, <span class="string">'/foo'</span>) <span class="comment">// http://192.168.5.16:8000/foo</span></span><br><span class="line">history.pushState(&#123;&#125;, <span class="string">''</span>, <span class="string">'/'</span>) <span class="comment">// http://192.168.5.16:8000</span></span><br></pre></td></tr></table></figure></li><li><p><code>history.replaceState()</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location.href <span class="comment">// http://192.168.5.16:8000</span></span><br><span class="line">history.replaceState(&#123;&#125;, <span class="string">''</span>, <span class="string">'/foo'</span>) <span class="comment">// http://192.168.5.16:8000/foo</span></span><br><span class="line">history.pushState(&#123;&#125;, <span class="string">''</span>, <span class="string">'/'</span>) <span class="comment">// http://192.168.5.16:8000</span></span><br></pre></td></tr></table></figure></li><li><p><code>history.go(number)</code> 回退到指定历史记录</p></li><li><code>history.back()</code> 等价于 history.go(-1)</li><li><code>history.forward()</code> 则等价于 history.go(1)</li></ul>]]></content>
      
      
      <categories>
          
          <category> html </category>
          
      </categories>
      
      
        <tags>
            
            <tag> html5 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>bootstrap学习</title>
      <link href="/bootstrap%E5%AD%A6%E4%B9%A0/"/>
      <url>/bootstrap%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p><code>Bootstrap</code> 是最受欢迎的 <code>HTML</code>、<code>CSS</code> 和 <code>JS</code> 框架，用于开发响应式布局、移动设备优先的 <code>WEB</code> <code>项目。Bootstrap</code> 让前端开发更快速、简单。所有开发者都能快速上手且应用广泛。<br><a id="more"></a></p><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><ul><li><a href="http://v3.bootcss.com/" target="_blank" rel="noopener">官网地址</a>和<a href="http://expo.bootcss.com/" target="_blank" rel="noopener">官方实例</a></li><li><p>使用CDN</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 最新版本的 Bootstrap 核心 CSS 文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://cdn.jsdelivr.net/npm/bootstrap@3.3.5/dist/css/bootstrap.min.css"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 可选的 Bootstrap 主题文件（一般不用引入） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://cdn.jsdelivr.net/npm/bootstrap@3.3.5/dist/css/bootstrap-theme.min.css"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 最新的 Bootstrap 核心 JavaScript 文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/bootstrap@3.3.5/dist/js/bootstrap.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>下载 用于生产环境的bootstrap之后解压 本地引入<br><code>以移动设备为优先 窗口和设备的屏幕一致,初始缩放100% 禁止用户双击</code><br><img src="/image/other/bootstrap.png" alt="bootstrap"><br><code>注:bootstrap是基于jquery开发的所以在引入bootstrap.js文件之前需要加入jquery文件</code><br><img src="/image/other/bootstrap1.png" alt="bootstrap1"><br><code>下载的Bootstrap的基本文件结构：编译好的 CSS 和 JS (bootstrap.*) 文件，经过压缩的 CSS 和 JS (bootstrap.min.*) 文件。CSS 源码映射表 (bootstrap.*.map) 。fonts下 Glyphicons 的图标字体文件.</code><br><img src="/image/other/bootstrap2.png" alt="bootstrap2"></p></li></ul><h2 id="布局容器"><a href="#布局容器" class="headerlink" title="布局容器"></a>布局容器</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">”container”</span>&gt;</span> 固定宽度 1170px   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">”container-fulid”</span>&gt;</span> 宽度为100%   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="排版的标签"><a href="#排版的标签" class="headerlink" title="排版的标签"></a>排版的标签</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">”page-header”</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>  36px</span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span>  30px</span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span><span class="tag">&lt;/<span class="name">h3</span>&gt;</span>  24px</span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span>&gt;</span><span class="tag">&lt;/<span class="name">h4</span>&gt;</span>  18px</span><br><span class="line"><span class="tag">&lt;<span class="name">h5</span>&gt;</span><span class="tag">&lt;/<span class="name">h5</span>&gt;</span>  14px</span><br><span class="line"><span class="tag">&lt;<span class="name">h6</span>&gt;</span><span class="tag">&lt;/<span class="name">h6</span>&gt;</span>  12px</span><br><span class="line">.h1,.h2,.h3,.h4,.h5,.h6  模拟h标签的样式</span><br><span class="line">.page-header 设置页头  给标题加一个分隔线</span><br><span class="line"><span class="tag">&lt;<span class="name">small</span>&gt;</span><span class="tag">&lt;/<span class="name">small</span>&gt;</span> 副标题 小一号</span><br><span class="line"><span class="tag">&lt;<span class="name">big</span>&gt;</span><span class="tag">&lt;/<span class="name">big</span>&gt;</span>副标题 大一号</span><br><span class="line"><span class="tag">&lt;<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">strong</span>&gt;</span>推荐使用的加粗</span><br><span class="line"><span class="tag">&lt;<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">em</span>&gt;</span>推荐使用的倾斜</span><br><span class="line"><span class="tag">&lt;<span class="name">del</span>&gt;</span><span class="tag">&lt;/<span class="name">del</span>&gt;</span>删除线</span><br></pre></td></tr></table></figure><h2 id="文本对齐方式"><a href="#文本对齐方式" class="headerlink" title="文本对齐方式"></a>文本对齐方式</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text-left"</span>&gt;</span>文字左对齐<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text-center"</span>&gt;</span>文字居中对齐<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text-right"</span>&gt;</span>文字右对齐<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text-justify"</span>&gt;</span>文字两端对齐<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="英文大小写"><a href="#英文大小写" class="headerlink" title="英文大小写"></a>英文大小写</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- .text-uppercase 英文大写 .text-lowercase 英文小写 .text-capitalize 首字母大写 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text-lowercase"</span>&gt;</span>lowercased text<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text-uppercase"</span>&gt;</span>UPPERCASED TEXT<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text-capitalize"</span>&gt;</span>Capitalized Text<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"list-inline"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>.list-unstyled  去掉列表前面的符号 和去掉原有的格式<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"list-inline"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>.list-inline 把li进行横向排列<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- .dl-horizontal  设置变成横向排列 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dl</span> <span class="attr">class</span>=<span class="string">"dl-horizontal"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dt</span>&gt;</span>自定义列表<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>自定义列表项<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.table 表格的一个基类</span><br><span class="line">.table-bordered  给表格加外边框 为表格和其中的每个单元格增加边框。</span><br><span class="line">.table-hover 鼠标放上去的悬停效果 放在行或单元格 背景变色</span><br><span class="line">.table-striped 隔行换色 条纹状表格</span><br><span class="line">.table-condensed   改变单元格的padding值  使表格变得紧凑些</span><br><span class="line">.table-responsive 给table的父元素加以移动设备为优先,如果不能显示完全的显示 会出现滚动条</span><br><span class="line">注: 状态类设置的是行tr或td</span><br><span class="line">.active 鼠标悬停在行或单元格上时所设置的颜色</span><br><span class="line">.success 标识成功或积极的动作</span><br><span class="line">.info  标识普通的提示信息或动作</span><br><span class="line">.Warning 标识警告或需要用户注意</span><br><span class="line">.danger  标识危险或潜在的带来负面影响的动作</span><br></pre></td></tr></table></figure><h2 id="响应式图片"><a href="#响应式图片" class="headerlink" title="响应式图片"></a>响应式图片</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.img-responseive  响应式图片</span><br><span class="line">.img-rounded 圆角矩形</span><br><span class="line">.img-circle  椭圆形</span><br><span class="line">.img-thumbnail  给图片加圆角的边框</span><br></pre></td></tr></table></figure><h2 id="栅格系统"><a href="#栅格系统" class="headerlink" title="栅格系统"></a>栅格系统</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">将栅格系统一定要放入容器中</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">”container”</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class-</span>“<span class="attr">container-fulid</span>”&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">浏览器窗口自动分配最多12列,是由行row和列col</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bootstrap </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>php基础2</title>
      <link href="/php%E5%9F%BA%E7%A1%802/"/>
      <url>/php%E5%9F%BA%E7%A1%802/</url>
      
        <content type="html"><![CDATA[<p><code>PHP</code>即“超文本预处理器”，是一种通用开源脚本语言。PHP是在服务器端执行的脚本语言，与C语言类似，是常用的网站编程语言，使用广泛，主要适用于Web开发领域， 可植入性强、拓展性强。<br><a id="more"></a></p><h2 id="PHP数组"><a href="#PHP数组" class="headerlink" title="PHP数组"></a>PHP数组</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">把若干变量按有序的形式组织起来的一种集合</span><br><span class="line">数组中存的是多个内容，数组的内容叫做元素 每个元素都是由 键(key下标)和值(value)组成</span><br><span class="line">数组的分类</span><br><span class="line"><span class="number">1.</span>索引数组 下标是数字的</span><br><span class="line"><span class="number">2.</span>关联数组 下标是字符串 能体现该单元的内容</span><br><span class="line">下标默认是从<span class="number">0</span>开始 自动增长的下标都是出现过的最大值加<span class="number">1</span> 关联数组的字符串下标不会影响</span><br><span class="line">索引下标的增长规则 下标重复则后面覆盖前面的值</span><br><span class="line">如果键是浮点数 则转成整数,如果字符串的内容恰好也是整数则理解为整数</span><br><span class="line">ex:</span><br><span class="line">$arr3=<span class="keyword">array</span>(<span class="number">2</span>=&gt;<span class="string">'非'</span>,<span class="number">2.5</span>=&gt;<span class="string">'凡'</span>,<span class="string">'2.5'</span>=&gt;<span class="string">'软'</span>,<span class="string">'2'</span>=&gt;<span class="string">'件'</span>);</span><br><span class="line">    print_r($arr3);<span class="comment">//Array([2]=&gt;'件',[2.5]=&gt;'软')</span></span><br><span class="line">$arr3=<span class="keyword">array</span>(<span class="number">2</span>=&gt;<span class="string">'非'</span>,<span class="number">2.5</span>=&gt;<span class="string">'凡'</span>,<span class="string">'2.5'</span>=&gt;<span class="string">'软'</span>,<span class="string">'2'</span>=&gt;<span class="string">'件'</span>,<span class="string">'2x'</span>=&gt;<span class="string">'逗'</span>);</span><br><span class="line">    print_r($arr3);<span class="comment">//Array([2]=&gt;'件',[2.5]=&gt;'软',[2x]=&gt;'逗')</span></span><br><span class="line"><span class="number">0.</span>使用数组标识符[]声明</span><br><span class="line">$arr=[<span class="string">"aaa"</span>,<span class="number">11</span>,<span class="number">2</span>=&gt;<span class="number">22</span>,<span class="string">"bbb"</span>]  <span class="comment">//适用于php5.4以后</span></span><br><span class="line"><span class="number">2.</span>使用<span class="keyword">array</span>()函数声明</span><br><span class="line">$arr=<span class="keyword">array</span>(<span class="string">"aaa"</span>,<span class="number">2</span>=&gt;<span class="string">"bbb"</span>,<span class="string">"one"</span>=&gt;<span class="string">"ccc"</span>)</span><br><span class="line"><span class="number">3.</span>直接一个个赋值声明</span><br><span class="line">删除数组中的某个元素<span class="keyword">unset</span>()但数组不会重建索引，使用array_values()函数重建索引</span><br><span class="line">二维数组：数组元素的本身仍是数组</span><br><span class="line">访问二维数组中的某个元素 $arr[<span class="number">2</span>][<span class="string">"age"</span>]</span><br><span class="line">数组的长度或个数count($arr) count($str)如果是字符串无论是否为空都返回int <span class="number">1</span></span><br><span class="line">数组的遍历</span><br><span class="line"><span class="number">1.</span>使用<span class="keyword">for</span>循环遍历数组   只针对递增的索引数组</span><br><span class="line">  一定是下标连续的索引数组，不能遍历关联数组，操作的是数组的一个备份</span><br><span class="line"><span class="number">2.</span>使用<span class="keyword">foreach</span>遍历数组</span><br><span class="line"><span class="keyword">foreach</span>(数组 <span class="keyword">as</span> 值变量)&#123;&#125;</span><br><span class="line"><span class="keyword">foreach</span>(数组 <span class="keyword">as</span> 下标变量=&gt;值变量)&#123;&#125;</span><br><span class="line"><span class="number">3.</span>使用<span class="keyword">list</span>()函数遍历数组 用数组的值为多个变量赋值</span><br><span class="line">  <span class="keyword">list</span>($name,$age,$sex)=arr(<span class="string">"zhang"</span>,<span class="string">"25"</span>,<span class="string">"男"</span>);</span><br><span class="line">  a.<span class="keyword">list</span>右边只能是一个数组，参数必须是变量，不能是值</span><br><span class="line">  b.只能将下标是从<span class="number">0</span>开始且连续的索引数组转为变量</span><br><span class="line">  c.可以在<span class="keyword">list</span>()参数中通过空项选择性的接收数组元素</span><br><span class="line"><span class="number">4.</span>使用each()函数遍历</span><br><span class="line">  each($arr);参数是一个数组，返回的值也是一个数组固定有四个元素</span><br><span class="line">  <span class="keyword">array</span>(<span class="number">1</span>=&gt;<span class="string">"zhang"</span>,<span class="string">"value"</span>=&gt;<span class="string">"zhang"</span>,<span class="number">0</span>=&gt;<span class="string">"name"</span>,<span class="string">"key"</span>=&gt;<span class="string">"name"</span>)</span><br><span class="line">  each()只处理当前指针所在的位置， 处理完后指向下一个元素，如果</span><br><span class="line">  已经到结束为止了，则返回<span class="keyword">false</span></span><br><span class="line"><span class="number">5.</span>使用each <span class="keyword">list</span>和<span class="keyword">while</span>遍历</span><br><span class="line">  <span class="keyword">while</span>(<span class="keyword">list</span>($key,$value)=each($arr))&#123; <span class="keyword">echo</span> $key,<span class="string">"--"</span>,$value &#125;</span><br><span class="line">数组的指针</span><br><span class="line">next()将指针向后移动一个元素,prev()将指针向前移动一个元素</span><br><span class="line">key()获取当前指针位置,current()获取当前指针所对应的值</span><br><span class="line">end()将指针指向数组最后一个元素并将其取出来,reset()将指针移至第一个索引的位置</span><br><span class="line">超全局数组(变量)  页面的任何位置都可以访问</span><br><span class="line">$_SERVER   包含头信息 路径和脚本位置的数组</span><br><span class="line">$_ENV   $GLOBALS       $_FILES</span><br><span class="line">$_GET 接收用户通过URL向服务器传的参数   $_POST 接收用户通过http协议向服务器传的参数</span><br><span class="line">$_COOKIE      $_SESSION      $_REQUEST</span><br><span class="line">获取IP地址   $_SERVER[<span class="string">"REMOTE_ADDR"</span>]  获取端口号  $_SERVER[<span class="string">"REMOTE_PORT"</span>]</span><br><span class="line">操作数组的函数</span><br><span class="line">a.数组的键/值操作</span><br><span class="line"><span class="number">1.</span>array_values() 返回数组中所有元素的值</span><br><span class="line"><span class="number">1.</span> count($arr)  获取数组的长度</span><br><span class="line"><span class="number">2.</span> array_key_exists($key,$arr) 判断数组中是否存在某个键</span><br><span class="line"><span class="number">3.</span> in_array(<span class="string">"字符"</span>，$arr,<span class="keyword">true</span>) 判断数组中有没有某个元素，<span class="keyword">true</span>类型和值都必须相同，</span><br><span class="line">                              区分大小写，若是数组顺序也要相同</span><br><span class="line"><span class="number">4.</span> array_filp($arr) 交换数组中的键和值 键和值必须是整型或字符串，不能是其他类型</span><br><span class="line">                    原数组不改变</span><br><span class="line"><span class="number">5.</span> array_reverse($arr,<span class="keyword">true</span>)将数组反向 <span class="keyword">true</span>(保留原来的键名只对索引数组有效)原数组不变</span><br><span class="line">array_filter($arr,<span class="string">"函数"</span>)过滤数组中的单元，若无函数则删除所有等值为<span class="keyword">false</span>的单元</span><br><span class="line">sort()对数组按升序排列                rsort()对数组按降序排列 (不保留下标)</span><br><span class="line">ksort()对数组按照键名升序排列         krsort()对数组按照键名降序排列</span><br><span class="line">asort()对数组进行排序并保持索引关系   asort()对数组进行降序排序并保持索引关系</span><br><span class="line">natsort()按自然排序算法对数组进行排序 natsort()按自然排序算法对数组不区分大小写排序</span><br><span class="line">array_multisort()对多个数组或多维数组进行排序</span><br><span class="line">array_pop将数组最后一个单元弹出(出栈) array_push将一个或多个单元压入数组末尾(入栈)</span><br><span class="line">array_shift将数组开头的单元移除(出列) array_unshift在数组开头插入一或多个单元(入列)</span><br><span class="line">array_sum() 求所有数组元素的和  max() 返回数组的最大值  min() 返回数组的最小值</span><br><span class="line">array_product()  返回所有数组的乘积</span><br><span class="line">注:  array_push() array_unshift()  返回数组的长度 原数组改变</span><br><span class="line">数组的合并</span><br><span class="line">可以使用+或array_merge()</span><br><span class="line">使用+合并  会把最先出现的值作为最终结果返回</span><br><span class="line">当键名为数字时,array_merge()不会覆盖掉原来的值,而是附加到后面</span><br><span class="line">当键名为字符时它会覆盖前面的值</span><br><span class="line">注意:数字键形式 <span class="string">'数字'</span> 等价于 数字</span><br></pre></td></tr></table></figure><h2 id="PHP字符串"><a href="#PHP字符串" class="headerlink" title="PHP字符串"></a>PHP字符串</h2><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">单引号和双引号的区别</span><br><span class="line">a.在双引号中可以解析变量(变量被自动替换成数值),而在单引号中不能解析变量</span><br><span class="line">  (按普通字符数出)</span><br><span class="line">b.在双引号中可以使用转义字符 \<span class="keyword">n</span> \\ \$ \' \"  在单引号中不能使用转义字符除了</span><br><span class="line">(转义单引号本身  \'  转义转义符号本身 \\ )</span><br><span class="line">\<span class="keyword">n</span>  在PHP中只有在查看源代码时会看到效果 在页面中无效果</span><br><span class="line">  在使用引号输出变量时最好用&#123;&#125;包含避免变量和后面的字符连在一起</span><br><span class="line">  或者用空格隔开  echo <span class="string">"在第&#123;$a&#125;行中有&#123;$b&#125;个错误"</span>;</span><br><span class="line">c.单引号不需要分析变量.需要转义的也少,速度比双引号快</span><br><span class="line">ASCII码  36(左),37(上),38(右),39(下) 32~126  为可见字符 32为空格</span><br><span class="line">        数字0-9为 47-56   小写字母a-z 97-122 大写字母 A-Z 65-90</span><br><span class="line">符串声明或定义方式</span><br><span class="line">    a.单引号(尽量使用单引号)</span><br><span class="line">    b.双引号  双引号和定界符中的变量都会被解析</span><br><span class="line">    c.定界符&lt;&lt;&lt;  <span class="variable">$str</span>=&lt;&lt;&lt;str</span><br><span class="line">          要输出的字符串</span><br><span class="line">          str;</span><br><span class="line">    str为指定的标识符，结束标识符必须另起一行，前后不能有其他字符或空格，</span><br><span class="line">    在开始和结束标识之间不有注释  定义大段文本</span><br><span class="line">    <span class="keyword">d</span>.字符串的拼接  用.号  <span class="variable">$a</span>.<span class="variable">$b</span> =&gt; <span class="variable">$a</span><span class="variable">$b</span></span><br><span class="line">字符串处理函数可以将其他类型的数据先自动转换成字符串后再处理</span><br><span class="line">1.统计字符串的长度</span><br><span class="line">  a. <span class="built_in">strlen</span>(<span class="variable">$str</span>): 汉字在GBK编码中占2个字节 在UTF-8中占3个字节</span><br><span class="line">  b. mb_strlen(<span class="variable">$str</span>,<span class="string">"gbk"</span>)  统计汉字字符</span><br><span class="line">2.截取字符串</span><br><span class="line">  a.<span class="built_in">substr</span>(<span class="variable">$str</span>,int start,length) 从star开始截取length个字符</span><br><span class="line">    如果start为负数 则从后往前数位置 如果length为负数则代表结束位置</span><br><span class="line">3.echo <span class="variable">$str</span>; <span class="keyword">print</span> <span class="variable">$str</span>; 输出字符串 区别 echo无返回值 可以打印多个</span><br><span class="line">4.printf(%b,%c,%0,<span class="variable">$str</span>,<span class="variable">$str</span>,<span class="variable">$str</span>)格式化输出字符串</span><br><span class="line">5.<span class="built_in">trim</span>()去除字符串两边的空白字符和特殊字符</span><br><span class="line">  <span class="built_in">ltrim</span>()去除字符串左边的空白字符和特殊字符</span><br><span class="line">  <span class="built_in">rtrim</span>()去除字符串右边的空白字符和特殊字符</span><br><span class="line">6.strtolower(<span class="variable">$str</span>)将字符串<span class="variable">$str</span>全部变成小写</span><br><span class="line">  strtoupper(<span class="variable">$str</span>)将字符串<span class="variable">$str</span>全部变成大写</span><br><span class="line">  ucfirst(<span class="variable">$str</span>)将字符串<span class="variable">$str</span>第一个字符改大写</span><br><span class="line">  ucwords(<span class="variable">$str</span>)将字符串<span class="variable">$str</span>每个字的第一个字母大写</span><br><span class="line">7.htmlspecialchars(<span class="variable">$str</span>)将字符串转换成html实体</span><br><span class="line">  strip_tags(<span class="variable">$str</span>)删除html标签</span><br><span class="line">8.strrev()将字符串前后颠倒</span><br><span class="line">9.检索字符串(查询)</span><br><span class="line">  strstr();检索字符串</span><br><span class="line">  stristr()不区分大小写匹配</span><br><span class="line">  strstr(<span class="variable">$str1</span>,<span class="variable">$str2</span>)获取指定字符串<span class="variable">$str2</span>在<span class="variable">$str1</span>中首次出现的位置到末尾的子字符串，</span><br><span class="line">  成功则返回剩余字符串，没找到则返回false 如果加参数true则返回出现位置到前面的字符串</span><br><span class="line">  <span class="built_in">strpos</span>(<span class="variable">$str</span>,<span class="string">"k"</span>) 检索字符在字符串中第一次出现的位置</span><br><span class="line">10.explode(<span class="variable">$str1</span>,<span class="variable">$str</span>,limit)将字符串分割成数组</span><br><span class="line">  如果<span class="variable">$str1</span>为空，则返回false.如果<span class="variable">$str</span>在<span class="variable">$str</span>中找不到则返回包含<span class="variable">$str</span>单个元素的数组</span><br><span class="line">  implode(<span class="variable">$str</span>,<span class="variable">$arr</span>)将数组转换成字符串</span><br><span class="line">11.替换字符串</span><br><span class="line">  a.  str_replace(<span class="variable">$a</span>,<span class="variable">$b</span>,<span class="variable">$str</span>) <span class="variable">$a</span>和<span class="variable">$b</span>可以是字符串也可以是数组</span><br><span class="line">      <span class="keyword">ex</span>:  echo str_replace('死','***',<span class="variable">$str</span>);</span><br><span class="line">  b.  strtr()  替换一批字符串</span><br><span class="line">      <span class="keyword">ex</span>: <span class="variable">$str</span>=<span class="string">"男人,女人,男孩,女孩"</span>;</span><br><span class="line">    echo strtr(<span class="variable">$str</span>,array(<span class="string">"男"</span>=&gt;<span class="string">"女"</span>,<span class="string">"女"</span>=&gt;<span class="string">"男"</span>)); <span class="comment">//女人,男人,女孩,男孩</span></span><br><span class="line"><span class="built_in">strlen</span>(<span class="variable">$str</span>);    <span class="comment">//返回字符串的长度</span></span><br><span class="line">mb_strlen(<span class="variable">$str</span>)  <span class="comment">//以指定的编码格式返回字符串的长度</span></span><br><span class="line">注: <span class="keyword">count</span>(<span class="variable">$str</span>)  无论是否为空都返回1</span><br><span class="line"><span class="built_in">trim</span>(<span class="variable">$str</span>)             过滤字符串前后的空格</span><br><span class="line"><span class="built_in">trim</span>(<span class="variable">$str</span>,<span class="string">" @"</span>)        过滤字符串前后的空格和指定的字符</span><br><span class="line"><span class="built_in">trim</span>(<span class="variable">$str</span>,<span class="string">" a..z"</span>)     过滤字符串前后的空格和指定的字符</span><br><span class="line">ltrim  过滤左边的空格</span><br><span class="line">rtrim  过滤右边的空格</span><br><span class="line">chunk_split()   将字符串分割成小块</span><br><span class="line">chunk_split(<span class="variable">$str</span>,<span class="keyword">n</span>,<span class="string">"--"</span>)  <span class="comment">//ab--cd--ef--</span></span><br><span class="line">一个参数时 表示整个 <span class="keyword">n</span>分割成几块 以--连接</span><br><span class="line">chr(97)  <span class="comment">//a   返回指定字符编码所对应的字符</span></span><br><span class="line">ord('a') <span class="comment">//97  返回指定字符的字符编码</span></span><br><span class="line"><span class="built_in">substr</span>(<span class="variable">$str</span>,start,[length])</span><br><span class="line">1.如果没有length 则返回从start开始到结束所有的字符</span><br><span class="line"><span class="keyword">ex</span>: echo <span class="built_in">substr</span>(<span class="string">"abcdef"</span>,1);    <span class="comment">//bcdef</span></span><br><span class="line">2.如果start为负 则从结尾处开始截取</span><br><span class="line"><span class="keyword">ex</span>: echo <span class="built_in">substr</span>(<span class="string">"abcdef"</span>,-2,3)  <span class="comment">//ef</span></span><br><span class="line">3.如果length为负 则表示结束位置</span><br><span class="line"><span class="keyword">ex</span>: echo <span class="built_in">substr</span>(<span class="string">"abcdef"</span>,-4,-1) <span class="comment">//cde</span></span><br><span class="line">4.如果start大于字符串的长度  则返回false</span><br><span class="line"><span class="keyword">ex</span>: var_dump(<span class="built_in">substr</span>(<span class="string">"abcdef"</span>,7)) <span class="comment">//bool(false)</span></span><br><span class="line">5.如果start和length都为负数时 无交集则返回空字符串</span><br><span class="line"><span class="keyword">ex</span>: var_dump(<span class="built_in">substr</span>(<span class="string">"abcdef"</span>,-5,-6));  <span class="comment">//string(0) ""</span></span><br><span class="line">ucfirst(<span class="variable">$str</span>)  将第一个单词的首字母大写</span><br><span class="line">lcfirst(<span class="variable">$str</span>)  将第一个单词的首字母小写</span><br><span class="line">ucwords(<span class="variable">$str</span>)  将每个单词的首字母大写</span><br><span class="line">strtoupper(<span class="variable">$str</span>) 将字符串转化为大写</span><br><span class="line">strtolower(<span class="variable">$str</span>) 将字符串转化为小写</span><br><span class="line">strstr(<span class="variable">$str</span>,<span class="string">"a"</span>)       返回a第一次出现的位置到结尾的所有字符(包括a)</span><br><span class="line"><span class="keyword">ex</span>:  echo strstr(<span class="variable">$str6</span>,<span class="string">"s"</span>); <span class="comment">//sdias</span></span><br><span class="line">strstr(<span class="variable">$str</span>,<span class="string">"a"</span>,true)  返回a第一次出现的位置之前的字符(不包括a)</span><br><span class="line"><span class="keyword">ex</span>:  echo strstr(<span class="variable">$str6</span>,<span class="string">"s"</span>,true); <span class="comment">//a</span></span><br><span class="line">strrchr(<span class="variable">$str1</span>,<span class="variable">$str2</span>) 返回字符串<span class="variable">$str1</span>中<span class="variable">$str2</span>最后一次出现的位置以后的所有字符</span><br><span class="line"><span class="built_in">strpos</span>(<span class="variable">$str</span>,<span class="string">"a"</span>)   返回指定字符第一次出现的位置(索引) 找不到返回false</span><br><span class="line"><span class="keyword">ex</span>:  echo <span class="built_in">strpos</span>(<span class="variable">$str6</span>,<span class="string">"s"</span>);  <span class="comment">//1</span></span><br><span class="line">strrpos(<span class="variable">$str</span>,<span class="string">"a"</span>)  返回指定字符最后一次出现的位置(索引) 找不到返回false</span><br><span class="line"><span class="keyword">ex</span>:  echo strrpos(<span class="variable">$str6</span>, <span class="string">"s"</span>); <span class="comment">//5</span></span><br><span class="line">explode(<span class="string">"."</span>,<span class="variable">$str</span>);  将字符串以指定字符分割成数组 参数顺序不能改变</span><br><span class="line"><span class="keyword">ex</span>:  print_r(explode(<span class="string">","</span>,<span class="string">"asb,jk"</span>)); <span class="comment">//Array ( [0] =&gt; asb [1] =&gt; jk )</span></span><br><span class="line">implode(<span class="variable">$arr</span>,[<span class="string">"--"</span>]); 将数组以指定字符拼接成字符串</span><br><span class="line"><span class="keyword">ex</span>:  echo implode(array(<span class="string">"asb"</span>,<span class="string">"jk"</span>),<span class="string">"-"</span>); <span class="comment">//asb-jk</span></span><br></pre></td></tr></table></figure><h2 id="PHP文件操作"><a href="#PHP文件操作" class="headerlink" title="PHP文件操作"></a>PHP文件操作</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">文件类型 在windows中只能是<span class="string">'file(文件)'</span>或<span class="string">'dir(目录)'</span></span><br><span class="line">获取文件类型 filetype(<span class="string">'../jsq.php'</span>)</span><br><span class="line">常用文件属性处理函数</span><br><span class="line"><span class="function"><span class="title">file_exists</span><span class="params">()</span></span>    判断文件或目录是否存在</span><br><span class="line"><span class="function"><span class="title">filesize</span><span class="params">()</span></span>       取得文件的大小</span><br><span class="line"><span class="function"><span class="title">is_readable</span><span class="params">()</span></span>   判断文件是否可读</span><br><span class="line"><span class="function"><span class="title">is_writable</span><span class="params">()</span></span>   判断文件是否可写</span><br><span class="line"><span class="function"><span class="title">is_executable</span><span class="params">()</span></span> 判断文件是否可执行</span><br><span class="line"><span class="function"><span class="title">filectime</span><span class="params">()</span></span>     获取文件的创建时间(时间戳)</span><br><span class="line"><span class="function"><span class="title">filemtime</span><span class="params">()</span></span>    获取文件的修改时间(时间戳)</span><br><span class="line"><span class="function"><span class="title">fileatime</span><span class="params">()</span></span>     获取文件的访问时间(时间戳)</span><br><span class="line"><span class="function"><span class="title">stat</span><span class="params">()</span></span>         获取文件的大部分属性</span><br><span class="line"><span class="function"><span class="title">disk_total_space</span><span class="params">(“c:”)</span></span>   磁盘总大小</span><br><span class="line"><span class="function"><span class="title">disk_free_space</span><span class="params">(“D:”)</span></span>   磁盘可用空间</span><br><span class="line"><span class="function"><span class="title">is_dir</span><span class="params">()</span></span> 判断文件名是否是一个目录</span><br><span class="line"><span class="function"><span class="title">is_file</span><span class="params">()</span></span> 判断文件名是否是正常文件</span><br><span class="line">目录的基本操作</span><br><span class="line">  解析目录路径</span><br><span class="line">    不同的跟路径</span><br><span class="line">    A:PHP操作的根路径是操作系统的根</span><br><span class="line">    B:文档的根目录（在浏览器中使用）</span><br><span class="line">    路径相关函数</span><br><span class="line">    basename  返回路径中的文件名部分  dirname 返回路径中的目录部分</span><br><span class="line">    pathinfo  返回文件路径的信息(数组)包括dirname basename extension</span><br><span class="line">  遍历目录</span><br><span class="line">    A:foreach(glob() as <span class="variable">$filename</span>)使用glob函数遍历目录</span><br><span class="line">    B:打开目录opendir() 读取文件readdir() closedir()关闭目录 rewiddir()倒回目录</span><br><span class="line">    在读取目录后在对文件操作时不要操作.和..</span><br><span class="line">  统计目录大小</span><br><span class="line">    disk_total_space()磁盘总大小 disk_free_space()磁盘可用空间</span><br><span class="line">    filesize()文件大小  dir()目录大小</span><br><span class="line">  建立与删除目录</span><br><span class="line">    mkdir()新建目录  rmdir()删除目录(目录必须为空) unlink(删除文件)</span><br><span class="line">  复制目录</span><br><span class="line">文件的基本操作</span><br><span class="line">  touch()创建一个文件  copy()复制文件 rename()重新命名或移动</span><br><span class="line">  unlink()删除一个文件</span><br><span class="line">  对文件内容整体的操作</span><br><span class="line">    不打开文件进行读取</span><br><span class="line">    file_get_contents()读取文件的内容   readfile()读取整个文件</span><br><span class="line">    <span class="variable">$arr</span>=file()一行一行的读取文件返回一个数组 <span class="variable">$arr</span>[n]读取第n行</span><br><span class="line">    file_put_contents()整个写入文件内容</span><br><span class="line">  文件的打开与关闭</span><br><span class="line">    <span class="variable">$fp</span>=fopen(<span class="string">"文件位置URL"</span>,<span class="string">"模式"</span>)资源 打开文件 模式 r只读 指针指向文件开头</span><br><span class="line">    w写入 清空文件 不存在则创建 a追加写入 指针指向文件末尾 不存在则创建</span><br><span class="line">    fclose(<span class="variable">$fp</span>)关闭文件</span><br><span class="line">  文件某一部分进行操作</span><br><span class="line">    fwrite(<span class="variable">$fp</span>,<span class="string">'写入文字'</span>) 写入文字</span><br><span class="line">    打开文件以后读取</span><br><span class="line">    fgets从打开的文件中读取一行 fgetc从打开的文件中读取一个字符</span><br><span class="line">文件的上传设置</span><br><span class="line">    方法必须为POST 编码方式必须为enctype=<span class="string">'multipart/from-data'</span></span><br><span class="line">    move_upload_file()文件上传函数</span><br></pre></td></tr></table></figure><h2 id="PHP面向对象"><a href="#PHP面向对象" class="headerlink" title="PHP面向对象"></a>PHP面向对象</h2><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">类是对象的抽象，对象是类的实例</span><br><span class="line">类的基本元素:成员属性和成员方法 在成员属性和方法前面一定要有修饰词public,<span class="keyword">private</span></span><br><span class="line">对类进行实例化 $bf1=new BoyFriend()创建对象</span><br><span class="line">访问对象中的成员属性或成员方法</span><br><span class="line">$引用名 = new 类名()  $引用名-&gt;成员属性=赋值 为对象属性赋值</span><br><span class="line"><span class="built_in">echo</span> $引用名-&gt;成员属性 输出对象的属性  <span class="built_in">echo</span> $引用名-&gt;成员方法() 调用对象的方法</span><br><span class="line">构造方法 <span class="variable">__construct</span>();</span><br><span class="line">  <span class="number">1</span>.是对象创建完成以后，第一个自动调用的方法(特殊)</span><br><span class="line">  <span class="number">2</span>.方法名称比较特殊，可以和类名相同的方法名</span><br><span class="line">  <span class="number">3</span>.给对象的成员赋初值</span><br><span class="line">析构方法 <span class="variable">__destruct</span>();  对象被注销(释放)之前自动调用的方法，不能带任何参数</span><br><span class="line">面向对象编程的三大特点:</span><br><span class="line">  <span class="number">1</span>.封装性</span><br><span class="line">    就是把对象中的成员属性和成员方法加上访问修饰符使其尽可能隐藏对象的内部细节以达到</span><br><span class="line">    对成员的访问控制</span><br><span class="line">    <span class="number">3</span>种访问修饰符</span><br><span class="line">      public(公有的 默认的) 在类的内部和子类中，在类体外都可以使用，</span><br><span class="line">      <span class="keyword">private</span>(私有的)       只能在所属类的内部使用和修改，不能在类体外和类的子类中访问</span><br><span class="line">        对于私有成员属性，不能在类外直接获取，需要在类的里面添加一方法通过方法来获取只</span><br><span class="line">        能在大括号内调用</span><br><span class="line">      protected(受保护的)   可以在本类和子类中被调用，其他地方则不能使用</span><br><span class="line">  <span class="number">2</span>.继承性</span><br><span class="line">    子类使用extends继承父类</span><br><span class="line">        子类可以将父类中所有的内容都继承过来(私有的可继承过来但无法操作)可以修改或添加</span><br><span class="line">    继承中的重载(覆盖)  在子类可以用和父类相同的方法名</span><br><span class="line">    使用 类::成员 parent::成员 访问父类中被覆盖的方法</span><br><span class="line">    parent::<span class="variable">__construct</span>()只要是子类去覆盖父类的构造方法，一定要在子类的最上面调用一下</span><br><span class="line">    父类被覆盖的构造方法</span><br><span class="line">    权限的问题:子类只能大于或等于父类的权限，不能小于</span><br><span class="line">  <span class="number">3</span>.多态性</span><br><span class="line"></span><br><span class="line">  魔术方法</span><br><span class="line">  <span class="variable">__set</span>() 在直接设置私有属性值时，自动调用，两个参数属性名和属性值</span><br><span class="line">  <span class="variable">__get</span>() 自动调用,是在直接访问私有成员时自动调用不是私有不调用一个参数</span><br><span class="line">  <span class="variable">__isset</span>()</span><br><span class="line">  <span class="variable">__unset</span>()</span><br><span class="line">  <span class="variable">__tostring</span>()是在直接使用 <span class="built_in">echo</span> print输出一个对象时，自动调用这个方法，将对象的基本</span><br><span class="line">  信息放在<span class="variable">__tostring</span>()内部形成字符串返回，不能有参数</span><br><span class="line">  <span class="variable">__clone</span>()  克隆对象时，自动调用的方法，是对新克隆对象的初始化，在这个方法中$this代</span><br><span class="line">            表的是克隆后的副本，所以可以对其成员进行初始化</span><br><span class="line">  <span class="variable">__call</span>()   在调用一个对象中不存在的方法时自动调用</span><br><span class="line">            有两个参数<span class="variable">__call</span>(不存在的方法名，参数列表(数组))</span><br><span class="line">            可以写提示，还可以将功能相似方法名不同的用它来完成</span><br><span class="line">  关键字</span><br><span class="line">  instanceof $p instanceof Student用于检测当前对象实例是否属于某一个类</span><br><span class="line">  final      用final修饰的类不能被继承，用final修饰的方法不能被覆盖(不让别人去扩展)</span><br><span class="line">  static 可以修饰属性和方法，不能修饰类，可以被同一个对象共用，不需要实例化，静态成员</span><br><span class="line">        一旦被加载，脚本结束后才释放，静态方法中只能调用静态变量，不能调用非静态成员</span><br><span class="line">  调用静态成员的方式 A:在内部调用时使用               self::静态成员</span><br><span class="line">                    B:在类外调用内部的静态成员时使用  类名::静态成员</span><br><span class="line">  const  修饰的成员属性为常量，只能修饰成员属性 访问方式和static相同</span><br><span class="line">  clone  使用clone复制一份对象 $obj1 = clone $obj</span><br><span class="line">对象串行化(序列化)</span><br><span class="line">  <span class="number">1</span>.将对象转成字符串--串行化    应用 ①将对象在网络中传输 ②将对象持久保存</span><br><span class="line">    $<span class="built_in">str</span> = serialize（对象）  file_put_contents(<span class="string">"objstr.txt"</span>,$<span class="built_in">str</span>)</span><br><span class="line">    <span class="variable">__sleep</span>()  在串行化时自动调用的方法</span><br><span class="line">    作用: 可以设置需要串行化的对象的属性 在这个方法中返回一个数组，在数组中声明的属性</span><br><span class="line">          被串行化，默认是全部串行化</span><br><span class="line">  <span class="number">2</span>.将字符串转回对象--返串行化</span><br><span class="line">    $<span class="built_in">str</span>=file_get_contnets(<span class="string">"objstr.txt"</span>)      $p=unserialize($<span class="built_in">str</span>)</span><br><span class="line">    <span class="variable">__wakeup</span>()  在反串行化时自动调用的方法</span><br><span class="line">    作用: 对串行化回来的对象进行初始化</span><br><span class="line">自动加载类</span><br><span class="line">  function <span class="variable">__autoload</span>($<span class="built_in">classname</span>)&#123; inculude strtolower($<span class="built_in">classname</span>).<span class="string">"class.php"</span>&#125;</span><br><span class="line">抽象方法和抽象类</span><br><span class="line">  抽象方法 用abstract来修饰,没有方法体,不使用&#123;&#125;,直接使用分号结束功能只能在子类中实现</span><br><span class="line">  抽象类   不能被实例化的类,只能作为其他类的父类来使用,用abstract来声明抽象类,普通类</span><br><span class="line">          中不能有抽象方法,子类必须把全部的抽象方法覆盖(重写),才能创建对象</span><br><span class="line"></span><br><span class="line">  接口     使用interface声明接口,特殊的抽象类，接口中的方法必须全部是抽象方法，不能</span><br><span class="line">          使用public以外的关键字修饰接口中的成员 成员属性必须是常量不能是变量</span><br><span class="line">          子类使用implements来实现接口的，要实现多个接口每个接口之间用逗号连接</span><br><span class="line">命名空间(名字空间)</span><br><span class="line">  使用namespace来声明 必须放在第一行</span><br></pre></td></tr></table></figure><h2 id="PHP中操作MySQL"><a href="#PHP中操作MySQL" class="headerlink" title="PHP中操作MySQL"></a>PHP中操作MySQL</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>连接数据库      mysql_connect(<span class="string">"数据库服务器地址"</span>,<span class="string">"用户名"</span>,<span class="string">"密码"</span>)</span><br><span class="line">                <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">'连接失败'</span>.mysql_error())</span><br><span class="line"><span class="number">2.</span>设定连接编码   a. mysql_query(<span class="string">"set names 网页文件编码名"</span>)</span><br><span class="line">              b. mysql_set_charset(<span class="string">"网页文件编码名"</span>)</span><br><span class="line"><span class="number">3.</span>选择数据库     a. mysql_query(<span class="string">"use 数据库名"</span>);</span><br><span class="line">                b. mysql_select_db(<span class="string">"数据库名"</span>)</span><br><span class="line"><span class="number">4.</span>执行sql语句     mysql_query(sql语句)</span><br><span class="line">对于mysql_query()函数 可以执行几乎所有的sql语句 分为两种情况</span><br><span class="line">情况<span class="number">1</span>  执行没有数据返回的语句  比如:insert update delete create drop</span><br><span class="line">        返回布尔值 <span class="keyword">true</span>执行成功 <span class="keyword">false</span> 执行失败</span><br><span class="line">情况<span class="number">2</span>  执行有数据返回的语句 比如: select show desc</span><br><span class="line">        返回<span class="keyword">false</span> 执行失败   执行成功 返回 结果集(数据集)</span><br><span class="line"></span><br><span class="line">$res=mysql_query(<span class="string">"select....."</span>)  <span class="comment">//执行又返回的数据的语句</span></span><br><span class="line"><span class="keyword">while</span>($arr = mysql_fetch_array($res))&#123;</span><br><span class="line">    <span class="comment">//mysql_fetch_array()  会出现该结果集中的一行数据并赋值给$arr</span></span><br><span class="line">      返回的是关联数组和索引数组的结合 其下标是字段名</span><br><span class="line">    <span class="comment">//mysql_fetch_assoc()  返回的是关联数组 下标时列名 值对应列值</span></span><br><span class="line">    <span class="comment">//mysql_fetch_row()   返回的是只含值得索引数组</span></span><br><span class="line">    <span class="comment">//mysql_fetch_object() 返回的是对象,一条记录就是一个对象</span></span><br><span class="line">    <span class="comment">//                     一个字段就是一个属性 $rwo-&gt;name 访问</span></span><br><span class="line">    <span class="comment">//while循环中 会依次取出结果集中的所有数据 直到返回false</span></span><br><span class="line">    <span class="keyword">foreach</span>($arr <span class="keyword">as</span> $val)&#123;</span><br><span class="line">  <span class="keyword">echo</span> $val;  <span class="comment">//使用foreach循环遍历出每一列的值</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="number">5.</span>释放资源    mysql_free_result($res)</span><br><span class="line"><span class="number">6.</span>关闭数据库连接   mysql_close($link)</span><br><span class="line">扩展php中操作mysql数据的几个函数</span><br><span class="line">a. mysql_num_rows(<span class="string">"结果集"</span>)      <span class="comment">//获取该结果集的行数</span></span><br><span class="line">b. mysql_num_fields(<span class="string">"结果集"</span>)    <span class="comment">//获取该结果集的列数</span></span><br><span class="line">c. mysql_field_name(<span class="string">"结果集"</span>,$i) <span class="comment">//获取该结果集的第i个字段名字(i从0开始)</span></span><br><span class="line">其他:  mysql_error  获取mysql执行失败时的错误信息</span><br></pre></td></tr></table></figure><h2 id="Mysqli"><a href="#Mysqli" class="headerlink" title="Mysqli"></a>Mysqli</h2><p>mysqli优势</p><ul><li>基于面向过程和面向对象的使用</li><li>支持预处理语句</li><li>支持事务</li><li>支持mysql的新功能,新特性,速度更快<br>查看是否开启mysqli</li><li>phpinfo()</li><li>extension_loaded(“mysqli”)</li><li>function_exists(“mysqli_connect”)</li><li>get_loaded_extensions()  数组</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.连接并选择数据库</span></span><br><span class="line">$mi = @<span class="keyword">new</span> mysqli(<span class="string">"localhost"</span>,<span class="string">"root"</span>,<span class="string">"root"</span>,<span class="string">"stu"</span>);</span><br><span class="line"><span class="comment">//2.如果有错误显示错误信息</span></span><br><span class="line"><span class="keyword">if</span>($mi-&gt;connect_errno)&#123;   <span class="comment">//错误编号</span></span><br><span class="line"><span class="keyword">die</span>(<span class="string">"Connect Error"</span>.$mi-&gt;connect_error);  <span class="comment">//错误信息</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//3.设置字符编码</span></span><br><span class="line">$mi-&gt;set_charset(<span class="string">'utf8'</span>);</span><br><span class="line"><span class="comment">//4.执行单条sql语句</span></span><br><span class="line">$mi-&gt;query($sql)</span><br><span class="line"><span class="comment">//5.获得新插入操作产生的Auto_increment的值 如果没有  返回0</span></span><br><span class="line">$mi-&gt;insert_id;</span><br><span class="line"><span class="comment">//6.获得上一次操作产生的受影响的记录条数</span></span><br><span class="line">a.受影响的行数  b.  <span class="number">-1</span>(sql出错,执行失败)   c.  受影响为<span class="number">0</span>行</span><br><span class="line">$mi-&gt;affected_rows;</span><br><span class="line"><span class="comment">//7.结果集对象的操作</span></span><br><span class="line">a.$res-&gt;num_rows  结果集行数</span><br><span class="line">b.$res-&gt;fetch_all();  默认返回的  索引+索引数组形式 MYSQL_NUM</span><br><span class="line">$res-&gt;fetch_all(MYSQLI_ASSOC)  返回的是 索引+关联数组形式</span><br><span class="line">$res-&gt;fetch_all(MYSQLI_BOTH)   返回的是 索引+索引和关联都有的形式</span><br><span class="line">$res-&gt;fetch_array()  默认返回结果集中的一条数据(数组和关联方式) MYSQLI_BOTH</span><br><span class="line">$res-&gt;fetch_array(MYSQLI_ASSOC)</span><br><span class="line">$res-&gt;fetch_assoc()           结果集中取出一条 以关联数组显示</span><br><span class="line">$res-&gt;fetch_array(MYSQLI_NUM)</span><br><span class="line">$res-&gt;fetch_row()            结果集中取出一条 以索引数组显示</span><br><span class="line">c.$res-&gt;data_seek(<span class="number">0</span>)   移动结果中指针到具体位置</span><br><span class="line"></span><br><span class="line"><span class="comment">//8.释放结果集资源</span></span><br><span class="line">$mi-&gt;free_result</span><br><span class="line"><span class="comment">//9.关闭连接</span></span><br><span class="line">$mi-&gt;close()</span><br><span class="line"><span class="comment">//10.过滤字符串中的特殊字符  防止sql注入</span></span><br><span class="line">$mi-&gt;escape_string()</span><br><span class="line"><span class="comment">//11.执行多条sql语句  每条语句以分号结束  前一条语句如果失败后面的不会执行</span></span><br><span class="line">$mi-&gt;multi_query($sql)</span><br><span class="line"><span class="comment">//12.针对多条SQL语句的查询</span></span><br><span class="line">$sql = “select id,username,age from user;”;</span><br><span class="line">$sql.=”select current_user();”;</span><br><span class="line">$sql.=”select now();”;</span><br><span class="line"><span class="comment">//use_result()/store_result()  获取第一条查询语句产生的结果集</span></span><br><span class="line"><span class="comment">//more_results()  检测是否有更多的结果集</span></span><br><span class="line"><span class="comment">//next_result()   将结果集指针向下移动一位</span></span><br><span class="line"><span class="keyword">If</span>($mi-&gt;multi_query($sql))&#123;</span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line"><span class="keyword">if</span>($res=$mi-&gt;store_result())&#123;</span><br><span class="line">$row[]=$mi-&gt;fetch_all(MYSQLI_ASSOC);</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">while</span>($mi-&gt;more_results()&amp;&amp;$mi-&gt;next_result());</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">echo</span> $mi-&gt;error;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//13.预处理语句</span></span><br><span class="line">a 准备预处理语句  防止sql注入  ‘ <span class="keyword">or</span> <span class="number">1</span>=<span class="number">1</span> <span class="comment">#</span></span><br><span class="line">$sql = “insert user(uname,upwd,uage) values(?,?,?)”;</span><br><span class="line">$mysqli_stmt = $mi-&gt;prepare($sql);</span><br><span class="line">$uname = “张三”  $upwd = “<span class="number">123</span>”  $uage = <span class="number">18</span></span><br><span class="line">b 绑定参数</span><br><span class="line">$mysqli_stmt = $mi-&gt;bind_param(“ssi”,$uname,$upwd,$uage);</span><br><span class="line">c 执行预处理语句</span><br><span class="line">$mysqli_stmt -&gt;execute()</span><br><span class="line">d 预处理查询语句</span><br><span class="line">$mysqli_stmt-&gt;bind_result($id,$uname,$age)  <span class="comment">//绑定结果集的值到变量</span></span><br><span class="line">$mysqli_stmt-&gt;fetch()  遍历结果集</span><br><span class="line"><span class="comment">//14.事务处理</span></span><br><span class="line">  a 先关闭自动提交功能</span><br><span class="line">  $mi-&gt;autocommit(<span class="keyword">FALSE</span>);</span><br><span class="line">  $sql = “update account set money=money<span class="number">-200</span> where uname = ‘king’”;</span><br><span class="line">  $res = $mi-&gt;query($sql);</span><br><span class="line">  $affect =$mi-&gt;affected_rows;</span><br><span class="line">  $sql1 = “update account set money=money+<span class="number">200</span> where uname = ‘queen’”;</span><br><span class="line">  $res = $mi-&gt;query($sql1);</span><br><span class="line">  $affect <span class="number">1</span>=$mi-&gt;affected_rows;</span><br><span class="line">  <span class="keyword">If</span>($res &amp;&amp; $affect&gt;<span class="number">0</span> &amp;&amp; $res1 &amp;&amp; $affect1&gt;<span class="number">0</span>)&#123;</span><br><span class="line"> $mi-&gt;commit();  <span class="comment">//提交事务</span></span><br><span class="line"> <span class="keyword">echo</span> “转账成功”;</span><br><span class="line"> $mi-&gt;autocommit(<span class="keyword">TRUE</span>);  <span class="comment">//开启自动提交</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"> $mi-&gt;rollback()  <span class="comment">//事务回滚</span></span><br><span class="line">   <span class="keyword">echo</span> “转账失败”;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span><span class="keyword">echo</span>     主要用来打印输出字符串和数字(数组和布尔值不适合) 无返回值</span><br><span class="line">  <span class="keyword">true</span>输出<span class="number">1</span> <span class="keyword">false</span>无任何输出 <span class="keyword">null</span>也无任何输出 可以打印多个 速度比<span class="keyword">print</span>快</span><br><span class="line">  <span class="keyword">print</span>()  和<span class="keyword">echo</span>差不多   只能打印一个 有返回值<span class="number">1</span>和<span class="number">0</span></span><br><span class="line">  print_r()  print_r常用来输出数组 输出的内容包括键和值 不包括数据类型</span><br><span class="line">  var_dump() 输出变量的类型和值类型(查看数据结构)值类型和长度  适用于数组和布尔值</span><br><span class="line">  printf()   格式化输出字符串</span><br><span class="line">  都可以做打印输出用</span><br><span class="line">parse_str($str) 将ulr传递的值(字符串)解析成变量</span><br><span class="line">ex:   $str  =  <span class="string">"first=value&amp;arr[]=foo+bar&amp;arr[]=baz"</span> ;</span><br><span class="line">      parse_str($str);</span><br><span class="line">      <span class="keyword">echo</span> $first; <span class="comment">//value</span></span><br><span class="line">parse_str($str,$arr) 将ulr传递的值(字符串)解析成变量用数组存起来</span><br><span class="line">ex:   $str  =  <span class="string">"first=value&amp;arr[]=foo+bar&amp;arr[]=baz"</span> ;</span><br><span class="line">      parse_str($str,$arr);</span><br><span class="line">      <span class="keyword">echo</span> $arr[<span class="string">"first"</span>];  <span class="comment">//value</span></span><br><span class="line">      <span class="keyword">echo</span> $arr[<span class="string">'arr'</span>][<span class="number">1</span>]; <span class="comment">//baz</span></span><br><span class="line"></span><br><span class="line">htmlspecialchars($str)  将字符串转为实体</span><br><span class="line">stripslashes($str)      删除斜线</span><br><span class="line"></span><br><span class="line">strip_tags($str) 从字符串中去除指定的HTML和PHP标记</span><br><span class="line"></span><br><span class="line">PHP 实现页面跳转</span><br><span class="line">    <span class="number">1.</span>header(<span class="string">"location:XXX.php"</span>)</span><br><span class="line">    <span class="number">2.</span><span class="keyword">echo</span> <span class="string">"&lt;meta http-equiv='refresh' content='0;url=XXX.php'&gt;"</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>php基础1</title>
      <link href="/php%E5%9F%BA%E7%A1%801/"/>
      <url>/php%E5%9F%BA%E7%A1%801/</url>
      
        <content type="html"><![CDATA[<h2 id="PHP语言基础"><a href="#PHP语言基础" class="headerlink" title="PHP语言基础"></a>PHP语言基础</h2><ul><li><p>php程序结构</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a  <span class="meta">&lt;?php</span>   <span class="keyword">echo</span>  <span class="string">"标准结构"</span>;  <span class="meta">?&gt;</span>  <span class="comment">//推荐写法</span></span><br><span class="line">b  <span class="meta">&lt;?</span> <span class="keyword">echo</span> <span class="string">"简短风格"</span>;  <span class="meta">?&gt;</span>  <span class="comment">//需修改php.ini文件 short_open_tag=on</span></span><br><span class="line">c  &lt;% <span class="keyword">echo</span> <span class="string">"asp风格"</span> %&gt;    <span class="comment">//需修改php.ini文件 asp_tags=on</span></span><br><span class="line">d  &lt;script language=<span class="string">"php"</span>&gt;&lt;/script&gt;</span><br><span class="line">php的结束符 <span class="meta">?&gt;</span>  如果后面没有其他代码 可以省略</span><br></pre></td></tr></table></figure></li><li><p>程序的注释<br><code>a  /*多行注释*/  不允许嵌套</code><br><code>b  //或# 单行注释 (php代码每一行都必须以分号;结束)</code></p></li><li><p>变量</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>变量名以$开始</span><br><span class="line"><span class="number">2.</span>变量的名称声明时一定要有意义</span><br><span class="line"><span class="number">3.</span>以字母或下划线开头，不能以数字开头，不能有运算符号</span><br><span class="line"><span class="number">4.</span>变量的名称区分大小写（驼峰式命名方式）</span><br><span class="line">  a.  var_dump()查看变量的类型和内容(数据结构)</span><br><span class="line">  b.  <span class="keyword">isset</span>()判断变量是否存在  测试被设置为<span class="keyword">null</span>的值或<span class="keyword">unset</span>函数处理过的变量时 返回<span class="keyword">false</span></span><br><span class="line">      <span class="keyword">empty</span>()判断变量是否为空  <span class="string">""</span>  <span class="string">"0"</span> <span class="number">0</span> <span class="keyword">NULL</span> <span class="keyword">false</span> <span class="keyword">array</span>()</span><br><span class="line">尽量使用!<span class="keyword">empty</span>() 判断是否存在</span><br><span class="line">  d.  <span class="keyword">unset</span>()删除一个变量(销毁变量名) 断开变量名跟数据之间的引用关系</span><br><span class="line">  e.  gettype()获取变量类型 boolean integer double string <span class="keyword">array</span> object resouce <span class="keyword">NULL</span></span><br><span class="line">  f.  判断是否是某类型  is_int() is_bool() is_float() is_object() is_array() is_resource()</span><br><span class="line">                        is_null() is_numeric()  is_callable() 是否是有效的函数名</span><br><span class="line">常见命名法</span><br><span class="line">  <span class="number">1.</span>驼峰命名法    首单词小写 其后每个单词首字母大写 $myName</span><br><span class="line">  <span class="number">2.</span>帕斯卡命名法  每个单词首字母大写  $MyName</span><br><span class="line">  <span class="number">3.</span>下划线分割法  每个单词小写,之间用下划线分割开 $my_name</span><br><span class="line"></span><br><span class="line">变量作用域</span><br><span class="line"><span class="number">1.</span>全局变量 定义在函数之外，作用于整个PHP文件(内部使用必须用<span class="keyword">global</span>声明)</span><br><span class="line">            声明在调用之前，脚本结束(浏览器关闭)即释放</span><br><span class="line"><span class="number">2.</span>局部变量 定义在函数之内或形参，只限于内部使用，在函数外不能被使用</span><br><span class="line">            调用几次声明几次，释放(销毁)几次</span><br><span class="line"><span class="number">3.</span>静态变量 用<span class="keyword">static</span>声明，在函数第一次调用结束后仍保留变量值(存在),且不会消失</span><br><span class="line">            静态变量的初始化只是在第一次遇到时被执行，以后不再执行初始化操作</span><br><span class="line">变量的生存周期</span><br><span class="line">即从变量被声明的那一刻起，直到程序脚本运行结束，变量随之释放</span><br><span class="line">可变变量</span><br><span class="line">使用一个变量的值作为另一个变量的名称</span><br><span class="line">  $liubei=<span class="string">'河北人'</span>;</span><br><span class="line">$laoda=<span class="string">'liubei'</span>;</span><br><span class="line">$paihang=<span class="string">"laoda"</span>;</span><br><span class="line"><span class="keyword">echo</span> $laoda,$$laoda,$$$paihang;  <span class="comment">//  liubei  河北人  河北人</span></span><br><span class="line">引用变量&amp;</span><br><span class="line"><span class="number">1.</span>只有变量才有地址，只有变量才能有引用  (引用相当于快捷方式)</span><br><span class="line"><span class="number">2.</span>一个变量发生变化，另一个也跟着发生变化</span><br><span class="line"><span class="number">3.</span>在使用<span class="keyword">unset</span>()函数时，如果有引用关系，只是解除了这种引用关系，</span><br><span class="line">  只删除一个名字，另一个还在</span><br><span class="line"><span class="number">4.</span>如果两个变量是引用关系，一个变，另一个也变，但是如果给其中</span><br><span class="line">  一个引用，不是普通的值，而是一个新的引用，则改变引用关系。</span><br></pre></td></tr></table></figure></li><li><p>八种原始数据类型</p><figure class="highlight zephir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">A:四种标量类型</span><br><span class="line"><span class="number">1.</span>布尔型(<span class="keyword">boolean</span>)</span><br><span class="line">  特殊情况下的<span class="keyword">false</span>:布尔值 <span class="keyword">false</span>|整数值 <span class="number">0</span>|浮点型 <span class="number">0.0</span>|字符串 <span class="string">""</span> <span class="string">"0"</span>| 数组 <span class="keyword">array</span>[]|</span><br><span class="line">                    <span class="keyword">null</span>值  所有其他值都被认为是<span class="keyword">true</span>(包括任何资源)</span><br><span class="line"><span class="number">2.</span>整型(integer)</span><br><span class="line">  整型数可以用八进制，十进制，十六进制来表示 八进制以<span class="number">0</span>开头，十六进制以<span class="number">0</span>x开头</span><br><span class="line">  十进制 <span class="number">123</span>  <span class="number">1</span>*<span class="number">100</span>+<span class="number">2</span>*<span class="number">10</span>+<span class="number">3</span>*<span class="number">1</span>  八进制 <span class="number">0123</span> <span class="number">1</span>*<span class="number">64</span>+<span class="number">2</span>*<span class="number">8</span>+<span class="number">3</span>*<span class="number">1</span>  <span class="comment">//23</span></span><br><span class="line">  十六进制 <span class="number">0x123</span> <span class="number">1</span>*<span class="number">256</span>+<span class="number">2</span>*<span class="number">16</span>+<span class="number">3</span>*<span class="number">1</span>  <span class="comment">//291</span></span><br><span class="line">  二进制 是由<span class="number">2</span>位<span class="number">16</span>个字节表示 从右往左依次<span class="number">2</span>的倍数  <span class="number">5</span>  <span class="number">0000</span> <span class="number">0101</span></span><br><span class="line">          最高位为<span class="number">1</span>时不指定符号则为负数  ~<span class="number">5</span> <span class="comment">//-6 &lt;=(255-5-256)</span></span><br><span class="line">  如果超出<span class="keyword">int</span>所能表示的最大范围(<span class="number">-2147483648</span>~+<span class="number">2147483647</span>),将会被当做<span class="keyword">float</span>型处理</span><br><span class="line"><span class="number">3.</span>浮点型(<span class="keyword">float</span>)</span><br><span class="line">  浮点型两种格式 标准格式  <span class="number">3.1415</span>  科学计数法 <span class="number">31415e-4</span></span><br><span class="line">  浮点型的数值是一个近似值(不精确)，应尽量避免浮点型之间的比较大小</span><br><span class="line"><span class="number">4.</span>字符串(string)</span><br><span class="line">  单个字符和多个字符都是字符串，字符串没有长度限制，在单引号中不能使用单引号，</span><br><span class="line">  在双引号之间不能使用双引号(除非经过转义字符)</span><br><span class="line">B:两种复合类型</span><br><span class="line"><span class="number">1.</span>数组(<span class="keyword">Array</span>)</span><br><span class="line"><span class="number">2.</span>对象(Object)</span><br><span class="line">C:两种特殊类型</span><br><span class="line"><span class="number">1.</span>资源(Resource)</span><br><span class="line"><span class="number">2.</span><span class="keyword">Null</span>  三种情况 a.没有赋任何值 b.被赋值为<span class="keyword">null</span> c.被<span class="keyword">unset</span>()函数处理过的变量</span><br><span class="line">伪类型 mixed  $a   说明一个参数可以接受多种不同的类型</span><br><span class="line">      number $a   说明一个参数可以是<span class="keyword">int</span>或<span class="keyword">float</span></span><br><span class="line">      callback $a 说明一个参数可以是函数或一个对象的方法</span><br><span class="line">数据类型之间的转换</span><br><span class="line"><span class="number">1.</span>强制转换</span><br><span class="line">  getType(变量);获取变量的类型    强制转换时割舍小数位</span><br><span class="line">  a.setType(变量,类型)----将原变量类型给转换了</span><br><span class="line">  b.在变量使用时，前面加上类型符号(<span class="keyword">int</span>)$str---在赋值时给了新变量一个新类型，</span><br><span class="line">    原变量类型不变</span><br><span class="line">  c.intval()  floatval() strval()</span><br><span class="line"><span class="number">2.</span>自动转换</span><br><span class="line">  小类型自动转化为大类型  字符串会转换为整型或浮点型 布尔型和<span class="keyword">null</span>会转换为</span><br><span class="line">  整型或浮点型</span><br><span class="line">字符串转整型时，没有以数字开头时转为<span class="number">0</span>，有数字或科学计数法开头时转为整型数字</span><br><span class="line">  布尔型<span class="keyword">false</span>会输出为空,<span class="keyword">true</span>会输出为<span class="number">1</span></span><br></pre></td></tr></table></figure></li><li><p>常量的声明和使用</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>常量一旦被声明，这个常量值就不会被改变,不能重新赋值,不能销毁 范围是全局的</span><br><span class="line">  只支持<span class="number">4</span>种标量数据类型(bool int float <span class="built_in">string</span>)  不能使用$符</span><br><span class="line"><span class="number">2.</span>使用函数<span class="class"><span class="keyword">define</span></span>(<span class="string">'常量名'</span>，常量值)声明   使用defined(<span class="string">'常量名'</span>)判断是否被定义</span><br><span class="line">  ex:   <span class="class"><span class="keyword">define</span></span>(<span class="string">"HOST"</span>,<span class="string">"www.baidu.com"</span>,<span class="literal">true</span>);   defined(<span class="string">'host'</span>)?<span class="number">1</span>:<span class="number">0</span></span><br><span class="line"><span class="number">3.</span>常量名称默认是区分大小写的，习惯上要全大写<span class="class"><span class="keyword">define</span></span>(常量名，常量值，<span class="literal">true</span> <span class="literal">or</span> <span class="literal">false</span>)</span><br><span class="line">  <span class="literal">true</span>(不区分大小写) <span class="literal">false</span>(默认区分大小写)</span><br><span class="line"><span class="number">4.</span>获取常量值 直接使用常量名(不要加$) ROOT  使用constant(<span class="string">'ROOT'</span>)函数获取</span><br><span class="line">  ex:   echo host;        echo constant(<span class="string">"host"</span>);</span><br><span class="line"><span class="number">5.</span>预定义常量  __FILE__ 获取当前文件的路径(两个下划线) __LINE__获取当前行数</span><br><span class="line">              PHP_VERSION   当前PHP服务器的版本</span><br><span class="line">引用赋值  $a=&amp;$b  把$b的地址引用赋给$a  $a改变$b也改变</span><br></pre></td></tr></table></figure></li></ul><h2 id="PHP-运算符"><a href="#PHP-运算符" class="headerlink" title="PHP 运算符"></a>PHP 运算符</h2><ol><li><p>算术运算符</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">+</span> <span class="literal">-</span> <span class="comment">*</span> <span class="comment">/</span> <span class="comment">%求模的时候正负值取决于被除数的正负</span></span><br><span class="line"><span class="comment"></span><span class="literal">+</span><span class="literal">+</span> <span class="literal">-</span><span class="literal">-</span>  <span class="comment">自增或自减</span> <span class="comment">对于布尔值没有效果</span> <span class="comment">对于字符串自增或自减属于升序或降序</span></span><br><span class="line"><span class="comment">$a</span><span class="literal">+</span><span class="literal">+</span><span class="comment">或$a</span><span class="literal">-</span><span class="literal">-</span>  <span class="comment">先用(赋值)再加</span> <span class="comment">结果不变</span> <span class="literal">+</span><span class="literal">+</span><span class="comment">$a或</span><span class="literal">-</span><span class="literal">-</span><span class="comment">$a</span>  <span class="comment">先加再用(赋值)</span> <span class="comment">结果加1或减1</span></span><br><span class="line"><span class="comment"></span><span class="literal">+</span><span class="literal">+</span><span class="comment">$a比$a</span><span class="literal">+</span><span class="literal">+</span> <span class="comment">效率高</span> <span class="comment">$a</span><span class="literal">+</span><span class="literal">+</span> <span class="comment">会分配临时变量来保存</span> <span class="comment">$a</span> <span class="comment">然后再</span><span class="literal">+</span><span class="literal">+</span></span><br></pre></td></tr></table></figure></li><li><p>赋值运算符  <code>把右边的值赋给左边的变量或常量</code></p></li><li><p>字符串运算符</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">连接运算符      <span class="string">"."</span>,    将左右两个字符串连接在一起</span><br><span class="line">连接赋值运算符  <span class="string">".="</span>    将右边的字符串加到左边的字符串后面</span><br></pre></td></tr></table></figure></li><li><p>比较运算符</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">比较运算符的结果是一个布尔型 <span class="tag">&lt;  &gt;</span>  <span class="tag">&lt;<span class="name">=</span>  &gt;</span>= ==</span><br><span class="line">不等于 !=    恒等于 === 值和类型都相同  非恒等于!== 数值不相等或类型不相同</span><br></pre></td></tr></table></figure></li><li><p>逻辑运算符</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">and</span>或&amp;&amp; 逻辑与    当两边都为<span class="literal">true</span>时，才返回<span class="literal">true</span>，否则返回<span class="literal">false</span></span><br><span class="line"><span class="keyword">or</span>或<span class="params">||</span>  逻辑或    只要有一个为<span class="literal">true</span>时，返回<span class="literal">true</span>，都为假时才返回<span class="literal">false</span></span><br><span class="line">xor     逻辑异或  当两个操作数一个为真一个为假时，才返回<span class="literal">true</span></span><br><span class="line">！      逻辑非    单一操作数为<span class="literal">true</span>，则返回<span class="literal">false</span></span><br><span class="line">逻辑运算的短路特性<span class="symbol">:defined</span>(<span class="string">"PI"</span>)<span class="params">||</span>define(<span class="string">"PI"</span>,<span class="number">3.14</span>)</span><br></pre></td></tr></table></figure></li><li><p>位运算符</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">对二进制位从低位到高位对齐后进行计算</span><br><span class="line">&amp; 按位与  | 按位或 ^ 按位异或 ~ 按位取反</span><br><span class="line">&lt;&lt; 向左移n位 数字增大<span class="number">2</span>的n次方(乘以<span class="number">2</span>的n次方)  &gt;&gt;向右移位  数字减小<span class="number">2</span>倍(除以<span class="number">2</span>)</span><br><span class="line">按位运算不会出现短路</span><br></pre></td></tr></table></figure></li><li><p>三元运算符(条件运算符)</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">表达式<span class="number">1</span>？表达式<span class="number">2</span>：表达式<span class="number">3</span></span><br><span class="line">如果表达式<span class="number">1</span>为真则执行表达式<span class="number">2</span>，表达式<span class="number">1</span>为假则执行表达式<span class="number">3</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="PHP语句"><a href="#PHP语句" class="headerlink" title="PHP语句"></a>PHP语句</h2><p>程序的3种控制结构 <code>顺序结构  分支(选择)结构  循环结构</code></p><ul><li><p>条件控制语句</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>语句                                  <span class="keyword">if</span>..<span class="keyword">else</span>语句</span><br><span class="line"><span class="keyword">if</span>(expr)&#123;                               <span class="keyword">if</span>(expr)&#123;</span><br><span class="line">          statement;                              statement;</span><br><span class="line">&#125;只有一条语句时，大括号可以省略          &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                                                statement;</span><br><span class="line">                                        &#125;</span><br><span class="line"><span class="keyword">elseif</span>语句                              <span class="keyword">switch</span>...<span class="keyword">case</span>语句</span><br><span class="line"><span class="keyword">if</span>(expr1)&#123;                              <span class="keyword">switch</span>(变量)&#123;</span><br><span class="line">            statement1;                       <span class="keyword">case</span> 值<span class="number">1</span>:statement1;</span><br><span class="line">          &#125;<span class="keyword">elseif</span>(expr2)&#123;                              <span class="keyword">break</span>;</span><br><span class="line">            statement2;                       <span class="keyword">case</span> 值<span class="number">2</span>:statement2;</span><br><span class="line">          &#125;<span class="keyword">elseif</span>&#123;                                     <span class="keyword">break</span>;</span><br><span class="line">            statement3;                       <span class="keyword">case</span> 值<span class="number">3</span>:statement3;</span><br><span class="line">          &#125;<span class="keyword">else</span>&#123;                                       <span class="keyword">break</span>;</span><br><span class="line">            statement4;                       <span class="keyword">default</span>:statement;</span><br><span class="line">          &#125;                              &#125;</span><br><span class="line">a.<span class="keyword">switch</span>(变量) 变量的类型只能是整型或字符串</span><br><span class="line">b.<span class="keyword">switch</span> <span class="keyword">case</span> 适合单个值匹配  <span class="keyword">elseif</span> 适合判断范围时使用</span><br><span class="line">c.<span class="keyword">break</span>是退出<span class="keyword">switch</span>使用的,如果需要同时匹配多个值可以使用多个<span class="keyword">case</span>而不加<span class="keyword">break</span></span><br></pre></td></tr></table></figure></li><li><p>循环控制语句</p><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">while</span>循环语句            <span class="keyword">do</span>...<span class="keyword">while</span>循环语句       <span class="keyword">for</span>语句</span><br><span class="line">  <span class="keyword">while</span>(<span class="built_in">expr</span>)&#123;             <span class="keyword">do</span>&#123;                      <span class="keyword">for</span>(expr1;expr2;expr3)&#123;</span><br><span class="line">      statement;               statement;             statement;</span><br><span class="line">  &#125;//条件为真假时用<span class="keyword">while</span>   &#125;<span class="keyword">while</span>(<span class="built_in">expr</span>);           &#125;expr1变量的初始赋值,expr2为循</span><br><span class="line">先执行表达式，表达式为    先执行循环体，在判断表   环条件，expr3为变量递增或递减</span><br><span class="line"><span class="literal">true</span>时，才执行循环体      达式，成立再执行循环体   用于已知循环次数多条件循环操作</span><br></pre></td></tr></table></figure></li><li><p>跳转控制语句<br><code>break语句       break    n; 指定要跳出几层循环 结束循环结构</code><br><code>continue语句    continue n; 指定要跳出几层循环 只能终止本次循环</code></p></li><li><code>exit()</code>  die()函数是exit()函数的别名 输出一条信息 并退出当前脚本</li></ul><h2 id="PHP函数的使用"><a href="#PHP函数的使用" class="headerlink" title="PHP函数的使用"></a>PHP函数的使用</h2><p><code>函数是一段完成指定任务的已命名代码块</code></p><ul><li><p>自定义函数</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="function"><span class="keyword">function</span><span class="title">_name</span>(<span class="params">$arg1,$arg2</span>)</span>&#123;</span></span><br><span class="line"><span class="function">  <span class="title">fun_body</span></span>;</span><br><span class="line">  <span class="keyword">return</span> arg_n;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span><span class="title">_name</span>(<span class="params"></span>)</span>;<span class="comment">//函数的调用可以在函数前也可以在函数后面</span></span><br><span class="line"><span class="number">1.</span>函数名要有意义,函数名不区分大小写,不能重复定义，和保留字相同的名称不能使用</span><br><span class="line"><span class="number">2.</span>被传入的参数称为实参,而函数定义的参数成为形参,参数可有可无,可以有多个<span class="string">","</span>用逗号分隔</span><br><span class="line"><span class="number">3.</span>函数返回值<span class="keyword">return</span>后面紧跟要返回的一个值 不会直接输出 如果不写<span class="keyword">return</span>则返回NULL</span><br><span class="line">  a.可以终止函数后面不执行    b.返回一个结果</span><br><span class="line"><span class="number">4.</span>判断函数是否存在 <span class="function"><span class="keyword">function</span><span class="title">_exists</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">函数的参数的传递方式</span></span><br><span class="line"><span class="function">  1.按值传递方式   实参的值不会发生改变</span></span><br><span class="line"><span class="function">  2.按引用传递方式 将实参的内存地址传递给形参,当形参在函数中有任何改变时,实参的值也</span></span><br><span class="line"><span class="function">                  会发生变化.如果形参是引用参数,调用函数时,必须传一个变量不能是数值</span></span><br><span class="line"><span class="function">  3.默认参数       默认参数必须放在非默认参数的后面 (<span class="params">实参和形参是按顺序对应传递数据的</span>)</span></span><br><span class="line"><span class="function">  4.不定参数       <span class="title">func_get_args</span>(<span class="params"></span>) 将传递给脚本函数的所有参数当作数组返回</span></span><br><span class="line"><span class="function"><span class="title">PHP</span>函数对自身的调用成为递归调用</span></span><br><span class="line"><span class="function">回调函数: 指调用函数时,将另一个函数作为参数传递给调用的函数</span></span><br><span class="line"><span class="function">变量函数：如果将一个函数名称赋给一个变量  在变量后加上(<span class="params"></span>)就会调用对应的函数</span></span><br><span class="line"><span class="function"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>)</span>&#123;   &#125;  <span class="title">$var</span>="<span class="title">add</span>"  <span class="title">$var</span>(<span class="params"></span>)</span></span><br></pre></td></tr></table></figure></li><li><p>系统函数</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">引用文件(包含文件)</span><br><span class="line"><span class="keyword">include</span>与<span class="keyword">require</span>语句的区别</span><br><span class="line"><span class="number">1.</span><span class="keyword">include</span>调用外部文件只有程序执行到该语句才调用</span><br><span class="line"><span class="keyword">require</span>只要程序一执行,就会立刻调用文件</span><br><span class="line"><span class="number">2.</span>调用文件时,若没找到<span class="keyword">require</span>语句会输出严重错误,立即终止脚本的处理.</span><br><span class="line">而<span class="keyword">include</span>则会输出一个警告,不会终止脚本的运行,后面的可以继续执行</span><br><span class="line"><span class="keyword">include_once</span>与<span class="keyword">require_once</span>的区别</span><br><span class="line">都是确保被包含文件只能被包含一次.避免因多次包含而导致函数的重复定义而产生的错误</span><br><span class="line">不同的是在调用外部文件发生错误时,<span class="keyword">include_once</span>产生一个警告而<span class="keyword">require_once</span>则导致一个</span><br><span class="line">致命错误</span><br></pre></td></tr></table></figure></li><li><p>常用数学函数</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">abs</span>()  绝对值      pow(<span class="built_in">n</span>,m) <span class="built_in">n</span>的m次方    <span class="built_in">max</span>() 求两个以上数的最大值</span><br><span class="line"><span class="built_in">min</span>()  求两个以上数的最小值   <span class="built_in">rand</span>(<span class="built_in">n</span>,m)  返回<span class="built_in">n</span>和m之间的随机数</span><br></pre></td></tr></table></figure></li></ul><h2 id="PHP日期和时间"><a href="#PHP日期和时间" class="headerlink" title="PHP日期和时间"></a>PHP日期和时间</h2><ul><li><p>更改PHP语言中的时区设置</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.修改php.ini文件中的设置，将date.timezone=<span class="string">"Asia/Shanghai"</span>,重启Apache服务器</span><br><span class="line"><span class="number">2</span>.在程序中添加如下函数  date_default_timezone_get()获取当前时区</span><br><span class="line"><span class="function"><span class="title">date_default_timezone_set</span><span class="params">(PRC或Asia/Chongqing或Asia/Shanghai)</span></span></span><br></pre></td></tr></table></figure></li><li><p>获取当前时间的时间戳</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="built_in">time</span>().<span class="string">"&lt;br /&gt;"</span>;          <span class="comment">//返回时间戳 1470457489</span></span><br><span class="line"><span class="built_in">echo</span> microtime().<span class="string">"&lt;br /&gt;"</span>;     <span class="comment">//0.11247900 1470457489</span></span><br><span class="line"><span class="built_in">echo</span> microtime(<span class="literal">true</span>).<span class="string">"&lt;br /&gt;"</span>; <span class="comment">//1470457661.9925微秒的时间戳 计算程序运行的时间</span></span><br></pre></td></tr></table></figure></li><li><p>将时间戳格式化</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">date</span>('Y-m-d <span class="symbol">H:i</span><span class="symbol">:s</span>',<span class="built_in">time</span>());  <span class="built_in">date</span>(<span class="string">"Y年m月d日 H:i:s"</span>,<span class="built_in">time</span>());</span><br><span class="line">Y 四位完整的年份      m 表示月份          d 月份中的第几天有前导<span class="number">0</span></span><br><span class="line">l 英文格式星期        <span class="built_in">N</span> 星期中的第几天</span><br><span class="line">H <span class="number">24</span>小时格式有前导<span class="number">0</span>   i 有前导<span class="number">0</span>的分钟数   s 有前导<span class="number">0</span>的秒数</span><br></pre></td></tr></table></figure></li><li><p>获取指定日期的时间戳</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mktime(<span class="built_in">int</span> <span class="built_in">hour</span>,<span class="built_in">int</span> <span class="built_in">minute</span>,<span class="built_in">int</span> <span class="built_in">second</span>,<span class="built_in">int</span> mounth,<span class="built_in">int</span> <span class="built_in">day</span>,<span class="built_in">int</span> <span class="built_in">year</span>);</span><br><span class="line"><span class="comment">//取得指定日期的时间戳</span></span><br><span class="line">ex:  echo mktime(<span class="number">14</span>,<span class="number">35</span>,<span class="number">20</span>,<span class="number">11</span>,<span class="number">27</span>,<span class="number">2016</span>).<span class="string">"&lt;br /&gt;"</span>;  <span class="comment">//1470381856</span></span><br><span class="line">strtotime();获取英文格式日期时间字符串的时间戳(相对于当前时间)</span><br><span class="line"><span class="comment">//将英文文本的日期时间转化为unix时间戳</span></span><br><span class="line">ex:  strtotime(<span class="string">'now'</span>);   strtotime(<span class="string">'now -1 day'</span>) 前一天的时间戳</span><br><span class="line">checkdate(<span class="built_in">int</span> <span class="built_in">month</span>,<span class="built_in">int</span> <span class="built_in">day</span>,<span class="built_in">int</span> <span class="built_in">year</span>)检验日期的有效性</span><br></pre></td></tr></table></figure></li></ul><h2 id="PHP图像与图形"><a href="#PHP图像与图形" class="headerlink" title="PHP图像与图形"></a>PHP图像与图形</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">输出图像必须加header(<span class="string">'Content-type:image/gif'</span>)，屏蔽notice错误(变量未声明导致乱码)</span><br><span class="line"><span class="number">1</span>.创建资源(画布)</span><br><span class="line">  <span class="variable">$im</span>=imagecreatetruecolor(<span class="number">300</span>,<span class="number">300</span>)</span><br><span class="line"><span class="number">2</span>.设置颜色及填充背景色</span><br><span class="line">  <span class="variable">$co</span>=imagecolorallocate(<span class="variable">$im</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>)一般为白色</span><br><span class="line">  imagefill(<span class="variable">$im</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="variable">$co</span>)(按是否需要背景色)</span><br><span class="line"><span class="number">3</span>.设置绘制图形的颜色</span><br><span class="line">  <span class="variable">$red</span>=imagecolorallocate(<span class="variable">$im</span>,<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line"><span class="number">4</span>.绘制图像或在图像上写字</span><br><span class="line">  imageline(<span class="variable">$im</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">200</span>,<span class="variable">$red</span>)</span><br><span class="line"><span class="number">5</span>.输出或保存图像(iamgegif(<span class="variable">$im</span>,<span class="string">'image/meizi.gif'</span>))</span><br><span class="line">  imagegif(<span class="variable">$im</span>)</span><br><span class="line"><span class="number">6</span>.释放资源</span><br><span class="line">  imagedestroy(<span class="variable">$im</span>)</span><br><span class="line"><span class="function"><span class="title">imagefill</span><span class="params">(<span class="variable">$im</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="variable">$co</span>)</span></span>  区域填充    imagesetpixel(<span class="variable">$im</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="variable">$co</span>) 画一个点</span><br><span class="line"><span class="function"><span class="title">imageline</span><span class="params">(<span class="variable">$im</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">200</span>,<span class="variable">$co</span>)</span></span> 画一条线段</span><br><span class="line"><span class="function"><span class="title">imagerectangle</span><span class="params">(<span class="variable">$im</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">200</span>,<span class="variable">$co</span>)</span></span> 画一个矩形(填充的矩形imagerfilledectangle)</span><br><span class="line"><span class="function"><span class="title">imageellipse</span><span class="params">(<span class="variable">$im</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">150</span>,<span class="variable">$co</span>)</span></span> 画一个椭圆(填充的椭圆imagefilledellipse)</span><br><span class="line"><span class="function"><span class="title">imagearc</span><span class="params">(<span class="variable">$im</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">180</span>,<span class="number">180</span>,<span class="number">0</span>,<span class="number">100</span>,<span class="variable">$co</span>)</span></span> 画一个弧形</span><br><span class="line"><span class="function"><span class="title">imagestring</span><span class="params">(<span class="variable">$im</span>,<span class="number">5</span>,<span class="number">50</span>,<span class="number">150</span>,<span class="string">'hello world'</span>,<span class="variable">$co</span>)</span></span> 水平画一个字符串(垂直画imagestringup)</span><br><span class="line"><span class="function"><span class="title">imagettftext</span><span class="params">(<span class="variable">$im</span>,字体大小,角度,<span class="number">80</span>,<span class="number">90</span>,<span class="variable">$co</span>,字体路径,<span class="string">'文字'</span>)</span></span> 用自定义字体输出文字</span><br></pre></td></tr></table></figure><h2 id="PHP异常处理"><a href="#PHP异常处理" class="headerlink" title="PHP异常处理"></a>PHP异常处理</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.语法错误  2.运行时错误 3.逻辑错误</span><br><span class="line">错误报告及设置级别</span><br><span class="line">1.Notice注意级别  2.Warning警告级别  3.Fatal error严重错误级别</span><br><span class="line">屏蔽notice错误 error_reporting(E_ALL^E_NOTICE)</span><br><span class="line">用户自定义错误格式处理函数</span><br><span class="line">set_error_handler(<span class="string">"myerrorfun"</span>);</span><br><span class="line"><span class="variable">$mess</span>=<span class="string">""</span>;</span><br><span class="line"><span class="keyword">function</span> myerrorfun(<span class="variable">$error_type</span>,<span class="variable">$error_message</span>,<span class="variable">$error_file</span>,<span class="variable">$error_line</span>)&#123;</span><br><span class="line">    global <span class="variable">$mess</span>;</span><br><span class="line">    <span class="variable">$mess</span>.=<span class="string">"发生错误级别为&#123;<span class="variable">$error_type</span>&#125;类型,错误消息&#123;<span class="variable">$error_message</span>&#125;，在文件</span></span><br><span class="line"><span class="string">            &#123;<span class="variable">$error_file</span>&#125;中,第&#123;<span class="variable">$error_line</span>&#125;行。"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$mess</span>;</span><br></pre></td></tr></table></figure><h2 id="PHP中的会话控制"><a href="#PHP中的会话控制" class="headerlink" title="PHP中的会话控制"></a>PHP中的会话控制</h2><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">Cookie是一种由服务器端发送给客户端的片段信息,存储在客户端浏览器的内存或硬盘</span><br><span class="line">      (就好比商场的会员卡,保存在用户手中,在期限内都可以打折)</span><br><span class="line">设置cookie</span><br><span class="line">setcookie($name,[$value],[$expire],[$path],[$domain],[$source])</span><br><span class="line">setcookie(cookie名称,要存储的值,生存期限,存储路径,指定域名下有效,协议)</span><br><span class="line">         协议默认为<span class="number">0</span>(<span class="keyword">http</span>),<span class="number">1</span>(https)</span><br><span class="line">setcookie(‘username’,’Tom’,<span class="keyword">time</span>()+<span class="number">3600</span>*<span class="number">24</span>*<span class="number">7</span>)   通常只需要设置前三个参数</span><br><span class="line">设置数组形式的cookie应用</span><br><span class="line">setcookie(‘user[username]’,’Tom’,<span class="keyword">time</span>()+<span class="number">3600</span>*<span class="number">24</span>*<span class="number">7</span>)</span><br><span class="line">setcookie(‘user[userpwd]’,’Tom’,<span class="keyword">time</span>()+<span class="number">3600</span>*<span class="number">24</span>*<span class="number">7</span>)  注意数组的键不要加引号</span><br><span class="line">读取cookie</span><br><span class="line">浏览器会将所有的cookie信息存储在$_COOKIE的全局数组中,都去的时候则通过</span><br><span class="line">$_COOKIE[‘username’]或$_COOKIE[‘user’][‘username’]获取</span><br><span class="line">删除cookie</span><br><span class="line">a.将指定的cookie名称的值赋空</span><br><span class="line">setCookie(‘username’)   值为空,但名称依然存在$_COOKIE数组中</span><br><span class="line">b.将指定cookie设为过期状态</span><br><span class="line">setcookie(‘username’,’’,<span class="keyword">time</span>()<span class="number">-1</span>)  删除指定的cookie值,不会存在$_COOKIE中</span><br><span class="line">   注意:不能用<span class="keyword">unset</span>函数  删除cookie值</span><br><span class="line">session</span><br><span class="line">session是将数据存放在服务器中,在为web系统中,指用户与web系统的对话过程,即从打开浏览器登录到关闭浏览器的这段时间 (就好比会员卡的卡号由商场保存)</span><br><span class="line">在session中,在客户端保存由服务器为用户创建的sessionId,而在服务器端保存变量的值</span><br><span class="line">sessionId保存在客户端的cookie中,如果阻止cookie,则可以讲sessionID保存在地址栏url</span><br><span class="line">中,通过web请求,把sessionId发送给服务器,然后通过sessionId获取session值,由<span class="number">32</span>位</span><br><span class="line">十六进制数组成的字符串</span><br><span class="line">session的声明与使用</span><br><span class="line">开启会话   session_start()  作用  开启一个会话,返回已经存在的会话</span><br><span class="line">          在使用session_start()之前不能有任何的输出,空格或空行都不行</span><br><span class="line">session的注册与读取</span><br><span class="line">a  Session_start()    //开启session</span><br><span class="line">b  $_SESSION[‘username’] = ‘Tom’  //注册session变量并赋值</span><br><span class="line">读取同样需要先开启session_start()  然后在读取$name=$_SESSION[‘username’]</span><br><span class="line">通过session_name()获取session名称  session_id() 获取sessionId</span><br><span class="line">注销变量与销毁session</span><br><span class="line">删除session中的单个变量</span><br><span class="line">Unset($_SESSION[‘username’])  不要使用<span class="keyword">unset</span>($_SESSION)  删除整个$_SESSION数组</span><br><span class="line">销毁session  session_destroy()</span><br><span class="line">删除$_SESSION中所有的变量  $_SESSION=<span class="keyword">array</span>()</span><br><span class="line">在cookie中删除sessionId   setcookie(session_name,’’,<span class="keyword">time</span>()<span class="number">-1</span>,’/’)</span><br><span class="line">传递sessionId</span><br><span class="line">通过URL传递sessionId  &lt;a href=”index.php?&#123;session_name()&#125;=&#123;session_id()&#125;”&gt;传递&lt;/a&gt;</span><br></pre></td></tr></table></figure><h2 id="PHP正则表达式"><a href="#PHP正则表达式" class="headerlink" title="PHP正则表达式"></a>PHP正则表达式</h2><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">正则表达式就是一个匹配模式的字符串,必须在函数中使用</span><br><span class="line">正则表达式的组成</span><br><span class="line"><span class="number">1.</span>定界符     多种都可以常用为(<span class="string">"/../"</span>)除了字母、数字、<span class="string">\以外的字符</span></span><br><span class="line"><span class="number">2.</span>原子       最小的一个匹配单位(放在定界符内)必须有一个</span><br><span class="line"><span class="number">3.</span>元字符     不能单独使用，修饰原子，用来扩展原子功能和限定功能</span><br><span class="line"><span class="number">4.</span>模式修正符  对模式(正则)修正,作用整个表达式(写在定界符外)</span><br><span class="line"></span><br><span class="line">原子:打印字符(a-z A-Z <span class="number">0</span>-<span class="number">9</span>%)和非打印字符</span><br><span class="line">转义字符:A 可以将有意义的字符转义成普通字符     <span class="string">\^</span></span><br><span class="line">          B 可以将没有意义的字符转成有意义的原子 <span class="string">\t</span></span><br><span class="line">预定义字符集 <span class="string">\D非数字字符</span> <span class="string">\d数字</span> <span class="string">\W非单词字符</span> <span class="string">\w单词字符</span> <span class="string">\S非空白字符</span> <span class="string">\s空白字符</span></span><br><span class="line">自定义原子表 [<span class="number">13579</span>] [a-zA-Z]</span><br><span class="line"></span><br><span class="line">元字符: *   匹配前面的字符(原子)出现零次、一次或多次</span><br><span class="line">    +   匹配前面的字符出现<span class="number">1</span>次或多次,至少出现一次</span><br><span class="line">    ？  匹配前面的字符出现零次或<span class="number">1</span>次,不可出现多次</span><br><span class="line">  &#123;n&#125;  匹配前面的字符只能出现n次</span><br><span class="line">  &#123;n,&#125; 匹配前面的字符最少出现n次</span><br><span class="line">  &#123;n,m&#125;匹配前面的字符最少出现n次,最多出现m次</span><br><span class="line">    |   表示或的关系,它两边的原子只要有一个出现就可以</span><br><span class="line">  ^或<span class="string">\A</span> 表示必须以什么开始，必须写在最前面</span><br><span class="line">  $或<span class="string">\z</span> 表示必须以什么结尾，必须写在定界符最后面</span><br><span class="line">    ()    改变限定符的作用范围  子模式  反向引用</span><br><span class="line">    []    只能匹配单个字符  -  表示字符的范围</span><br><span class="line">    .    可以匹配出换行符以外的任意一个字符</span><br><span class="line">    [^]   表示排除的意思</span><br><span class="line">模式修正符</span><br><span class="line">  i 修正正则表达式不区分大小写</span><br><span class="line">  m 修正正则表达式可视为多行</span><br><span class="line">  s 可以使 . 匹配换行符</span><br><span class="line">  x 可以使正则表达式忽略空白</span><br><span class="line">  g 查找所有可能的匹配结果可以是多个</span><br><span class="line">preg_match()正则查找  preg_split()正则分割 preg_replace()正则替换</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>原生ajax封装</title>
      <link href="/%E5%8E%9F%E7%94%9Fajax/"/>
      <url>/%E5%8E%9F%E7%94%9Fajax/</url>
      
        <content type="html"><![CDATA[<p><code>Ajax</code> 即“Asynchronous Javascript And XML”(<code>异步 JavaScript 和 XML</code>)，是指一种创建交互式网页应用的网页开发技术。<code>Ajax</code> 是一种在无需重新加载整个网页的情况下，能够更新部分网页的技术。通过在后台与服务器进行少量数据交换，<code>Ajax</code>可以使网页实现异步更新。这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。</p><a id="more"></a><h2 id="原生ajax封装及使用"><a href="#原生ajax封装及使用" class="headerlink" title="原生ajax封装及使用"></a>原生ajax封装及使用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $ = &#123;</span><br><span class="line">  <span class="comment">//将对象转换成字符串 用于拼接参数</span></span><br><span class="line">  params: <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">      str += key + <span class="string">"="</span> + obj[key] + <span class="string">"&amp;"</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//组装的字符串多了一个&amp;,截取之后返回一个新的字符串</span></span><br><span class="line">    str = str.substr(<span class="number">0</span>, str.length - <span class="number">1</span>)</span><br><span class="line">    <span class="comment">//username=zhangsan&amp;age=11&amp;sex=nan</span></span><br><span class="line">    <span class="keyword">return</span> str</span><br><span class="line">  &#125;,</span><br><span class="line">  ajax: <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1:创建对象</span></span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    <span class="comment">//将 对象=&#123;username:"zhangsan",age:11,sex:"nan"&#125;  转换成 字符串的格式  username=zhangsan&amp;age=11&amp;sex=nan</span></span><br><span class="line">    <span class="keyword">if</span> (obj.beforeSend) &#123;</span><br><span class="line">      <span class="comment">//因为用户在调用的时候，可能没有传递,所以需要进行判断.</span></span><br><span class="line">      <span class="keyword">var</span> flag = obj.beforeSend()</span><br><span class="line">      <span class="keyword">if</span> (flag == <span class="literal">false</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//对obj.data 的类型进行判断，如果是对象类型，我才去进行处理.</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj.data == <span class="string">"object"</span>) &#123;</span><br><span class="line">      obj.data = <span class="keyword">this</span>.params(obj.data)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2:打开对象</span></span><br><span class="line">    <span class="comment">//注意：如果是get 方式提交，参数在地址的后面</span></span><br><span class="line">    <span class="keyword">if</span> (obj.type.toLowerCase() == <span class="string">"get"</span>) &#123;</span><br><span class="line">      obj.url = obj.url + <span class="string">"?"</span> + obj.data</span><br><span class="line">      obj.data = <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">    xhr.open(obj.type, obj.url)</span><br><span class="line">    <span class="comment">//注意：处理post 我们需要给一个请求头</span></span><br><span class="line">    <span class="keyword">if</span> (obj.type.toLowerCase() == <span class="string">"post"</span>) &#123;</span><br><span class="line">      xhr.setRequestHeader(<span class="string">"Content-Type"</span>, <span class="string">"application/x-www-form-urlencoded"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3:发送数据</span></span><br><span class="line">    xhr.send(obj.data)</span><br><span class="line">    <span class="comment">//4:接收数据</span></span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="comment">//响应完成</span></span><br><span class="line">        <span class="keyword">if</span> (xhr.status == <span class="number">200</span>) &#123;</span><br><span class="line">          <span class="comment">//响应成功</span></span><br><span class="line">          <span class="keyword">var</span> data = xhr.responseText</span><br><span class="line">          obj.success(data)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          obj.error &amp;&amp; obj.error()</span><br><span class="line">        &#125;</span><br><span class="line">        obj.complete &amp;&amp; obj.complete()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">  url:<span class="string">"../ajax.php"</span>,</span><br><span class="line">  type:<span class="string">"POST"</span>,</span><br><span class="line">  data:&#123;</span><br><span class="line">    username:<span class="string">"zhangsan"</span>,</span><br><span class="line">    age:<span class="number">11</span>,</span><br><span class="line">    sex:<span class="string">"nan"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//设置一个过滤器,这个也是一个回调函数. 请求发送之前调用.</span></span><br><span class="line">  beforeSend:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"请求发送之前调用"</span>)</span><br><span class="line">    <span class="comment">//我们可以在这里去对发送到服务器的数据进行一些校验，正则校验</span></span><br><span class="line">    <span class="comment">//如果验证不通过，就不发送请求了</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//这个是一个回调函数，数据响应成功的时候调用</span></span><br><span class="line">  success:<span class="function"><span class="keyword">function</span>(<span class="params">info</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(info)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"数据响应成功调用"</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//请求完成的时候调用. 我是想给用户一些提示.不管成功还是失败</span></span><br><span class="line">  complete:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"请求完成的时候去调用"</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//请求出错的时候调用</span></span><br><span class="line">  error:<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"请求出错的时候调用"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Emmet插件用法(二)</title>
      <link href="/Emmet%E6%8F%92%E4%BB%B6%E7%94%A8%E6%B3%95(%E4%BA%8C)/"/>
      <url>/Emmet%E6%8F%92%E4%BB%B6%E7%94%A8%E6%B3%95(%E4%BA%8C)/</url>
      
        <content type="html"><![CDATA[<p><code>Emmet</code>(前身是<code>Zen Coding</code>)是前端开发快速输入代码一种方式，它可以极大的提高代码编写的效率，它提供了一种非常简练的语法规则，然后立刻生成对应的 <code>HTML</code> 结构或者 <code>CSS</code> 代码，同时还有多种实用的功能帮助进行前端开发。用和 <code>CSS</code> 选择器相似的语法来描述元素的嵌套层级关系和属性，实现 <code>HTML/XML/CSS</code> 等代码的智能自动补全。<br><a id="more"></a></p><h2 id="CSS常用语法"><a href="#CSS常用语法" class="headerlink" title="CSS常用语法"></a>CSS常用语法</h2><ol><li><p><code>常用基本css</code>语法</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* por */</span>   &#123; <span class="attribute">position</span>: relative &#125;</span><br><span class="line"><span class="comment">/* psa */</span>   &#123; <span class="attribute">position</span>: absolute &#125;</span><br><span class="line"><span class="comment">/* psf */</span>   &#123; <span class="attribute">position</span>: fixed &#125;</span><br><span class="line"><span class="comment">/* pss */</span>   &#123; <span class="attribute">position</span>: static &#125;</span><br><span class="line"><span class="comment">/* fll */</span>   &#123; <span class="attribute">float</span>: left &#125;</span><br><span class="line"><span class="comment">/* flr */</span>   &#123; <span class="attribute">float</span>: right &#125;</span><br><span class="line"><span class="comment">/* cl */</span>    &#123; <span class="attribute">clear</span>: both &#125;</span><br><span class="line"><span class="comment">/* di */</span>    &#123; <span class="attribute">display</span>: inline &#125;</span><br><span class="line"><span class="comment">/* db */</span>    &#123; <span class="attribute">display</span>: block &#125;</span><br><span class="line"><span class="comment">/* dib */</span>   &#123; <span class="attribute">display</span>: inline-block &#125;</span><br><span class="line"><span class="comment">/* df */</span>    &#123; <span class="attribute">display</span>: flex &#125;</span><br><span class="line"><span class="comment">/* ov */</span>    &#123; <span class="attribute">overflow</span>: hidden &#125;</span><br><span class="line"><span class="comment">/* ov:s */</span>  &#123; <span class="attribute">overflow</span>: scroll &#125;</span><br><span class="line"><span class="comment">/* ova */</span>   &#123; <span class="attribute">overflow</span>: auto &#125;</span><br><span class="line"><span class="comment">/* mt */</span>    &#123; <span class="attribute">margin-top</span>: <span class="number">10px</span> &#125;</span><br><span class="line"><span class="comment">/* mb */</span>    &#123; <span class="attribute">margin-right</span>: <span class="number">10px</span> &#125;</span><br><span class="line"><span class="comment">/* mr */</span>    &#123; <span class="attribute">margin-bottom</span>: <span class="number">10px</span> &#125;</span><br><span class="line"><span class="comment">/* ml */</span>    &#123; <span class="attribute">margin-left</span>: <span class="number">10px</span> &#125;</span><br><span class="line"><span class="comment">/* pt */</span>    &#123; <span class="attribute">padding-top</span>: <span class="number">10px</span> &#125;</span><br><span class="line"><span class="comment">/* pb */</span>    &#123; <span class="attribute">padding-right</span>: <span class="number">10px</span> &#125;</span><br><span class="line"><span class="comment">/* pr */</span>    &#123; <span class="attribute">padding-bottom</span>: <span class="number">10px</span> &#125;</span><br><span class="line"><span class="comment">/* pl */</span>    &#123; <span class="attribute">padding-left</span>: <span class="number">10px</span> &#125;</span><br></pre></td></tr></table></figure></li><li><p><code>border</code>和<code>background</code>常用语法</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* bd */</span>    &#123; <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#000</span> &#125;</span><br><span class="line"><span class="comment">/* bdcl */</span>  &#123; <span class="attribute">border-collapse</span>: collapse &#125;</span><br><span class="line"><span class="comment">/* bdt */</span>   &#123; <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="number">#000</span> &#125;</span><br><span class="line"><span class="comment">/* bdb */</span>   &#123; <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#000</span> &#125;</span><br><span class="line"><span class="comment">/* bdl */</span>   &#123; <span class="attribute">border-left</span>: <span class="number">1px</span> solid <span class="number">#000</span> &#125;</span><br><span class="line"><span class="comment">/* bdr */</span>   &#123; <span class="attribute">border-right</span>: <span class="number">1px</span> solid <span class="number">#000</span> &#125;</span><br><span class="line"><span class="comment">/* bdrs */</span>  &#123; <span class="attribute">border-radius</span>: <span class="number">10px</span> &#125;</span><br><span class="line"><span class="comment">/* bgs */</span>   &#123; <span class="attribute">background-size</span>: contain &#125;</span><br><span class="line"><span class="comment">/* bgc */</span>   &#123; <span class="attribute">background-color</span>: <span class="number">#fff</span> &#125;</span><br><span class="line"><span class="comment">/* bgp */</span>   &#123; <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">0</span> &#125;</span><br><span class="line"><span class="comment">/* bgi */</span>   &#123; <span class="attribute">background-image</span>: <span class="built_in">url</span>() &#125;</span><br><span class="line"><span class="comment">/* bgr */</span>   &#123; <span class="attribute">background-repeat</span>: no-repeat &#125;</span><br></pre></td></tr></table></figure></li><li><p><code>text</code>文字类语法</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* fw */</span>    &#123; <span class="attribute">font-weight</span>: normal &#125;</span><br><span class="line"><span class="comment">/* fsn */</span>   &#123; <span class="attribute">font-style</span>: normal &#125;</span><br><span class="line"><span class="comment">/* fz */</span>    &#123; <span class="attribute">font-size</span>: <span class="number">10px</span> &#125;</span><br><span class="line"><span class="comment">/* ff */</span>    &#123; <span class="attribute">font-family</span>: serif &#125;</span><br><span class="line"><span class="comment">/* va */</span>    &#123; <span class="attribute">vertical-align</span>: top &#125;</span><br><span class="line"><span class="comment">/* ta */</span>    &#123; <span class="attribute">text-align</span>: left &#125;</span><br><span class="line"><span class="comment">/* tac */</span>   &#123; <span class="attribute">text-align</span>: center &#125;</span><br><span class="line"><span class="comment">/* tar */</span>   &#123; <span class="attribute">text-align</span>: right &#125;</span><br><span class="line"><span class="comment">/* taj */</span>   &#123; <span class="attribute">text-align</span>: justify &#125;</span><br><span class="line"><span class="comment">/* td */</span>    &#123; <span class="attribute">text-decoration</span>: none &#125;</span><br><span class="line"><span class="comment">/* ti */</span>    &#123; <span class="attribute">text-indent</span>: <span class="number">2em</span> &#125;</span><br><span class="line"><span class="comment">/* ts */</span>    &#123; <span class="attribute">text-shadow</span>: hoff voff blur <span class="number">#000</span> &#125;</span><br><span class="line"><span class="comment">/* lh */</span>    &#123; <span class="attribute">line-height</span>: <span class="number">10px</span> &#125;</span><br><span class="line"><span class="comment">/* ls */</span>    &#123; <span class="attribute">letter-spacing</span>: normal &#125;</span><br><span class="line"><span class="comment">/* whs */</span>   &#123; <span class="attribute">white-space</span>: nowrap &#125;</span><br><span class="line"><span class="comment">/* wb */</span>    &#123; <span class="attribute">word-break</span>: normal &#125;</span><br><span class="line"><span class="comment">/* ws */</span>    &#123; <span class="attribute">word-spacing</span>: <span class="number">10px</span> &#125;</span><br></pre></td></tr></table></figure></li><li><p>其他常用语法</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* bxz */</span>   &#123; <span class="attribute">box-sizing</span>: border-box &#125;</span><br><span class="line"><span class="comment">/* bxsh */</span>  &#123; <span class="attribute">box-shadow</span>: inset hoff voff blur <span class="number">#000</span> &#125;</span><br><span class="line"><span class="comment">/* w10 */</span>   &#123; <span class="attribute">width</span>: <span class="number">10px</span> &#125;</span><br><span class="line"><span class="comment">/* h10 */</span>   &#123; <span class="attribute">height</span>: <span class="number">10px</span> &#125;</span><br><span class="line"><span class="comment">/* w100p */</span> &#123; <span class="attribute">width</span>: <span class="number">100%</span> &#125;</span><br><span class="line"><span class="comment">/* cr */</span>    &#123; <span class="attribute">cursor</span>: pointer &#125;</span><br><span class="line"><span class="comment">/* c */</span>     &#123; <span class="attribute">color</span>: <span class="number">#fff</span> &#125;</span><br><span class="line"><span class="comment">/* ol */</span>    &#123; <span class="attribute">outline</span>: none &#125;</span><br><span class="line"><span class="comment">/* lis */</span>   &#123; <span class="attribute">list-style</span>: none; &#125;</span><br><span class="line"><span class="comment">/* op */</span>    &#123; <span class="attribute">opacity</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="comment">/* op */</span>    &#123; <span class="attribute">opacity</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="comment">/* ! */</span>     &#123; <span class="attribute">display</span>: none <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="comment">/* anm */</span>   &#123; <span class="attribute">animation</span>: name duration timing-function delay iteration-count direction fill-mode &#125;</span><br><span class="line"><span class="comment">/* trfr */</span>  &#123; <span class="attribute">transform</span>: <span class="built_in">rotate</span>(angle) &#125;</span><br><span class="line"><span class="comment">/* trf */</span>   &#123; <span class="attribute">transform</span>: <span class="string">''</span> &#125;</span><br><span class="line"><span class="comment">/* trft */</span>  &#123; <span class="attribute">transform</span>: <span class="built_in">translate</span>(x, y) &#125;</span><br><span class="line"><span class="comment">/* trfo */</span>  &#123; <span class="attribute">transform-origin</span>: <span class="number">0</span> &#125;</span><br><span class="line"><span class="comment">/* trs */</span>   &#123; <span class="attribute">transition</span>: prop time &#125;</span><br><span class="line"><span class="comment">/* @kf */</span>   @<span class="keyword">keyframes</span></span><br><span class="line">/* lg */    &#123; <span class="selector-tag">background-image</span>: <span class="selector-tag">linear-gradient</span>() &#125;</span><br><span class="line"><span class="comment">/*  单位: p-&gt;%  e-&gt;em r-&gt;rem x-&gt;ex  */</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/* w100 */</span>   <span class="attribute">width</span>: <span class="number">100px</span>;  <span class="comment">/* 数值默认单位px */</span></span><br><span class="line">    <span class="comment">/* w100p */</span>  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="comment">/* w100e */</span>  <span class="attribute">width</span>: <span class="number">100em</span>;</span><br><span class="line">    <span class="comment">/* w100x */</span>  <span class="attribute">width</span>: <span class="number">100ex</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*  色值: #6-&gt;#666666  #fc-&gt;#fcfcfc #fc0-&gt;#ffcc00  */</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/* c#6 */</span>   <span class="attribute">color</span>: <span class="number">#666666</span>;</span><br><span class="line">    <span class="comment">/* c#fc */</span>  <span class="attribute">color</span>: <span class="number">#fcfcfc</span>;</span><br><span class="line">    <span class="comment">/* c#fc0 */</span> <span class="attribute">color</span>: <span class="number">#ffcc00</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 多个值 m10p-20r-30e-40x */</span>  &#123; <span class="attribute">margin</span>: <span class="number">10%</span> -<span class="number">20rem</span> -<span class="number">30em</span> -<span class="number">40ex</span>; &#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="http://emmet.evget.com/" target="_blank" rel="noopener">emmet查询地址</a><br><a href="https://blog.csdn.net/u011525268/article/details/53232288" target="_blank" rel="noopener">快速生成html标签和css快捷键</a></p>]]></content>
      
      
      <categories>
          
          <category> Emmet </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Emmet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Emmet插件用法(一)</title>
      <link href="/Emmet%E6%8F%92%E4%BB%B6%E7%94%A8%E6%B3%95(%E4%B8%80)/"/>
      <url>/Emmet%E6%8F%92%E4%BB%B6%E7%94%A8%E6%B3%95(%E4%B8%80)/</url>
      
        <content type="html"><![CDATA[<p><code>Emmet</code>(前身是<code>Zen Coding</code>)是前端开发快速输入代码一种方式，它可以极大的提高代码编写的效率，它提供了一种非常简练的语法规则，然后立刻生成对应的 <code>HTML</code> 结构或者 <code>CSS</code> 代码，同时还有多种实用的功能帮助进行前端开发。用和 <code>CSS</code> 选择器相似的语法来描述元素的嵌套层级关系和属性，实现 <code>HTML/XML/CSS</code> 等代码的智能自动补全。<br><a id="more"></a></p><h2 id="快速生成html结构语法"><a href="#快速生成html结构语法" class="headerlink" title="快速生成html结构语法"></a>快速生成html结构语法</h2><ol><li><p><code>&gt;</code> 快速生成子元素</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- nav&gt;ul&gt;li --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>+</code> 生成并列同级元素</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- header+section+footer--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>^</code> 返回父层元素,可以多层</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- header+setion&gt;p&gt;i+em^^footer --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">setion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>*</code>  生成重复的元素</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ul&gt;li*3 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>()</code> 生成复杂的组合</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- header+(setion&gt;dl&gt;(dt+dd*2))+footer --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dt</span>&gt;</span><span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dd</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dd</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">setion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>.或#</code> 使用.和#来生成ID和CLASS属性</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- div#header+div.page+div#footer.class1.name --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"header"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"page"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"footer"</span> <span class="attr">class</span>=<span class="string">"class1 name"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>[]</code> 使用中括号来自定义需要的属性</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- td[title colspan data] --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">title</span>=<span class="string">""</span> <span class="attr">colspan</span>=<span class="string">""</span> <span class="attr">data</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- td[title='hello' colspan='3' data='12'] --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">title</span>=<span class="string">"hello"</span> <span class="attr">colspan</span>=<span class="string">"3"</span> <span class="attr">data</span>=<span class="string">"12"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>{}</code> 生成标签内的内容</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- a&#123;百度一下&#125;+b&#123;你就知道&#125; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>百度一下<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>你就知道<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>$</code> 自动生成连续的编号,可以多个</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ul&gt;li.item$&#123;item$$&#125;*3 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item1"</span>&gt;</span>item01<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item2"</span>&gt;</span>item02<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item3"</span>&gt;</span>item03<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 从指定的数字开始编号  ul&gt;li.item$@3&#123;item$@2$@5&#125;*3 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item3"</span>&gt;</span>item25<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item4"</span>&gt;</span>item27<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item5"</span>&gt;</span>item29<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 指定反向编号 ul&gt;li.item$@-3&#123;item$@2$@-5&#125;*3 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item5"</span>&gt;</span>item29<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item4"</span>&gt;</span>item27<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item3"</span>&gt;</span>item25<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>对于特定的结构可以省略html标签,采用默认的标签</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- .warp&gt;p&gt;.text --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"warp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ul&gt;.item --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- table&gt;(.col&gt;.item*2)*3 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">"col"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">"col"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">"col"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>lorem</code> 快速生成大段文本(占位文字)</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- lorem + Tab --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dicta, repellat rem. Inventore itaque illo saepe aut optio architecto esse porro nisi placeat, ratione eos voluptas, totam est quia recusandae vero!</span><br><span class="line"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ul&gt;lorem10.item*2 每一组多少个单词 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span>Lorem ipsum dolor sit amet consectetur adipisicing elit. Incidunt, dolorem.<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span>Vero excepturi fugiat repudiandae. Qui at consequatur ut soluta! Cumque.<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="HTML常用快捷语法"><a href="#HTML常用快捷语法" class="headerlink" title="HTML常用快捷语法"></a>HTML常用快捷语法</h2><ol><li><p><code>!</code>  快速生成<code>html5</code>结构</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>link</code> 快速生成 link类的标签</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- link --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- link:favicon --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"shortcut icon"</span> <span class="attr">href</span>=<span class="string">"favicon.ico"</span> <span class="attr">type</span>=<span class="string">"image/x-icon"</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>meta</code> 快速生成 meta标签</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- meta:utf --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html;charset=UTF-8"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- meta:utf --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- meta:vp --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>script</code> 快速生成script标签</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- script:src --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">""</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>input</code> 快速生成表单元素</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- inp --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- input:b --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- input:p --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- input:number --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"number"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- input:c --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- input:r --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- input:f --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- input:s --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">""</span> /&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>btn</code> 快速生成button</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- btn --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- btn:s --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- btn:r --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"reset"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="http://emmet.evget.com/" target="_blank" rel="noopener">emmet查询地址</a><br><a href="https://blog.csdn.net/u011525268/article/details/53232288" target="_blank" rel="noopener">快速生成html标签和css快捷键</a></p>]]></content>
      
      
      <categories>
          
          <category> Emmet </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Emmet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>jQuery中的ajax</title>
      <link href="/jQuery%E4%B8%AD%E7%9A%84ajax/"/>
      <url>/jQuery%E4%B8%AD%E7%9A%84ajax/</url>
      
        <content type="html"><![CDATA[<p><code>jQuery</code>库拥有完整的<code>Ajax</code>兼容套件。其中的函数和方法允许我们在不刷新浏览器的情况下从服务器加载数据,<code>jQuery</code>中有多种ajax的请求方式,例如<code>load()</code>,<code>$.ajax()</code>,<code>$.get()</code>,<code>$.post()</code>,<code>$.getJson()</code>等<br><a id="more"></a></p><h2 id="selector-load"><a href="#selector-load" class="headerlink" title="$(selector).load()"></a>$(selector).load()</h2><p><code>$(selector). load( url,data,function(response,status,xhr) )</code><br><code>load()</code>方法通过AJAX请求从服务器加载数据,并把返回的数据放置到指定的元素中,默认get请求.</p><ul><li>url 规定要将请求发送到哪个 URL。</li><li>data 可选。规定连同请求发送到服务器的数据。</li><li>function(response,status,xhr) 可选。规定当请求完成时运行的函数。<br>参数：response ­ 包含来自请求的结果数据 status 包含请求的状态 xhr 包含 XMLHttpRequest 对象</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//把hello.txt的文本内容加载至$('#box');</span></span><br><span class="line">$(<span class="string">'#box'</span>).load(<span class="string">'hello.txt'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">response,status,xhr</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(response)</span><br><span class="line">  <span class="built_in">console</span>.log(status)</span><br><span class="line">  <span class="built_in">console</span>.log(xhr)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="get"><a href="#get" class="headerlink" title="$.get()"></a>$.get()</h2><p><code>$(selector).get(url,data,success(response,status,xhr),dataType)</code><br><code>get()</code>方法通过远程HTTP GET请求载入信息</p><ul><li>url 必需 规定请求的url</li><li>data 可选 规定发送请求的数据</li><li>success(response, status, xhr) 可选 请求成功时的回调函数</li><li>dataType 可选 规定服务器响应返回的数据类型</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$.get(<span class="string">'hello.txt'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="post"><a href="#post" class="headerlink" title="$.post()"></a>$.post()</h2><p><code>$(selector).post(url,data,success(response,status,xhr),dataType)</code><br><code>post()</code>方法通过远程HTTP POST请求从服务器载入数据</p><ul><li>url 必需 规定请求的url</li><li>data 可选 规定发送请求的数据</li><li>success(response, status, xhr) 可选 请求成功时的回调函数</li><li>dataType 可选 规定服务器响应返回的数据类型</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$.post(<span class="string">'order.php'</span>, &#123; <span class="attr">id</span>: <span class="string">'1000'</span>&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="getJSON"><a href="#getJSON" class="headerlink" title="$.getJSON()"></a>$.getJSON()</h2><p><code>$(selector).getJSON(url,data,success(response,status,xhr))</code><br><code>getJSON()</code>方法通过远程HTTP GET请求载入JSON数据</p><ul><li>url 必需 规定请求的url</li><li>data 可选 规定发送请求的数据</li><li>success(response, status, xhr) 可选 请求成功时的回调函数</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$.getJSON(<span class="string">'order.php'</span>, &#123; <span class="attr">id</span>: <span class="string">'1000'</span>&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="ajax"><a href="#ajax" class="headerlink" title="$.ajax()"></a>$.ajax()</h2><p><code>$.ajax()</code>方法是JQuery将Ajax数据请求进行了封装，并指明请求的方式、地址、数据类型，以及回调方法等。</p><ul><li>url 必需 发送请求的url地址</li><li>type 请求类型  (“POST” 或 “GET”等)， 默认为 “ GET “。</li><li>async 是否异步 默认为true(即请求均为异步),false 设置请求为同步,操作必须等请求完成才可继续执行</li><li>data  发送到服务器的数据 get请求会附加在地址栏上</li><li>beforeSend 发送请求前修改XHR对象,如自定义HTTP头</li><li>complete 当请求完成时调用函数—不管成功还是失败都会调用</li><li>dataType 预期服务器返回的数据类型 (xml,json,xml,text,html等)</li><li>cache 默认为true,设置为false将不缓存请求信息</li><li>timeout 设置请求超时时间(毫秒)</li><li>success 请求成功回调函数</li><li>error 请求失败回调函数</li><li>xhrFields: {withCredentials: true} 通过将withCredentials属性设置为true，可以指定某个请求应该发送凭据。</li><li>crossDomain: true</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#send'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $.ajax(&#123;</span><br><span class="line">    type: <span class="string">"POST"</span>,</span><br><span class="line">    url: <span class="string">"XXX.php"</span>,</span><br><span class="line">    data: &#123;<span class="attr">username</span>:$(<span class="string">"#username"</span>).val(), <span class="attr">content</span>:$(<span class="string">"#content"</span>).val()&#125;,</span><br><span class="line">    dataType: <span class="string">"json"</span>,</span><br><span class="line">    timeout: <span class="number">30000</span>,</span><br><span class="line">    beforeSend: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="comment">// 设置请求头</span></span><br><span class="line">      request.setRequestHeader(<span class="string">"BBG-Key"</span>, <span class="string">"ab9ef204-3253-49d4-b229-3cc2383480a6"</span>);</span><br><span class="line">      <span class="comment">// 防止重复提交</span></span><br><span class="line">      $(<span class="string">"#submit"</span>).attr(&#123; <span class="attr">disabled</span>: <span class="string">"disabled"</span> &#125;);</span><br><span class="line">      <span class="comment">// 设置loading</span></span><br><span class="line">      $(<span class="string">"loading"</span>).show();</span><br><span class="line">    &#125;,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">      $(<span class="string">'#resText'</span>).empty();   <span class="comment">//清空resText里面的所有内容</span></span><br><span class="line">      <span class="keyword">var</span> html = <span class="string">''</span>;</span><br><span class="line">      $.each(data, <span class="function"><span class="keyword">function</span>(<span class="params">commentIndex, comment</span>)</span>&#123;</span><br><span class="line">        html += <span class="string">'&lt;div class="comment"&gt;&lt;h6&gt;'</span> + comment[<span class="string">'username'</span>]</span><br><span class="line">            + <span class="string">':&lt;/h6&gt;&lt;p class="para"'</span> + comment[<span class="string">'content'</span>]</span><br><span class="line">            + <span class="string">'&lt;/p&gt;&lt;/div&gt;'</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">      $(<span class="string">'#resText'</span>).html(html);</span><br><span class="line">    &#125;,</span><br><span class="line">    error: <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err)</span><br><span class="line">    &#125;,</span><br><span class="line">    complete: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">// 不管成功还是失败都会调用</span></span><br><span class="line">      <span class="comment">// 关闭loading</span></span><br><span class="line">      $(<span class="string">"loading"</span>).show();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> jQuery </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jQuery </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>jQuery学习笔记</title>
      <link href="/jQuery%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/jQuery%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p><code>jQuery</code>是一个快速、简洁的<code>JavaScript</code>框架，是继<code>Prototype</code>之后又一个优秀的<code>JavaScript</code>代码库（或<code>JavaScript</code>框架）。<code>jQuery</code>设计的宗旨是“<code>write Less，Do More</code>”，即倡导写更少的代码，做更多的事情。它封装<code>JavaScript</code>常用的功能代码，提供一种简便的<code>JavaScript</code>设计模式，优化<code>HTML</code>文档操作、事件处理、动画设计和<code>Ajax</code>交互。<br><a id="more"></a></p><h2 id="jQuery-概述"><a href="#jQuery-概述" class="headerlink" title="jQuery 概述"></a>jQuery 概述</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">优势: <span class="number">1.</span>强大的选择器  <span class="number">2.</span>出色的浏览器兼容性  <span class="number">3.</span>方便的链式操作  <span class="number">4.</span>出色的DOM操作的封装  <span class="number">5.</span>完善的Ajax</span><br><span class="line">引入jquery  &lt;script src=<span class="string">"js/jquery.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">            &lt;script src=<span class="string">"http://apps.bdimg.com/libs/jquery/1.11.1/jquery.js"</span>&gt;</span><br><span class="line">            百度静态资源库 采用cdn加速  本地载入速度快</span><br><span class="line"><span class="string">`测试是否引入成功 alert($);  $=jquery`</span></span><br><span class="line"><span class="built_in">window</span>.onload       等网页中所有资源(图片,flash,gif等)加载完后才执行 只执行最后一个</span><br><span class="line">$(<span class="built_in">document</span>).ready() 等dom树加载完毕后就可以执行    可写多个    简化$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;)</span><br><span class="line">DOM对象不能使用任何jquery中的方法,只能使用DOM中的方法</span><br><span class="line">jquery对象转成DOM对象方法</span><br><span class="line">  <span class="number">1.</span>使用index  $(input)[<span class="number">0</span>].value</span><br><span class="line">  <span class="number">2.</span>使用get(index)$(input).get(<span class="number">0</span>).value</span><br><span class="line">DOM对象转换成jquery对象</span><br><span class="line">  只要把DOM对象用$()包起来就可以了  $(input).val()</span><br><span class="line">取值和赋值合体  html() 取值   html(<span class="string">"hello"</span>)  赋值</span><br><span class="line"><span class="string">`注: 当选择对象是一组元素时 取值取的是一组中的第一个元素</span></span><br><span class="line"><span class="string">    当选择对象是一组元素时 赋值时是一组中的所有元素`</span></span><br><span class="line">jQuery与其他js类库共存  名称冲突</span><br><span class="line"><span class="number">1.</span>jQuery使用$符号作为jQuery的简介方式 其他库中函数同样使用$</span><br><span class="line">    jQuery使用名为noConflict()方法来解决该问题(释放$权)</span><br><span class="line">    <span class="keyword">var</span> jq=jQuery.noConflict(),帮助您使用自己的名称(比如jq)来代替$符号。</span><br><span class="line"><span class="number">2.</span>改变引入的先后顺序</span><br></pre></td></tr></table></figure><h2 id="的四大调用方式"><a href="#的四大调用方式" class="headerlink" title="$()的四大调用方式"></a>$()的四大调用方式</h2><ol><li><code>$(function(){})</code>  文档加载完毕执行函数等同于<code>DOMContentLoaded</code></li><li><code>$(selector)</code>      获取选中的selector(css选择器)元素</li><li><code>$(element)</code>       传递一个Element,document,window等原生js对象会转化为jQuery对象</li><li><code>$(&lt;tag&gt;&lt;/tag&gt;, object)</code> 创建元素 tag是要创建的元素带&lt;&gt;的标签字符串  object是一个对象,对象里面可以设置创建元素的属性或data或事件</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式一</span></span><br><span class="line">$(<span class="string">'&lt;div&gt;'</span>, &#123;</span><br><span class="line">text: <span class="string">'创建元素'</span>,</span><br><span class="line">class: 'box',</span><br><span class="line">css: &#123; <span class="attr">background</span>: <span class="string">'red'</span>, <span class="attr">color</span>: <span class="string">'#fff'</span>, <span class="attr">height</span>: <span class="number">100</span>, <span class="attr">width</span>: <span class="number">100</span> &#125;,</span><br><span class="line">click: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; alert(<span class="number">11</span>) &#125;</span><br><span class="line">&#125;).appendTo($(<span class="string">'body'</span>))</span><br><span class="line"><span class="comment">// 方式二</span></span><br><span class="line">$(<span class="string">'&lt;div class="test" onclick="fn1()" style="color:pink"&gt;创建元素&lt;/div&gt;'</span>).appendTo($(<span class="string">'body'</span>))</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>)</span>&#123; alert(<span class="number">2222</span>) &#125;</span><br></pre></td></tr></table></figure><h2 id="选择器引擎返回代理对象"><a href="#选择器引擎返回代理对象" class="headerlink" title="选择器引擎返回代理对象"></a>选择器引擎返回代理对象</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">jquery选择器兼容任何版本的浏览器</span><br><span class="line"><span class="number">1.</span>选择器</span><br><span class="line">  A 基本选择器</span><br><span class="line">    a.Id选择器   返回单个元素</span><br><span class="line">    b.类名选择器</span><br><span class="line">    c.标签选择器</span><br><span class="line">  B 层次选择器</span><br><span class="line">    a.E F  选择E元素所有的后代元素</span><br><span class="line">    b.E&gt;F  选择E元素的子元素</span><br><span class="line">    c.E+F  选择E元素后紧邻的兄弟元素  可以用next()代替</span><br><span class="line">    d.E~F  选择E元素后所有后代元素    可以用nextAll()代替</span><br><span class="line">  C 过滤选择器</span><br><span class="line">    ①基本过滤选择器(过滤选择器以:开头)</span><br><span class="line">    a :first     选取第一个元素</span><br><span class="line">    b :last      选取最后一个元素</span><br><span class="line">    c :not(selector)  选取除指定选择器外的元素(选择器不要加引号)</span><br><span class="line">    d :even      偶数选择器</span><br><span class="line">    e :odd       奇数选择器</span><br><span class="line">    f :eq()      选取指定索引的元素</span><br><span class="line">    g :gt()      选取大于指定索引的元素</span><br><span class="line">    h :lt()      选取小于指定索引的元素</span><br><span class="line">    i :header    选取h1~h6标题标签</span><br><span class="line">    j :animated  选取正在执行动画的元素</span><br><span class="line">    ②内容筛选</span><br><span class="line">    a :contains(text) 选取含有指定文本的元素</span><br><span class="line">    b :has(selector)  选取含有指定后代选择器的元素</span><br><span class="line">    c :empty      选取不包含子元素或文本元素的元素(注意换行被解析为空文本元素)</span><br><span class="line">    d :parent     选取含有子元素或文本元素的元素</span><br><span class="line">    ③可见性筛选</span><br><span class="line">    a :hidden     选取所有不可见元素(不占位置的)</span><br><span class="line">    <span class="string">`注  在网页中看不到的元素   元素不占有空间   opacity:0和visibility:hidden获取不到`</span></span><br><span class="line">    b :visible    选取所有可见的元素</span><br><span class="line">    ④属性选择器    元素[sttr]</span><br><span class="line">    a [attr]      选取拥有此属性的元素</span><br><span class="line">    b [attr=<span class="string">"value"</span>]  选取指定属性值的元素</span><br><span class="line">    c [attr*=<span class="string">"value"</span>] 选取属性包含指定字符的元素</span><br><span class="line">    d [attr^=<span class="string">"value"</span>] 选取属性以指定字符开头的元素</span><br><span class="line">    e [attr$=<span class="string">"value"</span>] 选取属性以指定字符结尾的元素</span><br><span class="line">    f [attr!=<span class="string">"value"</span>] 选取属性中不包含指定字符的元素</span><br><span class="line">    g [attr1=<span class="string">"value"</span>][attr2=<span class="string">"value"</span>] 选取多个属性的元素</span><br><span class="line">    h [attr|=<span class="string">"value"</span>] 选取属性值中以指定前缀的元素</span><br><span class="line">    ⑤子元素筛选</span><br><span class="line">    a :first-child   选择父元素的第一个子元素</span><br><span class="line">    b :last-child    选择父元素的最后一个子元素</span><br><span class="line">    c :only-child    选择元素中只包含一个子元素的元素</span><br><span class="line">    d :nth-child(n|even|odd)  选择父元素的第N个元素遵从css规范(n从<span class="number">1</span>开始)</span><br><span class="line">    ⑥表单属性选择器</span><br><span class="line">    a :disabled  选择所有不可用的元素</span><br><span class="line">    b :checked   选择所有选中的元素(单选框,复选框)</span><br><span class="line">    c :selected  选择所有被选中的选项的元素(下拉框)</span><br><span class="line">    d :focus     选择当前获得焦点的元素</span><br><span class="line">    e :enabled   选择所有可用的元素</span><br><span class="line">  D 表单元素选择器</span><br><span class="line">    :input :button :text :password :radio :checkbox :submit :image :file :reset</span><br><span class="line">    (不支持  :textarea获取文本域  :select获取下拉框)</span><br><span class="line">    <span class="string">`注  :input选择的是所有表单元素包括 input textarea select`</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>筛选方法</span><br><span class="line">    a eq(index)       选择指定索引的元素</span><br><span class="line">    b filter(选择器)   从匹配的元素集合中选择指定选择器或表达式的元素(针对元素本身)</span><br><span class="line">    c not(选择器)      从匹配的元素集合中移除指定的元素(针对元素本身)</span><br><span class="line">    c first()     选择第一个元素</span><br><span class="line">    d last()          选择最后一个元素</span><br><span class="line">    e is(selector)    检测元素是否返回布尔值</span><br><span class="line">    f has()           包含指定后代的元素</span><br><span class="line">    h slice(n,m)      根据指定的下标范围(不包括m),选择匹配的元素的集合</span><br><span class="line">    i index()         索引就是当前元素在所有兄弟节点中的位置</span><br><span class="line">    <span class="string">`注:选择器  主要用在选择DOM对象上  筛选DOM方法  主要用在链式操作上 `</span></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>遍历查找</span><br><span class="line">    a children(<span class="string">"选择器"</span>)  选择子元素</span><br><span class="line">    b parent()            选择父元素</span><br><span class="line">      parents(<span class="string">"选择器"</span>)   选择祖先元素</span><br><span class="line">      closest(<span class="string">"选择器"</span>)   取得最近的匹配元素逐级向上查找父元素</span><br><span class="line">      offsetParent()      获取有定位的父级</span><br><span class="line">    c prev()              选择紧邻的前一个兄弟元素</span><br><span class="line">    d next()              选择紧邻的后一个兄弟元素</span><br><span class="line">    e siblings()          选择前后所有的兄弟元素</span><br><span class="line">    f end()               返回到最初匹配的元素</span><br><span class="line">    g find()              选择匹配元素集合中所有后代元素</span><br><span class="line">    h each()              遍历每个jquery对象 为每个元素执行一个函数</span><br><span class="line">    <span class="comment">// ex:$("li").each(function(index,elem)&#123;&#125;)  index下标 elem元素</span></span><br><span class="line">    i size()              获取一组元素的长度(相当于length)</span><br><span class="line"><span class="number">4.</span>选择器的优化</span><br><span class="line">    a 优先使用id选择器</span><br><span class="line">    b 在<span class="class"><span class="keyword">class</span>选择器前添加标签名</span></span><br><span class="line"><span class="class">    <span class="title">c</span> 采用<span class="title">find</span>(),而不使用上下文查找</span></span><br><span class="line"><span class="class">    <span class="title">d</span> 使用强大的链式操作比缓存更快</span></span><br><span class="line">    注: 选择器中含有特殊字符的处理需要\\转义   $("#id\\#b")</span><br></pre></td></tr></table></figure><h2 id="批量操作dom以及dom树结构"><a href="#批量操作dom以及dom树结构" class="headerlink" title="批量操作dom以及dom树结构"></a>批量操作dom以及dom树结构</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>属性的操作</span><br><span class="line">    a.  获取元素的属性  attr(name)  name属性的名称</span><br><span class="line">    b.  设置元素的属性  attr(key,value)</span><br><span class="line">        设置多个属性值  attr(&#123;<span class="attr">key0</span>:value0,<span class="attr">key1</span>:value2&#125;)</span><br><span class="line">    c.  删除元素的属性  removeAttr(name) 删除指定的属性(name必选)</span><br><span class="line">    <span class="string">`注:prop() 用来处理布尔值的属性或不存在的属性,添加属性名称就会生效时使用  `</span></span><br><span class="line">    <span class="string">`选中判断  1. obj.attr('checked')   2. obj.prop('checked')  3. obj.is(':checked')`</span></span><br><span class="line"><span class="number">2.</span>元素的内容操作</span><br><span class="line">    a.html()     只获取第一个匹配元素的HTML内容</span><br><span class="line">      html(val)  会设置所有匹配元素的HTML内容</span><br><span class="line">    b.text()     获取元素的文本内容(会获取一组元素所有的文本)</span><br><span class="line">      text(val)  设置元素的文本内容</span><br><span class="line">    <span class="string">`注:  html()方法仅支持Xhtml的文档 不能用于XML文档 而text()都支持`</span></span><br><span class="line">    c.val()      获取或设置元素的value值</span><br><span class="line">      val(<span class="string">""</span>)    清空值   val(<span class="string">"aaa"</span>)  设置值</span><br><span class="line">      val([])    设置select radio checkbox 选项被选中</span><br><span class="line">      val([<span class="string">"chk1"</span>,<span class="string">"chk2"</span>]) 是从最后一个选项往前读取 如果选项的value值或者text中任意一项符合就会被选中</span><br><span class="line"><span class="number">3.</span>元素样式的操作</span><br><span class="line">    a. css(<span class="string">"name"</span>)        获取元素的指定的样式</span><br><span class="line">       css(<span class="string">"name"</span>,<span class="string">"vaue"</span>) 设置元素的指定的样式</span><br><span class="line">       css(&#123;<span class="string">"name1"</span>:value1,<span class="string">"name2"</span>:value2&#125;)  设置多个样式</span><br><span class="line">    <span class="string">`注: 如果值是数字 将会被自动转化为像素值</span></span><br><span class="line"><span class="string">         如果属性中带有"-"符号 不用引号则要采用驼峰命名法 fontSize</span></span><br><span class="line"><span class="string">         如果用引号则"font-size"和"fontSize"都可以`</span></span><br><span class="line">    b. addClass(<span class="class"><span class="keyword">class</span>)    为元素追加<span class="title">class</span>类</span></span><br><span class="line"><span class="class">       <span class="title">addCalss</span>(<span class="title">class</span> <span class="title">class1</span> ...) 添加多个<span class="title">class</span>类</span></span><br><span class="line"><span class="class">    <span class="title">c</span>. <span class="title">toggleClass</span>()      切换不同的元素类别</span></span><br><span class="line">    d. removeClass([class])  删除指定的类别</span><br><span class="line">    <span class="string">`可选多个 用空格分开 如果不选名称则删除元素中所有类别`</span></span><br><span class="line">    e. hasClass(<span class="string">"class"</span>)   判断元素中是否含有某个样式</span><br><span class="line">    f. is(<span class="string">".classname"</span>)    判断元素中是否是某个样式</span><br><span class="line">    g  其他样式的获取</span><br><span class="line">       height() 获取或设置元素的高度</span><br><span class="line">       width()  获取或设置元素的宽度</span><br><span class="line">       offset() 获取元素到屏幕的左距离或右距离(只对可见元素有效)</span><br><span class="line">       offset().left   offset().top</span><br><span class="line">       position().left   position().top  到有定位的父级</span><br><span class="line">       scrollTop() 获取或者设置元素的滚动条距顶端的距离</span><br><span class="line">       scrollLeft() 获取或者设置元素的滚动条距左端的距离</span><br><span class="line">       当有多个<span class="class"><span class="keyword">class</span>的使用可以用 <span class="title">addClass</span>或<span class="title">removeClass</span>  操作指定的<span class="title">class</span></span></span><br><span class="line"><span class="class">       当只有一个的时候,可以操作<span class="title">attr</span>('<span class="title">class</span>','<span class="title">acitve</span>')  覆盖掉原来的<span class="title">class</span></span></span><br><span class="line"><span class="class">4.元素的节点操作</span></span><br><span class="line"><span class="class">    ①创建节点</span></span><br><span class="line"><span class="class">      <span class="title">a</span>.用$()来创建节点      <span class="title">var</span> <span class="title">newElement</span> </span>= $(<span class="string">"&lt;div&gt;div标签&lt;/div&gt;"</span>)</span><br><span class="line">      b.用字符串来创建节点    <span class="keyword">var</span> newElement = <span class="string">"&lt;div&gt;div标签&lt;/div&gt;"</span></span><br><span class="line">    ②插入节点</span><br><span class="line">      a. append(content)</span><br><span class="line">         append(<span class="function"><span class="keyword">function</span>(<span class="params">index,html</span>)</span>&#123;&#125;) 将函数的返回的内容追加到元素内部的末尾</span><br><span class="line">         appendTo(Tag)      向元素的内部末尾出插入内容</span><br><span class="line">      b. prepend(content)</span><br><span class="line">         prependTo(Tag)     向元素的内部前面插入指定内容</span><br><span class="line">      c. after(content)     在匹配元素外部后面插入内容</span><br><span class="line">      d. before(content)    在匹配元素外部前面插入内容</span><br><span class="line">      e. insertAfter(Tag)    将所选择的元素插入另一个指定的元素的外部后面</span><br><span class="line">      f. insertBefore(Tag)   将所选择的元素插入另一个指定的元素的外部前面</span><br><span class="line">    ③复制节点</span><br><span class="line">      $(<span class="string">""</span>).clone().appendTo()  复制匹配的DOM元素本身</span><br><span class="line">      $(<span class="string">""</span>).clone(<span class="literal">true</span>).appendTo() 复制本身并将该元素的全部行为事件也复制</span><br><span class="line">    ④替换节点</span><br><span class="line">      a. replaceWith(content)  替换节点</span><br><span class="line">         将所选择的元素替换成指定的HTML或DOM元素 用括号中的字符替换所选择的元素</span><br><span class="line">      b. replaceAll(Tag)       替换节点</span><br><span class="line">         将Tag替换成指定的内容(Tag被替换的元素) 用字符串替换括号中所选择的元素</span><br><span class="line">      <span class="string">`注:一旦被替换,被替换的元素的全部事件都消失`</span></span><br><span class="line">    ⑤包裹节点</span><br><span class="line">      a. wrap(html\elem\fn)  把所选择的元素用指定的HTML或DOM 包裹起来(外包装)</span><br><span class="line">      b. unwrap()无参数   移除所选元素的父元素或包裹标记</span><br><span class="line">      c. wrapAll()     将所选元素用单个元素或DOM元素包裹起来(会改变dom节点结构)</span><br><span class="line">      d. wrapInner()   将所选元素的子内容(包括文本节点)用指定内容包裹起来(内包装)</span><br><span class="line">    ⑥遍历节点</span><br><span class="line">      $(<span class="string">"p"</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">index</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.title=<span class="string">"第"</span>+index+<span class="string">"个P"</span>;</span><br><span class="line">      &#125;)</span><br><span class="line">    ⑦删除节点</span><br><span class="line">      a. remove()  删除指定的元素所包含的所有后代元素也一起被删除</span><br><span class="line">         返回指向被删除节点的引用可以继续使用但是其事件都不存在</span><br><span class="line">      b. detach()  删除指定的元素,返回结果是被删除元素但保留其操作方法(事件)</span><br><span class="line">      c. empty()   清空元素里的全部节点或节点所包括的后代元素</span><br><span class="line">      <span class="string">`注:  add()  将节点组合在一起`</span></span><br></pre></td></tr></table></figure><h2 id="处理事件"><a href="#处理事件" class="headerlink" title="处理事件"></a>处理事件</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>事件绑定 on或bind</span><br><span class="line">    a. $(<span class="string">""</span>).click(fn);</span><br><span class="line">    b. $(<span class="string">""</span>).bind(<span class="string">"事件类型"</span>,[event.data],fn)</span><br><span class="line">       $(<span class="string">""</span>).bind(<span class="string">"click dblclick"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;)</span><br><span class="line">       $(<span class="string">""</span>).bind(&#123;<span class="attr">focus</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;alert(<span class="number">111</span>);&#125;,</span><br><span class="line">    c. $(<span class="built_in">document</span>).on(events,[selector],[data],fn);</span><br><span class="line">       events 一个或多个事件 多个事件用空格分割</span><br><span class="line">       selector 选择器元素</span><br><span class="line">       data 事件触发传递event.data参数给事件处理函数</span><br><span class="line">       fn   事件触发时执行的函数</span><br><span class="line">       <span class="string">`注:  可以为动态创建或生成的元素添加事件`</span></span><br><span class="line">    $(<span class="string">"p"</span>).on(&#123;</span><br><span class="line">        mouseover:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;$(<span class="string">"body"</span>).css(<span class="string">"background-color"</span>,<span class="string">"lightgray"</span>);&#125;,</span><br><span class="line">        mouseout:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;$(<span class="string">"body"</span>).css(<span class="string">"background-color"</span>,<span class="string">"lightblue"</span>);&#125;,</span><br><span class="line">        click:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;$(<span class="string">"body"</span>).css(<span class="string">"background-color"</span>,<span class="string">"yellow"</span>);&#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="number">2.</span>事件切换</span><br><span class="line">    a. hover(over,out)</span><br><span class="line">       当鼠标移动到所选的元素上时(mouseover)执行第一个函数</span><br><span class="line">       当鼠标移出这个元素(mouseout)执行第二个函数</span><br><span class="line">    ex: $(<span class="string">"p:eq(1)"</span>).hover(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            $(<span class="string">"#hi"</span>).show();</span><br><span class="line">        &#125;,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            $(<span class="string">"#hi"</span>).hide()</span><br><span class="line">        &#125;);</span><br><span class="line">    b. toggle() 每次单击后依次调用函数通过函数设置的前后顺序进行调用</span><br><span class="line">       toggle(fn,fn2,[fn3]....) 依次调用fn函数</span><br><span class="line"><span class="number">3.</span>移除事件</span><br><span class="line">    unbind(type,[fn])或off(type,[fn])  移除元素绑定的事件</span><br><span class="line">    参数type为移除的事件类型,fn为需要移除的事件处理函数,如果没有参数</span><br><span class="line">    则移除所有绑定的事件.如果有参数fn则只移除绑定时指定的函数fn</span><br><span class="line"><span class="number">4.</span>其他事件</span><br><span class="line">    a. one(type,[fn])  为所选元素绑定一个仅触发一次的函数</span><br><span class="line">        ex: $(<span class="string">""</span>).one(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;);</span><br><span class="line">    b. trigger(type)   在所选择的元素上触发指定类型的事件(自动触发)</span><br><span class="line">        ex: $().trigger(<span class="string">"select"</span>);</span><br><span class="line">        ex: otxt.bind(<span class="string">"a"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">               $(<span class="string">"#divtop"</span>).html($(<span class="keyword">this</span>).val());</span><br><span class="line">            &#125;).trigger(<span class="string">"a"</span>);   自动触发自定义事件</span><br><span class="line"><span class="number">5.</span>事件对象的属性</span><br><span class="line">    a. e.type()   获取事件的类型</span><br><span class="line">    b. e.stopPropagation()  阻止冒泡事件(事件从里向外传递)</span><br><span class="line">    c. e.preventDefault()   阻止默认行为</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">false</span>     同时阻止默认事件和冒泡事件</span><br><span class="line">    d. e.target()       获取到触发事件的元素(事件目标或事件源)</span><br><span class="line">    e. e.pageX()/e.pageY 获取到光标相对于文档的x坐标和y坐标</span><br><span class="line">       e. clientX/e.clientY 获取到光标相对于可视区的x坐标和y坐标</span><br><span class="line">    f. e.which() 获取键盘键值或鼠标按下的左 中 右健的那个键</span><br><span class="line">       <span class="number">1</span>=鼠标左键 left  <span class="number">2</span>=鼠标中键 <span class="number">3</span>=鼠标右键</span><br><span class="line">    g. e.data()   事件中传输的数据</span><br><span class="line">       ex: $().on(<span class="string">"click"</span>,&#123;<span class="attr">name</span>:<span class="string">'hello'</span>&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</span><br><span class="line">              alert(ev.data.name);  <span class="comment">//hello</span></span><br><span class="line">           &#125;)</span><br><span class="line"><span class="number">6.</span>事件委托</span><br><span class="line">    a. delegate()  利用冒泡实现</span><br><span class="line">       好处  <span class="number">1.</span>省略循环操作 <span class="number">2.</span>对后添加元素直接拥有事件操作</span><br><span class="line">       ex: $(<span class="string">"ul"</span>).delegate(<span class="string">"li"</span>,<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;)</span><br><span class="line">    b. undelegate()  取消事件委托</span><br><span class="line">    c. on() 常用于动态添加的元素使用</span><br><span class="line">    ex: $(<span class="string">'#div1'</span>).on(<span class="string">'click'</span>,<span class="string">'li'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            alert(<span class="string">'ok'</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">        $(<span class="string">'#div1'</span>).append($(<span class="string">'&lt;li&gt;new&lt;/li&gt;'</span>));</span><br></pre></td></tr></table></figure><h2 id="执行动画"><a href="#执行动画" class="headerlink" title="执行动画"></a>执行动画</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>hide()和show()   显示或隐藏html元素</span><br><span class="line">    hide(speed,callback)  show(speed,callback)</span><br><span class="line">    可选参数speed 速度 (<span class="string">"slow"</span>,<span class="string">"normal"</span>,<span class="string">"fast"</span>,<span class="number">1000</span>)</span><br><span class="line">       其对应的速度分别是<span class="number">0.6</span>秒  <span class="number">0.4</span>秒 <span class="number">0.2</span>秒</span><br><span class="line">    可选参数callback 显示或隐藏完成后执行的函数</span><br><span class="line">    ex $(<span class="string">"#test"</span>).hide(<span class="number">3000</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;alert(<span class="number">1111</span>);&#125;);</span><br><span class="line"><span class="number">2.</span>toggle()  切换hide()和show()方法</span><br><span class="line">    toggle(speed,[callback]);</span><br><span class="line">    ex $(<span class="string">"#test"</span>).toggle(<span class="number">3000</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;alert(<span class="string">"已隐藏"</span>);&#125;);</span><br><span class="line"><span class="number">3.</span>淡入淡出</span><br><span class="line">    a. fadeIn()  实现淡入已隐藏元素</span><br><span class="line">       fadeIn(speed,callback)</span><br><span class="line">    b. fadeOut() 实现淡出可见元素</span><br><span class="line">       fadeOut(speed,callback)</span><br><span class="line">    c. fadeToggle() 实现fadeIn与fadeOut之间的切换</span><br><span class="line">       ex $(<span class="string">"#test"</span>).toggle(<span class="number">2000</span>);</span><br><span class="line">    d. fadeTo() 方法允许渐变为给定的透明度</span><br><span class="line">       ex $(<span class="string">"#test"</span>).fadeTo(<span class="number">2000</span>,<span class="number">0.6</span>);</span><br><span class="line"><span class="number">4.</span>滑动</span><br><span class="line">    a. slideDown()  用于向下滑动元素</span><br><span class="line">    b. slideUp()    用于向上滑动元素</span><br><span class="line">    c. slideToggle()在slideDown()与slideUp()之间进行切换</span><br><span class="line"><span class="number">5.</span>animate  自定义动画</span><br><span class="line">    animate(params,[duration],[easing],[callback])</span><br><span class="line">        参数params 表示用于制作动画效果的属性样式和值的集合 可选[duration]表示速度</span><br><span class="line">        [easing]控制动画的表现效果 [callback]动画完成执行的回调函数</span><br><span class="line">    a 简单的动画   ex :$(<span class="string">"#test"</span>).animate(&#123;<span class="attr">height</span>:<span class="string">"100px"</span>&#125;,<span class="number">1000</span>);</span><br><span class="line">    b 移动位置的动画  ex: $(<span class="keyword">this</span>).animate(&#123;<span class="attr">left</span>:<span class="string">"500px"</span>,<span class="attr">top</span>:<span class="string">"300px"</span>&#125;,<span class="number">3000</span>)</span><br><span class="line">        <span class="number">1.</span>要使页面中的元素移动必须对该元素进行定位 相对或绝对</span><br><span class="line">        <span class="number">2.</span>在animate中第一个参数params在表示动画属性时需采用驼峰命名</span><br><span class="line">          如果是font-size 必须写成fontSize才有效 否则报错</span><br><span class="line">    c 队列中的动画</span><br><span class="line">        元素执行多个动画效果时,这些animate()方法执行的先后顺序形成了动画的队列</span><br><span class="line">        产生队列后,动画的效果便按队列的顺序进行展示</span><br><span class="line">    ex: $(<span class="keyword">this</span>).animate(&#123;<span class="attr">left</span>:<span class="string">"500px"</span>&#125;,<span class="number">3000</span>).animate(&#123;<span class="attr">top</span>:<span class="string">"300px"</span>&#125;,<span class="number">3000</span>)</span><br><span class="line">    注:  left等属性有无引号都可以</span><br><span class="line">    d 动画的停止和延时</span><br><span class="line">        stop([clearQueue],[gotoend])  停止所选元素中正在执行的动画</span><br><span class="line">        可选参数[clearQueue]布尔值是否停止正在执行的动画(阻止后续运动)</span><br><span class="line">        可选参数[gotoend]   布尔值表示是否立即完成正在执行的动画</span><br><span class="line">        stop() 停止当前动画   stop(<span class="literal">true</span>) 停止所有动画</span><br><span class="line">        stop(<span class="literal">true</span>,<span class="literal">true</span>)  停止所有动画 到达动画结果</span><br><span class="line">        finish()  立即停止到所有指定的目标点</span><br><span class="line">        delay(duration,[queueName])  推迟对列中动画的执行 duration时间值毫秒数 [queueName]动画队列</span><br><span class="line"><span class="number">6.</span>动画回调函数</span><br><span class="line">    如果想在最后一步切换元素的CSS样式,而css()方法在刚开始执行动画时就执行</span><br><span class="line">    原因是css()方法并不会加入到动画对列中而是立即执行,可以使用callback对</span><br><span class="line">    非动画方法实现排队,只要把css()方法放在最后一个动画的回调函数里(非动画</span><br><span class="line">    元素的插队)</span><br><span class="line">注: toggle() 两个意思 不写参数或写一个可选参数fn时表示切换显示和隐藏</span><br><span class="line">    toggle(speed,[fn]) 用于元素的显示和隐藏的切换</span><br><span class="line">    toggle(fn1,fn2)  单击时依次调用函数</span><br></pre></td></tr></table></figure><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> serialize()  序列化表单内容为字符串,用于 Ajax 请求。</span><br><span class="line"><span class="number">2.</span> serializeArray()  序列化表单内容为数组(json格式),返回的是<span class="built_in">JSON</span>对象</span><br><span class="line"><span class="number">3.</span>  <span class="keyword">this</span>.defaultValue  当前文本框的默认值</span><br><span class="line"><span class="number">4.</span>  innerWidth() width+padding</span><br><span class="line">    outerWidth() width+padding+border</span><br><span class="line">    outerWidth(<span class="literal">true</span>) width+padding+border+margin</span><br><span class="line"><span class="number">5.</span> 工具方法</span><br><span class="line">    <span class="comment">// $().xxx() 是 jQuery 对象方法</span></span><br><span class="line">    <span class="comment">// $.xxx()  工具方法 即可给jQuery对象用,也可给原生js对象使用</span></span><br><span class="line">    a.  $.type()      判断数据类型比<span class="keyword">typeof</span>更多</span><br><span class="line">        ex: <span class="keyword">var</span> a=<span class="string">"hello"</span> alert(<span class="keyword">typeof</span> a)或alert($.type(a)) <span class="comment">//string</span></span><br><span class="line">    b.  $.trim()      去除前后的空格</span><br><span class="line">    c.  $.inArray()   判断数组中是否存在某字符类似indexOf</span><br><span class="line">        ex:  <span class="keyword">var</span> arr=[<span class="string">'a'</span>,<span class="number">2</span>,<span class="string">"c"</span>];   alert($.inArray(<span class="string">'c'</span>,arr))  <span class="comment">//2</span></span><br><span class="line">    d.  $.proxy()     改变<span class="keyword">this</span>指向</span><br><span class="line">        ex:  $.proxy(show,<span class="built_in">document</span>,参数)</span><br><span class="line">    e.  $.noConflict()  防止冲突的</span><br><span class="line">    f.  $.parseJSON()   将严格模式下的json格式字符串转换成json数据</span><br><span class="line">    g.  $.makeArray(obj).push()  将类似数组的集合转换成数组</span><br><span class="line">    i.  $.each()  循环遍历操作元素</span><br><span class="line"><span class="number">6.</span> 插件的扩展</span><br><span class="line">    a.  $.extend()     扩展工具方法下的插件形式  $.xxx()</span><br><span class="line">        ex: $.extend(&#123;</span><br><span class="line">              leftTrim:<span class="function"><span class="keyword">function</span>(<span class="params">str</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> str.replace(<span class="regexp">/^\s+/g</span>,<span class="string">''</span>);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;);   调用  $.leftTrim(str)</span><br><span class="line">    b.  $.fn.extend()  扩展到JQ对象下的插件形式  $().xxx()</span><br><span class="line">        ex: $.fn.extend(&#123;</span><br><span class="line">              aaa:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                alert(<span class="number">1111</span>);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;);   调用   $().aaa();  <span class="comment">///1111</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> jQuery </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jQuery </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>浏览器兼容性问题</title>
      <link href="/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%BC%E5%AE%B9%E6%80%A7%E9%97%AE%E9%A2%98/"/>
      <url>/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%BC%E5%AE%B9%E6%80%A7%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>很多<code>浏览器兼容性问题</code>都是因为<code>不同的浏览器对同一段代码有不同的解析</code>，造成页面显示效果不统一的情况。在大多数情况下，我们的需求是，无论用户用什么浏览器来查看我们的网站或者登陆我们的系统，都应该是统一的显示效果。所以浏览器的兼容性问题是前端开发人员经常会碰到和必须要解决的问题。<br><a id="more"></a></p><h4 id="兼容性问题-在IE6-7下"><a href="#兼容性问题-在IE6-7下" class="headerlink" title="兼容性问题  在IE6,7下"></a>兼容性问题  在IE6,7下</h4><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">1、html5标签的兼容    动态创建元素  然后变成块级元素</span><br><span class="line">html5shiv：解决ie9以下浏览器对html5新增标签的不识别，并导致CSS不起作用的问题。</span><br><span class="line">respond<span class="selector-class">.min</span>:让不支持css3 Media Query的浏览器包括IE6-IE8等其他浏览器支持查询。</span><br><span class="line">&lt;!--[if lt IE <span class="number">9</span>]&gt;</span><br><span class="line">　&lt;script src=<span class="string">"//cdn.bootcss.com/respond.js/1.4.2/respond.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">　&lt;script src=<span class="string">"http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;![endif]—&gt;</span><br><span class="line"><span class="number">2</span>、元素浮动之后,能设置宽高的元素就给宽高,如果需要宽度是内容撑开,就给它里边的块元素加上浮动</span><br><span class="line"><span class="number">3</span>、第一块元素浮动,第二块元素使用margin,在IE6下会出现间隙问题  采用浮动解决</span><br><span class="line"><span class="number">4</span>、在IE6下子元素超出父级宽高,会把父级的宽高撑开        最好不要让子级宽高超过父级</span><br><span class="line"><span class="number">5</span>、p包含块元素嵌套规则    块元素不能在包含块元素  p h1~h6 dt  产生额外元素</span><br><span class="line">嵌套规则：</span><br><span class="line">  a、块级元素可以包含内联元素或某些块级元素，但内联元素不能包含块级元素，它只能包含其它内联元素。</span><br><span class="line">  b、块级元素不能放在p里面。</span><br><span class="line">  c、有几个特殊的块级元素只能包含内联元素，不能包含块级元素。如h1,h2,h3,h4,h5,h6,p,dt</span><br><span class="line">  d、li内可以包含div</span><br><span class="line"><span class="number">6</span>、margin  合并(尽量使用单方向的margin值)  和  传递(加边框  出发bfc,haslayout)</span><br><span class="line"><span class="number">7</span>、display:inline-block;    在IE6下无效    &#123;*<span class="attribute">display</span>:inline;*zoom:<span class="number">1</span>;&#125;</span><br><span class="line">8、IE6下最小高度18px   &#123;*<span class="attribute">overflow</span>:hidden;&#125;</span><br><span class="line">9、IE6,IE7下<span class="attribute">margin</span>双边距问题   当元素浮动后就会产生<span class="attribute">margin</span>双边距问题    &#123;*<span class="attribute">display</span>:inline;&#125;</span><br><span class="line">10、<span class="selector-tag">li</span>里面元素都浮动,在IE6,IE7下会产生4px间隙问题    给<span class="selector-tag">li</span>加&#123;*vertical:top;&#125;</span><br><span class="line">11、两个浮动元素中间有注释或者有内联元素 并且和父级宽高不超过3px时,在IE6下文字自溢出</span><br><span class="line">    解决:   避免两个浮动元素之间出现注释    与父级宽度相差<span class="number">3px</span>以上</span><br><span class="line"><span class="number">12</span>、IE6,IE7 当子级的position:relative时,父级overflow:hidden包不住子级</span><br><span class="line">    解决:   给父级也添加position:relative</span><br><span class="line"><span class="number">13</span>、IE6下绝对定位元素父级宽高是奇数,绝对定位元素的right和bottom会有<span class="number">1px</span>偏差</span><br><span class="line">    解决:   避免给父级宽高设置奇数</span><br><span class="line"><span class="number">14</span>、IE6下绝对定位元素和浮动元素并列时,绝对定位元素消失</span><br><span class="line">    解决:   给浮动元素加一个父级  不要处于同级即可</span><br><span class="line"><span class="number">15</span>、IE6,IE7下input缝隙问题</span><br><span class="line">    解决:   给input元素添加浮动   input&#123;*float:left;&#125;</span><br><span class="line">16、IE6下输入类型表单控件背景被文字挤走的问题</span><br><span class="line">    解决:   给背景图片加背景图片固定属性 background-attachment:fixed</span><br><span class="line"><span class="number">17</span>、IE6不支持PNG24问题</span><br><span class="line">    解决:  js插件 DD_belatedPNG_0.<span class="number">0.8</span>a-min.js  (不能处理body上png24)</span><br><span class="line">    css  background:url(../images/button1.png) no-repeat;</span><br><span class="line">        _background:none;</span><br><span class="line">        _filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src=<span class="string">"images/button1.png"</span>);</span><br><span class="line">18、IE6下<span class="attribute">margin</span>负值,无效的时候,添加相对定位即可,<span class="attribute">position</span>:relative解决.</span><br><span class="line"><span class="number">19</span>、文字与图片垂直居中对齐方法</span><br><span class="line">    解决:  为图片与文字的共同父元素所有的后代元素定义*&#123;vertical-align:middle&#125;;例如:</span><br><span class="line">          &lt;p&gt;我要的坚强&lt;img src=<span class="string">"i/image.gif"</span> /&gt;&lt;/p&gt;</span><br><span class="line">          只需定义p*&#123;vertical-align:middle&#125;即可使文字与图片同行垂直居中.</span><br></pre></td></tr></table></figure><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><ul><li>img的边缘空白间隙3px问题 给img加vertical-align或者display:block</li><li>用a标签包裹起来的img图片,在ie中有蓝色边框存在 使用 border:none或0 清楚超链接图片的蓝色边框</li></ul>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>css学习笔记</title>
      <link href="/css%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/css%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>层叠样式表<code>(Cascading Style Sheets，缩写为 CSS）</code>:用于控制网页样式,实现网页表现与内容分离,布局和美化网页<br>一个标签可以被多个<code>css</code>选择器选择，共同作用，这就是“层叠式”.<br><a id="more"></a></p><h2 id="css引入方式"><a href="#css引入方式" class="headerlink" title="css引入方式"></a>css引入方式</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 行内样式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"color:#FF0000"</span>&gt;</span>行内样式<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 内部样式(常写在head中) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="comment">/*css注释*/</span></span></span><br><span class="line"><span class="css"><span class="selector-tag">h1</span>&#123;<span class="attribute">color</span>:red;&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 外部样式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"1.css"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 注:rel  当前文档与被链接文档之间的关系 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 导入样式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">@<span class="keyword">import</span> <span class="string">"1.css"</span>; <span class="comment">/*最好写法  @import url(1.css)*/</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">注:link和import区别</span><br><span class="line">a.link 不仅可以加载css可以加载其他文件 而import只能加载css</span><br><span class="line">b.import页面加载完后才会加载样式</span><br><span class="line">c.link无兼容性问题 import不兼容低版本</span><br></pre></td></tr></table></figure><h2 id="css语法"><a href="#css语法" class="headerlink" title="css语法"></a>css语法</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">    属性  值     属性   值</span><br><span class="line"><span class="selector-tag">h1</span>&#123;<span class="attribute">color</span>:red;<span class="attribute">font-size</span>:<span class="number">14px</span>;&#125;</span><br><span class="line">选择器   声明1    声明2</span><br><span class="line">1<span class="selector-tag">em</span>约等于16<span class="selector-tag">px</span>    网页中默认的字体大小为16<span class="selector-tag">px</span></span><br></pre></td></tr></table></figure><h2 id="css选择器"><a href="#css选择器" class="headerlink" title="css选择器"></a>css选择器</h2><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">1</span>. <span class="selector-tag">ID</span>选择器       <span class="selector-id">#one</span>&#123;<span class="attribute">width</span>:<span class="number">100px</span>;<span class="attribute">height</span>:<span class="number">100px</span>;&#125;</span><br><span class="line"><span class="selector-tag">2</span>. <span class="selector-tag">class</span>选择器    <span class="selector-class">.one</span>&#123;<span class="attribute">width</span>:<span class="number">100px</span>;<span class="attribute">height</span>:<span class="number">100px</span>;&#125;</span><br><span class="line"><span class="selector-tag">3</span>. 标签选择器     <span class="selector-tag">p</span>&#123;<span class="attribute">width</span>:<span class="number">100px</span>;<span class="attribute">height</span>:<span class="number">100px</span>;&#125;</span><br><span class="line"><span class="selector-tag">4</span>. 混合选择器     把选择的元素描述的越详细越好</span><br><span class="line"><span class="selector-tag">5</span>. 属性选择器     <span class="selector-tag">div</span><span class="selector-attr">[id]</span>&#123;<span class="attribute">color</span>:red&#125;</span><br><span class="line"><span class="selector-tag">6</span>. 子元素选择器   <span class="selector-tag">h1</span>&gt;<span class="selector-tag">p</span>&#123;<span class="attribute">color</span>:red;&#125;</span><br><span class="line">注:只针对<span class="selector-tag">h1</span>下的直接子元素,第三代不影响 <span class="selector-tag">IE6</span>不兼容</span><br><span class="line"><span class="selector-tag">7</span>. 相邻兄弟选择器</span><br><span class="line">  <span class="selector-tag">h1</span>+<span class="selector-tag">p</span>&#123;<span class="attribute">color</span>:red;&#125;  只会影响相邻兄弟元素后面的不会影响前面的</span><br><span class="line">  <span class="selector-tag">h1</span>~<span class="selector-tag">p</span>&#123;<span class="attribute">color</span>:red;&#125;  选择紧随其后的所有兄弟元素</span><br><span class="line"><span class="selector-tag">8</span>. 伪类</span><br><span class="line">  <span class="selector-tag">a</span><span class="selector-pseudo">:link</span>&#123;<span class="attribute">color</span>:black;&#125;      未访问的链接</span><br><span class="line">  <span class="attribute">a</span>:visited&#123;<span class="attribute">color</span>:pink;&#125;    已访问的链接</span><br><span class="line">  <span class="attribute">a</span>:hover&#123;<span class="attribute">color</span>:red;&#125;       鼠标移动到链接上</span><br><span class="line">  <span class="attribute">a</span>:active&#123;<span class="attribute">color</span>:yellow;&#125;   鼠标点击之后</span><br><span class="line">  注<span class="selector-pseudo">:IE6</span>不支持<span class="selector-tag">a</span>以外其他任何标签的伪类 伪类顺序 <span class="selector-tag">lvha</span></span><br><span class="line">  <span class="selector-tag">a</span><span class="selector-pseudo">:link</span>,<span class="selector-tag">a</span><span class="selector-pseudo">:visited</span>&#123;<span class="attribute">text-decoration</span>:none;&#125;</span><br><span class="line">  <span class="attribute">a</span>:hover,<span class="attribute">a</span>:focus;<span class="attribute">a</span>:active&#123;<span class="attribute">text-decoration</span>:underline;&#125;</span><br><span class="line"><span class="selector-tag">9</span>. 伪元素</span><br><span class="line">  <span class="selector-pseudo">:before</span>/<span class="selector-pseudo">:after</span>       在元素的前面或后面添加内容 配合<span class="selector-tag">content</span></span><br><span class="line">  <span class="selector-tag">table</span><span class="selector-pseudo">:after</span> &#123; <span class="attribute">content</span>: <span class="string">"end --table"</span>; &#125;</span><br><span class="line">  <span class="selector-pseudo">:first-letter</span>        对象内的第一个字符样式</span><br><span class="line">  <span class="selector-pseudo">:first-line</span>          对象内第一行的样式</span><br><span class="line">  <span class="selector-pseudo">:not(.tew)</span>&#123;&#125;         除了<span class="selector-tag">class</span>为<span class="selector-tag">tew</span>之外</span><br></pre></td></tr></table></figure><h2 id="css优先级"><a href="#css优先级" class="headerlink" title="css优先级"></a>css优先级</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">!<span class="selector-tag">important</span>&gt;<span class="selector-tag">js</span>&gt;行内样式&gt;<span class="selector-tag">ID</span>&gt;<span class="selector-tag">Class</span>&gt;标签&gt;继承&gt;通配符</span><br><span class="line">行内样式&gt;内嵌样式&gt;外联样式(就近原则)</span><br><span class="line">注:宽度 高度使用数值百分比时,确保父元素有宽高度</span><br><span class="line">!<span class="selector-tag">important</span>   提升指定样式的优先级     <span class="selector-tag">p</span>&#123;<span class="attribute">color</span>:red<span class="meta">!important</span>;&#125;</span><br></pre></td></tr></table></figure><h2 id="css背景属性"><a href="#css背景属性" class="headerlink" title="css背景属性"></a>css背景属性</h2><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">background</span>  背景属性</span><br><span class="line"><span class="built_in">background</span>  背景复合样式:颜色 路径 重复 位置(用几个写几个)/大小 固定</span><br><span class="line">backgournd:#<span class="number">00ff00</span> url('images/<span class="number">1.</span>jpg') no-repeat top right;</span><br><span class="line"><span class="built_in">background</span>:url(test1.jpg) no-repeat scroll 10px 20px/50px 60px padding-<span class="built_in">box</span>,</span><br><span class="line"><span class="built_in">background</span>-<span class="built_in">color</span>:red;    背景颜色</span><br><span class="line"><span class="built_in">background</span>-<span class="built_in">image</span>:url()   背景图片</span><br><span class="line"><span class="built_in">background</span>-repeat:no-repeat   不重复</span><br><span class="line">repeat      可以重复出现(默认)</span><br><span class="line">repeat-x    只能水平方向平铺</span><br><span class="line">repeat-y    只能垂直方向平铺</span><br><span class="line"><span class="built_in">background</span>-attachment:fixed   固定背景图片不随页面滚动  scroll  不固定(默认)</span><br><span class="line"><span class="built_in">background</span>-<span class="built_in">position</span>:X Y  设置背景图片位置(定位背景图片)</span><br><span class="line">X/Y 各有五个值top bottom left <span class="built_in">center</span> right</span><br><span class="line">只写一个第二个默认为<span class="built_in">center</span>还可以是具体数值</span><br><span class="line"><span class="built_in">background</span>-size:cover或<span class="number">100</span><span class="symbol">%</span> <span class="number">100</span><span class="symbol">%</span>  背景图片大小(不能写在复合样式里)</span><br><span class="line">cover按一边的比例放大     缩放使背景全部占满盒子</span><br><span class="line">注:在使用<span class="built_in">background</span>-<span class="built_in">image</span>之前必须为元素添加宽高度(背景不占位置空间)</span><br></pre></td></tr></table></figure><h2 id="css文本属性"><a href="#css文本属性" class="headerlink" title="css文本属性"></a>css文本属性</h2><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">a.字体风格   <span class="built_in">font</span>-family:黑体;</span><br><span class="line">b.字体大小   <span class="built_in">font</span>-size:12px;</span><br><span class="line">c.文字颜色   <span class="built_in">font</span>-<span class="built_in">color</span>:red;</span><br><span class="line">d.文字粗细   <span class="built_in">font</span>-weight:blod/normal</span><br><span class="line">e.文字修饰   text-decoration:underline/line-through/overline/none/blink</span><br><span class="line">f.文本对齐   text-align:left/right/justify(两端对齐)/<span class="built_in">center</span>(文字水平方向居中)</span><br><span class="line">注:text-align:<span class="built_in">center</span>   只针对行间元素有效(文字和图片)</span><br><span class="line">g.首行缩进   text-indent:2em  两个字体单位  字体大小改变位置不变</span><br><span class="line">h.行间据行高 line-<span class="built_in">height</span>:n    文字一行显示的位置,和容器高相同文字垂直方向居中显示</span><br><span class="line">i.字符间距   letter-spacing:n 字符和汉字都一样 单个字符,字母间距</span><br><span class="line">j.词间距     word-spacing:n   单词,词语间距,注意以空格分割才识别</span><br><span class="line">k.转换大小写 text-<span class="built_in">transform</span>:capitalize(每个单词首字母大写)</span><br><span class="line">uppercase(每个字母都转成大写)</span><br><span class="line">lowercase(每个字母都转成小写)</span><br><span class="line">l.文字样式   <span class="built_in">font</span>-<span class="built_in">style</span>:normal italic  bold</span><br><span class="line">m.文本省略   overflow:hidden;white-<span class="built_in">space</span>:nowrap;text-overflow:ellipsis;</span><br><span class="line">n.文本折行   word-wrap: <span class="built_in">break</span>-word （是否保留单词换行）</span><br><span class="line">    word-<span class="built_in">break</span>: <span class="built_in">break</span>-all 设定保留的单位是 字  句子 单词 （针对多字节文字是否换行）</span><br><span class="line">    white-<span class="built_in">space</span>:nowrap  禁止换行 （空白处是否断行）</span><br><span class="line">o.元素垂直对齐 vertical-align: baseline(默认值) top middle bottom</span><br><span class="line">注： vertical-align只能应用于内联元以及 <span class="built_in">display</span> 值为 table-cell 的元素。</span><br><span class="line">注:  <span class="built_in">font</span>: italic bold  16px/400px  微软雅黑;</span><br><span class="line">     <span class="built_in">font</span>: <span class="built_in">font</span>-<span class="built_in">style</span>|<span class="built_in">font</span>-weight|<span class="built_in">font</span>-size/line-<span class="built_in">height</span>|<span class="built_in">font</span>-family</span><br><span class="line">     复合写法 样式  粗细  大小/行高   风格</span><br><span class="line">行高的测量方式:  先确定文字字体大小,多行文字之间的距离/<span class="number">2</span>(即上下边距) 当行高为奇数时文字上方要比下方</span><br><span class="line">少一个像素,得出文字的行高.</span><br><span class="line">哪些属性可以继承？</span><br><span class="line"><span class="built_in">color</span>、text-开头的、line-开头的、<span class="built_in">font</span>-开头的。所有关于盒子的、定位的、布局的属性都不能继承。</span><br><span class="line">CSS中可以继承的属性如下：</span><br><span class="line"><span class="number">1</span>）文本相关属性：<span class="built_in">font</span>-family、<span class="built_in">font</span>-size、<span class="built_in">font</span>-<span class="built_in">style</span>、<span class="built_in">font</span>-variant, <span class="built_in">font</span>-weight、<span class="built_in">font</span>、</span><br><span class="line">letter-spacing、line-<span class="built_in">height</span>、text-align、text-indent、text-<span class="built_in">transform</span>、word-spacing、<span class="built_in">color</span>；</span><br><span class="line"><span class="number">2</span>）列表相关属性：list-<span class="built_in">style</span>-<span class="built_in">image</span>、list-<span class="built_in">style</span>-<span class="built_in">position</span>、list-<span class="built_in">style</span>-type、list-<span class="built_in">style</span>；</span><br><span class="line"><span class="number">3</span>）表格相关属性：<span class="built_in">border</span>-<span class="built_in">collapse</span>、<span class="built_in">border</span>-spacing、caption-side、table-layoute；</span><br><span class="line"><span class="number">4</span>）其他属性：Cursor、visibility。</span><br></pre></td></tr></table></figure><h2 id="css盒子模型"><a href="#css盒子模型" class="headerlink" title="css盒子模型"></a>css盒子模型</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">margin</span>  隔开元素与外面(外边距)</span><br><span class="line"><span class="attribute">padding</span> 隔开元素与边框(内边距)</span><br><span class="line">注:<span class="attribute">width</span> 和 height只能设置盒子中内容的宽度和高度,盒子实际的宽度和高度应该加上</span><br><span class="line"><span class="attribute">border</span> 和 padding</span><br><span class="line"><span class="attribute">border</span>  边框属性</span><br><span class="line"><span class="attribute">border</span>  边框复合样式  边框线粗细  边框线风格  边框线颜色</span><br><span class="line"><span class="attribute">border</span>:<span class="number">5px</span>  solid   blue;</span><br><span class="line">边框样式风格  solid 实线 dashed  虚线 dotted  点状线  double 双线  grove    <span class="number">3</span>D(相框效果)</span><br><span class="line">单独定义某个边宽度或样式或颜色</span><br><span class="line"><span class="attribute">border-top</span>:上边框 border-bottom:下边框 border-left:左边框 border-right:右边框</span><br><span class="line"><span class="attribute">border-top-color</span>:transparent;  上边框透明</span><br><span class="line"><span class="attribute">border-top-width</span>:<span class="number">10px</span>;         上边框宽度</span><br><span class="line"><span class="attribute">border-top-style</span>:dashed;       上边框为虚线</span><br><span class="line">注:<span class="attribute">border-color</span>:不是一个值时不能写在复合样式里且必须放在border-style之前先获得</span><br><span class="line">边框在设置颜色后面可以有四个颜色值 没有设置<span class="attribute">border-color</span>的时候会默认使用文字color的颜色作为边框颜色</span><br><span class="line"><span class="attribute">margin</span>  外边距   外边距的负值  可以增加元素的宽度</span><br><span class="line"><span class="attribute">margin</span>:<span class="number">0</span> auto;         <span class="comment">/*设置元素水平居中*/</span></span><br><span class="line"><span class="attribute">margin</span>:<span class="number">3px</span>;            <span class="comment">/*上下左右都是3px*/</span></span><br><span class="line"><span class="attribute">margin</span>:<span class="number">3px</span> <span class="number">5px</span>;        <span class="comment">/*上下3px 左右5px*/</span></span><br><span class="line"><span class="attribute">margin</span>:<span class="number">3px</span> <span class="number">5px</span> <span class="number">10px</span>    <span class="comment">/*上3px 左右5px 下10px*/</span></span><br><span class="line"><span class="attribute">margin</span>:<span class="number">3px</span> <span class="number">5px</span> <span class="number">2px</span> <span class="number">8px</span> <span class="comment">/*上3px 右5px 下2px 左8px*/</span></span><br><span class="line"><span class="attribute">padding</span> 内边距</span><br><span class="line">外边距的合并:当两个垂直外边距相遇时,外边距会进行合并(取最大者)</span><br><span class="line">外边距的传递(塌陷):当子元素与父元素之间没有任何间距隔开的时候子级元素的<span class="attribute">margin-top</span>会传递给父级</span><br><span class="line">加上边框则不会传递或者给父级添加上内边距<span class="attribute">padding-top</span></span><br><span class="line"><span class="attribute">outline</span>  轮廓   就是是出现在文字/图片链接,input,button元素周围的虚线边框</span><br><span class="line">注:<span class="number">1</span><span class="selector-class">.a</span>,<span class="selector-tag">input</span>,button&#123;<span class="attribute">outline</span>:none;&#125;  img&#123;<span class="attribute">border</span>:none&#125;</span><br><span class="line"><span class="number">2</span>.$&#123;<span class="selector-tag">a</span>,<span class="selector-tag">input</span>,buuton&#125;.focus(function()&#123;this.blur()&#125;)</span><br></pre></td></tr></table></figure><h2 id="display属性"><a href="#display属性" class="headerlink" title="display属性"></a>display属性</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span>. 块级元素(<span class="attribute">display</span>:block)</span><br><span class="line">  <span class="number">1</span>.占据一行,后面元素换行显示    可以放任何内容</span><br><span class="line">  <span class="number">2</span>.可控制宽高 上下边距(支持所有css命令)  常见的有 <span class="selector-tag">div</span> h1-<span class="selector-tag">h6</span> <span class="selector-tag">p</span> hr <span class="selector-tag">ul</span> <span class="selector-tag">ol</span> dl</span><br><span class="line">  <span class="number">3</span>.没有宽度时,默认撑满一排</span><br><span class="line">  注: 有些块元素不可以包含另一些块元素 例如块级元素不能放在p里面 它会先结束自己将其他标签解析到外面去</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">b</span>. 行内元素(dispaly:inline)</span><br><span class="line">  <span class="number">1</span>.不会独占一行,元素并排显示    不能放块级元素(a除外)</span><br><span class="line">  <span class="number">2</span>.不支持<span class="attribute">width</span> height line-height无效  margin padding上下无效</span><br><span class="line">  <span class="number">3</span>.宽度，背景颜色由内容撑开    常见 <span class="selector-tag">b</span> <span class="selector-tag">span</span> <span class="attribute">font</span> img input a label strong em</span><br><span class="line">  <span class="number">4</span>.代码换行被解析  默认垂直位置为<span class="attribute">vertical-align</span>:baseline</span><br><span class="line">  <span class="number">5</span>.行内元素与文字的垂直居中    <span class="attribute">vertical-align</span>:middle</span><br><span class="line">  <span class="number">6</span>.高度会继承父级的字体大小会高出一部分  使用<span class="attribute">font-size</span>:<span class="number">0</span> 清除</span><br><span class="line"><span class="attribute">display</span>用来设置元素的显示方式</span><br><span class="line"><span class="attribute">display</span>:block;  块级元素显示</span><br><span class="line"><span class="attribute">display</span>:inline; 行内元素显示</span><br><span class="line"><span class="attribute">display</span>:inline-block;行间块级元素 以块级元素样式展示以行级元素样式排列</span><br><span class="line">  <span class="number">1</span>.块在一行显示</span><br><span class="line">  <span class="number">2</span>.行内属性标签支持宽高</span><br><span class="line">  <span class="number">3</span>.没有宽度时,内容撑开宽度</span><br><span class="line">  <span class="number">4</span>.标签之间换行间隙被解析(问题)</span><br><span class="line">  <span class="number">5</span><span class="selector-class">.ie6</span>,ie7不支持块标签的inline-block(问题)</span><br><span class="line">间隙问题：父级字体设为<span class="number">0</span>，自己重新设字体  无缝衔接，不换行</span><br><span class="line"><span class="attribute">display</span>:none;将隐藏指定元素及其子元素的显示 位置不保留</span><br><span class="line">c. 行内块元素</span><br></pre></td></tr></table></figure><h2 id="position定位"><a href="#position定位" class="headerlink" title="position定位"></a>position定位</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. fixed  固定定位  位置固定在窗口的某个位置,不管滚动条如何拖动位置不改变,脱离文档流漂浮起来原来所占空间删除相对于浏览器窗口定位</span><br><span class="line">ex  <span class="attribute">position</span>:fixed;<span class="attribute">left</span>:<span class="number">200px</span>;<span class="attribute">top</span>:<span class="number">200px</span>;</span><br><span class="line"><span class="number">2</span>. relative  相对定位 元素相对于他的起点进行移动 仍处于文档流中,其所占位置空间依然存在  提升层级</span><br><span class="line">ex <span class="attribute">position</span>:relative;<span class="attribute">left</span>:<span class="number">200px</span>;<span class="attribute">top</span>:<span class="number">200px</span>;</span><br><span class="line"><span class="number">3</span>. absolute 绝对定位  精准定位元素在页面的位置,脱离文档流漂浮起来原来所占空间删除</span><br><span class="line">ex <span class="attribute">position</span>:absolute;<span class="attribute">left</span>:-<span class="number">20px</span>;<span class="attribute">top</span>:<span class="number">150px</span>;</span><br><span class="line">注: <span class="attribute">clip</span>:rect(上右下左)    裁剪absolute绝对定位元素框</span><br><span class="line">绝对定位元素它的参照物是离最近已定位的非static定位的祖先元素如果没有则相对于body定位</span><br><span class="line">绝对定位的元素的<span class="attribute">left</span>,top等是不包括父级的border宽度</span><br><span class="line"><span class="number">4</span>. <span class="attribute">z-index</span>  层级定位  改变层叠的先后顺序  z-index:n   值越大,越在上面(仅能在定位元素上有效)</span><br><span class="line"><span class="number">5</span>. static 静态定位(解除定位)  用JS JQ改变样式属性值或hover鼠标 把定位修改为不定位,改变为static之后 <span class="attribute">left</span> top z-index都不生效了</span><br><span class="line"><span class="number">6</span>. 盒子有两种方式存在于浏览器中</span><br><span class="line"><span class="selector-tag">a</span>.绘制在画板上(static,relative)</span><br><span class="line"><span class="selector-tag">b</span>.漂浮在画板上(absolute,fixed)</span><br><span class="line">注:在定位的时候 如果没有设置方向 默认就是<span class="attribute">top</span>:<span class="number">0px</span>;<span class="attribute">left</span>:<span class="number">0px</span>(左上优先于右下)</span><br><span class="line">    absolute绝对定位元素和fixed固定定位元素  块元素宽度不会继承父级宽度而是由内容撑开</span><br><span class="line">    绝对定位元素具有自动伸缩的特性 除非自己指定宽度</span><br><span class="line">根据第一个高级特性，我们可以衍生出第二个高级特性，由于绝对行为元素具有自动伸缩的功能，如果<span class="attribute">width</span>值为auto</span><br><span class="line">此时如果我们设置 <span class="attribute">left</span> 和 right 都为<span class="number">0</span>，则该元素会填充满其相对的元素，如果此时我们将宽度设置为固定值，这是</span><br><span class="line">绝对定位元素会优先取 <span class="attribute">left</span> 值作为定位标志（这个标准适用于从左向右读的文档流中，而在少数从右往左读的文档中，</span><br><span class="line">则优先取 <span class="attribute">right</span>）。如果这时我们将 margin 设置为auto,则绝对定位元素会呈现居中状态；其实垂直方向的作用效果是</span><br><span class="line">一样，垂直方向同样可以自动拉伸水平居中有一点不同的是，无论 <span class="attribute">top</span> 和 bottom 的值设置为多少，只要相等，就可以</span><br><span class="line">垂直居中。</span><br></pre></td></tr></table></figure><h2 id="float浮动"><a href="#float浮动" class="headerlink" title="float浮动"></a>float浮动</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 浮动的框可以向左向右浮动直到它的外边缘碰到包含框或另一个浮动匡为止,设定浮动之后</span></span><br><span class="line"><span class="comment">它就不会占据原来的空间,改变正常的文档流排列,影响到周围的元素,控制元素在同层里左浮或右浮</span></span><br><span class="line"><span class="comment">特征:  1.改变元素为块级   2.脱离文档流   3.提升层级半级 */</span></span><br><span class="line">&#123;<span class="attribute">float</span>:left/right     向左或向右浮动&#125;</span><br><span class="line"><span class="comment">/* 如果包含框太窄,无法容纳水平排列的浮动元素,那么其他浮动元素会下移直到有足够空间(宽度不够)  */</span></span><br><span class="line"><span class="comment">/* 如果浮动元素的高度不同,那么当他们向下浮动时可能被其他浮动元素卡住(高度过高) */</span></span><br><span class="line">清除浮动    不希望原来的空间被其他元素占据相当于换行</span><br><span class="line">1. 在其后面设置一个清除浮动的<span class="selector-tag">div</span> 设置<span class="selector-tag">css</span>样式 <span class="selector-tag">clear</span><span class="selector-pseudo">:both</span></span><br><span class="line">2. 给父级定义高度(只适合高度固定的布局中)拓展不好</span><br><span class="line">3. <span class="selector-tag">after</span> 伪类 清浮动方法 在需要清除浮动的父容器添加类名为<span class="selector-tag">clearfix</span></span><br><span class="line"><span class="selector-class">.clear</span><span class="selector-pseudo">:after</span>&#123;<span class="attribute">content</span>:<span class="string">""</span>;<span class="attribute">display</span>:block;<span class="attribute">clear</span>:both;&#125;</span><br><span class="line"><span class="selector-class">.clear</span>&#123;<span class="attribute">zoom</span>:<span class="number">1</span>;&#125;</span><br><span class="line">浮动的性质：脱标、贴边、字围、收缩。</span><br><span class="line">注: 盒子一旦用了flaot:left/right  position:absolute/fixed 会隐式改变display为行内块元素</span><br><span class="line">position:absolute/fixed 绝对定位/固定定位元素子级的浮动可以不用写清除浮动方法</span><br></pre></td></tr></table></figure><h2 id="其他CSS属性"><a href="#其他CSS属性" class="headerlink" title="其他CSS属性"></a>其他CSS属性</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*  溢出隐藏  */</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attribute">overflow</span>:visible  内容都会显示</span><br><span class="line">hidden   超出(溢出)隐藏</span><br><span class="line">auto     只有超出才显示滚动条</span><br><span class="line">scroll   无论溢出与否都显示滚动条</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*  可见属性  */</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attribute">visiblity</span>:hidden/visible;</span><br><span class="line"><span class="attribute">display</span>:  none/block</span><br><span class="line">注:使用display设置的不可见区域所占位置也一起隐藏,而使用visiblty属性设置的不可见</span><br><span class="line">区域所占位置保留只是元素不可见</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* opacity透明 */</span></span><br><span class="line">对于IE6/7/8  使用filter:alpha(opacity=0-100)</span><br><span class="line">对于<span class="selector-tag">webkit</span>,<span class="selector-tag">opera</span>,<span class="selector-tag">firefox</span>,<span class="selector-tag">IE9</span>+,使用<span class="selector-tag">opacity</span>:值0<span class="selector-tag">-1</span></span><br><span class="line">对于早期火狐 使用<span class="selector-tag">-moz-opacity</span>:值0<span class="selector-tag">-1</span></span><br><span class="line">兼容写法</span><br><span class="line">&#123; <span class="attribute">opacity</span>:.<span class="number">5</span>;<span class="attribute">filter</span>:<span class="built_in">alpha</span>(opacity=50);<span class="attribute">-moz-opacity</span>:.<span class="number">5</span>; &#125;</span><br><span class="line"><span class="comment">/* 文本溢出 */</span></span><br><span class="line">&#123; <span class="attribute">text-overflow</span>: clip:文本被修剪    /    ellipse:显示省略号代表被修剪的文本  &#125;</span><br><span class="line"><span class="comment">/* 鼠标样式 */</span></span><br><span class="line">&#123; <span class="attribute">cursor</span>:pointer/move/help;<span class="attribute">cursor</span>:<span class="built_in">url</span>(arrow.cur),pointer; &#125;</span><br></pre></td></tr></table></figure><h2 id="CSS列表属性"><a href="#CSS列表属性" class="headerlink" title="CSS列表属性"></a>CSS列表属性</h2><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">简写<span class="built_in">list-style:none;</span>  去除列表前的小圆点</span><br><span class="line">a.<span class="built_in">list-style-image:url();</span>      //列表项前面的图像</span><br><span class="line">b.<span class="built_in">list-style-position:outside/inside;</span> //列表项目标记放置在文本以外(默认)</span><br><span class="line">c.<span class="built_in">list-style-type:none/square/circle/disc</span>  //列表修饰符类型</span><br></pre></td></tr></table></figure><h2 id="CSS-hack"><a href="#CSS-hack" class="headerlink" title="CSS hack"></a>CSS hack</h2><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">针对不同浏览器写不同css样式的过程,就叫做css hack</span><br><span class="line">\<span class="number">9</span>  所有IE10及IE10之前  <span class="built_in">background</span>-<span class="built_in">color</span>:<span class="built_in">blue</span>\<span class="number">9</span>;</span><br><span class="line">*   IE7及IE7以下        *<span class="built_in">background</span>-<span class="built_in">color</span>:<span class="built_in">green</span>;</span><br><span class="line">_   IE6及IE6以下        _background-<span class="built_in">color</span>:pink;</span><br><span class="line">+   IE6及IE7            +<span class="built_in">background</span>-<span class="built_in">color</span>:pink;</span><br><span class="line">书写顺序   <span class="built_in">background</span>-<span class="built_in">color</span>:<span class="built_in">red</span>;</span><br><span class="line"><span class="built_in">background</span>-<span class="built_in">color</span>:<span class="built_in">blue</span>\<span class="number">9</span>;</span><br><span class="line">*<span class="built_in">background</span>-<span class="built_in">color</span>:<span class="built_in">green</span>;</span><br><span class="line">_background-<span class="built_in">color</span>:pink;</span><br></pre></td></tr></table></figure><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul><li>响应式设计和布局的方法   1.隐藏不重要的部分   2.折行   3.自适应空间</li><li>将css放在页头在载人HTML元素之前,先载入他们的样式,可以避免HTML出现无样式状态</li><li>将javascript放在页尾,先将网页呈现给用户,再来加载页面的脚本,避免javascript阻塞网页的呈现<br>减少页面空白的时间.</li><li>同时执行两个点击事件的方法  采用事件监听机制</li><li>自定义标签默认是行内元素   zoom  触发haslayout</li><li>ico  标题栏图标  png图片 找ico转换工具即可<br><code>&lt;link rel=&quot;shortcut icon&quot; href=&quot;./img/100du.ico&quot; /&gt;</code></li><li>圆角的测量方法  选择–&gt;修改–&gt;平滑–&gt;调节即可</li></ul><h2 id="前端常见问题"><a href="#前端常见问题" class="headerlink" title="前端常见问题"></a>前端常见问题</h2><p>1.图片做超链接时IE下蓝色边框问题   img{border:none;})<br>2.超链接在IE下被点击时出现的轮廓问题   a,input,textarea{outline:none;}<br>3.表单元素水平对齐  用定位或浮动<br>4.去除按钮默认样式 border:none<br>5.阿里图标库 <a href="http://www.iconfont.cn" target="_blank" rel="noopener">http://www.iconfont.cn</a> 找到所有要用的图标库然后把生成的文件把之前的全部覆盖<br>6.背景透明  文字不透明   采用绝对定位  把文字图层和背景透明图层叠在一起<br>7.禁用文本框的缩放  textarea{resize:none}<br>8.两端对齐 最外层套一个盒子 宽度较宽  最外层父级采用溢出隐藏<br>9.抽屉式效果最后一个元素掉下去解决办法是 给他定位<br>10.最小宽度解决pc段项目屏幕缩小浮动元素掉下去的问题</p><h2 id="垂直居中"><a href="#垂直居中" class="headerlink" title="垂直居中"></a>垂直居中</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.父元素高度不确定的文本,图片,块级元素的垂直居中</span><br><span class="line">   方法  通过给父容器设置相同上下边距实现的</span><br><span class="line">2.父元素高度确定的单行文本的垂直居中</span><br><span class="line">   方法  给父元素设置line-height和height高度值相同来实现</span><br><span class="line">3.父元素高度确定的多行文本,图片,块级元素的垂直居中</span><br><span class="line">   方法  使用vertical-align:middle  display:tab-cell</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>html学习笔记</title>
      <link href="/html%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/html%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>超文本标记语言<code>(Hyper Text Markup Language)</code>，标准通用标记语言下的一个应用。HTML 不是一种编程语言，而是一种标记语言 <code>(markup language)</code>，是网页制作所必备的。“超文本”就是指页面内可以包含图片、链接，甚至音乐、程序等非文字元素。<br><a id="more"></a></p><h2 id="Html-超文本标记语言"><a href="#Html-超文本标记语言" class="headerlink" title="Html  超文本标记语言"></a>Html  超文本标记语言</h2><ul><li><code>静态页面:</code> 网页上的内容无法自动更新,需要通过手动在网页的代码里添加修改.</li><li><code>动态页面:</code> 网页上的内容可以自动更新,不用手动在网页的代码里添加或修改.<br>web标准是网站所有标准的集合包括 <code>结构(html)</code> <code>样式(css)</code>和<code>行为(js)</code>三部分</li><li>常见web浏览器  <code>1.Internet Explorer    2.Firefox  3.Opera  4.Safari  5.Google Chrome</code></li><li><p>常见颜色</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Black   #<span class="number">000000</span>  黑色    White   #FFFFFF   白色   Red     #FF0000  红色  Brown   #A52A2A   棕色</span><br><span class="line">Green   #<span class="number">008000</span>   绿色   Blue    #<span class="number">0000</span>FF   蓝色   Gray    #<span class="number">808080</span>  灰色  Orange  #FFA500  橙色</span><br><span class="line">Purple  #<span class="number">800080</span>  紫色    Yellow  #FFFF00   黄色   Silver  #C0C0C0  银色  Gold    #FFD700  金色</span><br><span class="line">Pink    #FFC0CB   粉色   Cyan    #<span class="number">00</span>FFFF   青色</span><br></pre></td></tr></table></figure></li><li><p>常见的ASCII码 <code>a-97     z-122    A-65   Z-90  0-48</code></p></li></ul><h2 id="页面结构"><a href="#页面结构" class="headerlink" title="页面结构"></a>页面结构</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype html&gt;</span>   网页文档的第一句</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span>       网页文档的跟标签</span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>      网页文档的头部信息</span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>       网页文档的标题</span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>      网页文档的主体内容</span><br></pre></td></tr></table></figure><blockquote><p>标签分类</p></blockquote><ol><li>非可视化标签    标签不能在网页的内容区域可见</li><li>可视化标签      标签可以在网页的内容区域可见<br><code>注:只有可视化标签,才能用css改变它</code></li><li>双标签          成对出现的标签</li><li>单标签            不能包含文本内容和子标签 写法 <code>&lt;img /&gt;</code><br><code>ex:img meta link base input br hr</code></li></ol><blockquote><p>注意事项:</p></blockquote><ul><li>单标记一定要封死</li><li>标记一定要按顺序嵌套</li><li>属性的值要写在引号之间</li><li>核心属性  <code>id  class  style  name</code></li><li><code>&lt;!--html注释--&gt;</code>   注释内容不能写在标记内</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 元信息标签  meta标签  页面描述信息 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"Generator"</span>  <span class="attr">content</span>=<span class="string">"Editplus"</span> /&gt;</span>       编辑工具</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"Keywords"</span>  <span class="attr">content</span>=<span class="string">"关键字1,关键词2"</span> /&gt;</span> 关键词(间隔用英文逗号)</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"Description"</span>  <span class="attr">content</span>=<span class="string">"主要内容"</span> /&gt;</span>     描述</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"Author"</span>  <span class="attr">content</span>=<span class="string">"小伟"</span> /&gt;</span>              作者</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html;charset=utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span>      网页所使用的语言</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Refresh"</span>  <span class="attr">content</span>=<span class="string">"n;url=http://www.souhu.com"</span> /&gt;</span>  指定时间内跳转到指定的页面</span><br></pre></td></tr></table></figure><h2 id="网页实体"><a href="#网页实体" class="headerlink" title="网页实体"></a>网页实体</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">不间断空格  &amp;nbsp;   &lt; 小于号  &amp;lt;    &gt; 大于号  &amp;gt;   圆角空格   &amp;emsp;   &amp; 和号  &amp;amp;</span><br><span class="line"><span class="string">""</span> 双引号  &amp;quot;   <span class="string">''</span> 单引号  &amp;apos;  ®  商标  &amp;reg;  ©  版权    &amp;<span class="keyword">copy</span><span class="bash">;   人民币   &amp;yen;</span></span><br></pre></td></tr></table></figure><h2 id="文本标记"><a href="#文本标记" class="headerlink" title="文本标记"></a>文本标记</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">文字标题</span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>  每个页面只可以有一个(seo) h1--&gt;h6 逐渐减小</span><br><span class="line">段落标签</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>另起一行空一行<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span>   换行</span><br><span class="line"><span class="tag">&lt;<span class="name">nobr</span>/&gt;</span> 强制不换行</span><br><span class="line">水平分隔线</span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span> <span class="attr">size</span>=<span class="string">"粗细"</span> <span class="attr">width</span>=<span class="string">"长度"</span> <span class="attr">align</span>=<span class="string">"位置"</span> <span class="attr">color</span>=<span class="string">"颜色"</span> /&gt;</span></span><br><span class="line">文字样式</span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span>=<span class="string">"字体大小"</span> <span class="attr">face</span>=<span class="string">"字体风格"</span> <span class="attr">color</span>=<span class="string">"文字颜色"</span>&gt;</span>文本标记<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line">保留格式标签</span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span>用来保留文本的空格和换行<span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line">文字标识标签</span><br><span class="line"><span class="tag">&lt;<span class="name">b</span>&gt;</span>加粗文字<span class="tag">&lt;/<span class="name">b</span>&gt;</span>    <span class="tag">&lt;<span class="name">strong</span>&gt;</span>强调<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span>&gt;</span>斜体<span class="tag">&lt;/<span class="name">i</span>&gt;</span>        <span class="tag">&lt;<span class="name">em</span>&gt;</span>斜体<span class="tag">&lt;/<span class="name">em</span>&gt;</span>起强调作用</span><br><span class="line"><span class="tag">&lt;<span class="name">u</span>&gt;</span>下划线<span class="tag">&lt;/<span class="name">u</span>&gt;</span>      <span class="tag">&lt;<span class="name">s</span>&gt;</span>带删除线<span class="tag">&lt;/<span class="name">s</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sup</span>&gt;</span>上标<span class="tag">&lt;/<span class="name">sup</span>&gt;</span>    <span class="tag">&lt;<span class="name">sub</span>&gt;</span>下标<span class="tag">&lt;/<span class="name">sub</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="超链接"><a href="#超链接" class="headerlink" title="超链接"></a>超链接</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"目标文档的URL"</span>&gt;</span>超链接名称<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"目标文档的URL"</span> <span class="attr">target</span>=<span class="string">"窗口打开方式"</span> <span class="attr">name</span>=<span class="string">"页面锚点名称"</span> &gt;</span>内容<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- target形式:_blank(在新窗口打开)  _self(在当前窗口打开(默认))  _parent(在父窗口打开)</span></span><br><span class="line"><span class="comment">_top(在最顶层窗口打开) framename框架名称 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>空链接(当前页面)<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>会显示当前文件夹下的文件目录结构<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">name</span>=<span class="string">"锚点名称"</span>&gt;</span>锚点<span class="tag">&lt;/<span class="name">a</span>&gt;</span>    定义锚点</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#锚点名称"</span>&gt;</span>连接到锚点<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"目标文档的url#锚点名称"</span>&gt;</span>其它文档的锚点<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- URL  统一资源定位符 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"mailto:873077939@qq.com"</span>&gt;</span>发送邮件<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="图片的使用"><a href="#图片的使用" class="headerlink" title="图片的使用"></a>图片的使用</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- gif:压缩位图格式支持透明背景可做动画  jpg:清晰度高加载快  png:透明的,容量小</span></span><br><span class="line"><span class="comment">bmp:清晰度不高 容量较大 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 图片四要素 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"图片路径"</span> <span class="attr">alt</span>=<span class="string">"描述性文本"</span> <span class="attr">width</span>=<span class="string">"宽度"</span> <span class="attr">height</span>=<span class="string">"高度"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- alt   当不可见或加载不成功时显示的描述性文本 提供给搜索引擎用的  title 鼠标滑过时显示的文本 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 图片的位置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"路径"</span> <span class="attr">align</span>=<span class="string">"位置"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- align:bottom  底部  top 顶部   left 左边  right  右边  middle 中间 absmiddle 绝对中间 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 图片与文本间距 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"路径"</span> <span class="attr">hsapce</span>=<span class="string">"水平间距"</span> <span class="attr">vspace</span>=<span class="string">"垂直间距"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 图片超链接 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"url"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"图片路径"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">注:相对路径  相对于自己的目标文档位置</span><br><span class="line">绝对路径  从盘符开始的路径 D:\tew\web\1.jpg</span><br><span class="line">从域名出发       http://bbs.moonseo.cn/image/logo.png</span><br><span class="line">同一级目录  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"1.jpg"</span> /&gt;</span>或<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./1.jpg"</span>&gt;</span></span><br><span class="line">下一级目录  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/1.jpg"</span> /&gt;</span></span><br><span class="line">上一级目录  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../1.jpg"</span> /&gt;</span></span><br><span class="line">不同目录    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"photo/1.jpg"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 图片之间默认会有3px空隙  给img设置  display:block即可或更改vertical-align:middel --&gt;</span></span><br></pre></td></tr></table></figure><h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 无序列表 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">type</span>=<span class="string">"disc|circle|square"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>disc实心圆(默认)<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>circle空心圆<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>square小方块<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 有序列表 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ol</span> <span class="attr">type</span>=<span class="string">"1 a A i I"</span> <span class="attr">start</span>=<span class="string">"从第几个开始"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>数字序列号<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>大小写英文字母<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>大小写罗马字母<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 定义列表 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dt</span>&gt;</span>计算器<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>用来计算的机器<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dt</span>&gt;</span>显示器<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>以视觉方式显示信息的装置<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 注:dl  列表整体结构   dt  定义列表项的名称 dd 对dt的解释说明</span></span><br><span class="line"><span class="comment">   dt不能重复使用 dd可以重复多个   列表的嵌套应该将列表放在li里面 --&gt;</span></span><br></pre></td></tr></table></figure><h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 表格  thead  tbody  th tr td</span></span><br><span class="line"><span class="comment">表格的属性 cellspacing 单元格与单元格之间的距离  border 边框</span></span><br><span class="line"><span class="comment">cellpadding 单元格与内容之间的距离</span></span><br><span class="line"><span class="comment">align   水平对齐方式</span></span><br><span class="line"><span class="comment">valign  垂直对齐方式</span></span><br><span class="line"><span class="comment">rowspan 合并行  删除后面所有合并行的最后一列</span></span><br><span class="line"><span class="comment">colspan 合并列  删除本行中的其他列之和等于总列数</span></span><br><span class="line"><span class="comment">bgcolor 背景颜色  background 背景图片优先于背景颜色</span></span><br><span class="line"><span class="comment">caption 表格标题(只能定义一个)   th  表头</span></span><br><span class="line"><span class="comment">rules="all"  合并边框线(不推荐)</span></span><br><span class="line"><span class="comment">rules="none" 不显示单元格之间的分割线 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">caption</span>&gt;</span>表格标题<span class="tag">&lt;/<span class="name">caption</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"2"</span>&gt;</span>注释<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">rowspan</span>=<span class="string">"2"</span>&gt;</span>解释<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>解释<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>解释<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 行的属性 height bgcolor background align valign 垂直对齐方式 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 注:表格基本样式控制</span></span><br><span class="line"><span class="comment">table&#123; border-collapse:collapse;// 将表格设置为单线条边框 &#125;</span></span><br><span class="line"><span class="comment">table,td,th&#123;border:1px solid black;//设置表格,行,列的边框 &#125; --&gt;</span></span><br></pre></td></tr></table></figure><h2 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 表单由三部分组成:表单标签,表单域和表单按钮 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">method</span>=<span class="string">""</span> <span class="attr">name</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- name 表单名称  action:将表单提交的内容转到响应页面</span></span><br><span class="line"><span class="comment">method 表单提交数据的方式</span></span><br><span class="line"><span class="comment">  1.method="post"   将数据打包发送到所指的页面对于用户不可见相对安全大小不限</span></span><br><span class="line"><span class="comment">  2.method="get"    将提交的数据附加在地址栏上(默认),不安全,大小有限制</span></span><br><span class="line"><span class="comment">from的作用</span></span><br><span class="line"><span class="comment">a：直接提交表单  b:使用submit/reset按钮   c：便于浏览器保存表单  d：可以整体提取值 进行表单验证 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 单行文本框 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"默认值"</span> <span class="attr">size</span>=<span class="string">"长度"</span> <span class="attr">maxlength</span>=<span class="string">"允许输入字符"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 密码框 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 多行文本框 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">textarea</span>  <span class="attr">wrap</span>=<span class="string">"self off hard"</span>(是否允许换行) <span class="attr">cols</span>=<span class="string">""</span> <span class="attr">rows</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 注:多行文本框不可拖动只能在css这设置resize:none; --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 单选框 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"男"</span> <span class="attr">checked</span>=<span class="string">"checked"</span> /&gt;</span>男</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"女"</span>&gt;</span>女</span><br><span class="line"><span class="comment">&lt;!-- 注:单选框的name必须相同,value不能相同 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 复选框 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"ck1"</span> <span class="attr">checked</span>=<span class="string">"checked"</span> /&gt;</span>体育</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"ck2"</span> /&gt;</span>文学</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"ck3"</span> /&gt;</span>地理</span><br><span class="line"><span class="comment">&lt;!-- 注:同一组的复选框name属性必须不同 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 下拉列表框 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span>  <span class="attr">size</span>=<span class="string">"可见选项数目"</span>  <span class="attr">multiple</span>=<span class="string">"multiple(允许多选)"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">optgroup</span> <span class="attr">label</span>=<span class="string">"中国"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">selected</span>=<span class="string">"selected"</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>陕西<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">optgroup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">optgroup</span> <span class="attr">label</span>=<span class="string">"美国"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>纽约<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>华盛顿<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">optgroup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 隐藏域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"hidden"</span> <span class="attr">value</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 文件域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 注:enctype 告诉表单在向服务器发送数据之前数据的编码方式</span></span><br><span class="line"><span class="comment">提交按钮 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 重置按钮 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"重置"</span> /&gt;</span>(恢复页面打开时的初始值)</span><br><span class="line"><span class="comment">&lt;!-- 图像按钮 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"image"</span> <span class="attr">src</span>=<span class="string">"url"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 定义域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filedset</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">legend</span>&gt;</span>定义域标题<span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filedset</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- label 为input标签定义标注  将文字与input表单元素关联(绑定)起来</span></span><br><span class="line"><span class="comment">当用户选择该标签时,会将焦点转到和标签相关的表单控件上,label标签的for属性</span></span><br><span class="line"><span class="comment">应当与相关元素的id属性相同 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">id</span>=<span class="string">"man"</span> /&gt;</span><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"man"</span>&gt;</span>男<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>请点击我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 在form表单中button默认值是submit提交 一般不再form中使用,而在不写form表单时可做提交按钮使用</span></span><br><span class="line"><span class="comment">注:文本框的限制  disabled 禁用(禁用后无法提交)  readonly 只读 --&gt;</span></span><br></pre></td></tr></table></figure><h2 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">frameset</span> <span class="attr">clos</span>=<span class="string">框架宽度(水平分割)</span>  <span class="attr">rows</span>=<span class="string">框架高度(垂直分割)</span>  <span class="attr">border</span>=<span class="string">框架边框粗细</span> <span class="attr">frameborder</span>=<span class="string">"1/0"</span> 是否显示边框&gt;</span><span class="tag">&lt;/<span class="name">frameset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">frame</span> <span class="attr">noresize</span>=<span class="string">"noresize"</span> 框架边框不可拉伸 <span class="attr">scrolling</span>=<span class="string">"yes/no"</span> 框架是否显示滚动条 <span class="attr">frameborder</span>=<span class="string">"1/0"</span> 是否显示边框 /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">frameset</span> <span class="attr">clos</span>=<span class="string">"137,*"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">frame</span> <span class="attr">src</span>=<span class="string">"1.html"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">framset</span> <span class="attr">rows</span>=<span class="string">"82,*"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">frame</span> <span class="attr">src</span>=<span class="string">"2.html"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">frame</span> <span class="attr">src</span>=<span class="string">"3.html"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">frameset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">frameset</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 框架链接 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">""</span> <span class="attr">name</span>=<span class="string">"one"</span> /&gt;</span>   <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span> <span class="attr">target</span>=<span class="string">"one"</span> &gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="多媒体"><a href="#多媒体" class="headerlink" title="多媒体"></a>多媒体</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- A:&lt;marquee&gt;会移动的文字(跑马灯)&lt;/marquee&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">marquee</span> <span class="attr">direction</span>=<span class="string">"right"</span> <span class="attr">behavior</span>=<span class="string">"alternate"</span>&gt;</span>会移动的文字(跑马灯)<span class="tag">&lt;/<span class="name">marquee</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 方向:direction="left(默认),right,up,down"</span></span><br><span class="line"><span class="comment">方式:behavior="scroll(默认)循环滚动,slide只滚一次,alternate来回滚动"</span></span><br><span class="line"><span class="comment">次数:loop="n" 未指定的无限循环</span></span><br><span class="line"><span class="comment">速度:scrollamount="n"  数值越大,滚动越快(单位像素)</span></span><br><span class="line"><span class="comment">延时:scrolldelay="毫秒数" 滚动字幕停顿时间</span></span><br><span class="line"><span class="comment">背景颜色:bgcolor="滚动字幕背景颜色"</span></span><br><span class="line"><span class="comment">范围:height width</span></span><br><span class="line"><span class="comment">鼠标滑过:onmouseout="this.start()"  onmouseover="this.stop()" --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- B.&lt;embed&gt;多媒体元素插入 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">embed</span> <span class="attr">src</span>=<span class="string">""</span>  <span class="attr">autostart</span>=<span class="string">"true/false"</span> <span class="attr">loop</span>=<span class="string">"true/false"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- C.&lt;bgsound&gt;背景音乐(只限IE) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bgsound</span> <span class="attr">src</span>=<span class="string">""</span> <span class="attr">loop</span>=<span class="string">"n/infinate"</span> <span class="attr">start</span>=<span class="string">""</span> /&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> html </category>
          
      </categories>
      
      
        <tags>
            
            <tag> html </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
